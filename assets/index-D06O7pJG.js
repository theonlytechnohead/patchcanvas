var $r=Object.defineProperty;var es=(t,e,n)=>e in t?$r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var gi=(t,e,n)=>(es(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function ne(){}function Ie(t,e){for(const n in e)t[n]=e[n];return t}function Pl(t){return t()}function to(){return Object.create(null)}function Ne(t){t.forEach(Pl)}function Se(t){return typeof t=="function"}function le(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Ml(t,e){return t!=t?e==e:t!==e}function ts(t){return Object.keys(t).length===0}function $n(t,...e){if(t==null){for(const i of e)i(void 0);return ne}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function p(t){let e;return $n(t,n=>e=n)(),e}function J(t,e,n){t.$$.on_destroy.push($n(e,n))}function Ve(t,e,n,i){if(t){const o=Hl(t,e,n,i);return t[0](o)}}function Hl(t,e,n,i){return t[1]&&i?Ie(n.ctx.slice(),t[1](i(e))):n.ctx}function Re(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const l=[],r=Math.max(e.dirty.length,o.length);for(let s=0;s<r;s+=1)l[s]=e.dirty[s]|o[s];return l}return e.dirty|o}return e.dirty}function Le(t,e,n,i,o,l){if(o){const r=Hl(e,n,i,l);t.p(r,o)}}function We(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function Wi(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function Rt(t,e){const n={};e=new Set(e);for(const i in t)!e.has(i)&&i[0]!=="$"&&(n[i]=t[i]);return n}function ns(t){const e={};for(const n in t)e[n]=!0;return e}function no(t){return t??""}function Mi(t,e,n){return t.set(n),e}function Ye(t){return t&&Se(t.destroy)?t.destroy:ne}const is=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function _e(t,e){t.appendChild(e)}function B(t,e,n){t.insertBefore(e,n||null)}function W(t){t.parentNode&&t.parentNode.removeChild(t)}function Rn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function be(t){return document.createElement(t)}function ge(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function xe(t){return document.createTextNode(t)}function de(){return xe(" ")}function He(){return xe("")}function ye(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function S(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const os=["width","height"];function Lt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&os.indexOf(i)===-1?t[i]=e[i]:S(t,i,e[i])}function ls(t){return Array.from(t.childNodes)}function qt(t,e){e=""+e,t.data!==e&&(t.data=e)}function ue(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}let En;function rs(){if(En===void 0){En=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{En=!0}}return En}function ss(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const i=be("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const o=rs();let l;return o?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=ye(window,"message",r=>{r.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{l=ye(i.contentWindow,"resize",e),e()}),_e(t,i),()=>{(o||l&&i.contentWindow)&&l(),W(i)}}function fe(t,e,n){t.classList.toggle(e,!!n)}function us(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}function Ln(t,e){return new t(e)}let ln;function on(t){ln=t}function Ut(){if(!ln)throw new Error("Function called outside component initialization");return ln}function ei(t){Ut().$$.on_mount.push(t)}function Bi(t){Ut().$$.on_destroy.push(t)}function ti(){const t=Ut();return(e,n,{cancelable:i=!1}={})=>{const o=t.$$.callbacks[e];if(o){const l=us(e,n,{cancelable:i});return o.slice().forEach(r=>{r.call(t,l)}),!l.defaultPrevented}return!0}}function rn(t,e){return Ut().$$.context.set(t,e),e}function Wn(t){return Ut().$$.context.get(t)}function as(t){return Ut().$$.context.has(t)}function we(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const Tt=[],St=[];let Dt=[];const io=[],cs=Promise.resolve();let Hi=!1;function fs(){Hi||(Hi=!0,cs.then(Nl))}function Bn(t){Dt.push(t)}const mi=new Set;let At=0;function Nl(){if(At!==0)return;const t=ln;do{try{for(;At<Tt.length;){const e=Tt[At];At++,on(e),ds(e.$$)}}catch(e){throw Tt.length=0,At=0,e}for(on(null),Tt.length=0,At=0;St.length;)St.pop()();for(let e=0;e<Dt.length;e+=1){const n=Dt[e];mi.has(n)||(mi.add(n),n())}Dt.length=0}while(Tt.length);for(;io.length;)io.pop()();Hi=!1,mi.clear(),on(t)}function ds(t){if(t.fragment!==null){t.update(),Ne(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Bn)}}function hs(t){const e=[],n=[];Dt.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Dt=e}const In=new Set;let wt;function ze(){wt={r:0,c:[],p:wt}}function Pe(){wt.r||Ne(wt.c),wt=wt.p}function Y(t,e){t&&t.i&&(In.delete(t),t.i(e))}function L(t,e,n,i){if(t&&t.o){if(In.has(t))return;In.add(t),wt.c.push(()=>{In.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function Te(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ni(t,e){L(t,1,1,()=>{e.delete(t.key)})}function ii(t,e,n,i,o,l,r,s,u,a,c,f){let d=t.length,h=l.length,_=d;const m={};for(;_--;)m[t[_].key]=_;const b=[],g=new Map,k=new Map,E=[];for(_=h;_--;){const I=f(o,l,_),D=n(I);let A=r.get(D);A?i&&E.push(()=>A.p(I,e)):(A=a(D,I),A.c()),g.set(D,b[_]=A),D in m&&k.set(D,Math.abs(_-m[D]))}const v=new Set,C=new Set;function H(I){Y(I,1),I.m(s,c),r.set(I.key,I),c=I.first,h--}for(;d&&h;){const I=b[h-1],D=t[d-1],A=I.key,y=D.key;I===D?(c=I.first,d--,h--):g.has(y)?!r.has(A)||v.has(A)?H(I):C.has(y)?d--:k.get(A)>k.get(y)?(C.add(A),H(I)):(v.add(y),d--):(u(D,r),d--)}for(;d--;){const I=t[d];g.has(I.key)||u(I,r)}for(;h;)H(b[h-1]);return Ne(E),b}function ht(t,e){const n={},i={},o={$$scope:1};let l=t.length;for(;l--;){const r=t[l],s=e[l];if(s){for(const u in r)u in s||(i[u]=1);for(const u in s)o[u]||(n[u]=s[u],o[u]=1);t[l]=s}else for(const u in r)o[u]=1}for(const r in i)r in n||(n[r]=void 0);return n}function Wt(t){return typeof t=="object"&&t!==null?t:{}}function $(t){t&&t.c()}function j(t,e,n){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),Bn(()=>{const l=t.$$.on_mount.map(Pl).filter(Se);t.$$.on_destroy?t.$$.on_destroy.push(...l):Ne(l),t.$$.on_mount=[]}),o.forEach(Bn)}function x(t,e){const n=t.$$;n.fragment!==null&&(hs(n.after_update),Ne(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function gs(t,e){t.$$.dirty[0]===-1&&(Tt.push(t),fs(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ie(t,e,n,i,o,l,r=null,s=[-1]){const u=ln;on(t);const a=t.$$={fragment:null,ctx:[],props:l,update:ne,not_equal:o,bound:to(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:to(),dirty:s,skip_bound:!1,root:e.target||u.$$.root};r&&r(a.root);let c=!1;if(a.ctx=n?n(t,e.props||{},(f,d,...h)=>{const _=h.length?h[0]:d;return a.ctx&&o(a.ctx[f],a.ctx[f]=_)&&(!a.skip_bound&&a.bound[f]&&a.bound[f](_),c&&gs(t,f)),d}):[],a.update(),c=!0,Ne(a.before_update),a.fragment=i?i(a.ctx):!1,e.target){if(e.hydrate){const f=ls(e.target);a.fragment&&a.fragment.l(f),f.forEach(W)}else a.fragment&&a.fragment.c();e.intro&&Y(t.$$.fragment),j(t,e.target,e.anchor),Nl()}on(u)}class oe{constructor(){gi(this,"$$");gi(this,"$$set")}$destroy(){x(this,1),this.$destroy=ne}$on(e,n){if(!Se(n))return ne;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!ts(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ms="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ms);const Ot=[];function Je(t,e){return{subscribe:te(t,e).subscribe}}function te(t,e=ne){let n;const i=new Set;function o(s){if(le(t,s)&&(t=s,n)){const u=!Ot.length;for(const a of i)a[1](),Ot.push(a,t);if(u){for(let a=0;a<Ot.length;a+=2)Ot[a][0](Ot[a+1]);Ot.length=0}}}function l(s){o(s(t))}function r(s,u=ne){const a=[s,u];return i.add(a),i.size===1&&(n=e(o,l)||ne),s(t),()=>{i.delete(a),i.size===0&&n&&(n(),n=null)}}return{set:o,update:l,subscribe:r}}function Bt(t,e,n){const i=!Array.isArray(t),o=i?[t]:t;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=e.length<2;return Je(n,(r,s)=>{let u=!1;const a=[];let c=0,f=ne;const d=()=>{if(c)return;f();const _=e(i?a[0]:a,r,s);l?r(_):f=Se(_)?_:ne},h=o.map((_,m)=>$n(_,b=>{a[m]=b,c&=~(1<<m),u&&d()},()=>{c|=1<<m}));return u=!0,d(),function(){Ne(h),f(),u=!1}})}function ke(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=ke(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var _s={value:()=>{}};function oi(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Dn(n)}function Dn(t){this._=t}function ys(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",o=n.indexOf(".");if(o>=0&&(i=n.slice(o+1),n=n.slice(0,o)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Dn.prototype=oi.prototype={constructor:Dn,on:function(t,e){var n=this._,i=ys(t+"",n),o,l=-1,r=i.length;if(arguments.length<2){for(;++l<r;)if((o=(t=i[l]).type)&&(o=bs(n[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++l<r;)if(o=(t=i[l]).type)n[o]=oo(n[o],t.name,e);else if(e==null)for(o in n)n[o]=oo(n[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Dn(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var n=new Array(o),i=0,o,l;i<o;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],i=0,o=l.length;i<o;++i)l[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],o=0,l=i.length;o<l;++o)i[o].value.apply(e,n)}};function bs(t,e){for(var n=0,i=t.length,o;n<i;++n)if((o=t[n]).name===e)return o.value}function oo(t,e,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===e){t[i]=_s,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Ni="http://www.w3.org/1999/xhtml";const lo={svg:"http://www.w3.org/2000/svg",xhtml:Ni,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function li(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),lo.hasOwnProperty(e)?{space:lo[e],local:t}:t}function ws(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ni&&e.documentElement.namespaceURI===Ni?e.createElement(t):e.createElementNS(n,t)}}function ks(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Al(t){var e=li(t);return(e.local?ks:ws)(e)}function vs(){}function pi(t){return t==null?vs:function(){return this.querySelector(t)}}function Ss(t){typeof t!="function"&&(t=pi(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var l=e[o],r=l.length,s=i[o]=new Array(r),u,a,c=0;c<r;++c)(u=l[c])&&(a=t.call(u,u.__data__,c,l))&&("__data__"in u&&(a.__data__=u.__data__),s[c]=a);return new Ze(i,this._parents)}function Es(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Cs(){return[]}function Ol(t){return t==null?Cs:function(){return this.querySelectorAll(t)}}function zs(t){return function(){return Es(t.apply(this,arguments))}}function Ps(t){typeof t=="function"?t=zs(t):t=Ol(t);for(var e=this._groups,n=e.length,i=[],o=[],l=0;l<n;++l)for(var r=e[l],s=r.length,u,a=0;a<s;++a)(u=r[a])&&(i.push(t.call(u,u.__data__,a,r)),o.push(u));return new Ze(i,o)}function Tl(t){return function(){return this.matches(t)}}function Il(t){return function(e){return e.matches(t)}}var Ms=Array.prototype.find;function Hs(t){return function(){return Ms.call(this.children,t)}}function Ns(){return this.firstElementChild}function As(t){return this.select(t==null?Ns:Hs(typeof t=="function"?t:Il(t)))}var Os=Array.prototype.filter;function Ts(){return Array.from(this.children)}function Is(t){return function(){return Os.call(this.children,t)}}function Ds(t){return this.selectAll(t==null?Ts:Is(typeof t=="function"?t:Il(t)))}function Xs(t){typeof t!="function"&&(t=Tl(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var l=e[o],r=l.length,s=i[o]=[],u,a=0;a<r;++a)(u=l[a])&&t.call(u,u.__data__,a,l)&&s.push(u);return new Ze(i,this._parents)}function Dl(t){return new Array(t.length)}function Ys(){return new Ze(this._enter||this._groups.map(Dl),this._parents)}function pn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}pn.prototype={constructor:pn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Vs(t){return function(){return t}}function Rs(t,e,n,i,o,l){for(var r=0,s,u=e.length,a=l.length;r<a;++r)(s=e[r])?(s.__data__=l[r],i[r]=s):n[r]=new pn(t,l[r]);for(;r<u;++r)(s=e[r])&&(o[r]=s)}function Ls(t,e,n,i,o,l,r){var s,u,a=new Map,c=e.length,f=l.length,d=new Array(c),h;for(s=0;s<c;++s)(u=e[s])&&(d[s]=h=r.call(u,u.__data__,s,e)+"",a.has(h)?o[s]=u:a.set(h,u));for(s=0;s<f;++s)h=r.call(t,l[s],s,l)+"",(u=a.get(h))?(i[s]=u,u.__data__=l[s],a.delete(h)):n[s]=new pn(t,l[s]);for(s=0;s<c;++s)(u=e[s])&&a.get(d[s])===u&&(o[s]=u)}function Ws(t){return t.__data__}function Bs(t,e){if(!arguments.length)return Array.from(this,Ws);var n=e?Ls:Rs,i=this._parents,o=this._groups;typeof t!="function"&&(t=Vs(t));for(var l=o.length,r=new Array(l),s=new Array(l),u=new Array(l),a=0;a<l;++a){var c=i[a],f=o[a],d=f.length,h=ps(t.call(c,c&&c.__data__,a,i)),_=h.length,m=s[a]=new Array(_),b=r[a]=new Array(_),g=u[a]=new Array(d);n(c,f,m,b,g,h,e);for(var k=0,E=0,v,C;k<_;++k)if(v=m[k]){for(k>=E&&(E=k+1);!(C=b[E])&&++E<_;);v._next=C||null}}return r=new Ze(r,i),r._enter=s,r._exit=u,r}function ps(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ks(){return new Ze(this._exit||this._groups.map(Dl),this._parents)}function Fs(t,e,n){var i=this.enter(),o=this,l=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),n==null?l.remove():n(l),i&&o?i.merge(o).order():o}function Zs(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,o=n.length,l=i.length,r=Math.min(o,l),s=new Array(o),u=0;u<r;++u)for(var a=n[u],c=i[u],f=a.length,d=s[u]=new Array(f),h,_=0;_<f;++_)(h=a[_]||c[_])&&(d[_]=h);for(;u<o;++u)s[u]=n[u];return new Ze(s,this._parents)}function qs(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],o=i.length-1,l=i[o],r;--o>=0;)(r=i[o])&&(l&&r.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(r,l),l=r);return this}function Us(t){t||(t=Gs);function e(f,d){return f&&d?t(f.__data__,d.__data__):!f-!d}for(var n=this._groups,i=n.length,o=new Array(i),l=0;l<i;++l){for(var r=n[l],s=r.length,u=o[l]=new Array(s),a,c=0;c<s;++c)(a=r[c])&&(u[c]=a);u.sort(e)}return new Ze(o,this._parents).order()}function Gs(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Js(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Qs(){return Array.from(this)}function js(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,l=i.length;o<l;++o){var r=i[o];if(r)return r}return null}function xs(){let t=0;for(const e of this)++t;return t}function $s(){return!this.node()}function eu(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var o=e[n],l=0,r=o.length,s;l<r;++l)(s=o[l])&&t.call(s,s.__data__,l,o);return this}function tu(t){return function(){this.removeAttribute(t)}}function nu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function iu(t,e){return function(){this.setAttribute(t,e)}}function ou(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function lu(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ru(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function su(t,e){var n=li(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?nu:tu:typeof e=="function"?n.local?ru:lu:n.local?ou:iu)(n,e))}function Xl(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function uu(t){return function(){this.style.removeProperty(t)}}function au(t,e,n){return function(){this.style.setProperty(t,e,n)}}function cu(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function fu(t,e,n){return arguments.length>1?this.each((e==null?uu:typeof e=="function"?cu:au)(t,e,n??"")):pt(this.node(),t)}function pt(t,e){return t.style.getPropertyValue(e)||Xl(t).getComputedStyle(t,null).getPropertyValue(e)}function du(t){return function(){delete this[t]}}function hu(t,e){return function(){this[t]=e}}function gu(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function mu(t,e){return arguments.length>1?this.each((e==null?du:typeof e=="function"?gu:hu)(t,e)):this.node()[t]}function Yl(t){return t.trim().split(/^|\s+/)}function Ki(t){return t.classList||new Vl(t)}function Vl(t){this._node=t,this._names=Yl(t.getAttribute("class")||"")}Vl.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Rl(t,e){for(var n=Ki(t),i=-1,o=e.length;++i<o;)n.add(e[i])}function Ll(t,e){for(var n=Ki(t),i=-1,o=e.length;++i<o;)n.remove(e[i])}function _u(t){return function(){Rl(this,t)}}function yu(t){return function(){Ll(this,t)}}function bu(t,e){return function(){(e.apply(this,arguments)?Rl:Ll)(this,t)}}function wu(t,e){var n=Yl(t+"");if(arguments.length<2){for(var i=Ki(this.node()),o=-1,l=n.length;++o<l;)if(!i.contains(n[o]))return!1;return!0}return this.each((typeof e=="function"?bu:e?_u:yu)(n,e))}function ku(){this.textContent=""}function vu(t){return function(){this.textContent=t}}function Su(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Eu(t){return arguments.length?this.each(t==null?ku:(typeof t=="function"?Su:vu)(t)):this.node().textContent}function Cu(){this.innerHTML=""}function zu(t){return function(){this.innerHTML=t}}function Pu(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Mu(t){return arguments.length?this.each(t==null?Cu:(typeof t=="function"?Pu:zu)(t)):this.node().innerHTML}function Hu(){this.nextSibling&&this.parentNode.appendChild(this)}function Nu(){return this.each(Hu)}function Au(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ou(){return this.each(Au)}function Tu(t){var e=typeof t=="function"?t:Al(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Iu(){return null}function Du(t,e){var n=typeof t=="function"?t:Al(t),i=e==null?Iu:typeof e=="function"?e:pi(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Xu(){var t=this.parentNode;t&&t.removeChild(this)}function Yu(){return this.each(Xu)}function Vu(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ru(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Lu(t){return this.select(t?Ru:Vu)}function Wu(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Bu(t){return function(e){t.call(this,e,this.__data__)}}function pu(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function Ku(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,o=e.length,l;n<o;++n)l=e[n],(!t.type||l.type===t.type)&&l.name===t.name?this.removeEventListener(l.type,l.listener,l.options):e[++i]=l;++i?e.length=i:delete this.__on}}}function Fu(t,e,n){return function(){var i=this.__on,o,l=Bu(e);if(i){for(var r=0,s=i.length;r<s;++r)if((o=i[r]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=l,o.options=n),o.value=e;return}}this.addEventListener(t.type,l,n),o={type:t.type,name:t.name,value:e,listener:l,options:n},i?i.push(o):this.__on=[o]}}function Zu(t,e,n){var i=pu(t+""),o,l=i.length,r;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,a=s.length,c;u<a;++u)for(o=0,c=s[u];o<l;++o)if((r=i[o]).type===c.type&&r.name===c.name)return c.value}return}for(s=e?Fu:Ku,o=0;o<l;++o)this.each(s(i[o],e,n));return this}function Wl(t,e,n){var i=Xl(t),o=i.CustomEvent;typeof o=="function"?o=new o(e,n):(o=i.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function qu(t,e){return function(){return Wl(this,t,e)}}function Uu(t,e){return function(){return Wl(this,t,e.apply(this,arguments))}}function Gu(t,e){return this.each((typeof e=="function"?Uu:qu)(t,e))}function*Ju(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,l=i.length,r;o<l;++o)(r=i[o])&&(yield r)}var Bl=[null];function Ze(t,e){this._groups=t,this._parents=e}function _n(){return new Ze([[document.documentElement]],Bl)}function Qu(){return this}Ze.prototype=_n.prototype={constructor:Ze,select:Ss,selectAll:Ps,selectChild:As,selectChildren:Ds,filter:Xs,data:Bs,enter:Ys,exit:Ks,join:Fs,merge:Zs,selection:Qu,order:qs,sort:Us,call:Js,nodes:Qs,node:js,size:xs,empty:$s,each:eu,attr:su,style:fu,property:mu,classed:wu,text:Eu,html:Mu,raise:Nu,lower:Ou,append:Tu,insert:Du,remove:Yu,clone:Lu,datum:Wu,on:Zu,dispatch:Gu,[Symbol.iterator]:Ju};function Ge(t){return typeof t=="string"?new Ze([[document.querySelector(t)]],[document.documentElement]):new Ze([[t]],Bl)}function ju(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Qe(t,e){if(t=ju(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}const xu={passive:!1},sn={capture:!0,passive:!1};function _i(t){t.stopImmediatePropagation()}function Xt(t){t.preventDefault(),t.stopImmediatePropagation()}function pl(t){var e=t.document.documentElement,n=Ge(t).on("dragstart.drag",Xt,sn);"onselectstart"in e?n.on("selectstart.drag",Xt,sn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Kl(t,e){var n=t.document.documentElement,i=Ge(t).on("dragstart.drag",null);e&&(i.on("click.drag",Xt,sn),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Cn=t=>()=>t;function Ai(t,{sourceEvent:e,subject:n,target:i,identifier:o,active:l,x:r,y:s,dx:u,dy:a,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:a,enumerable:!0,configurable:!0},_:{value:c}})}Ai.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function $u(t){return!t.ctrlKey&&!t.button}function ea(){return this.parentNode}function ta(t,e){return e??{x:t.x,y:t.y}}function na(){return navigator.maxTouchPoints||"ontouchstart"in this}function ia(){var t=$u,e=ea,n=ta,i=na,o={},l=oi("start","drag","end"),r=0,s,u,a,c,f=0;function d(v){v.on("mousedown.drag",h).filter(i).on("touchstart.drag",b).on("touchmove.drag",g,xu).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(v,C){if(!(c||!t.call(this,v,C))){var H=E(this,e.call(this,v,C),v,C,"mouse");H&&(Ge(v.view).on("mousemove.drag",_,sn).on("mouseup.drag",m,sn),pl(v.view),_i(v),a=!1,s=v.clientX,u=v.clientY,H("start",v))}}function _(v){if(Xt(v),!a){var C=v.clientX-s,H=v.clientY-u;a=C*C+H*H>f}o.mouse("drag",v)}function m(v){Ge(v.view).on("mousemove.drag mouseup.drag",null),Kl(v.view,a),Xt(v),o.mouse("end",v)}function b(v,C){if(t.call(this,v,C)){var H=v.changedTouches,I=e.call(this,v,C),D=H.length,A,y;for(A=0;A<D;++A)(y=E(this,I,v,C,H[A].identifier,H[A]))&&(_i(v),y("start",v,H[A]))}}function g(v){var C=v.changedTouches,H=C.length,I,D;for(I=0;I<H;++I)(D=o[C[I].identifier])&&(Xt(v),D("drag",v,C[I]))}function k(v){var C=v.changedTouches,H=C.length,I,D;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),I=0;I<H;++I)(D=o[C[I].identifier])&&(_i(v),D("end",v,C[I]))}function E(v,C,H,I,D,A){var y=l.copy(),z=Qe(A||H,C),V,M,w;if((w=n.call(v,new Ai("beforestart",{sourceEvent:H,target:d,identifier:D,active:r,x:z[0],y:z[1],dx:0,dy:0,dispatch:y}),I))!=null)return V=w.x-z[0]||0,M=w.y-z[1]||0,function X(P,R,T){var K=z,Z;switch(P){case"start":o[D]=X,Z=r++;break;case"end":delete o[D],--r;case"drag":z=Qe(T||R,C),Z=r;break}y.call(P,v,new Ai(P,{sourceEvent:R,subject:w,target:d,identifier:D,active:Z,x:z[0]+V,y:z[1]+M,dx:z[0]-K[0],dy:z[1]-K[1],dispatch:y}),I)}}return d.filter=function(v){return arguments.length?(t=typeof v=="function"?v:Cn(!!v),d):t},d.container=function(v){return arguments.length?(e=typeof v=="function"?v:Cn(v),d):e},d.subject=function(v){return arguments.length?(n=typeof v=="function"?v:Cn(v),d):n},d.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:Cn(!!v),d):i},d.on=function(){var v=l.on.apply(l,arguments);return v===l?d:v},d.clickDistance=function(v){return arguments.length?(f=(v=+v)*v,d):Math.sqrt(f)},d}function Fi(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Fl(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function yn(){}var un=.7,Kn=1/un,Yt="\\s*([+-]?\\d+)\\s*",an="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",it="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oa=/^#([0-9a-f]{3,8})$/,la=new RegExp(`^rgb\\(${Yt},${Yt},${Yt}\\)$`),ra=new RegExp(`^rgb\\(${it},${it},${it}\\)$`),sa=new RegExp(`^rgba\\(${Yt},${Yt},${Yt},${an}\\)$`),ua=new RegExp(`^rgba\\(${it},${it},${it},${an}\\)$`),aa=new RegExp(`^hsl\\(${an},${it},${it}\\)$`),ca=new RegExp(`^hsla\\(${an},${it},${it},${an}\\)$`),ro={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fi(yn,cn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:so,formatHex:so,formatHex8:fa,formatHsl:da,formatRgb:uo,toString:uo});function so(){return this.rgb().formatHex()}function fa(){return this.rgb().formatHex8()}function da(){return Zl(this).formatHsl()}function uo(){return this.rgb().formatRgb()}function cn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=oa.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ao(e):n===3?new Ke(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?zn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?zn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=la.exec(t))?new Ke(e[1],e[2],e[3],1):(e=ra.exec(t))?new Ke(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=sa.exec(t))?zn(e[1],e[2],e[3],e[4]):(e=ua.exec(t))?zn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=aa.exec(t))?ho(e[1],e[2]/100,e[3]/100,1):(e=ca.exec(t))?ho(e[1],e[2]/100,e[3]/100,e[4]):ro.hasOwnProperty(t)?ao(ro[t]):t==="transparent"?new Ke(NaN,NaN,NaN,0):null}function ao(t){return new Ke(t>>16&255,t>>8&255,t&255,1)}function zn(t,e,n,i){return i<=0&&(t=e=n=NaN),new Ke(t,e,n,i)}function ha(t){return t instanceof yn||(t=cn(t)),t?(t=t.rgb(),new Ke(t.r,t.g,t.b,t.opacity)):new Ke}function Oi(t,e,n,i){return arguments.length===1?ha(t):new Ke(t,e,n,i??1)}function Ke(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Fi(Ke,Oi,Fl(yn,{brighter(t){return t=t==null?Kn:Math.pow(Kn,t),new Ke(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?un:Math.pow(un,t),new Ke(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ke(vt(this.r),vt(this.g),vt(this.b),Fn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:co,formatHex:co,formatHex8:ga,formatRgb:fo,toString:fo}));function co(){return`#${kt(this.r)}${kt(this.g)}${kt(this.b)}`}function ga(){return`#${kt(this.r)}${kt(this.g)}${kt(this.b)}${kt((isNaN(this.opacity)?1:this.opacity)*255)}`}function fo(){const t=Fn(this.opacity);return`${t===1?"rgb(":"rgba("}${vt(this.r)}, ${vt(this.g)}, ${vt(this.b)}${t===1?")":`, ${t})`}`}function Fn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function vt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function kt(t){return t=vt(t),(t<16?"0":"")+t.toString(16)}function ho(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new je(t,e,n,i)}function Zl(t){if(t instanceof je)return new je(t.h,t.s,t.l,t.opacity);if(t instanceof yn||(t=cn(t)),!t)return new je;if(t instanceof je)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,o=Math.min(e,n,i),l=Math.max(e,n,i),r=NaN,s=l-o,u=(l+o)/2;return s?(e===l?r=(n-i)/s+(n<i)*6:n===l?r=(i-e)/s+2:r=(e-n)/s+4,s/=u<.5?l+o:2-l-o,r*=60):s=u>0&&u<1?0:r,new je(r,s,u,t.opacity)}function ma(t,e,n,i){return arguments.length===1?Zl(t):new je(t,e,n,i??1)}function je(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Fi(je,ma,Fl(yn,{brighter(t){return t=t==null?Kn:Math.pow(Kn,t),new je(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?un:Math.pow(un,t),new je(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,o=2*n-i;return new Ke(yi(t>=240?t-240:t+120,o,i),yi(t,o,i),yi(t<120?t+240:t-120,o,i),this.opacity)},clamp(){return new je(go(this.h),Pn(this.s),Pn(this.l),Fn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Fn(this.opacity);return`${t===1?"hsl(":"hsla("}${go(this.h)}, ${Pn(this.s)*100}%, ${Pn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function go(t){return t=(t||0)%360,t<0?t+360:t}function Pn(t){return Math.max(0,Math.min(1,t||0))}function yi(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ql=t=>()=>t;function _a(t,e){return function(n){return t+n*e}}function ya(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function ba(t){return(t=+t)==1?Ul:function(e,n){return n-e?ya(e,n,t):ql(isNaN(e)?n:e)}}function Ul(t,e){var n=e-t;return n?_a(t,n):ql(isNaN(t)?e:t)}const mo=function t(e){var n=ba(e);function i(o,l){var r=n((o=Oi(o)).r,(l=Oi(l)).r),s=n(o.g,l.g),u=n(o.b,l.b),a=Ul(o.opacity,l.opacity);return function(c){return o.r=r(c),o.g=s(c),o.b=u(c),o.opacity=a(c),o+""}}return i.gamma=t,i}(1);function yt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Ti=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bi=new RegExp(Ti.source,"g");function wa(t){return function(){return t}}function ka(t){return function(e){return t(e)+""}}function va(t,e){var n=Ti.lastIndex=bi.lastIndex=0,i,o,l,r=-1,s=[],u=[];for(t=t+"",e=e+"";(i=Ti.exec(t))&&(o=bi.exec(e));)(l=o.index)>n&&(l=e.slice(n,l),s[r]?s[r]+=l:s[++r]=l),(i=i[0])===(o=o[0])?s[r]?s[r]+=o:s[++r]=o:(s[++r]=null,u.push({i:r,x:yt(i,o)})),n=bi.lastIndex;return n<e.length&&(l=e.slice(n),s[r]?s[r]+=l:s[++r]=l),s.length<2?u[0]?ka(u[0].x):wa(e):(e=u.length,function(a){for(var c=0,f;c<e;++c)s[(f=u[c]).i]=f.x(a);return s.join("")})}var _o=180/Math.PI,Ii={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Gl(t,e,n,i,o,l){var r,s,u;return(r=Math.sqrt(t*t+e*e))&&(t/=r,e/=r),(u=t*n+e*i)&&(n-=t*u,i-=e*u),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,u/=s),t*i<e*n&&(t=-t,e=-e,u=-u,r=-r),{translateX:o,translateY:l,rotate:Math.atan2(e,t)*_o,skewX:Math.atan(u)*_o,scaleX:r,scaleY:s}}var Mn;function Sa(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ii:Gl(e.a,e.b,e.c,e.d,e.e,e.f)}function Ea(t){return t==null||(Mn||(Mn=document.createElementNS("http://www.w3.org/2000/svg","g")),Mn.setAttribute("transform",t),!(t=Mn.transform.baseVal.consolidate()))?Ii:(t=t.matrix,Gl(t.a,t.b,t.c,t.d,t.e,t.f))}function Jl(t,e,n,i){function o(a){return a.length?a.pop()+" ":""}function l(a,c,f,d,h,_){if(a!==f||c!==d){var m=h.push("translate(",null,e,null,n);_.push({i:m-4,x:yt(a,f)},{i:m-2,x:yt(c,d)})}else(f||d)&&h.push("translate("+f+e+d+n)}function r(a,c,f,d){a!==c?(a-c>180?c+=360:c-a>180&&(a+=360),d.push({i:f.push(o(f)+"rotate(",null,i)-2,x:yt(a,c)})):c&&f.push(o(f)+"rotate("+c+i)}function s(a,c,f,d){a!==c?d.push({i:f.push(o(f)+"skewX(",null,i)-2,x:yt(a,c)}):c&&f.push(o(f)+"skewX("+c+i)}function u(a,c,f,d,h,_){if(a!==f||c!==d){var m=h.push(o(h)+"scale(",null,",",null,")");_.push({i:m-4,x:yt(a,f)},{i:m-2,x:yt(c,d)})}else(f!==1||d!==1)&&h.push(o(h)+"scale("+f+","+d+")")}return function(a,c){var f=[],d=[];return a=t(a),c=t(c),l(a.translateX,a.translateY,c.translateX,c.translateY,f,d),r(a.rotate,c.rotate,f,d),s(a.skewX,c.skewX,f,d),u(a.scaleX,a.scaleY,c.scaleX,c.scaleY,f,d),a=c=null,function(h){for(var _=-1,m=d.length,b;++_<m;)f[(b=d[_]).i]=b.x(h);return f.join("")}}}var Ca=Jl(Sa,"px, ","px)","deg)"),za=Jl(Ea,", ",")",")"),Pa=1e-12;function yo(t){return((t=Math.exp(t))+1/t)/2}function Ma(t){return((t=Math.exp(t))-1/t)/2}function Ha(t){return((t=Math.exp(2*t))-1)/(t+1)}const Na=function t(e,n,i){function o(l,r){var s=l[0],u=l[1],a=l[2],c=r[0],f=r[1],d=r[2],h=c-s,_=f-u,m=h*h+_*_,b,g;if(m<Pa)g=Math.log(d/a)/e,b=function(I){return[s+I*h,u+I*_,a*Math.exp(e*I*g)]};else{var k=Math.sqrt(m),E=(d*d-a*a+i*m)/(2*a*n*k),v=(d*d-a*a-i*m)/(2*d*n*k),C=Math.log(Math.sqrt(E*E+1)-E),H=Math.log(Math.sqrt(v*v+1)-v);g=(H-C)/e,b=function(I){var D=I*g,A=yo(C),y=a/(n*k)*(A*Ha(e*D+C)-Ma(C));return[s+y*h,u+y*_,a*A/yo(e*D+C)]}}return b.duration=g*1e3*e/Math.SQRT2,b}return o.rho=function(l){var r=Math.max(.001,+l),s=r*r,u=s*s;return t(r,s,u)},o}(Math.SQRT2,2,4);var Kt=0,en=0,Qt=0,Ql=1e3,Zn,tn,qn=0,Et=0,ri=0,fn=typeof performance=="object"&&performance.now?performance:Date,jl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Zi(){return Et||(jl(Aa),Et=fn.now()+ri)}function Aa(){Et=0}function Un(){this._call=this._time=this._next=null}Un.prototype=xl.prototype={constructor:Un,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Zi():+n)+(e==null?0:+e),!this._next&&tn!==this&&(tn?tn._next=this:Zn=this,tn=this),this._call=t,this._time=n,Di()},stop:function(){this._call&&(this._call=null,this._time=1/0,Di())}};function xl(t,e,n){var i=new Un;return i.restart(t,e,n),i}function Oa(){Zi(),++Kt;for(var t=Zn,e;t;)(e=Et-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Kt}function bo(){Et=(qn=fn.now())+ri,Kt=en=0;try{Oa()}finally{Kt=0,Ia(),Et=0}}function Ta(){var t=fn.now(),e=t-qn;e>Ql&&(ri-=e,qn=t)}function Ia(){for(var t,e=Zn,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Zn=n);tn=t,Di(i)}function Di(t){if(!Kt){en&&(en=clearTimeout(en));var e=t-Et;e>24?(t<1/0&&(en=setTimeout(bo,t-fn.now()-ri)),Qt&&(Qt=clearInterval(Qt))):(Qt||(qn=fn.now(),Qt=setInterval(Ta,Ql)),Kt=1,jl(bo))}}function wo(t,e,n){var i=new Un;return e=e==null?0:+e,i.restart(o=>{i.stop(),t(o+e)},e,n),i}var Da=oi("start","end","cancel","interrupt"),Xa=[],$l=0,ko=1,Xi=2,Xn=3,vo=4,Yi=5,Yn=6;function si(t,e,n,i,o,l){var r=t.__transition;if(!r)t.__transition={};else if(n in r)return;Ya(t,n,{name:e,index:i,group:o,on:Da,tween:Xa,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:$l})}function qi(t,e){var n=$e(t,e);if(n.state>$l)throw new Error("too late; already scheduled");return n}function lt(t,e){var n=$e(t,e);if(n.state>Xn)throw new Error("too late; already running");return n}function $e(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ya(t,e,n){var i=t.__transition,o;i[e]=n,n.timer=xl(l,0,n.time);function l(a){n.state=ko,n.timer.restart(r,n.delay,n.time),n.delay<=a&&r(a-n.delay)}function r(a){var c,f,d,h;if(n.state!==ko)return u();for(c in i)if(h=i[c],h.name===n.name){if(h.state===Xn)return wo(r);h.state===vo?(h.state=Yn,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[c]):+c<e&&(h.state=Yn,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[c])}if(wo(function(){n.state===Xn&&(n.state=vo,n.timer.restart(s,n.delay,n.time),s(a))}),n.state=Xi,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Xi){for(n.state=Xn,o=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(o[++f]=h);o.length=f+1}}function s(a){for(var c=a<n.duration?n.ease.call(null,a/n.duration):(n.timer.restart(u),n.state=Yi,1),f=-1,d=o.length;++f<d;)o[f].call(t,c);n.state===Yi&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Yn,n.timer.stop(),delete i[e];for(var a in i)return;delete t.__transition}}function Vn(t,e){var n=t.__transition,i,o,l=!0,r;if(n){e=e==null?null:e+"";for(r in n){if((i=n[r]).name!==e){l=!1;continue}o=i.state>Xi&&i.state<Yi,i.state=Yn,i.timer.stop(),i.on.call(o?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[r]}l&&delete t.__transition}}function Va(t){return this.each(function(){Vn(this,t)})}function Ra(t,e){var n,i;return function(){var o=lt(this,t),l=o.tween;if(l!==n){i=n=l;for(var r=0,s=i.length;r<s;++r)if(i[r].name===e){i=i.slice(),i.splice(r,1);break}}o.tween=i}}function La(t,e,n){var i,o;if(typeof n!="function")throw new Error;return function(){var l=lt(this,t),r=l.tween;if(r!==i){o=(i=r).slice();for(var s={name:e,value:n},u=0,a=o.length;u<a;++u)if(o[u].name===e){o[u]=s;break}u===a&&o.push(s)}l.tween=o}}function Wa(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=$e(this.node(),n).tween,o=0,l=i.length,r;o<l;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((e==null?Ra:La)(n,t,e))}function Ui(t,e,n){var i=t._id;return t.each(function(){var o=lt(this,i);(o.value||(o.value={}))[e]=n.apply(this,arguments)}),function(o){return $e(o,i).value[e]}}function er(t,e){var n;return(typeof e=="number"?yt:e instanceof cn?mo:(n=cn(e))?(e=n,mo):va)(t,e)}function Ba(t){return function(){this.removeAttribute(t)}}function pa(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ka(t,e,n){var i,o=n+"",l;return function(){var r=this.getAttribute(t);return r===o?null:r===i?l:l=e(i=r,n)}}function Fa(t,e,n){var i,o=n+"",l;return function(){var r=this.getAttributeNS(t.space,t.local);return r===o?null:r===i?l:l=e(i=r,n)}}function Za(t,e,n){var i,o,l;return function(){var r,s=n(this),u;return s==null?void this.removeAttribute(t):(r=this.getAttribute(t),u=s+"",r===u?null:r===i&&u===o?l:(o=u,l=e(i=r,s)))}}function qa(t,e,n){var i,o,l;return function(){var r,s=n(this),u;return s==null?void this.removeAttributeNS(t.space,t.local):(r=this.getAttributeNS(t.space,t.local),u=s+"",r===u?null:r===i&&u===o?l:(o=u,l=e(i=r,s)))}}function Ua(t,e){var n=li(t),i=n==="transform"?za:er;return this.attrTween(t,typeof e=="function"?(n.local?qa:Za)(n,i,Ui(this,"attr."+t,e)):e==null?(n.local?pa:Ba)(n):(n.local?Fa:Ka)(n,i,e))}function Ga(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Ja(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Qa(t,e){var n,i;function o(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&Ja(t,l)),n}return o._value=e,o}function ja(t,e){var n,i;function o(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&Ga(t,l)),n}return o._value=e,o}function xa(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=li(t);return this.tween(n,(i.local?Qa:ja)(i,e))}function $a(t,e){return function(){qi(this,t).delay=+e.apply(this,arguments)}}function ec(t,e){return e=+e,function(){qi(this,t).delay=e}}function tc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?$a:ec)(e,t)):$e(this.node(),e).delay}function nc(t,e){return function(){lt(this,t).duration=+e.apply(this,arguments)}}function ic(t,e){return e=+e,function(){lt(this,t).duration=e}}function oc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?nc:ic)(e,t)):$e(this.node(),e).duration}function lc(t,e){if(typeof e!="function")throw new Error;return function(){lt(this,t).ease=e}}function rc(t){var e=this._id;return arguments.length?this.each(lc(e,t)):$e(this.node(),e).ease}function sc(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;lt(this,t).ease=n}}function uc(t){if(typeof t!="function")throw new Error;return this.each(sc(this._id,t))}function ac(t){typeof t!="function"&&(t=Tl(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var l=e[o],r=l.length,s=i[o]=[],u,a=0;a<r;++a)(u=l[a])&&t.call(u,u.__data__,a,l)&&s.push(u);return new gt(i,this._parents,this._name,this._id)}function cc(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,o=n.length,l=Math.min(i,o),r=new Array(i),s=0;s<l;++s)for(var u=e[s],a=n[s],c=u.length,f=r[s]=new Array(c),d,h=0;h<c;++h)(d=u[h]||a[h])&&(f[h]=d);for(;s<i;++s)r[s]=e[s];return new gt(r,this._parents,this._name,this._id)}function fc(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function dc(t,e,n){var i,o,l=fc(e)?qi:lt;return function(){var r=l(this,t),s=r.on;s!==i&&(o=(i=s).copy()).on(e,n),r.on=o}}function hc(t,e){var n=this._id;return arguments.length<2?$e(this.node(),n).on.on(t):this.each(dc(n,t,e))}function gc(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function mc(){return this.on("end.remove",gc(this._id))}function _c(t){var e=this._name,n=this._id;typeof t!="function"&&(t=pi(t));for(var i=this._groups,o=i.length,l=new Array(o),r=0;r<o;++r)for(var s=i[r],u=s.length,a=l[r]=new Array(u),c,f,d=0;d<u;++d)(c=s[d])&&(f=t.call(c,c.__data__,d,s))&&("__data__"in c&&(f.__data__=c.__data__),a[d]=f,si(a[d],e,n,d,a,$e(c,n)));return new gt(l,this._parents,e,n)}function yc(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ol(t));for(var i=this._groups,o=i.length,l=[],r=[],s=0;s<o;++s)for(var u=i[s],a=u.length,c,f=0;f<a;++f)if(c=u[f]){for(var d=t.call(c,c.__data__,f,u),h,_=$e(c,n),m=0,b=d.length;m<b;++m)(h=d[m])&&si(h,e,n,m,d,_);l.push(d),r.push(c)}return new gt(l,r,e,n)}var bc=_n.prototype.constructor;function wc(){return new bc(this._groups,this._parents)}function kc(t,e){var n,i,o;return function(){var l=pt(this,t),r=(this.style.removeProperty(t),pt(this,t));return l===r?null:l===n&&r===i?o:o=e(n=l,i=r)}}function tr(t){return function(){this.style.removeProperty(t)}}function vc(t,e,n){var i,o=n+"",l;return function(){var r=pt(this,t);return r===o?null:r===i?l:l=e(i=r,n)}}function Sc(t,e,n){var i,o,l;return function(){var r=pt(this,t),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(t),pt(this,t))),r===u?null:r===i&&u===o?l:(o=u,l=e(i=r,s))}}function Ec(t,e){var n,i,o,l="style."+e,r="end."+l,s;return function(){var u=lt(this,t),a=u.on,c=u.value[l]==null?s||(s=tr(e)):void 0;(a!==n||o!==c)&&(i=(n=a).copy()).on(r,o=c),u.on=i}}function Cc(t,e,n){var i=(t+="")=="transform"?Ca:er;return e==null?this.styleTween(t,kc(t,i)).on("end.style."+t,tr(t)):typeof e=="function"?this.styleTween(t,Sc(t,i,Ui(this,"style."+t,e))).each(Ec(this._id,t)):this.styleTween(t,vc(t,i,e),n).on("end.style."+t,null)}function zc(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Pc(t,e,n){var i,o;function l(){var r=e.apply(this,arguments);return r!==o&&(i=(o=r)&&zc(t,r,n)),i}return l._value=e,l}function Mc(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Pc(t,e,n??""))}function Hc(t){return function(){this.textContent=t}}function Nc(t){return function(){var e=t(this);this.textContent=e??""}}function Ac(t){return this.tween("text",typeof t=="function"?Nc(Ui(this,"text",t)):Hc(t==null?"":t+""))}function Oc(t){return function(e){this.textContent=t.call(this,e)}}function Tc(t){var e,n;function i(){var o=t.apply(this,arguments);return o!==n&&(e=(n=o)&&Oc(o)),e}return i._value=t,i}function Ic(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Tc(t))}function Dc(){for(var t=this._name,e=this._id,n=nr(),i=this._groups,o=i.length,l=0;l<o;++l)for(var r=i[l],s=r.length,u,a=0;a<s;++a)if(u=r[a]){var c=$e(u,e);si(u,t,n,a,r,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new gt(i,this._parents,t,n)}function Xc(){var t,e,n=this,i=n._id,o=n.size();return new Promise(function(l,r){var s={value:r},u={value:function(){--o===0&&l()}};n.each(function(){var a=lt(this,i),c=a.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),a.on=e}),o===0&&l()})}var Yc=0;function gt(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function nr(){return++Yc}var at=_n.prototype;gt.prototype={constructor:gt,select:_c,selectAll:yc,selectChild:at.selectChild,selectChildren:at.selectChildren,filter:ac,merge:cc,selection:wc,transition:Dc,call:at.call,nodes:at.nodes,node:at.node,size:at.size,empty:at.empty,each:at.each,on:hc,attr:Ua,attrTween:xa,style:Cc,styleTween:Mc,text:Ac,textTween:Ic,remove:mc,tween:Wa,delay:tc,duration:oc,ease:rc,easeVarying:uc,end:Xc,[Symbol.iterator]:at[Symbol.iterator]};function Vc(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Rc={time:null,delay:0,duration:250,ease:Vc};function Lc(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Wc(t){var e,n;t instanceof gt?(e=t._id,t=t._name):(e=nr(),(n=Rc).time=Zi(),t=t==null?null:t+"");for(var i=this._groups,o=i.length,l=0;l<o;++l)for(var r=i[l],s=r.length,u,a=0;a<s;++a)(u=r[a])&&si(u,t,e,a,r,n||Lc(u,e));return new gt(i,this._parents,t,e)}_n.prototype.interrupt=Va;_n.prototype.transition=Wc;const Hn=t=>()=>t;function Bc(t,{sourceEvent:e,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function ct(t,e,n){this.k=t,this.x=e,this.y=n}ct.prototype={constructor:ct,scale:function(t){return t===1?this:new ct(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ct(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ui=new ct(1,0,0);ir.prototype=ct.prototype;function ir(t){for(;!t.__zoom;)if(!(t=t.parentNode))return ui;return t.__zoom}function wi(t){t.stopImmediatePropagation()}function jt(t){t.preventDefault(),t.stopImmediatePropagation()}function pc(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Kc(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function So(){return this.__zoom||ui}function Fc(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Zc(){return navigator.maxTouchPoints||"ontouchstart"in this}function qc(t,e,n){var i=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],l=t.invertY(e[0][1])-n[0][1],r=t.invertY(e[1][1])-n[1][1];return t.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),r>l?(l+r)/2:Math.min(0,l)||Math.max(0,r))}function or(){var t=pc,e=Kc,n=qc,i=Fc,o=Zc,l=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],s=250,u=Na,a=oi("start","zoom","end"),c,f,d,h=500,_=150,m=0,b=10;function g(w){w.property("__zoom",So).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",y).filter(o).on("touchstart.zoom",z).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(w,X,P,R){var T=w.selection?w.selection():w;T.property("__zoom",So),w!==T?C(w,X,P,R):T.interrupt().each(function(){H(this,arguments).event(R).start().zoom(null,typeof X=="function"?X.apply(this,arguments):X).end()})},g.scaleBy=function(w,X,P,R){g.scaleTo(w,function(){var T=this.__zoom.k,K=typeof X=="function"?X.apply(this,arguments):X;return T*K},P,R)},g.scaleTo=function(w,X,P,R){g.transform(w,function(){var T=e.apply(this,arguments),K=this.__zoom,Z=P==null?v(T):typeof P=="function"?P.apply(this,arguments):P,U=K.invert(Z),O=typeof X=="function"?X.apply(this,arguments):X;return n(E(k(K,O),Z,U),T,r)},P,R)},g.translateBy=function(w,X,P,R){g.transform(w,function(){return n(this.__zoom.translate(typeof X=="function"?X.apply(this,arguments):X,typeof P=="function"?P.apply(this,arguments):P),e.apply(this,arguments),r)},null,R)},g.translateTo=function(w,X,P,R,T){g.transform(w,function(){var K=e.apply(this,arguments),Z=this.__zoom,U=R==null?v(K):typeof R=="function"?R.apply(this,arguments):R;return n(ui.translate(U[0],U[1]).scale(Z.k).translate(typeof X=="function"?-X.apply(this,arguments):-X,typeof P=="function"?-P.apply(this,arguments):-P),K,r)},R,T)};function k(w,X){return X=Math.max(l[0],Math.min(l[1],X)),X===w.k?w:new ct(X,w.x,w.y)}function E(w,X,P){var R=X[0]-P[0]*w.k,T=X[1]-P[1]*w.k;return R===w.x&&T===w.y?w:new ct(w.k,R,T)}function v(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function C(w,X,P,R){w.on("start.zoom",function(){H(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){H(this,arguments).event(R).end()}).tween("zoom",function(){var T=this,K=arguments,Z=H(T,K).event(R),U=e.apply(T,K),O=P==null?v(U):typeof P=="function"?P.apply(T,K):P,se=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),re=T.__zoom,ce=typeof X=="function"?X.apply(T,K):X,G=u(re.invert(O).concat(se/re.k),ce.invert(O).concat(se/ce.k));return function(he){if(he===1)he=ce;else{var me=G(he),F=se/me[2];he=new ct(F,O[0]-me[0]*F,O[1]-me[1]*F)}Z.zoom(null,he)}})}function H(w,X,P){return!P&&w.__zooming||new I(w,X)}function I(w,X){this.that=w,this.args=X,this.active=0,this.sourceEvent=null,this.extent=e.apply(w,X),this.taps=0}I.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,X){return this.mouse&&w!=="mouse"&&(this.mouse[1]=X.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=X.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=X.invert(this.touch1[0])),this.that.__zoom=X,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var X=Ge(this.that).datum();a.call(w,this.that,new Bc(w,{sourceEvent:this.sourceEvent,target:g,type:w,transform:this.that.__zoom,dispatch:a}),X)}};function D(w,...X){if(!t.apply(this,arguments))return;var P=H(this,X).event(w),R=this.__zoom,T=Math.max(l[0],Math.min(l[1],R.k*Math.pow(2,i.apply(this,arguments)))),K=Qe(w);if(P.wheel)(P.mouse[0][0]!==K[0]||P.mouse[0][1]!==K[1])&&(P.mouse[1]=R.invert(P.mouse[0]=K)),clearTimeout(P.wheel);else{if(R.k===T)return;P.mouse=[K,R.invert(K)],Vn(this),P.start()}jt(w),P.wheel=setTimeout(Z,_),P.zoom("mouse",n(E(k(R,T),P.mouse[0],P.mouse[1]),P.extent,r));function Z(){P.wheel=null,P.end()}}function A(w,...X){if(d||!t.apply(this,arguments))return;var P=w.currentTarget,R=H(this,X,!0).event(w),T=Ge(w.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",se,!0),K=Qe(w,P),Z=w.clientX,U=w.clientY;pl(w.view),wi(w),R.mouse=[K,this.__zoom.invert(K)],Vn(this),R.start();function O(re){if(jt(re),!R.moved){var ce=re.clientX-Z,G=re.clientY-U;R.moved=ce*ce+G*G>m}R.event(re).zoom("mouse",n(E(R.that.__zoom,R.mouse[0]=Qe(re,P),R.mouse[1]),R.extent,r))}function se(re){T.on("mousemove.zoom mouseup.zoom",null),Kl(re.view,R.moved),jt(re),R.event(re).end()}}function y(w,...X){if(t.apply(this,arguments)){var P=this.__zoom,R=Qe(w.changedTouches?w.changedTouches[0]:w,this),T=P.invert(R),K=P.k*(w.shiftKey?.5:2),Z=n(E(k(P,K),R,T),e.apply(this,X),r);jt(w),s>0?Ge(this).transition().duration(s).call(C,Z,R,w):Ge(this).call(g.transform,Z,R,w)}}function z(w,...X){if(t.apply(this,arguments)){var P=w.touches,R=P.length,T=H(this,X,w.changedTouches.length===R).event(w),K,Z,U,O;for(wi(w),Z=0;Z<R;++Z)U=P[Z],O=Qe(U,this),O=[O,this.__zoom.invert(O),U.identifier],T.touch0?!T.touch1&&T.touch0[2]!==O[2]&&(T.touch1=O,T.taps=0):(T.touch0=O,K=!0,T.taps=1+!!c);c&&(c=clearTimeout(c)),K&&(T.taps<2&&(f=O[0],c=setTimeout(function(){c=null},h)),Vn(this),T.start())}}function V(w,...X){if(this.__zooming){var P=H(this,X).event(w),R=w.changedTouches,T=R.length,K,Z,U,O;for(jt(w),K=0;K<T;++K)Z=R[K],U=Qe(Z,this),P.touch0&&P.touch0[2]===Z.identifier?P.touch0[0]=U:P.touch1&&P.touch1[2]===Z.identifier&&(P.touch1[0]=U);if(Z=P.that.__zoom,P.touch1){var se=P.touch0[0],re=P.touch0[1],ce=P.touch1[0],G=P.touch1[1],he=(he=ce[0]-se[0])*he+(he=ce[1]-se[1])*he,me=(me=G[0]-re[0])*me+(me=G[1]-re[1])*me;Z=k(Z,Math.sqrt(he/me)),U=[(se[0]+ce[0])/2,(se[1]+ce[1])/2],O=[(re[0]+G[0])/2,(re[1]+G[1])/2]}else if(P.touch0)U=P.touch0[0],O=P.touch0[1];else return;P.zoom("touch",n(E(Z,U,O),P.extent,r))}}function M(w,...X){if(this.__zooming){var P=H(this,X).event(w),R=w.changedTouches,T=R.length,K,Z;for(wi(w),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),K=0;K<T;++K)Z=R[K],P.touch0&&P.touch0[2]===Z.identifier?delete P.touch0:P.touch1&&P.touch1[2]===Z.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(Z=Qe(Z,this),Math.hypot(f[0]-Z[0],f[1]-Z[1])<b)){var U=Ge(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return g.wheelDelta=function(w){return arguments.length?(i=typeof w=="function"?w:Hn(+w),g):i},g.filter=function(w){return arguments.length?(t=typeof w=="function"?w:Hn(!!w),g):t},g.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:Hn(!!w),g):o},g.extent=function(w){return arguments.length?(e=typeof w=="function"?w:Hn([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),g):e},g.scaleExtent=function(w){return arguments.length?(l[0]=+w[0],l[1]=+w[1],g):[l[0],l[1]]},g.translateExtent=function(w){return arguments.length?(r[0][0]=+w[0][0],r[1][0]=+w[1][0],r[0][1]=+w[0][1],r[1][1]=+w[1][1],g):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},g.constrain=function(w){return arguments.length?(n=w,g):n},g.duration=function(w){return arguments.length?(s=+w,g):s},g.interpolate=function(w){return arguments.length?(u=w,g):u},g.on=function(){var w=a.on.apply(a,arguments);return w===a?g:w},g.clickDistance=function(w){return arguments.length?(m=(w=+w)*w,g):Math.sqrt(m)},g.tapDistance=function(w){return arguments.length?(b=+w,g):b},g}const bn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${n&&i}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Ee=Symbol.for("internals"),Eo=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var Ct;(function(t){t.Strict="strict",t.Loose="loose"})(Ct||(Ct={}));var ot;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(ot||(ot={}));var Gn;(function(t){t.Partial="partial",t.Full="full"})(Gn||(Gn={}));var Vt;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Vt||(Vt={}));var dn;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(dn||(dn={}));var ae;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ae||(ae={}));function Uc(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function Co(t,e,n){if(!n)return;const i=[];t.forEach((o,l)=>{e!=null&&e.has(l)||i.push(o)}),i.length&&n(i)}const Gc=t=>"id"in t&&"source"in t&&"target"in t,Jc=t=>"id"in t&&!("source"in t)&&!("target"in t),Gt=(t,e=[0,0])=>{var s;if(!t)return{position:{x:0,y:0},positionAbsolute:{x:0,y:0}};const{width:n,height:i}=kn(t),o=n*e[0],l=i*e[1],r={x:t.position.x-o,y:t.position.y-l};return{position:r,positionAbsolute:(s=t.computed)!=null&&s.positionAbsolute?{x:t.computed.positionAbsolute.x-o,y:t.computed.positionAbsolute.y-l}:r}},wn=(t,e={nodeOrigin:[0,0],useRelativePosition:!1})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,o)=>{const l=Gt(o,o.origin||e.nodeOrigin);return Gi(i,Jn({...l[e.useRelativePosition?"position":"positionAbsolute"],...kn(o)}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Ji(n)},lr=(t,e,[n,i,o]=[0,0,1],l=!1,r=!1,s=[0,0])=>{const u={...ai(e,[n,i,o]),width:e.width/o,height:e.height/o};return t.reduce((c,f)=>{const{computed:d,selectable:h=!0,hidden:_=!1}=f,m=(d==null?void 0:d.width)??f.width??f.initialWidth??null,b=(d==null?void 0:d.height)??f.height??f.initialHeight??null;if(r&&!h||_)return c;const g=Qn(u,Ri(f,s)),k=m===null||b===null,E=l&&g>0,v=(m??0)*(b??0);return(k||E||g>=v||f.dragging)&&c.push(f),c},[])},Vi=(t,e)=>{const n=new Set;return t.forEach(i=>{n.add(i.id)}),e.filter(i=>n.has(i.source)||n.has(i.target))};function Qc({nodes:t,width:e,height:n,panZoom:i,minZoom:o,maxZoom:l,nodeOrigin:r=[0,0]},s){const u=t.filter(a=>{var f,d,h;const c=((f=a.computed)==null?void 0:f.width)&&((d=a.computed)==null?void 0:d.height)&&((s==null?void 0:s.includeHiddenNodes)||!a.hidden);return(h=s==null?void 0:s.nodes)!=null&&h.length?c&&(s==null?void 0:s.nodes.some(_=>_.id===a.id)):c});if(u.length>0){const a=wn(u,{nodeOrigin:r}),c=ji(a,e,n,(s==null?void 0:s.minZoom)??o,(s==null?void 0:s.maxZoom)??l,(s==null?void 0:s.padding)??.1);return i.setViewport(c,{duration:s==null?void 0:s.duration}),!0}return!1}function jc(t,e){var n,i;return!e||e==="parent"?e:[e[0],[e[1][0]-(((n=t.computed)==null?void 0:n.width)??0),e[1][1]-(((i=t.computed)==null?void 0:i.height)??0)]]}function xc({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:o,onError:l}){var d,h,_,m;const r=n.get(t),s=r.parentNode?n.get(r.parentNode):void 0,{x:u,y:a}=s?Gt(s,s.origin||i).positionAbsolute:{x:0,y:0};let c=jc(r,r.extent||o);if(r.extent==="parent"&&!r.expandParent)if(!s)l==null||l("005",bn.error005());else{const b=(d=r.computed)==null?void 0:d.width,g=(h=r.computed)==null?void 0:h.height,k=(_=s==null?void 0:s.computed)==null?void 0:_.width,E=(m=s==null?void 0:s.computed)==null?void 0:m.height;if(b&&g&&k&&E){const v=r.origin||i,C=u+b*v[0],H=a+g*v[1];c=[[C,H],[C+k-b,H+E-g]]}}else s&&Mo(r.extent)&&(c=[[r.extent[0][0]+u,r.extent[0][1]+a],[r.extent[1][0]+u,r.extent[1][1]+a]]);const f=Mo(c)?$c(e,c):e;return{position:{x:f.x-u,y:f.y-a},positionAbsolute:f}}async function rr({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:i,onBeforeDelete:o}){const l=t.map(d=>d.id),r=[];for(const d of n){if(d.deletable===!1)continue;const h=l.includes(d.id),_=!h&&d.parentNode&&r.find(m=>m.id===d.parentNode);(h||_)&&r.push(d)}const s=e.map(d=>d.id),u=i.filter(d=>d.deletable!==!1),c=Vi(r,u);for(const d of u)s.includes(d.id)&&!c.find(_=>_.id===d.id)&&c.push(d);if(!o)return{edges:c,nodes:r};const f=await o({nodes:r,edges:c});return typeof f=="boolean"?f?{edges:c,nodes:r}:{edges:[],nodes:[]}:f}const Ft=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),$c=(t={x:0,y:0},e)=>({x:Ft(t.x,e[0][0],e[1][0]),y:Ft(t.y,e[0][1],e[1][1])}),zo=(t,e,n)=>t<e?Ft(Math.abs(t-e),1,50)/50:t>n?-Ft(Math.abs(t-n),1,50)/50:0,sr=(t,e)=>{const n=zo(t.x,35,e.width-35)*20,i=zo(t.y,35,e.height-35)*20;return[n,i]},Gi=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Jn=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),Ji=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),Ri=(t,e=[0,0])=>{var i,o;const{positionAbsolute:n}=Gt(t,t.origin||e);return{...n,width:((i=t.computed)==null?void 0:i.width)??t.width??0,height:((o=t.computed)==null?void 0:o.height)??t.height??0}},Po=(t,e=[0,0])=>{var i,o;const{positionAbsolute:n}=Gt(t,t.origin||e);return{...n,x2:n.x+(((i=t.computed)==null?void 0:i.width)??t.width??0),y2:n.y+(((o=t.computed)==null?void 0:o.height)??t.height??0)}},ef=(t,e)=>Ji(Gi(Jn(t),Jn(e))),Qn=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},tf=t=>nn(t.width)&&nn(t.height)&&nn(t.x)&&nn(t.y),nn=t=>!isNaN(t)&&isFinite(t),nf=(t,e)=>{},of=({x:t,y:e,width:n,height:i,origin:o=[0,0]})=>!n||!i||o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:t,y:e}:{x:t-n*o[0],y:e-i*o[1]},Qi=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),ai=({x:t,y:e},[n,i,o],l=!1,r=[1,1])=>{const s={x:(t-n)/o,y:(e-i)/o};return l?Qi(s,r):s},ur=({x:t,y:e},[n,i,o])=>({x:t*o+n,y:e*o+i}),ji=(t,e,n,i,o,l)=>{const r=e/(t.width*(1+l)),s=n/(t.height*(1+l)),u=Math.min(r,s),a=Ft(u,i,o),c=t.x+t.width/2,f=t.y+t.height/2,d=e/2-c*a,h=n/2-f*a;return{x:d,y:h,zoom:a}},jn=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function Mo(t){return t!==void 0&&t!=="parent"}function kn(t){var e,n;return{width:((e=t.computed)==null?void 0:e.width)??t.width??t.initialWidth??0,height:((n=t.computed)==null?void 0:n.height)??t.height??t.initialHeight??0}}function xn(t){var e,n;return(((e=t.computed)==null?void 0:e.width)??t.width??t.initialWidth)!==void 0&&(((n=t.computed)==null?void 0:n.height)??t.height??t.initialHeight)!==void 0}function ki(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:i}){const{x:o,y:l}=ft(t),r=ai({x:o,y:l},i),{x:s,y:u}=n?Qi(r,e):r;return{xSnapped:s,ySnapped:u,...r}}const ar=t=>({width:t.offsetWidth,height:t.offsetHeight}),lf=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},rf=["INPUT","SELECT","TEXTAREA"];function sf(t){var i,o;const e=((o=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:o[0])||t.target;return rf.includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute("contenteditable"))||!!(e!=null&&e.closest(".nokey"))}const cr=t=>"clientX"in t,ft=(t,e)=>{var l,r;const n=cr(t),i=n?t.clientX:(l=t.touches)==null?void 0:l[0].clientX,o=n?t.clientY:(r=t.touches)==null?void 0:r[0].clientY;return{x:i-((e==null?void 0:e.left)??0),y:o-((e==null?void 0:e.top)??0)}},Ho=(t,e,n,i=[0,0])=>{const o=e.querySelectorAll(t);if(!o||!o.length)return null;const l=Array.from(o),r=e.getBoundingClientRect(),s={x:r.width*i[0],y:r.height*i[1]};return l.map(u=>{const a=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),position:u.getAttribute("data-handlepos"),x:(a.left-r.left-s.x)/n,y:(a.top-r.top-s.y)/n,...ar(u)}})};function uf({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:r,targetControlY:s}){const u=t*.125+o*.375+r*.375+n*.125,a=e*.125+l*.375+s*.375+i*.125,c=Math.abs(u-t),f=Math.abs(a-e);return[u,a,c,f]}function Nn(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function No({pos:t,x1:e,y1:n,x2:i,y2:o,c:l}){switch(t){case ae.Left:return[e-Nn(e-i,l),n];case ae.Right:return[e+Nn(i-e,l),n];case ae.Top:return[e,n-Nn(n-o,l)];case ae.Bottom:return[e,n+Nn(o-n,l)]}}function fr({sourceX:t,sourceY:e,sourcePosition:n=ae.Bottom,targetX:i,targetY:o,targetPosition:l=ae.Top,curvature:r=.25}){const[s,u]=No({pos:n,x1:t,y1:e,x2:i,y2:o,c:r}),[a,c]=No({pos:l,x1:i,y1:o,x2:t,y2:e,c:r}),[f,d,h,_]=uf({sourceX:t,sourceY:e,targetX:i,targetY:o,sourceControlX:s,sourceControlY:u,targetControlX:a,targetControlY:c});return[`M${t},${e} C${s},${u} ${a},${c} ${i},${o}`,f,d,h,_]}function dr({sourceX:t,sourceY:e,targetX:n,targetY:i}){const o=Math.abs(n-t)/2,l=n<t?n+o:n-o,r=Math.abs(i-e)/2,s=i<e?i+r:i-r;return[l,s,o,r]}function af({sourceNode:t,targetNode:e,selected:n=!1,zIndex:i=0,elevateOnSelect:o=!1}){var s,u;if(!o)return i;const l=n||e.selected||t.selected,r=Math.max(((s=t[Ee])==null?void 0:s.z)||0,((u=e[Ee])==null?void 0:u.z)||0,1e3);return i+(l?r:0)}function cf({sourceNode:t,targetNode:e,width:n,height:i,transform:o}){const l=Gi(Po(t),Po(e));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const r={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:i/o[2]};return Qn(r,Ji(l))>0}const ff=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`xy-edge__${t}${e||""}-${n}${i||""}`,df=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),hf=(t,e)=>{if(!t.source||!t.target)return e;let n;return Gc(t)?n={...t}:n={...t,id:ff(t)},df(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function hr({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[o,l,r,s]=dr({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,o,l,r,s]}const Ao={[ae.Left]:{x:-1,y:0},[ae.Right]:{x:1,y:0},[ae.Top]:{x:0,y:-1},[ae.Bottom]:{x:0,y:1}},gf=({source:t,sourcePosition:e=ae.Bottom,target:n})=>e===ae.Left||e===ae.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},Oo=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function mf({source:t,sourcePosition:e=ae.Bottom,target:n,targetPosition:i=ae.Top,center:o,offset:l}){const r=Ao[e],s=Ao[i],u={x:t.x+r.x*l,y:t.y+r.y*l},a={x:n.x+s.x*l,y:n.y+s.y*l},c=gf({source:u,sourcePosition:e,target:a}),f=c.x!==0?"x":"y",d=c[f];let h=[],_,m;const b={x:0,y:0},g={x:0,y:0},[k,E,v,C]=dr({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(r[f]*s[f]===-1){_=o.x??k,m=o.y??E;const I=[{x:_,y:u.y},{x:_,y:a.y}],D=[{x:u.x,y:m},{x:a.x,y:m}];r[f]===d?h=f==="x"?I:D:h=f==="x"?D:I}else{const I=[{x:u.x,y:a.y}],D=[{x:a.x,y:u.y}];if(f==="x"?h=r.x===d?D:I:h=r.y===d?I:D,e===i){const M=Math.abs(t[f]-n[f]);if(M<=l){const w=Math.min(l-1,l-M);r[f]===d?b[f]=(u[f]>t[f]?-1:1)*w:g[f]=(a[f]>n[f]?-1:1)*w}}if(e!==i){const M=f==="x"?"y":"x",w=r[f]===s[M],X=u[M]>a[M],P=u[M]<a[M];(r[f]===1&&(!w&&X||w&&P)||r[f]!==1&&(!w&&P||w&&X))&&(h=f==="x"?I:D)}const A={x:u.x+b.x,y:u.y+b.y},y={x:a.x+g.x,y:a.y+g.y},z=Math.max(Math.abs(A.x-h[0].x),Math.abs(y.x-h[0].x)),V=Math.max(Math.abs(A.y-h[0].y),Math.abs(y.y-h[0].y));z>=V?(_=(A.x+y.x)/2,m=h[0].y):(_=h[0].x,m=(A.y+y.y)/2)}return[[t,{x:u.x+b.x,y:u.y+b.y},...h,{x:a.x+g.x,y:a.y+g.y},n],_,m,v,C]}function _f(t,e,n,i){const o=Math.min(Oo(t,e)/2,Oo(e,n)/2,i),{x:l,y:r}=e;if(t.x===l&&l===n.x||t.y===r&&r===n.y)return`L${l} ${r}`;if(t.y===r){const a=t.x<n.x?-1:1,c=t.y<n.y?1:-1;return`L ${l+o*a},${r}Q ${l},${r} ${l},${r+o*c}`}const s=t.x<n.x?1:-1,u=t.y<n.y?-1:1;return`L ${l},${r+o*u}Q ${l},${r} ${l+o*s},${r}`}function Zt({sourceX:t,sourceY:e,sourcePosition:n=ae.Bottom,targetX:i,targetY:o,targetPosition:l=ae.Top,borderRadius:r=5,centerX:s,centerY:u,offset:a=20}){const[c,f,d,h,_]=mf({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:o},targetPosition:l,center:{x:s,y:u},offset:a});return[c.reduce((b,g,k)=>{let E="";return k>0&&k<c.length-1?E=_f(c[k-1],g,c[k+1],r):E=`${k===0?"M":"L"}${g.x} ${g.y}`,b+=E,b},""),f,d,h,_]}function To(t){var e,n,i;return!!((e=t==null?void 0:t[Ee])!=null&&e.handleBounds||(n=t==null?void 0:t.handles)!=null&&n.length)&&!!((i=t==null?void 0:t.computed)!=null&&i.width||t!=null&&t.width||t!=null&&t.initialWidth)}function yf(t){var h,_,m;const{sourceNode:e,targetNode:n}=t;if(!To(e)||!To(n))return null;const i=((h=e[Ee])==null?void 0:h.handleBounds)||Io(e.handles),o=((_=n[Ee])==null?void 0:_.handleBounds)||Io(n.handles),l=Xo((i==null?void 0:i.source)??[],t.sourceHandle),r=Xo(t.connectionMode===Ct.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),t.targetHandle),s=(l==null?void 0:l.position)||ae.Bottom,u=(r==null?void 0:r.position)||ae.Top;if(!l||!r)return(m=t.onError)==null||m.call(t,"008",bn.error008(l?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const[a,c]=Do(s,e,l),[f,d]=Do(u,n,r);return{sourceX:a,sourceY:c,targetX:f,targetY:d,sourcePosition:s,targetPosition:u}}function Io(t){if(!t)return null;const e=[],n=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?e.push(i):i.type==="target"&&n.push(i);return{source:e,target:n}}function Do(t,e,n=null){var s,u,a,c;const i=((n==null?void 0:n.x)??0)+(((u=(s=e.computed)==null?void 0:s.positionAbsolute)==null?void 0:u.x)??0),o=((n==null?void 0:n.y)??0)+(((c=(a=e.computed)==null?void 0:a.positionAbsolute)==null?void 0:c.y)??0),{width:l,height:r}=n??kn(e);switch(t){case ae.Top:return[i+l/2,o];case ae.Right:return[i+l,o+r/2];case ae.Bottom:return[i+l/2,o+r];case ae.Left:return[i,o+r/2]}}function Xo(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function Li(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function bf(t,{id:e,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:o}){const l=new Set;return t.reduce((r,s)=>([s.markerStart||i,s.markerEnd||o].forEach(u=>{if(u&&typeof u=="object"){const a=Li(u,e);l.has(a)||(r.push({id:a,color:u.color||n,...u}),l.add(a))}}),r),[]).sort((r,s)=>r.id.localeCompare(s.id))}function wf(t,e,n=[0,0],i){return t.map(o=>{var l,r,s,u,a,c;if(o.parentNode&&!e.has(o.parentNode))throw new Error(`Parent node ${o.parentNode} not found`);if(o.parentNode||i!=null&&i[o.id]){const f=o.parentNode?e.get(o.parentNode):null,{x:d,y:h,z:_}=mr(o,t,e,{...o.position,z:((l=o[Ee])==null?void 0:l.z)??0},(f==null?void 0:f.origin)||n),m=d!==((s=(r=o.computed)==null?void 0:r.positionAbsolute)==null?void 0:s.x)||h!==((a=(u=o.computed)==null?void 0:u.positionAbsolute)==null?void 0:a.y);o.computed.positionAbsolute=m?{x:d,y:h}:(c=o.computed)==null?void 0:c.positionAbsolute,o[Ee].z=_,i!=null&&i[o.id]&&(o[Ee].isParent=!0)}return o})}function gr(t,e,n={nodeOrigin:[0,0],elevateNodesOnSelect:!0,defaults:{}}){const i=new Map(e);e.clear();const o={},l=n!=null&&n.elevateNodesOnSelect?1e3:0,r=t.map(u=>{var h,_,m;const a=i.get(u.id);if(u===((h=a==null?void 0:a[Ee])==null?void 0:h.userProvidedNode))return e.set(u.id,a),a;const c={...n.defaults,...u,computed:{positionAbsolute:u.position,width:(_=u.computed)==null?void 0:_.width,height:(m=u.computed)==null?void 0:m.height}},f=(nn(u.zIndex)?u.zIndex:0)+(u.selected?l:0),d=(u==null?void 0:u[Ee])||(a==null?void 0:a[Ee]);return c.parentNode&&(o[c.parentNode]=!0),Object.defineProperty(c,Ee,{enumerable:!1,value:{handleBounds:d==null?void 0:d.handleBounds,z:f,userProvidedNode:u}}),e.set(c.id,c),c});return wf(r,e,n.nodeOrigin,o)}function mr(t,e,n,i,o){var s,u;if(!t.parentNode)return i;const l=n.get(t.parentNode),{position:r}=Gt(l,(l==null?void 0:l.origin)||o);return mr(l,e,n,{x:(i.x??0)+r.x,y:(i.y??0)+r.y,z:(((s=l[Ee])==null?void 0:s.z)??0)>(i.z??0)?((u=l[Ee])==null?void 0:u.z)??0:i.z??0},l.origin||o)}function kf(t,e,n,i,o,l){const r=i==null?void 0:i.querySelector(".xyflow__viewport");if(!r)return null;const s=window.getComputedStyle(r),{m22:u}=new window.DOMMatrixReadOnly(s.transform);return e.map(c=>{var d,h;const f=t.get(c.id);if(f){const _=ar(f.nodeElement);if(!!(_.width&&_.height&&(((d=c.computed)==null?void 0:d.width)!==_.width||((h=c.computed)==null?void 0:h.height)!==_.height||f.forceUpdate))){l==null||l(c.id,_);const b={...c,computed:{...c.computed,..._},[Ee]:{...c[Ee],handleBounds:{source:Ho(".source",f.nodeElement,u,c.origin||o),target:Ho(".target",f.nodeElement,u,c.origin||o)}}};return n.set(c.id,b),b}}return c})}function vf({delta:t,panZoom:e,transform:n,translateExtent:i,width:o,height:l}){if(!e||!t.x&&!t.y)return!1;const r=e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[o,l]],i);return!!r&&(r.x!==n[0]||r.y!==n[1]||r.k!==n[2])}function _r(t,e,n){t.clear(),e.clear();for(const i of n){const{source:o,target:l,sourceHandle:r=null,targetHandle:s=null}=i,u=`${o}-source-${r}`,a=`${l}-target-${s}`,c=t.get(u)||new Map,f=t.get(a)||new Map,d={edgeId:i.id,source:o,target:l,sourceHandle:r,targetHandle:s};e.set(i.id,i),t.set(u,c.set(`${l}-${s}`,d)),t.set(a,f.set(`${o}-${r}`,d))}}function vi(t){return(e,n,i)=>t==null?void 0:t(e,i)}function yr(t,e){if(!t.parentNode)return!1;const n=e.find(i=>i.id===i.parentNode);return n?n.selected?!0:yr(n,e):!1}function Yo(t,e,n){let i=t;do{if(i!=null&&i.matches(e))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function Sf(t,e,n,i){return t.filter(o=>(o.selected||o.id===i)&&(!o.parentNode||!yr(o,t))&&(o.draggable||e&&typeof o.draggable>"u")).map(o=>{var l,r,s,u,a,c,f;return{id:o.id,position:o.position||{x:0,y:0},distance:{x:n.x-(((r=(l=o.computed)==null?void 0:l.positionAbsolute)==null?void 0:r.x)??0),y:n.y-(((u=(s=o.computed)==null?void 0:s.positionAbsolute)==null?void 0:u.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode,origin:o.origin,expandParent:o.expandParent,computed:{positionAbsolute:((a=o.computed)==null?void 0:a.positionAbsolute)||{x:0,y:0},width:((c=o.computed)==null?void 0:c.width)||0,height:((f=o.computed)==null?void 0:f.height)||0}}})}function Si({nodeId:t,dragItems:e,nodeLookup:n}){const i=e.map(o=>({...n.get(o.id),position:o.position,computed:{...o.computed,positionAbsolute:o.computed.positionAbsolute}}));return[t?i.find(o=>o.id===t):i[0],i]}function Ef({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:i,onDragStop:o}){let l={x:null,y:null},r=0,s=[],u=!1,a={x:0,y:0},c=null,f=!1,d=null;function h({noDragClassName:m,handleSelector:b,domNode:g,isSelectable:k,nodeId:E}){d=Ge(g);function v({x:D,y:A},y){const{nodeLookup:z,nodeExtent:V,snapGrid:M,snapToGrid:w,nodeOrigin:X,onNodeDrag:P,onSelectionDrag:R,onError:T,updateNodePositions:K}=e();l={x:D,y:A};let Z=!1,U={x:0,y:0,x2:0,y2:0};if(s.length>1&&V){const O=wn(s,{nodeOrigin:X});U=Jn(O)}if(s=s.map(O=>{var he,me;let se={x:D-O.distance.x,y:A-O.distance.y};w&&(se=Qi(se,M));const re=[[V[0][0],V[0][1]],[V[1][0],V[1][1]]];s.length>1&&V&&!O.extent&&(re[0][0]=O.computed.positionAbsolute.x-U.x+V[0][0],re[1][0]=O.computed.positionAbsolute.x+(((he=O.computed)==null?void 0:he.width)??0)-U.x2+V[1][0],re[0][1]=O.computed.positionAbsolute.y-U.y+V[0][1],re[1][1]=O.computed.positionAbsolute.y+(((me=O.computed)==null?void 0:me.height)??0)-U.y2+V[1][1]);const{position:ce,positionAbsolute:G}=xc({nodeId:O.id,nextPosition:se,nodeLookup:z,nodeExtent:re,nodeOrigin:X,onError:T});return Z=Z||O.position.x!==ce.x||O.position.y!==ce.y,O.position=ce,O.computed.positionAbsolute=G,O}),!!Z&&(K(s,!0),y&&(i||P||!E&&R))){const[O,se]=Si({nodeId:E,dragItems:s,nodeLookup:z});i==null||i(y,s,O,se),P==null||P(y,O,se),E||vi(R)(y,O,se)}}function C(){if(!c)return;const[D,A]=sr(a,c);if(D!==0||A!==0){const{transform:y,panBy:z}=e();l.x=(l.x??0)-D/y[2],l.y=(l.y??0)-A/y[2],z({x:D,y:A})&&v(l,null)}r=requestAnimationFrame(C)}function H(D){var U;const{nodes:A,nodeLookup:y,multiSelectionActive:z,nodesDraggable:V,transform:M,snapGrid:w,snapToGrid:X,selectNodesOnDrag:P,onNodeDragStart:R,onSelectionDragStart:T,unselectNodesAndEdges:K}=e();f=!0,(!P||!k)&&!z&&E&&((U=y.get(E))!=null&&U.selected||K()),k&&P&&E&&(t==null||t(E));const Z=ki(D.sourceEvent,{transform:M,snapGrid:w,snapToGrid:X});if(l=Z,s=Sf(A,V,Z,E),s.length>0&&(n||R||!E&&T)){const[O,se]=Si({nodeId:E,dragItems:s,nodeLookup:y});n==null||n(D.sourceEvent,s,O,se),R==null||R(D.sourceEvent,O,se),E||vi(T)(D.sourceEvent,O,se)}}const I=ia().on("start",D=>{const{domNode:A,nodeDragThreshold:y,transform:z,snapGrid:V,snapToGrid:M}=e();y===0&&H(D),l=ki(D.sourceEvent,{transform:z,snapGrid:V,snapToGrid:M}),c=(A==null?void 0:A.getBoundingClientRect())||null,a=ft(D.sourceEvent,c)}).on("drag",D=>{const{autoPanOnNodeDrag:A,transform:y,snapGrid:z,snapToGrid:V,nodeDragThreshold:M}=e(),w=ki(D.sourceEvent,{transform:y,snapGrid:z,snapToGrid:V});if(!u&&A&&f&&(u=!0,C()),!f){const X=w.xSnapped-(l.x??0),P=w.ySnapped-(l.y??0);Math.sqrt(X*X+P*P)>M&&H(D)}(l.x!==w.xSnapped||l.y!==w.ySnapped)&&s&&f&&(a=ft(D.sourceEvent,c),v(w,D.sourceEvent))}).on("end",D=>{if(f&&(u=!1,f=!1,cancelAnimationFrame(r),s.length>0)){const{nodeLookup:A,updateNodePositions:y,onNodeDragStop:z,onSelectionDragStop:V}=e();if(y(s,!1),o||z||!E&&V){const[M,w]=Si({nodeId:E,dragItems:s,nodeLookup:A});o==null||o(D.sourceEvent,s,M,w),z==null||z(D.sourceEvent,M,w),E||vi(V)(D.sourceEvent,M,w)}}}).filter(D=>{const A=D.target;return!D.button&&(!m||!Yo(A,`.${m}`,g))&&(!b||Yo(A,b,g))});d.call(I)}function _(){d==null||d.on(".drag",null)}return{update:h,destroy:_}}function Vo(t,e,n,i){return(e[n]||[]).reduce((o,l)=>{var r,s,u,a;return`${t.id}-${l.id}-${n}`!==i&&o.push({id:l.id||null,type:n,nodeId:t.id,x:(((s=(r=t.computed)==null?void 0:r.positionAbsolute)==null?void 0:s.x)??0)+l.x+l.width/2,y:(((a=(u=t.computed)==null?void 0:u.positionAbsolute)==null?void 0:a.y)??0)+l.y+l.height/2}),o},[])}function Cf(t,e,n){let i=[],o=1/0;for(const l of n){const r=Math.sqrt(Math.pow(l.x-t.x,2)+Math.pow(l.y-t.y,2));r<=e&&(r<o?i=[l]:r===o&&i.push(l),o=r)}return i.length?i.length===1?i[0]:i.find(l=>l.type==="target")||i[0]:null}function zf({nodes:t,nodeId:e,handleId:n,handleType:i}){return t.reduce((o,l)=>{if(l[Ee]){const{handleBounds:r}=l[Ee];let s=[],u=[];r&&(s=Vo(l,r,"source",`${e}-${n}-${i}`),u=Vo(l,r,"target",`${e}-${n}-${i}`)),o.push(...s,...u)}return o},[])}function br(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function Pf(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}const wr=()=>!0;let An=null;function Mf(t,{connectionMode:e,connectionRadius:n,handleId:i,nodeId:o,edgeUpdaterType:l,isTarget:r,domNode:s,nodes:u,lib:a,autoPanOnConnect:c,flowId:f,panBy:d,cancelConnection:h,onConnectStart:_,onConnect:m,onConnectEnd:b,isValidConnection:g=wr,onEdgeUpdateEnd:k,updateConnection:E,getTransform:v}){const C=lf(t.target);let H=0,I;const{x:D,y:A}=ft(t),y=C==null?void 0:C.elementFromPoint(D,A),z=br(l,y),V=s==null?void 0:s.getBoundingClientRect();if(!V||!z)return;let M=ft(t,V),w=!1,X=null,P=!1,R=null;const T=zf({nodes:u,nodeId:o,handleId:i,handleType:z});function K(){if(!c||!V)return;const[O,se]=sr(M,V);d({x:O,y:se}),H=requestAnimationFrame(K)}An={nodeId:o,handleId:i,type:z},E({connectionPosition:M,connectionStatus:null,connectionStartHandle:An,connectionEndHandle:null}),_==null||_(t,{nodeId:o,handleId:i,handleType:z});function Z(O){const se=v();M=ft(O,V),I=Cf(ai(M,se,!1,[1,1]),n,T),w||(K(),w=!0);const re=kr(O,{handle:I,connectionMode:e,fromNodeId:o,fromHandleId:i,fromType:r?"target":"source",isValidConnection:g,doc:C,lib:a,flowId:f});R=re.handleDomNode,X=re.connection,P=re.isValid,E({connectionStartHandle:An,connectionPosition:I&&P?ur({x:I.x,y:I.y},se):M,connectionStatus:Pf(!!I,P),connectionEndHandle:re.endHandle})}function U(O){(I||R)&&X&&P&&(m==null||m(X)),b==null||b(O),l&&(k==null||k(O)),h(),cancelAnimationFrame(H),w=!1,P=!1,X=null,R=null,An=null,C.removeEventListener("mousemove",Z),C.removeEventListener("mouseup",U),C.removeEventListener("touchmove",Z),C.removeEventListener("touchend",U)}C.addEventListener("mousemove",Z),C.addEventListener("mouseup",U),C.addEventListener("touchmove",Z),C.addEventListener("touchend",U)}function kr(t,{handle:e,connectionMode:n,fromNodeId:i,fromHandleId:o,fromType:l,doc:r,lib:s,flowId:u,isValidConnection:a=wr}){const c=l==="target",f=e?r.querySelector(`.${s}-flow__handle[data-id="${u}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`):null,{x:d,y:h}=ft(t),_=r.elementFromPoint(d,h),m=_!=null&&_.classList.contains(`${s}-flow__handle`)?_:f,b={handleDomNode:m,isValid:!1,connection:null,endHandle:null};if(m){const g=br(void 0,m),k=m.getAttribute("data-nodeid"),E=m.getAttribute("data-handleid"),v=m.classList.contains("connectable"),C=m.classList.contains("connectableend");if(!k)return b;const H={source:c?k:i,sourceHandle:c?E:o,target:c?i:k,targetHandle:c?o:E};b.connection=H,v&&C&&(n===Ct.Strict?c&&g==="source"||!c&&g==="target":k!==i||E!==o)&&(b.endHandle={nodeId:k,handleId:E,type:g},b.isValid=a(H))}return b}const Hf={onPointerDown:Mf,isValid:kr};function Nf({domNode:t,panZoom:e,getTransform:n,getViewScale:i}){const o=Ge(t);function l({translateExtent:s,width:u,height:a,zoomStep:c=10,pannable:f=!0,zoomable:d=!0,inversePan:h=!1}){const _=g=>{const k=n();if(g.sourceEvent.type!=="wheel"||!e)return;const E=-g.sourceEvent.deltaY*(g.sourceEvent.deltaMode===1?.05:g.sourceEvent.deltaMode?1:.002)*c,v=k[2]*Math.pow(2,E);e.scaleTo(v)},m=g=>{const k=n();if(g.sourceEvent.type!=="mousemove"||!e)return;const E=i()*Math.max(k[2],Math.log(k[2]))*(h?-1:1),v={x:k[0]-g.sourceEvent.movementX*E,y:k[1]-g.sourceEvent.movementY*E},C=[[0,0],[u,a]];e.setViewportConstrained({x:v.x,y:v.y,zoom:k[2]},C,s)},b=or().on("zoom",f?m:null).on("zoom.wheel",d?_:null);o.call(b,{})}function r(){o.on("zoom",null)}return{update:l,destroy:r,pointer:Qe}}const Af=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,ci=t=>({x:t.x,y:t.y,zoom:t.k}),Ei=({x:t,y:e,zoom:n})=>ui.translate(t,e).scale(n),It=(t,e)=>t.target.closest(`.${e}`),vr=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),Ci=(t,e=0)=>typeof e=="number"&&e>0?t.transition().duration(e):t,Sr=t=>{const e=t.ctrlKey&&jn()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function Of({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:l,zoomOnPinch:r,onPanZoomStart:s,onPanZoom:u,onPanZoomEnd:a}){return c=>{if(It(c,e))return!1;c.preventDefault(),c.stopImmediatePropagation();const f=n.property("__zoom").k||1,d=jn();if(c.ctrlKey&&r&&d){const g=Qe(c),k=Sr(c),E=f*Math.pow(2,k);i.scaleTo(n,E,g,c);return}const h=c.deltaMode===1?20:1;let _=o===ot.Vertical?0:c.deltaX*h,m=o===ot.Horizontal?0:c.deltaY*h;!d&&c.shiftKey&&o!==ot.Vertical&&(_=c.deltaY*h,m=0),i.translateBy(n,-(_/f)*l,-(m/f)*l,{internal:!0});const b=ci(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,s==null||s(c,b)),t.isPanScrolling&&(u==null||u(c,b),t.panScrollTimeout=setTimeout(()=>{a==null||a(c,b),t.isPanScrolling=!1},150))}}function Tf({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(i,o){if(!e||It(i,t))return null;i.preventDefault(),n.call(this,i,o)}}function If({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return i=>{var l,r,s;if((l=i.sourceEvent)!=null&&l.internal)return;const o=ci(i.transform);t.mouseButton=((r=i.sourceEvent)==null?void 0:r.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=o,((s=i.sourceEvent)==null?void 0:s.type)==="mousedown"&&e(!0),n&&(n==null||n(i.sourceEvent,o))}}function Df({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:i,onPanZoom:o}){return l=>{var r,s;t.usedRightMouseButton=!!(n&&vr(e,t.mouseButton??0)),(r=l.sourceEvent)!=null&&r.sync||i([l.transform.x,l.transform.y,l.transform.k]),o&&!((s=l.sourceEvent)!=null&&s.internal)&&(o==null||o(l.sourceEvent,ci(l.transform)))}}function Xf({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:l}){return r=>{var s;if(!((s=r.sourceEvent)!=null&&s.internal)&&(t.isZoomingOrPanning=!1,l&&vr(e,t.mouseButton??0)&&!t.usedRightMouseButton&&r.sourceEvent&&l(r.sourceEvent),t.usedRightMouseButton=!1,i(!1),o&&Af(t.prevViewport,r.transform))){const u=ci(r.transform);t.prevViewport=u,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{o==null||o(r.sourceEvent,u)},n?150:0)}}}function Yf({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:l,userSelectionActive:r,noWheelClassName:s,noPanClassName:u,lib:a}){return c=>{const f=t||e,d=n&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(It(c,`${a}-flow__node`)||It(c,`${a}-flow__edge`)))return!0;if(!i&&!f&&!o&&!l&&!n||r||!l&&c.type==="dblclick"||It(c,s)&&c.type==="wheel"||It(c,u)&&(c.type!=="wheel"||o&&c.type==="wheel"&&!t)||!n&&c.ctrlKey&&c.type==="wheel"||!f&&!o&&!d&&c.type==="wheel"||!i&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(i)&&!i.includes(c.button)&&(c.type==="mousedown"||c.type==="touchstart"))return!1;const h=Array.isArray(i)&&i.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&h}}function Vf({domNode:t,minZoom:e,maxZoom:n,translateExtent:i,viewport:o,onPanZoom:l,onPanZoomStart:r,onPanZoomEnd:s,onTransformChange:u,onDraggingChange:a}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=t.getBoundingClientRect(),d=or().scaleExtent([e,n]).translateExtent(i),h=Ge(t).call(d);k({x:o.x,y:o.y,zoom:Ft(o.zoom,e,n)},[[0,0],[f.width,f.height]],i);const _=h.on("wheel.zoom");d.wheelDelta(Sr);function m(y,z){h&&(d==null||d.transform(Ci(h,z==null?void 0:z.duration),y))}function b({noWheelClassName:y,noPanClassName:z,onPaneContextMenu:V,userSelectionActive:M,panOnScroll:w,panOnDrag:X,panOnScrollMode:P,panOnScrollSpeed:R,preventScrolling:T,zoomOnPinch:K,zoomOnScroll:Z,zoomOnDoubleClick:U,zoomActivationKeyPressed:O,lib:se}){M&&!c.isZoomingOrPanning&&g();const ce=w&&!O&&!M?Of({zoomPanValues:c,noWheelClassName:y,d3Selection:h,d3Zoom:d,panOnScrollMode:P,panOnScrollSpeed:R,zoomOnPinch:K,onPanZoomStart:r,onPanZoom:l,onPanZoomEnd:s}):Tf({noWheelClassName:y,preventScrolling:T,d3ZoomHandler:_});if(h.on("wheel.zoom",ce,{passive:!1}),!M){const he=If({zoomPanValues:c,onDraggingChange:a,onPanZoomStart:r});d.on("start",he);const me=Df({zoomPanValues:c,panOnDrag:X,onPaneContextMenu:!!V,onPanZoom:l,onTransformChange:u});d.on("zoom",me);const F=Xf({zoomPanValues:c,panOnDrag:X,panOnScroll:w,onPaneContextMenu:V,onPanZoomEnd:s,onDraggingChange:a});d.on("end",F)}const G=Yf({zoomActivationKeyPressed:O,panOnDrag:X,zoomOnScroll:Z,panOnScroll:w,zoomOnDoubleClick:U,zoomOnPinch:K,userSelectionActive:M,noPanClassName:z,noWheelClassName:y,lib:se});d.filter(G)}function g(){d.on("zoom",null)}function k(y,z,V){const M=Ei(y),w=d==null?void 0:d.constrain()(M,z,V);return w&&m(w),w}function E(y,z){const V=Ei(y);return m(V,z),V}function v(y){if(h){const z=Ei(y),V=h.property("__zoom");(V.k!==y.zoom||V.x!==y.x||V.y!==y.y)&&(d==null||d.transform(h,z,null,{sync:!0}))}}function C(){const y=h?ir(h.node()):{x:0,y:0,k:1};return{x:y.x,y:y.y,zoom:y.k}}function H(y,z){h&&(d==null||d.scaleTo(Ci(h,z==null?void 0:z.duration),y))}function I(y,z){h&&(d==null||d.scaleBy(Ci(h,z==null?void 0:z.duration),y))}function D(y){d==null||d.scaleExtent(y)}function A(y){d==null||d.translateExtent(y)}return{update:b,destroy:g,setViewport:E,setViewportConstrained:k,getViewport:C,scaleTo:H,scaleBy:I,setScaleExtent:D,setTranslateExtent:A,syncViewport:v}}var Ro;(function(t){t.Line="line",t.Handle="handle"})(Ro||(Ro={}));function Rf(t){let e,n,i,o,l,r;const s=t[41].default,u=Ve(s,t,t[40],null);return{c(){e=be("div"),u&&u.c(),S(e,"data-handleid",t[13]),S(e,"data-nodeid",t[11]),S(e,"data-handlepos",t[2]),S(e,"data-id",n=t[9]+"-"+t[11]+"-"+(t[0]||null)+"-"+t[1]),S(e,"class",i=ke(["svelte-flow__handle",`svelte-flow__handle-${t[2]}`,"nodrag","nopan",t[2],{valid:t[6],connectingto:t[5],connectingfrom:t[7]},t[4]])),S(e,"style",t[3]),S(e,"role","button"),S(e,"tabindex","-1"),fe(e,"source",!t[10]),fe(e,"target",t[10]),fe(e,"connectablestart",t[8]),fe(e,"connectableend",t[8]),fe(e,"connectable",t[8]),fe(e,"connectionindicator",t[8])},m(a,c){B(a,e,c),u&&u.m(e,null),o=!0,l||(r=[ye(e,"mousedown",t[30]),ye(e,"touchstart",t[30])],l=!0)},p(a,c){u&&u.p&&(!o||c[1]&512)&&Le(u,s,a,a[40],o?Re(s,a[40],c,null):We(a[40]),null),(!o||c[0]&4)&&S(e,"data-handlepos",a[2]),(!o||c[0]&515&&n!==(n=a[9]+"-"+a[11]+"-"+(a[0]||null)+"-"+a[1]))&&S(e,"data-id",n),(!o||c[0]&244&&i!==(i=ke(["svelte-flow__handle",`svelte-flow__handle-${a[2]}`,"nodrag","nopan",a[2],{valid:a[6],connectingto:a[5],connectingfrom:a[7]},a[4]])))&&S(e,"class",i),(!o||c[0]&8)&&S(e,"style",a[3]),(!o||c[0]&1268)&&fe(e,"source",!a[10]),(!o||c[0]&1268)&&fe(e,"target",a[10]),(!o||c[0]&500)&&fe(e,"connectablestart",a[8]),(!o||c[0]&500)&&fe(e,"connectableend",a[8]),(!o||c[0]&500)&&fe(e,"connectable",a[8]),(!o||c[0]&500)&&fe(e,"connectionindicator",a[8])},i(a){o||(Y(u,a),o=!0)},o(a){L(u,a),o=!1},d(a){a&&W(e),u&&u.d(a),l=!1,Ne(r)}}}function Lf(t,e,n){let i,o,l,r,s,u,a,c,f,d,h,_,m,b,g,k,E,v,C,H,I,{$$slots:D={},$$scope:A}=e,{id:y=void 0}=e,{type:z="source"}=e,{position:V=ae.Top}=e,{style:M=void 0}=e,{isConnectable:w=void 0}=e,{onconnect:X=void 0}=e,{ondisconnect:P=void 0}=e,{class:R=void 0}=e;const T=z==="target",K=Wn("svelteflow__node_id"),Z=Wn("svelteflow__node_connectable");J(t,Z,Q=>n(39,I=Q));const U=y||null,O=Ce(),{connectionMode:se,domNode:re,nodes:ce,connectionRadius:G,viewport:he,isValidConnection:me,lib:F,addEdge:Me,onedgecreate:Ae,panBy:De,cancelConnection:Oe,updateConnection:qe,autoPanOnConnect:ve,edges:rt,connectionLookup:st,onconnect:et,onconnectstart:tt,onconnectend:ee,flowId:mt,connection:_t}=O;J(t,se,Q=>n(50,E=Q)),J(t,re,Q=>n(52,C=Q)),J(t,ce,Q=>n(51,v=Q)),J(t,G,Q=>n(53,H=Q)),J(t,he,Q=>n(42,c=Q)),J(t,me,Q=>n(47,m=Q)),J(t,F,Q=>n(49,k=Q)),J(t,Ae,Q=>n(46,_=Q)),J(t,ve,Q=>n(48,g=Q)),J(t,rt,Q=>n(38,a=Q)),J(t,st,Q=>n(37,u=Q)),J(t,et,Q=>n(45,h=Q)),J(t,tt,Q=>n(44,d=Q)),J(t,ee,Q=>n(43,f=Q)),J(t,mt,Q=>n(9,b=Q)),J(t,_t,Q=>n(36,s=Q));function q(Q){const ut=cr(Q);(ut&&Q.button===0||!ut)&&Hf.onPointerDown(Q,{handleId:U,nodeId:K,isTarget:T,connectionRadius:H,domNode:C,nodes:v,connectionMode:E,lib:k,autoPanOnConnect:g,flowId:b,isValidConnection:m,updateConnection:qe,cancelConnection:Oe,panBy:De,onConnect:pe=>{const Fe=_?_(pe):pe;Fe&&(Me(Fe),h==null||h(pe))},onConnectStart:(pe,Fe)=>{d==null||d(pe,{nodeId:Fe.nodeId,handleId:Fe.handleId,handleType:Fe.handleType})},onConnectEnd:pe=>{f==null||f(pe)},getTransform:()=>[c.x,c.y,c.zoom]})}let Ue=null,Be;return t.$$set=Q=>{"id"in Q&&n(0,y=Q.id),"type"in Q&&n(1,z=Q.type),"position"in Q&&n(2,V=Q.position),"style"in Q&&n(3,M=Q.style),"isConnectable"in Q&&n(31,w=Q.isConnectable),"onconnect"in Q&&n(32,X=Q.onconnect),"ondisconnect"in Q&&n(33,P=Q.ondisconnect),"class"in Q&&n(4,R=Q.class),"$$scope"in Q&&n(40,A=Q.$$scope)},t.$$.update=()=>{var Q,ut,pe,Fe,zt,Pt;if(t.$$.dirty[1]&257&&n(8,i=w!==void 0?w:I),t.$$.dirty[0]&3|t.$$.dirty[1]&198&&(X||P)&&n(35,Be=u.get(`${K}-${z}-${y||null}`)),t.$$.dirty[1]&30){if(Ue&&!Uc(Be,Ue)){const Mt=Be??new Map;Co(Ue,Mt,P),Co(Mt,Ue,X)}n(34,Ue=Be??new Map)}t.$$.dirty[0]&2|t.$$.dirty[1]&32&&n(7,o=((Q=s.startHandle)==null?void 0:Q.nodeId)===K&&((ut=s.startHandle)==null?void 0:ut.type)===z&&((pe=s.startHandle)==null?void 0:pe.handleId)===U),t.$$.dirty[0]&2|t.$$.dirty[1]&32&&n(5,l=((Fe=s.endHandle)==null?void 0:Fe.nodeId)===K&&((zt=s.endHandle)==null?void 0:zt.type)===z&&((Pt=s.endHandle)==null?void 0:Pt.handleId)===U),t.$$.dirty[0]&32|t.$$.dirty[1]&32&&n(6,r=l&&s.status==="valid")},[y,z,V,M,R,l,r,o,i,b,T,K,Z,U,se,re,ce,G,he,me,F,Ae,ve,rt,st,et,tt,ee,mt,_t,q,w,X,P,Ue,Be,s,u,a,I,A,D]}class Wf extends oe{constructor(e){super(),ie(this,e,Lf,Rf,le,{id:0,type:1,position:2,style:3,isConnectable:31,onconnect:32,ondisconnect:33,class:4},null,[-1,-1])}}const hn=Wf;function Bf(t){var u;let e,n,i=((u=t[0])==null?void 0:u.label)+"",o,l,r,s;return e=new hn({props:{type:"target",position:t[1]}}),r=new hn({props:{type:"source",position:t[2]}}),{c(){$(e.$$.fragment),n=de(),o=xe(i),l=de(),$(r.$$.fragment)},m(a,c){j(e,a,c),B(a,n,c),B(a,o,c),B(a,l,c),j(r,a,c),s=!0},p(a,[c]){var h;const f={};c&2&&(f.position=a[1]),e.$set(f),(!s||c&1)&&i!==(i=((h=a[0])==null?void 0:h.label)+"")&&qt(o,i);const d={};c&4&&(d.position=a[2]),r.$set(d)},i(a){s||(Y(e.$$.fragment,a),Y(r.$$.fragment,a),s=!0)},o(a){L(e.$$.fragment,a),L(r.$$.fragment,a),s=!1},d(a){a&&(W(n),W(o),W(l)),x(e,a),x(r,a)}}}function pf(t,e,n){let{data:i={label:"Node"}}=e,{targetPosition:o=ae.Top}=e,{sourcePosition:l=ae.Bottom}=e,{id:r=""}=e,{width:s=void 0}=e,{height:u=void 0}=e,{selected:a=void 0}=e,{type:c=void 0}=e,{zIndex:f=void 0}=e,{dragging:d=!1}=e,{dragHandle:h=void 0}=e,{positionAbsoluteX:_=0}=e,{positionAbsoluteY:m=0}=e,{isConnectable:b=void 0}=e;return t.$$set=g=>{"data"in g&&n(0,i=g.data),"targetPosition"in g&&n(1,o=g.targetPosition),"sourcePosition"in g&&n(2,l=g.sourcePosition),"id"in g&&n(3,r=g.id),"width"in g&&n(4,s=g.width),"height"in g&&n(5,u=g.height),"selected"in g&&n(6,a=g.selected),"type"in g&&n(7,c=g.type),"zIndex"in g&&n(8,f=g.zIndex),"dragging"in g&&n(9,d=g.dragging),"dragHandle"in g&&n(10,h=g.dragHandle),"positionAbsoluteX"in g&&n(11,_=g.positionAbsoluteX),"positionAbsoluteY"in g&&n(12,m=g.positionAbsoluteY),"isConnectable"in g&&n(13,b=g.isConnectable)},[i,o,l,r,s,u,a,c,f,d,h,_,m,b]}class Kf extends oe{constructor(e){super(),ie(this,e,pf,Bf,le,{data:0,targetPosition:1,sourcePosition:2,id:3,width:4,height:5,selected:6,type:7,zIndex:8,dragging:9,dragHandle:10,positionAbsoluteX:11,positionAbsoluteY:12,isConnectable:13})}}const Er=Kf;function Ff(t){var r;let e=((r=t[0])==null?void 0:r.label)+"",n,i,o,l;return o=new hn({props:{type:"source",position:t[1]}}),{c(){n=xe(e),i=de(),$(o.$$.fragment)},m(s,u){B(s,n,u),B(s,i,u),j(o,s,u),l=!0},p(s,[u]){var c;(!l||u&1)&&e!==(e=((c=s[0])==null?void 0:c.label)+"")&&qt(n,e);const a={};u&2&&(a.position=s[1]),o.$set(a)},i(s){l||(Y(o.$$.fragment,s),l=!0)},o(s){L(o.$$.fragment,s),l=!1},d(s){s&&(W(n),W(i)),x(o,s)}}}function Zf(t,e,n){let{data:i={label:"Node"}}=e,{sourcePosition:o=ae.Bottom}=e,{id:l=""}=e,{width:r=void 0}=e,{height:s=void 0}=e,{selected:u=void 0}=e,{targetPosition:a=void 0}=e,{type:c=void 0}=e,{zIndex:f=void 0}=e,{dragging:d=!1}=e,{dragHandle:h=void 0}=e,{positionAbsoluteX:_=0}=e,{positionAbsoluteY:m=0}=e,{isConnectable:b=void 0}=e;return t.$$set=g=>{"data"in g&&n(0,i=g.data),"sourcePosition"in g&&n(1,o=g.sourcePosition),"id"in g&&n(2,l=g.id),"width"in g&&n(3,r=g.width),"height"in g&&n(4,s=g.height),"selected"in g&&n(5,u=g.selected),"targetPosition"in g&&n(6,a=g.targetPosition),"type"in g&&n(7,c=g.type),"zIndex"in g&&n(8,f=g.zIndex),"dragging"in g&&n(9,d=g.dragging),"dragHandle"in g&&n(10,h=g.dragHandle),"positionAbsoluteX"in g&&n(11,_=g.positionAbsoluteX),"positionAbsoluteY"in g&&n(12,m=g.positionAbsoluteY),"isConnectable"in g&&n(13,b=g.isConnectable)},[i,o,l,r,s,u,a,c,f,d,h,_,m,b]}class qf extends oe{constructor(e){super(),ie(this,e,Zf,Ff,le,{data:0,sourcePosition:1,id:2,width:3,height:4,selected:5,targetPosition:6,type:7,zIndex:8,dragging:9,dragHandle:10,positionAbsoluteX:11,positionAbsoluteY:12,isConnectable:13})}}const Uf=qf;function Gf(t){var r;let e=((r=t[0])==null?void 0:r.label)+"",n,i,o,l;return o=new hn({props:{type:"target",position:t[1]}}),{c(){n=xe(e),i=de(),$(o.$$.fragment)},m(s,u){B(s,n,u),B(s,i,u),j(o,s,u),l=!0},p(s,[u]){var c;(!l||u&1)&&e!==(e=((c=s[0])==null?void 0:c.label)+"")&&qt(n,e);const a={};u&2&&(a.position=s[1]),o.$set(a)},i(s){l||(Y(o.$$.fragment,s),l=!0)},o(s){L(o.$$.fragment,s),l=!1},d(s){s&&(W(n),W(i)),x(o,s)}}}function Jf(t,e,n){let{data:i={label:"Node"}}=e,{targetPosition:o=ae.Top}=e,{id:l=""}=e,{width:r=void 0}=e,{height:s=void 0}=e,{selected:u=void 0}=e,{sourcePosition:a=void 0}=e,{type:c=void 0}=e,{zIndex:f=void 0}=e,{dragging:d=!1}=e,{dragHandle:h=void 0}=e,{positionAbsoluteX:_=0}=e,{positionAbsoluteY:m=0}=e,{isConnectable:b=void 0}=e;return t.$$set=g=>{"data"in g&&n(0,i=g.data),"targetPosition"in g&&n(1,o=g.targetPosition),"id"in g&&n(2,l=g.id),"width"in g&&n(3,r=g.width),"height"in g&&n(4,s=g.height),"selected"in g&&n(5,u=g.selected),"sourcePosition"in g&&n(6,a=g.sourcePosition),"type"in g&&n(7,c=g.type),"zIndex"in g&&n(8,f=g.zIndex),"dragging"in g&&n(9,d=g.dragging),"dragHandle"in g&&n(10,h=g.dragHandle),"positionAbsoluteX"in g&&n(11,_=g.positionAbsoluteX),"positionAbsoluteY"in g&&n(12,m=g.positionAbsoluteY),"isConnectable"in g&&n(13,b=g.isConnectable)},[i,o,l,r,s,u,a,c,f,d,h,_,m,b]}class Qf extends oe{constructor(e){super(),ie(this,e,Jf,Gf,le,{data:0,targetPosition:1,id:2,width:3,height:4,selected:5,sourcePosition:6,type:7,zIndex:8,dragging:9,dragHandle:10,positionAbsoluteX:11,positionAbsoluteY:12,isConnectable:13})}}const jf=Qf;function xf(t,e,n){let{id:i=""}=e,{width:o=void 0}=e,{height:l=void 0}=e,{data:r={}}=e,{selected:s=void 0}=e,{sourcePosition:u=void 0}=e,{targetPosition:a=void 0}=e,{type:c=void 0}=e,{zIndex:f=void 0}=e,{dragging:d=!1}=e,{dragHandle:h=void 0}=e,{positionAbsoluteX:_=0}=e,{positionAbsoluteY:m=0}=e,{isConnectable:b=void 0}=e;return t.$$set=g=>{"id"in g&&n(0,i=g.id),"width"in g&&n(1,o=g.width),"height"in g&&n(2,l=g.height),"data"in g&&n(3,r=g.data),"selected"in g&&n(4,s=g.selected),"sourcePosition"in g&&n(5,u=g.sourcePosition),"targetPosition"in g&&n(6,a=g.targetPosition),"type"in g&&n(7,c=g.type),"zIndex"in g&&n(8,f=g.zIndex),"dragging"in g&&n(9,d=g.dragging),"dragHandle"in g&&n(10,h=g.dragHandle),"positionAbsoluteX"in g&&n(11,_=g.positionAbsoluteX),"positionAbsoluteY"in g&&n(12,m=g.positionAbsoluteY),"isConnectable"in g&&n(13,b=g.isConnectable)},[i,o,l,r,s,u,a,c,f,d,h,_,m,b]}class $f extends oe{constructor(e){super(),ie(this,e,xf,null,le,{id:0,width:1,height:2,data:3,selected:4,sourcePosition:5,targetPosition:6,type:7,zIndex:8,dragging:9,dragHandle:10,positionAbsoluteX:11,positionAbsoluteY:12,isConnectable:13})}}const ed=$f;function Lo(t,e,n){if(!e)return;const i=n?e.querySelector(n):e;i&&i.appendChild(t)}function td(t,{target:e,domNode:n}){return Lo(t,n,e),{async update({target:i,domNode:o}){Lo(t,o,i)},destroy(){t.parentNode&&t.parentNode.removeChild(t)}}}function nd(t){let e,n,i,o,l;const r=t[3].default,s=Ve(r,t,t[2],null);return{c(){e=be("div"),s&&s.c()},m(u,a){B(u,e,a),s&&s.m(e,null),i=!0,o||(l=Ye(n=td.call(null,e,{target:".svelte-flow__edgelabel-renderer",domNode:t[0]})),o=!0)},p(u,[a]){s&&s.p&&(!i||a&4)&&Le(s,r,u,u[2],i?Re(r,u[2],a,null):We(u[2]),null),n&&Se(n.update)&&a&1&&n.update.call(null,{target:".svelte-flow__edgelabel-renderer",domNode:u[0]})},i(u){i||(Y(s,u),i=!0)},o(u){L(s,u),i=!1},d(u){u&&W(e),s&&s.d(u),o=!1,l()}}}function id(t,e,n){let i,{$$slots:o={},$$scope:l}=e;const{domNode:r}=Ce();return J(t,r,s=>n(0,i=s)),t.$$set=s=>{"$$scope"in s&&n(2,l=s.$$scope)},[i,r,l,o]}class od extends oe{constructor(e){super(),ie(this,e,id,nd,le,{})}}function Cr(){const{edgeLookup:t,selectionRect:e,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:o,unselectNodesAndEdges:l,elementsSelectable:r}=Ce();return s=>{const u=p(t).get(s);if(!u){console.warn("012",bn.error012(s));return}(u.selectable||p(r)&&typeof u.selectable>"u")&&(e.set(null),n.set(null),u.selected?u.selected&&p(i)&&l({nodes:[],edges:[u]}):o([s]))}}function ld(t){let e,n,i=`translate(-50%, -50%) translate(${t[1]}px,${t[2]}px)`,o,l,r;const s=t[5].default,u=Ve(s,t,t[7],null);return{c(){e=be("div"),u&&u.c(),S(e,"class","svelte-flow__edge-label"),S(e,"style",n="pointer-events: all;"+t[0]),S(e,"role","button"),ue(e,"transform",i)},m(a,c){B(a,e,c),u&&u.m(e,null),o=!0,l||(r=ye(e,"click",t[6]),l=!0)},p(a,c){u&&u.p&&(!o||c&128)&&Le(u,s,a,a[7],o?Re(s,a[7],c,null):We(a[7]),null),(!o||c&1&&n!==(n="pointer-events: all;"+a[0]))&&S(e,"style",n);const f=c&1;(c&7&&i!==(i=`translate(-50%, -50%) translate(${a[1]}px,${a[2]}px)`)||f)&&ue(e,"transform",i)},i(a){o||(Y(u,a),o=!0)},o(a){L(u,a),o=!1},d(a){a&&W(e),u&&u.d(a),l=!1,r()}}}function rd(t){let e,n;return e=new od({props:{$$slots:{default:[ld]},$$scope:{ctx:t}}}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p(i,[o]){const l={};o&135&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function sd(t,e,n){let{$$slots:i={},$$scope:o}=e,{style:l=void 0}=e,{x:r=void 0}=e,{y:s=void 0}=e;const u=Cr(),a=Wn("svelteflow__edge_id"),c=()=>{a&&u(a)};return t.$$set=f=>{"style"in f&&n(0,l=f.style),"x"in f&&n(1,r=f.x),"y"in f&&n(2,s=f.y),"$$scope"in f&&n(7,o=f.$$scope)},[l,r,s,u,a,i,c,o]}class ud extends oe{constructor(e){super(),ie(this,e,sd,rd,le,{style:0,x:1,y:2})}}const ad=ud;function cd(t){let e;return{c(){e=ge("path"),S(e,"d",t[1]),S(e,"stroke-opacity",0),S(e,"stroke-width",t[10]),S(e,"fill","none"),S(e,"class","svelte-flow__edge-interaction")},m(n,i){B(n,e,i)},p(n,i){i&2&&S(e,"d",n[1])},d(n){n&&W(e)}}}function Wo(t){let e,n;return e=new ad({props:{x:t[3],y:t[4],style:t[5],$$slots:{default:[fd]},$$scope:{ctx:t}}}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p(i,o){const l={};o&8&&(l.x=i[3]),o&16&&(l.y=i[4]),o&32&&(l.style=i[5]),o&4100&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function fd(t){let e;return{c(){e=xe(t[2])},m(n,i){B(n,e,i)},p(n,i){i&4&&qt(e,n[2])},d(n){n&&W(e)}}}function dd(t){let e,n,i,o,l,r,s=t[10]&&cd(t),u=t[2]&&Wo(t);return{c(){e=ge("path"),i=de(),s&&s.c(),o=de(),u&&u.c(),l=He(),S(e,"id",t[0]),S(e,"d",t[1]),S(e,"class",n=ke(["svelte-flow__edge-path",t[9]])),S(e,"marker-start",t[6]),S(e,"marker-end",t[7]),S(e,"fill","none"),S(e,"style",t[8])},m(a,c){B(a,e,c),B(a,i,c),s&&s.m(a,c),B(a,o,c),u&&u.m(a,c),B(a,l,c),r=!0},p(a,[c]){(!r||c&1)&&S(e,"id",a[0]),(!r||c&2)&&S(e,"d",a[1]),(!r||c&512&&n!==(n=ke(["svelte-flow__edge-path",a[9]])))&&S(e,"class",n),(!r||c&64)&&S(e,"marker-start",a[6]),(!r||c&128)&&S(e,"marker-end",a[7]),(!r||c&256)&&S(e,"style",a[8]),a[10]&&s.p(a,c),a[2]?u?(u.p(a,c),c&4&&Y(u,1)):(u=Wo(a),u.c(),Y(u,1),u.m(l.parentNode,l)):u&&(ze(),L(u,1,1,()=>{u=null}),Pe())},i(a){r||(Y(u),r=!0)},o(a){L(u),r=!1},d(a){a&&(W(e),W(i),W(o),W(l)),s&&s.d(a),u&&u.d(a)}}}function hd(t,e,n){let{id:i=void 0}=e,{path:o}=e,{label:l=void 0}=e,{labelX:r=void 0}=e,{labelY:s=void 0}=e,{labelStyle:u=void 0}=e,{markerStart:a=void 0}=e,{markerEnd:c=void 0}=e,{style:f=void 0}=e,{interactionWidth:d=20}=e,{class:h=void 0}=e,_=d===void 0?20:d;return t.$$set=m=>{"id"in m&&n(0,i=m.id),"path"in m&&n(1,o=m.path),"label"in m&&n(2,l=m.label),"labelX"in m&&n(3,r=m.labelX),"labelY"in m&&n(4,s=m.labelY),"labelStyle"in m&&n(5,u=m.labelStyle),"markerStart"in m&&n(6,a=m.markerStart),"markerEnd"in m&&n(7,c=m.markerEnd),"style"in m&&n(8,f=m.style),"interactionWidth"in m&&n(11,d=m.interactionWidth),"class"in m&&n(9,h=m.class)},[i,o,l,r,s,u,a,c,f,h,_,d]}class gd extends oe{constructor(e){super(),ie(this,e,hd,dd,le,{id:0,path:1,label:2,labelX:3,labelY:4,labelStyle:5,markerStart:6,markerEnd:7,style:8,interactionWidth:11,class:9})}}const vn=gd;function md(t){let e,n;return e=new vn({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function _d(t,e,n){let i,o,l,{id:r=""}=e,{source:s=""}=e,{target:u=""}=e,{animated:a=void 0}=e,{selected:c=void 0}=e,{label:f=void 0}=e,{labelStyle:d=void 0}=e,{data:h=void 0}=e,{style:_=void 0}=e,{markerStart:m=void 0}=e,{markerEnd:b=void 0}=e,{interactionWidth:g=void 0}=e,{sourceX:k}=e,{sourceY:E}=e,{sourcePosition:v}=e,{sourceHandleId:C=void 0}=e,{targetX:H}=e,{targetY:I}=e,{targetPosition:D}=e,{targetHandleId:A=void 0}=e;return t.$$set=y=>{"id"in y&&n(9,r=y.id),"source"in y&&n(10,s=y.source),"target"in y&&n(11,u=y.target),"animated"in y&&n(12,a=y.animated),"selected"in y&&n(13,c=y.selected),"label"in y&&n(0,f=y.label),"labelStyle"in y&&n(1,d=y.labelStyle),"data"in y&&n(14,h=y.data),"style"in y&&n(2,_=y.style),"markerStart"in y&&n(3,m=y.markerStart),"markerEnd"in y&&n(4,b=y.markerEnd),"interactionWidth"in y&&n(5,g=y.interactionWidth),"sourceX"in y&&n(15,k=y.sourceX),"sourceY"in y&&n(16,E=y.sourceY),"sourcePosition"in y&&n(17,v=y.sourcePosition),"sourceHandleId"in y&&n(18,C=y.sourceHandleId),"targetX"in y&&n(19,H=y.targetX),"targetY"in y&&n(20,I=y.targetY),"targetPosition"in y&&n(21,D=y.targetPosition),"targetHandleId"in y&&n(22,A=y.targetHandleId)},t.$$.update=()=>{t.$$.dirty&3899392&&n(8,[i,o,l]=fr({sourceX:k,sourceY:E,targetX:H,targetY:I,sourcePosition:v,targetPosition:D}),i,(n(7,o),n(15,k),n(16,E),n(19,H),n(20,I),n(17,v),n(21,D)),(n(6,l),n(15,k),n(16,E),n(19,H),n(20,I),n(17,v),n(21,D)))},[f,d,_,m,b,g,l,o,i,r,s,u,a,c,h,k,E,v,C,H,I,D,A]}class yd extends oe{constructor(e){super(),ie(this,e,_d,md,le,{id:9,source:10,target:11,animated:12,selected:13,label:0,labelStyle:1,data:14,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:15,sourceY:16,sourcePosition:17,sourceHandleId:18,targetX:19,targetY:20,targetPosition:21,targetHandleId:22})}}const zr=yd;function bd(t){let e,n;return e=new vn({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function wd(t,e,n){let i,o,l,{id:r=""}=e,{source:s=""}=e,{target:u=""}=e,{animated:a=void 0}=e,{selected:c=void 0}=e,{label:f=void 0}=e,{labelStyle:d=void 0}=e,{data:h=void 0}=e,{style:_=void 0}=e,{markerStart:m=void 0}=e,{markerEnd:b=void 0}=e,{interactionWidth:g=void 0}=e,{sourceX:k}=e,{sourceY:E}=e,{sourcePosition:v}=e,{sourceHandleId:C=void 0}=e,{targetX:H}=e,{targetY:I}=e,{targetPosition:D}=e,{targetHandleId:A=void 0}=e;return t.$$set=y=>{"id"in y&&n(9,r=y.id),"source"in y&&n(10,s=y.source),"target"in y&&n(11,u=y.target),"animated"in y&&n(12,a=y.animated),"selected"in y&&n(13,c=y.selected),"label"in y&&n(0,f=y.label),"labelStyle"in y&&n(1,d=y.labelStyle),"data"in y&&n(14,h=y.data),"style"in y&&n(2,_=y.style),"markerStart"in y&&n(3,m=y.markerStart),"markerEnd"in y&&n(4,b=y.markerEnd),"interactionWidth"in y&&n(5,g=y.interactionWidth),"sourceX"in y&&n(15,k=y.sourceX),"sourceY"in y&&n(16,E=y.sourceY),"sourcePosition"in y&&n(17,v=y.sourcePosition),"sourceHandleId"in y&&n(18,C=y.sourceHandleId),"targetX"in y&&n(19,H=y.targetX),"targetY"in y&&n(20,I=y.targetY),"targetPosition"in y&&n(21,D=y.targetPosition),"targetHandleId"in y&&n(22,A=y.targetHandleId)},t.$$.update=()=>{t.$$.dirty&3899392&&n(8,[i,o,l]=Zt({sourceX:k,sourceY:E,targetX:H,targetY:I,sourcePosition:v,targetPosition:D}),i,(n(7,o),n(15,k),n(16,E),n(19,H),n(20,I),n(17,v),n(21,D)),(n(6,l),n(15,k),n(16,E),n(19,H),n(20,I),n(17,v),n(21,D)))},[f,d,_,m,b,g,l,o,i,r,s,u,a,c,h,k,E,v,C,H,I,D,A]}class kd extends oe{constructor(e){super(),ie(this,e,wd,bd,le,{id:9,source:10,target:11,animated:12,selected:13,label:0,labelStyle:1,data:14,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:15,sourceY:16,sourcePosition:17,sourceHandleId:18,targetX:19,targetY:20,targetPosition:21,targetHandleId:22})}}const vd=kd;function Sd(t){let e,n;return e=new vn({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function Ed(t,e,n){let i,o,l,{id:r=""}=e,{source:s=""}=e,{target:u=""}=e,{animated:a=void 0}=e,{selected:c=void 0}=e,{label:f=void 0}=e,{labelStyle:d=void 0}=e,{data:h=void 0}=e,{style:_=void 0}=e,{markerStart:m=void 0}=e,{markerEnd:b=void 0}=e,{interactionWidth:g=void 0}=e,{sourceX:k}=e,{sourceY:E}=e,{sourcePosition:v}=e,{sourceHandleId:C=void 0}=e,{targetX:H}=e,{targetY:I}=e,{targetPosition:D}=e,{targetHandleId:A=void 0}=e;return t.$$set=y=>{"id"in y&&n(9,r=y.id),"source"in y&&n(10,s=y.source),"target"in y&&n(11,u=y.target),"animated"in y&&n(12,a=y.animated),"selected"in y&&n(13,c=y.selected),"label"in y&&n(0,f=y.label),"labelStyle"in y&&n(1,d=y.labelStyle),"data"in y&&n(14,h=y.data),"style"in y&&n(2,_=y.style),"markerStart"in y&&n(3,m=y.markerStart),"markerEnd"in y&&n(4,b=y.markerEnd),"interactionWidth"in y&&n(5,g=y.interactionWidth),"sourceX"in y&&n(15,k=y.sourceX),"sourceY"in y&&n(16,E=y.sourceY),"sourcePosition"in y&&n(17,v=y.sourcePosition),"sourceHandleId"in y&&n(18,C=y.sourceHandleId),"targetX"in y&&n(19,H=y.targetX),"targetY"in y&&n(20,I=y.targetY),"targetPosition"in y&&n(21,D=y.targetPosition),"targetHandleId"in y&&n(22,A=y.targetHandleId)},t.$$.update=()=>{t.$$.dirty&1671168&&n(8,[i,o,l]=hr({sourceX:k,sourceY:E,targetX:H,targetY:I}),i,(n(7,o),n(15,k),n(16,E),n(19,H),n(20,I)),(n(6,l),n(15,k),n(16,E),n(19,H),n(20,I)))},[f,d,_,m,b,g,l,o,i,r,s,u,a,c,h,k,E,v,C,H,I,D,A]}class Cd extends oe{constructor(e){super(),ie(this,e,Ed,Sd,le,{id:9,source:10,target:11,animated:12,selected:13,label:0,labelStyle:1,data:14,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:15,sourceY:16,sourcePosition:17,sourceHandleId:18,targetX:19,targetY:20,targetPosition:21,targetHandleId:22})}}const zd=Cd;function Pd(t){let e,n;return e=new vn({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function Md(t,e,n){let i,o,l,{id:r=""}=e,{source:s=""}=e,{target:u=""}=e,{animated:a=void 0}=e,{selected:c=void 0}=e,{label:f=void 0}=e,{data:d=void 0}=e,{labelStyle:h=void 0}=e,{style:_=void 0}=e,{markerStart:m=void 0}=e,{markerEnd:b=void 0}=e,{interactionWidth:g=void 0}=e,{sourceX:k}=e,{sourceY:E}=e,{sourcePosition:v}=e,{sourceHandleId:C=void 0}=e,{targetX:H}=e,{targetY:I}=e,{targetPosition:D}=e,{targetHandleId:A=void 0}=e;return t.$$set=y=>{"id"in y&&n(9,r=y.id),"source"in y&&n(10,s=y.source),"target"in y&&n(11,u=y.target),"animated"in y&&n(12,a=y.animated),"selected"in y&&n(13,c=y.selected),"label"in y&&n(0,f=y.label),"data"in y&&n(14,d=y.data),"labelStyle"in y&&n(1,h=y.labelStyle),"style"in y&&n(2,_=y.style),"markerStart"in y&&n(3,m=y.markerStart),"markerEnd"in y&&n(4,b=y.markerEnd),"interactionWidth"in y&&n(5,g=y.interactionWidth),"sourceX"in y&&n(15,k=y.sourceX),"sourceY"in y&&n(16,E=y.sourceY),"sourcePosition"in y&&n(17,v=y.sourcePosition),"sourceHandleId"in y&&n(18,C=y.sourceHandleId),"targetX"in y&&n(19,H=y.targetX),"targetY"in y&&n(20,I=y.targetY),"targetPosition"in y&&n(21,D=y.targetPosition),"targetHandleId"in y&&n(22,A=y.targetHandleId)},t.$$.update=()=>{t.$$.dirty&3899392&&n(8,[i,o,l]=Zt({sourceX:k,sourceY:E,targetX:H,targetY:I,sourcePosition:v,targetPosition:D,borderRadius:0}),i,(n(7,o),n(15,k),n(16,E),n(19,H),n(20,I),n(17,v),n(21,D)),(n(6,l),n(15,k),n(16,E),n(19,H),n(20,I),n(17,v),n(21,D)))},[f,h,_,m,b,g,l,o,i,r,s,u,a,c,d,k,E,v,C,H,I,D,A]}class Hd extends oe{constructor(e){super(),ie(this,e,Md,Pd,le,{id:9,source:10,target:11,animated:12,selected:13,label:0,data:14,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:15,sourceY:16,sourcePosition:17,sourceHandleId:18,targetX:19,targetY:20,targetPosition:21,targetHandleId:22})}}const Nd=Hd;function Ad(t,e){const n=t.set,i=e.set,o=p(t),l=p(e);let s=o.length===0&&l.length>0?l:o;t.set(s);const u=a=>{const c=n(a);return s=c,i(s),c};t.set=e.set=u,t.update=e.update=a=>u(a(s))}function Od(t,e){const n=t.set,i=e.set;let o=p(e);t.set(o);const l=r=>{n(r),i(r),o=r};t.set=e.set=l,t.update=e.update=r=>l(r(o))}const Td=(t,e,n)=>{if(!n)return;const i=p(t),o=e.set,l=n.set;let r=n?p(n):{x:0,y:0,zoom:1};e.set(r),e.set=s=>(o(s),l(s),r=s,s),n.set=s=>(i==null||i.syncViewport(s),o(s),l(s),r=s,s),e.update=s=>{e.set(s(r))},n.update=s=>{n.set(s(r))}},Id=(t,e)=>{const{subscribe:n,set:i,update:o}=te([]);let l=t,r={},s=!0;const u=d=>(l=gr(d,e,{elevateNodesOnSelect:s,defaults:r}),i(l),l),a=d=>u(d(l)),c=d=>{r=d},f=d=>{s=d.elevateNodesOnSelect??s};return u(l),{subscribe:n,set:u,update:a,setDefaultOptions:c,setOptions:f}},Dd=(t,e,n,i)=>{const{subscribe:o,set:l,update:r}=te([]);let s=t,u=i||{};const a=d=>{const h=u?d.map(_=>({...u,..._})):d;_r(e,n,h),s=h,l(s)},c=d=>a(d(s)),f=d=>{u=d};return a(s),{subscribe:o,set:a,update:c,setDefaultOptions:f}},Pr={path:null,sourceX:null,sourceY:null,sourcePosition:null,targetX:null,targetY:null,targetPosition:null,pointerPosition:null,startHandle:null,endHandle:null,status:null},Xd={[ae.Left]:ae.Right,[ae.Right]:ae.Left,[ae.Top]:ae.Bottom,[ae.Bottom]:ae.Top};function Yd(t,e){return Bt([e,t.connectionLineType,t.connectionMode,t.nodeLookup,t.viewport],([n,i,o,l,r])=>{var C,H,I,D,A,y,z,V,M,w,X,P,R;if(!((C=n.connectionStartHandle)!=null&&C.nodeId))return Pr;const s=l.get((H=n.connectionStartHandle)==null?void 0:H.nodeId),u=(I=s==null?void 0:s[Ee])==null?void 0:I.handleBounds,a=(u==null?void 0:u[n.connectionStartHandle.type||"source"])||[],c=a||(u==null?void 0:u[((D=n==null?void 0:n.connectionStartHandle)==null?void 0:D.type)==="source"?"target":"source"]),f=o===Ct.Strict?a:c,d=(A=n.connectionStartHandle)!=null&&A.handleId?f.find(T=>{var K;return T.id===((K=n.connectionStartHandle)==null?void 0:K.handleId)}):f[0],h=d?d.x+d.width/2:(((y=s==null?void 0:s.computed)==null?void 0:y.width)??0)/2,_=d?d.y+d.height/2:((z=s==null?void 0:s.computed)==null?void 0:z.height)??0,m=(((M=(V=s==null?void 0:s.computed)==null?void 0:V.positionAbsolute)==null?void 0:M.x)??0)+h,b=(((X=(w=s==null?void 0:s.computed)==null?void 0:w.positionAbsolute)==null?void 0:X.y)??0)+_,g=d==null?void 0:d.position,k=g?Xd[g]:void 0,E={sourceX:m,sourceY:b,sourcePosition:g,targetX:((((P=n.connectionPosition)==null?void 0:P.x)??0)-r.x)/r.zoom,targetY:((((R=n.connectionPosition)==null?void 0:R.y)??0)-r.y)/r.zoom,targetPosition:k};let v="";return i===Vt.Bezier?[v]=fr(E):i===Vt.Step?[v]=Zt({...E,borderRadius:0}):i===Vt.SmoothStep?[v]=Zt(E):[v]=hr(E),{path:v,...E,pointerPosition:n.connectionPosition,startHandle:n.connectionStartHandle,endHandle:n.connectionEndHandle,status:n.connectionStatus}})}const Mr={input:Uf,output:jf,default:Er,group:ed},Hr={straight:zd,smoothstep:vd,default:zr,step:Nd},Vd=({nodes:t=[],edges:e=[],width:n,height:i,fitView:o})=>{const l=new Map,r=gr(t,l,{nodeOrigin:[0,0],elevateNodesOnSelect:!1}),s=new Map,u=new Map;_r(s,u,e);let a={x:0,y:0,zoom:1};if(o&&n&&i){const c=r.filter(d=>d.width&&d.height||d.initialWidth&&d.initialHeight),f=wn(c,{nodeOrigin:[0,0]});a=ji(f,n,i,.5,2,.1)}return{flowId:te(null),nodes:Id(r,l),nodeLookup:Je(l),edgeLookup:Je(u),visibleNodes:Je([]),edges:Dd(e,s,u),visibleEdges:Je([]),connectionLookup:Je(s),height:te(500),width:te(500),minZoom:te(.5),maxZoom:te(2),nodeOrigin:te([0,0]),nodeDragThreshold:te(1),nodeExtent:te(Eo),translateExtent:te(Eo),autoPanOnNodeDrag:te(!0),autoPanOnConnect:te(!0),fitViewOnInit:te(!1),fitViewOnInitDone:te(!1),fitViewOptions:te(void 0),panZoom:te(null),snapGrid:te(null),dragging:te(!1),selectionRect:te(null),selectionKeyPressed:te(!1),multiselectionKeyPressed:te(!1),deleteKeyPressed:te(!1),panActivationKeyPressed:te(!1),zoomActivationKeyPressed:te(!1),selectionRectMode:te(null),selectionMode:te(Gn.Partial),nodeTypes:te(Mr),edgeTypes:te(Hr),viewport:te(a),connectionMode:te(Ct.Strict),domNode:te(null),connection:Je(Pr),connectionLineType:te(Vt.Bezier),connectionRadius:te(20),isValidConnection:te(()=>!0),nodesDraggable:te(!0),nodesConnectable:te(!0),elementsSelectable:te(!0),selectNodesOnDrag:te(!0),markers:Je([]),defaultMarkerColor:te("#b1b1b7"),lib:Je("svelte"),onlyRenderVisibleElements:te(!1),onerror:te(nf),ondelete:te(void 0),onedgecreate:te(void 0),onconnect:te(void 0),onconnectstart:te(void 0),onconnectend:te(void 0),onbeforedelete:te(void 0),nodesInitialized:te(!1),edgesInitialized:te(!1),viewportInitialized:te(!1),initialized:Je(!1)}};function Rd(t){const e=Bt([t.edges,t.nodes,t.nodeLookup,t.onlyRenderVisibleElements,t.viewport,t.width,t.height],([n,,i,o,l,r,s])=>o&&r&&s?n.filter(a=>{const c=i.get(a.source),f=i.get(a.target);return c&&f&&cf({sourceNode:c,targetNode:f,width:r,height:s,transform:[l.x,l.y,l.zoom]})}):n);return Bt([e,t.nodes,t.nodeLookup,t.connectionMode,t.onerror],([n,,i,o,l])=>n.reduce((s,u)=>{const a=i.get(u.source),c=i.get(u.target);if(!a||!c)return s;const f=yf({id:u.id,sourceNode:a,targetNode:c,sourceHandle:u.sourceHandle||null,targetHandle:u.targetHandle||null,connectionMode:o,onError:l});return f&&s.push({...u,zIndex:af({selected:u.selected,zIndex:u.zIndex,sourceNode:a,targetNode:c,elevateOnSelect:!1}),...f}),s},[]))}function Ld(t){return Bt([t.nodes,t.onlyRenderVisibleElements,t.width,t.height,t.viewport],([e,n,i,o,l])=>{const r=[l.x,l.y,l.zoom];return n?lr(e,{x:0,y:0,width:i,height:o},r,!0):e})}const fi=Symbol();function Nr({nodes:t,edges:e,width:n,height:i,fitView:o}){const l=Vd({nodes:t,edges:e,width:n,height:i,fitView:o});function r(M){l.nodeTypes.set({...Mr,...M})}function s(M){l.edgeTypes.set({...Hr,...M})}function u(M){const w=p(l.edges);l.edges.set(hf(M,w))}const a=(M,w=!1)=>{const X=p(l.nodeLookup);M.forEach(P=>{var T;const R=X.get(P.id);R&&(R.position=P.position,R.dragging=w,R.computed={...R.computed,positionAbsolute:(T=P.computed)==null?void 0:T.positionAbsolute})}),l.nodes.set(p(l.nodes))};function c(M){const w=kf(M,p(l.nodes),p(l.nodeLookup),p(l.domNode),p(l.nodeOrigin));if(w){if(!p(l.fitViewOnInitDone)&&p(l.fitViewOnInit)){const X=p(l.fitViewOptions),P=f(w,{...X,nodes:(X==null?void 0:X.nodes)||w});l.fitViewOnInitDone.set(P)}l.nodes.set(w),p(l.nodesInitialized)||l.nodesInitialized.set(!0)}}function f(M,w){const X=p(l.panZoom);return X?Qc({nodes:M,width:p(l.width),height:p(l.height),minZoom:p(l.minZoom),maxZoom:p(l.maxZoom),panZoom:X,nodeOrigin:p(l.nodeOrigin)},w):!1}function d(M,w){const X=p(l.panZoom);X&&X.scaleBy(M,w)}function h(M){d(1.2,M)}function _(M){d(1/1.2,M)}function m(M){const w=p(l.panZoom);w&&(w.setScaleExtent([M,p(l.maxZoom)]),l.minZoom.set(M))}function b(M){const w=p(l.panZoom);w&&(w.setScaleExtent([p(l.minZoom),M]),l.maxZoom.set(M))}function g(M){const w=p(l.panZoom);w&&(w.setTranslateExtent(M),l.translateExtent.set(M))}function k(M){let w=!1;return M.forEach(X=>{X.selected&&(X.selected=!1,w=!0)}),w}function E(M){k((M==null?void 0:M.nodes)||p(l.nodes))&&l.nodes.set(p(l.nodes)),k((M==null?void 0:M.edges)||p(l.edges))&&l.edges.set(p(l.edges))}l.deleteKeyPressed.subscribe(async M=>{var w;if(M){const X=p(l.nodes),P=p(l.edges),R=X.filter(U=>U.selected),T=P.filter(U=>U.selected),{nodes:K,edges:Z}=await rr({nodesToRemove:R,edgesToRemove:T,nodes:X,edges:P,onBeforeDelete:p(l.onbeforedelete)});(K.length||Z.length)&&(l.nodes.update(U=>U.filter(O=>!K.some(se=>se.id===O.id))),l.edges.update(U=>U.filter(O=>!Z.some(se=>se.id===O.id))),(w=p(l.ondelete))==null||w({nodes:K,edges:Z}))}});function v(M){const w=p(l.multiselectionKeyPressed);l.nodes.update(X=>X.map(P=>{const R=M.includes(P.id),T=w&&P.selected||R;return P.selected=T,P})),w||l.edges.update(X=>X.map(P=>(P.selected=!1,P)))}function C(M){const w=p(l.multiselectionKeyPressed);l.edges.update(X=>X.map(P=>{const R=M.includes(P.id),T=w&&P.selected||R;return P.selected=T,P})),w||l.nodes.update(X=>X.map(P=>(P.selected=!1,P)))}function H(M){var X;const w=(X=p(l.nodes))==null?void 0:X.find(P=>P.id===M);if(!w){console.warn("012",bn.error012(M));return}l.selectionRect.set(null),l.selectionRectMode.set(null),w.selected?w.selected&&p(l.multiselectionKeyPressed)&&E({nodes:[w],edges:[]}):v([M])}function I(M){const w=p(l.viewport);return vf({delta:M,panZoom:p(l.panZoom),transform:[w.x,w.y,w.zoom],translateExtent:p(l.translateExtent),width:p(l.width),height:p(l.height)})}const D={connectionStartHandle:null,connectionEndHandle:null,connectionPosition:null,connectionStatus:null},A=te(D),y=M=>{A.set(M)};function z(){y(D)}function V(){l.fitViewOnInitDone.set(!1),l.selectionRect.set(null),l.selectionRectMode.set(null),l.snapGrid.set(null),l.isValidConnection.set(()=>!0),l.nodes.set([]),l.edges.set([]),E(),z()}return{...l,connection:Yd(l,A),visibleEdges:Rd(l),visibleNodes:Ld(l),markers:Bt([l.edges,l.defaultMarkerColor,l.flowId],([M,w,X])=>bf(M,{defaultColor:w,id:X})),initialized:(()=>{let M=!1;const w=p(l.nodes).length,X=p(l.edges).length;return Bt([l.nodesInitialized,l.edgesInitialized,l.viewportInitialized],([P,R,T])=>M||(w===0?M=T:X===0?M=T&&P:M=T&&P&&R,M))})(),syncNodeStores:M=>Ad(l.nodes,M),syncEdgeStores:M=>Od(l.edges,M),syncViewport:M=>Td(l.panZoom,l.viewport,M),setNodeTypes:r,setEdgeTypes:s,addEdge:u,updateNodePositions:a,updateNodeDimensions:c,zoomIn:h,zoomOut:_,fitView:M=>f(p(l.nodes),M),setMinZoom:m,setMaxZoom:b,setTranslateExtent:g,unselectNodesAndEdges:E,addSelectedNodes:v,addSelectedEdges:C,handleNodeSelection:H,panBy:I,updateConnection:y,cancelConnection:z,reset:V}}function Ce(){const t=Wn(fi);if(!t)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return t.getStore()}function Wd({nodes:t,edges:e,width:n,height:i,fitView:o}){const l=Nr({nodes:t,edges:e,width:n,height:i,fitView:o});return rn(fi,{getStore:()=>l}),l}function Bd(t,e){const{panZoom:n,minZoom:i,maxZoom:o,initialViewport:l,viewport:r,dragging:s,translateExtent:u}=e,a=Vf({domNode:t,minZoom:i,maxZoom:o,translateExtent:u,viewport:l,onTransformChange:f=>r.set({x:f[0],y:f[1],zoom:f[2]}),onDraggingChange:s.set}),c=a.getViewport();return r.set(c),n.set(a),a.update(e),{update(f){a.update(f)}}}function pd(t){let e,n,i,o,l;const r=t[33].default,s=Ve(r,t,t[32],null);return{c(){e=be("div"),s&&s.c(),S(e,"class","svelte-flow__zoom svelte-4xkw84")},m(u,a){B(u,e,a),s&&s.m(e,null),i=!0,o||(l=Ye(n=Bd.call(null,e,{viewport:t[17],minZoom:t[11],maxZoom:t[12],initialViewport:t[10],dragging:t[22],panZoom:t[18],onPanZoomStart:t[0],onPanZoom:t[1],onPanZoomEnd:t[2],zoomOnScroll:t[5],zoomOnDoubleClick:t[6],zoomOnPinch:t[7],panOnScroll:t[8],panOnDrag:t[9],panOnScrollSpeed:.5,panOnScrollMode:t[3]||ot.Free,zoomActivationKeyPressed:t[13],preventScrolling:typeof t[4]=="boolean"?t[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:t[14],translateExtent:t[15],lib:t[16]})),o=!0)},p(u,a){s&&s.p&&(!i||a[1]&2)&&Le(s,r,u,u[32],i?Re(r,u[32],a,null):We(u[32]),null),n&&Se(n.update)&&a[0]&131071&&n.update.call(null,{viewport:u[17],minZoom:u[11],maxZoom:u[12],initialViewport:u[10],dragging:u[22],panZoom:u[18],onPanZoomStart:u[0],onPanZoom:u[1],onPanZoomEnd:u[2],zoomOnScroll:u[5],zoomOnDoubleClick:u[6],zoomOnPinch:u[7],panOnScroll:u[8],panOnDrag:u[9],panOnScrollSpeed:.5,panOnScrollMode:u[3]||ot.Free,zoomActivationKeyPressed:u[13],preventScrolling:typeof u[4]=="boolean"?u[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:u[14],translateExtent:u[15],lib:u[16]})},i(u){i||(Y(s,u),i=!0)},o(u){L(s,u),i=!1},d(u){u&&W(e),s&&s.d(u),o=!1,l()}}}function Kd(t,e,n){let i,o,l,r,s,u,a,c,f,d,h,{$$slots:_={},$$scope:m}=e,{initialViewport:b}=e,{onMoveStart:g=void 0}=e,{onMove:k=void 0}=e,{onMoveEnd:E=void 0}=e,{panOnScrollMode:v}=e,{preventScrolling:C}=e,{zoomOnScroll:H}=e,{zoomOnDoubleClick:I}=e,{zoomOnPinch:D}=e,{panOnDrag:A}=e,{panOnScroll:y}=e;const{viewport:z,panZoom:V,selectionKeyPressed:M,minZoom:w,maxZoom:X,dragging:P,translateExtent:R,lib:T,panActivationKeyPressed:K,zoomActivationKeyPressed:Z,viewportInitialized:U}=Ce();return J(t,M,O=>n(14,f=O)),J(t,w,O=>n(11,u=O)),J(t,X,O=>n(12,a=O)),J(t,R,O=>n(15,d=O)),J(t,T,O=>n(16,h=O)),J(t,K,O=>n(31,s=O)),J(t,Z,O=>n(13,c=O)),J(t,U,O=>n(34,r=O)),ei(()=>{Mi(U,r=!0,r)}),t.$$set=O=>{"initialViewport"in O&&n(28,b=O.initialViewport),"onMoveStart"in O&&n(0,g=O.onMoveStart),"onMove"in O&&n(1,k=O.onMove),"onMoveEnd"in O&&n(2,E=O.onMoveEnd),"panOnScrollMode"in O&&n(3,v=O.panOnScrollMode),"preventScrolling"in O&&n(4,C=O.preventScrolling),"zoomOnScroll"in O&&n(5,H=O.zoomOnScroll),"zoomOnDoubleClick"in O&&n(6,I=O.zoomOnDoubleClick),"zoomOnPinch"in O&&n(7,D=O.zoomOnPinch),"panOnDrag"in O&&n(29,A=O.panOnDrag),"panOnScroll"in O&&n(30,y=O.panOnScroll),"$$scope"in O&&n(32,m=O.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&268435456&&n(10,i=b||{x:0,y:0,zoom:1}),t.$$.dirty[0]&536870912|t.$$.dirty[1]&1&&n(9,o=s||A),t.$$.dirty[0]&1073741824|t.$$.dirty[1]&1&&n(8,l=s||y)},[g,k,E,v,C,H,I,D,l,o,i,u,a,c,f,d,h,z,V,M,w,X,P,R,T,K,Z,U,b,A,y,s,m,_]}class Fd extends oe{constructor(e){super(),ie(this,e,Kd,pd,le,{initialViewport:28,onMoveStart:0,onMove:1,onMoveEnd:2,panOnScrollMode:3,preventScrolling:4,zoomOnScroll:5,zoomOnDoubleClick:6,zoomOnPinch:7,panOnDrag:29,panOnScroll:30},null,[-1,-1])}}const Zd=Fd;function qd(t){let e,n,i,o;const l=t[29].default,r=Ve(l,t,t[28],null);return{c(){e=be("div"),r&&r.c(),S(e,"class","svelte-flow__pane svelte-1esy7hx"),fe(e,"draggable",t[0]),fe(e,"dragging",t[4]),fe(e,"selection",t[1])},m(s,u){B(s,e,u),r&&r.m(e,null),t[30](e),n=!0,i||(o=[ye(e,"click",function(){Se(t[3]?void 0:On(t[15],t[2]))&&(t[3]?void 0:On(t[15],t[2])).apply(this,arguments)}),ye(e,"mousedown",function(){Se(t[3]?t[16]:void 0)&&(t[3]?t[16]:void 0).apply(this,arguments)}),ye(e,"mousemove",function(){Se(t[3]?t[17]:void 0)&&(t[3]?t[17]:void 0).apply(this,arguments)}),ye(e,"mouseup",function(){Se(t[3]?t[18]:void 0)&&(t[3]?t[18]:void 0).apply(this,arguments)}),ye(e,"mouseleave",function(){Se(t[3]?t[19]:void 0)&&(t[3]?t[19]:void 0).apply(this,arguments)}),ye(e,"contextmenu",function(){Se(On(t[20],t[2]))&&On(t[20],t[2]).apply(this,arguments)})],i=!0)},p(s,u){t=s,r&&r.p&&(!n||u[0]&268435456)&&Le(r,l,t,t[28],n?Re(l,t[28],u,null):We(t[28]),null),(!n||u[0]&1)&&fe(e,"draggable",t[0]),(!n||u[0]&16)&&fe(e,"dragging",t[4]),(!n||u[0]&2)&&fe(e,"selection",t[1])},i(s){n||(Y(r,s),n=!0)},o(s){L(r,s),n=!1},d(s){s&&W(e),r&&r.d(s),t[30](null),i=!1,Ne(o)}}}function On(t,e){return n=>{n.target===e&&(t==null||t(n))}}function Bo(t){return e=>{const n=t.includes(e.id);return e.selected!==n?{...e,selected:n}:e}}function Ud(t,e,n){let i,o,l,r,s,u,a,c,f,d,h,_,m,{$$slots:b={},$$scope:g}=e,{panOnDrag:k=void 0}=e,{selectionOnDrag:E=void 0}=e;const v=ti(),{nodes:C,edges:H,viewport:I,dragging:D,elementsSelectable:A,selectionRect:y,selectionRectMode:z,selectionKeyPressed:V,selectionMode:M,panActivationKeyPressed:w,unselectNodesAndEdges:X}=Ce();J(t,C,G=>n(36,c=G)),J(t,H,G=>n(33,s=G)),J(t,I,G=>n(35,a=G)),J(t,D,G=>n(4,m=G)),J(t,A,G=>n(25,d=G)),J(t,y,G=>n(24,f=G)),J(t,z,G=>n(23,r=G)),J(t,V,G=>n(26,h=G)),J(t,M,G=>n(34,u=G)),J(t,w,G=>n(27,_=G));let P,R=null,T=[];function K(G){v("paneclick",{event:G}),X(),z.set(null)}function Z(G){if(R=P.getBoundingClientRect(),!A||!o||G.button!==0||G.target!==P||!R)return;const{x:he,y:me}=ft(G,R);X(),y.set({width:0,height:0,startX:he,startY:me,x:he,y:me})}function U(G){if(!o||!R||!f)return;const he=ft(G,R),me=f.startX??0,F=f.startY??0,Me={...f,x:he.x<me?he.x:me,y:he.y<F?he.y:F,width:Math.abs(he.x-me),height:Math.abs(he.y-F)},Ae=T.map(ve=>ve.id),De=Vi(T,s).map(ve=>ve.id);T=lr(c,Me,[a.x,a.y,a.zoom],u===Gn.Partial,!0);const Oe=Vi(T,s).map(ve=>ve.id),qe=T.map(ve=>ve.id);(Ae.length!==qe.length||qe.some(ve=>!Ae.includes(ve)))&&C.update(ve=>ve.map(Bo(qe))),(De.length!==Oe.length||Oe.some(ve=>!De.includes(ve)))&&H.update(ve=>ve.map(Bo(Oe))),z.set("user"),y.set(Me)}function O(G){G.button===0&&(!o&&r==="user"&&G.target===P&&(K==null||K(G)),y.set(null),T.length>0&&z.set("nodes"))}const se=G=>{r==="user"&&z.set(T.length>0?"nodes":null),y.set(null)},re=G=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){G.preventDefault();return}v("panecontextmenu",{event:G})};function ce(G){St[G?"unshift":"push"](()=>{P=G,n(2,P)})}return t.$$set=G=>{"panOnDrag"in G&&n(0,k=G.panOnDrag),"selectionOnDrag"in G&&n(21,E=G.selectionOnDrag),"$$scope"in G&&n(28,g=G.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&134217729&&n(22,i=_||k),t.$$.dirty[0]&90177536&&n(1,o=h||f||E&&i!==!0),t.$$.dirty[0]&41943042&&n(3,l=d&&(o||r==="user"))},[k,o,P,l,m,C,H,I,D,A,y,z,V,M,w,K,Z,U,O,se,re,E,i,r,f,d,h,_,g,b,ce]}class Gd extends oe{constructor(e){super(),ie(this,e,Ud,qd,le,{panOnDrag:0,selectionOnDrag:21},null,[-1,-1])}}const Jd=Gd;function Qd(t){let e,n;const i=t[3].default,o=Ve(i,t,t[2],null);return{c(){e=be("div"),o&&o.c(),S(e,"class","svelte-flow__viewport xyflow__viewport svelte-1floaup"),ue(e,"transform","translate("+t[0].x+"px, "+t[0].y+"px) scale("+t[0].zoom+")")},m(l,r){B(l,e,r),o&&o.m(e,null),n=!0},p(l,[r]){o&&o.p&&(!n||r&4)&&Le(o,i,l,l[2],n?Re(i,l[2],r,null):We(l[2]),null),(!n||r&1)&&ue(e,"transform","translate("+l[0].x+"px, "+l[0].y+"px) scale("+l[0].zoom+")")},i(l){n||(Y(o,l),n=!0)},o(l){L(o,l),n=!1},d(l){l&&W(e),o&&o.d(l)}}}function jd(t,e,n){let i,{$$slots:o={},$$scope:l}=e;const{viewport:r}=Ce();return J(t,r,s=>n(0,i=s)),t.$$set=s=>{"$$scope"in s&&n(2,l=s.$$scope)},[i,r,l,o]}class xd extends oe{constructor(e){super(),ie(this,e,jd,Qd,le,{})}}function Ar(t,e){const{store:n,onDrag:i,onDragStart:o,onDragStop:l,onNodeMouseDown:r}=e,s=Ef({onDrag:i,onDragStart:o,onDragStop:l,onNodeMouseDown:r,getStoreItems:()=>{const a=p(n.snapGrid),c=p(n.viewport);return{nodes:p(n.nodes),nodeLookup:p(n.nodeLookup),edges:p(n.edges),nodeExtent:p(n.nodeExtent),snapGrid:a||[0,0],snapToGrid:!!a,nodeOrigin:[0,0],multiSelectionActive:p(n.multiselectionKeyPressed),domNode:p(n.domNode),transform:[c.x,c.y,c.zoom],autoPanOnNodeDrag:p(n.autoPanOnNodeDrag),nodesDraggable:p(n.nodesDraggable),selectNodesOnDrag:p(n.selectNodesOnDrag),nodeDragThreshold:p(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function u(a,c){if(c.disabled){s.destroy();return}s.update({domNode:a,noDragClassName:c.noDragClass,handleSelector:c.handleSelector,nodeId:c.nodeId,isSelectable:c.isSelectable})}return u(t,e),{update(a){u(t,a)},destroy(){s.destroy()}}}function $d({width:t,height:e,initialWidth:n,initialHeight:i,computedWidth:o,computedHeight:l}){if(o===void 0&&l===void 0){const r=t??n,s=e??i;return{width:r?`width:${r}px;`:"",height:s?`height:${s}px;`:""}}return{width:t?`width:${t}px;`:"",height:e?`height:${e}px;`:""}}function po(t){let e,n,i,o,l,r=`translate(${t[14]}px, ${t[15]}px)`,s,u,a;var c=t[30];function f(d,h){return{props:{data:d[2],id:d[1],selected:d[3],sourcePosition:d[16],targetPosition:d[17],type:d[10],zIndex:d[18],dragging:d[8],dragHandle:d[21],isConnectable:d[6],positionAbsoluteX:d[12],positionAbsoluteY:d[13],width:d[19],height:d[20]}}}return c&&(n=Ln(c,f(t))),{c(){e=be("div"),n&&$(n.$$.fragment),S(e,"data-id",t[1]),S(e,"class",i=ke(["svelte-flow__node",`svelte-flow__node-${t[29]}`,t[23]])),S(e,"style",o=(t[9]??"")+";"+t[25].width+t[25].height),fe(e,"dragging",t[8]),fe(e,"selected",t[3]),fe(e,"draggable",t[4]),fe(e,"connectable",t[6]),fe(e,"selectable",t[5]),fe(e,"nopan",t[4]),fe(e,"parent",t[11]),ue(e,"z-index",t[18]),ue(e,"transform",r),ue(e,"visibility",t[22]?"visible":"hidden")},m(d,h){B(d,e,h),n&&j(n,e,null),t[45](e),s=!0,u||(a=[Ye(l=Ar.call(null,e,{nodeId:t[1],isSelectable:t[5],disabled:!1,handleSelector:t[21],noDragClass:"nodrag",onNodeMouseDown:t[28],onDrag:t[42],onDragStart:t[43],onDragStop:t[44],store:t[26]})),ye(e,"click",t[32]),ye(e,"mouseenter",t[46]),ye(e,"mouseleave",t[47]),ye(e,"mousemove",t[48]),ye(e,"contextmenu",t[49])],u=!0)},p(d,h){if(c!==(c=d[30])){if(n){ze();const m=n;L(m.$$.fragment,1,0,()=>{x(m,1)}),Pe()}c?(n=Ln(c,f(d)),$(n.$$.fragment),Y(n.$$.fragment,1),j(n,e,null)):n=null}else if(c){const m={};h[0]&4&&(m.data=d[2]),h[0]&2&&(m.id=d[1]),h[0]&8&&(m.selected=d[3]),h[0]&65536&&(m.sourcePosition=d[16]),h[0]&131072&&(m.targetPosition=d[17]),h[0]&1024&&(m.type=d[10]),h[0]&262144&&(m.zIndex=d[18]),h[0]&256&&(m.dragging=d[8]),h[0]&2097152&&(m.dragHandle=d[21]),h[0]&64&&(m.isConnectable=d[6]),h[0]&4096&&(m.positionAbsoluteX=d[12]),h[0]&8192&&(m.positionAbsoluteY=d[13]),h[0]&524288&&(m.width=d[19]),h[0]&1048576&&(m.height=d[20]),n.$set(m)}(!s||h[0]&2)&&S(e,"data-id",d[1]),(!s||h[0]&8388608&&i!==(i=ke(["svelte-flow__node",`svelte-flow__node-${d[29]}`,d[23]])))&&S(e,"class",i),(!s||h[0]&33554944&&o!==(o=(d[9]??"")+";"+d[25].width+d[25].height))&&S(e,"style",o),l&&Se(l.update)&&h[0]&2097186&&l.update.call(null,{nodeId:d[1],isSelectable:d[5],disabled:!1,handleSelector:d[21],noDragClass:"nodrag",onNodeMouseDown:d[28],onDrag:d[42],onDragStart:d[43],onDragStop:d[44],store:d[26]}),(!s||h[0]&8388864)&&fe(e,"dragging",d[8]),(!s||h[0]&8388616)&&fe(e,"selected",d[3]),(!s||h[0]&8388624)&&fe(e,"draggable",d[4]),(!s||h[0]&8388672)&&fe(e,"connectable",d[6]),(!s||h[0]&8388640)&&fe(e,"selectable",d[5]),(!s||h[0]&8388624)&&fe(e,"nopan",d[4]),(!s||h[0]&8390656)&&fe(e,"parent",d[11]);const _=h[0]&33554944;(h[0]&33817088||_)&&ue(e,"z-index",d[18]),(h[0]&33604096&&r!==(r=`translate(${d[14]}px, ${d[15]}px)`)||_)&&ue(e,"transform",r),(h[0]&37749248||_)&&ue(e,"visibility",d[22]?"visible":"hidden")},i(d){s||(n&&Y(n.$$.fragment,d),s=!0)},o(d){n&&L(n.$$.fragment,d),s=!1},d(d){d&&W(e),n&&x(n),t[45](null),u=!1,Ne(a)}}}function eh(t){let e,n,i=!t[7]&&po(t);return{c(){i&&i.c(),e=He()},m(o,l){i&&i.m(o,l),B(o,e,l),n=!0},p(o,l){o[7]?i&&(ze(),L(i,1,1,()=>{i=null}),Pe()):i?(i.p(o,l),l[0]&128&&Y(i,1)):(i=po(o),i.c(),Y(i,1),i.m(e.parentNode,e))},i(o){n||(Y(i),n=!0)},o(o){L(i),n=!1},d(o){o&&W(e),i&&i.d(o)}}}function th(t,e,n){let i,o,{node:l}=e,{id:r}=e,{data:s={}}=e,{selected:u=!1}=e,{draggable:a=void 0}=e,{selectable:c=void 0}=e,{connectable:f=!0}=e,{hidden:d=!1}=e,{dragging:h=!1}=e,{resizeObserver:_=null}=e,{style:m=void 0}=e,{type:b="default"}=e,{isParent:g=!1}=e,{positionX:k}=e,{positionY:E}=e,{positionOriginX:v}=e,{positionOriginY:C}=e,{sourcePosition:H=void 0}=e,{targetPosition:I=void 0}=e,{zIndex:D}=e,{computedWidth:A=void 0}=e,{computedHeight:y=void 0}=e,{initialWidth:z=void 0}=e,{initialHeight:V=void 0}=e,{width:M=void 0}=e,{height:w=void 0}=e,{dragHandle:X=void 0}=e,{initialized:P=!1}=e,{class:R=""}=e;const T=Ce(),{nodeTypes:K,nodeDragThreshold:Z,selectNodesOnDrag:U,handleNodeSelection:O,updateNodeDimensions:se}=T;J(t,K,q=>n(50,o=q));const re=b||"default";let ce,G;!!o[re]||console.warn("003",bn.error003(b));const me=o[re]||Er,F=ti(),Me=te(f);let Ae,De,Oe;rn("svelteflow__node_id",r),rn("svelteflow__node_connectable",Me),Bi(()=>{_==null||_.unobserve(ce)});function qe(q){c&&(!p(U)||!a||p(Z)>0)&&O(r),F("nodeclick",{node:l,event:q})}const ve=(q,Ue,Be,Q)=>{F("nodedrag",{event:q,node:Be,nodes:Q})},rt=(q,Ue,Be,Q)=>{F("nodedragstart",{event:q,node:Be,nodes:Q})},st=(q,Ue,Be,Q)=>{F("nodedragstop",{event:q,node:Be,nodes:Q})};function et(q){St[q?"unshift":"push"](()=>{ce=q,n(24,ce)})}const tt=q=>F("nodemouseenter",{node:l,event:q}),ee=q=>F("nodemouseleave",{node:l,event:q}),mt=q=>F("nodemousemove",{node:l,event:q}),_t=q=>F("nodecontextmenu",{node:l,event:q});return t.$$set=q=>{"node"in q&&n(0,l=q.node),"id"in q&&n(1,r=q.id),"data"in q&&n(2,s=q.data),"selected"in q&&n(3,u=q.selected),"draggable"in q&&n(4,a=q.draggable),"selectable"in q&&n(5,c=q.selectable),"connectable"in q&&n(6,f=q.connectable),"hidden"in q&&n(7,d=q.hidden),"dragging"in q&&n(8,h=q.dragging),"resizeObserver"in q&&n(33,_=q.resizeObserver),"style"in q&&n(9,m=q.style),"type"in q&&n(10,b=q.type),"isParent"in q&&n(11,g=q.isParent),"positionX"in q&&n(12,k=q.positionX),"positionY"in q&&n(13,E=q.positionY),"positionOriginX"in q&&n(14,v=q.positionOriginX),"positionOriginY"in q&&n(15,C=q.positionOriginY),"sourcePosition"in q&&n(16,H=q.sourcePosition),"targetPosition"in q&&n(17,I=q.targetPosition),"zIndex"in q&&n(18,D=q.zIndex),"computedWidth"in q&&n(34,A=q.computedWidth),"computedHeight"in q&&n(35,y=q.computedHeight),"initialWidth"in q&&n(36,z=q.initialWidth),"initialHeight"in q&&n(37,V=q.initialHeight),"width"in q&&n(19,M=q.width),"height"in q&&n(20,w=q.height),"dragHandle"in q&&n(21,X=q.dragHandle),"initialized"in q&&n(22,P=q.initialized),"class"in q&&n(23,R=q.class)},t.$$.update=()=>{t.$$.dirty[0]&1572864|t.$$.dirty[1]&120&&n(25,i=$d({width:M,height:w,initialWidth:z,initialHeight:V,computedWidth:A,computedHeight:y})),t.$$.dirty[0]&64&&Me.set(!!f),t.$$.dirty[0]&16973826|t.$$.dirty[1]&1792&&((Ae&&re!==Ae||De&&H!==De||Oe&&I!==Oe)&&requestAnimationFrame(()=>se(new Map([[r,{id:r,nodeElement:ce,forceUpdate:!0}]]))),n(39,Ae=re),n(40,De=H),n(41,Oe=I)),t.$$.dirty[0]&16777216|t.$$.dirty[1]&156&&ce&&(G?(G!==ce||!A&&!y)&&(_==null||_.unobserve(G),_==null||_.observe(ce),n(38,G=ce)):(_==null||_.observe(ce),n(38,G=ce)))},[l,r,s,u,a,c,f,d,h,m,b,g,k,E,v,C,H,I,D,M,w,X,P,R,ce,i,T,K,O,re,me,F,qe,_,A,y,z,V,G,Ae,De,Oe,ve,rt,st,et,tt,ee,mt,_t]}class nh extends oe{constructor(e){super(),ie(this,e,th,eh,Ml,{node:0,id:1,data:2,selected:3,draggable:4,selectable:5,connectable:6,hidden:7,dragging:8,resizeObserver:33,style:9,type:10,isParent:11,positionX:12,positionY:13,positionOriginX:14,positionOriginY:15,sourcePosition:16,targetPosition:17,zIndex:18,computedWidth:34,computedHeight:35,initialWidth:36,initialHeight:37,width:19,height:20,dragHandle:21,initialized:22,class:23},null,[-1,-1])}}const ih=nh,{Map:oh}=is;function Ko(t,e,n){var r,s,u,a;const i=t.slice();i[18]=e[n];const o=kn(i[18]);i[19]=o;const l=of({x:((s=(r=i[18].computed)==null?void 0:r.positionAbsolute)==null?void 0:s.x)??0,y:((a=(u=i[18].computed)==null?void 0:u.positionAbsolute)==null?void 0:a.y)??0,...i[19],origin:i[18].origin});return i[20]=l,i}function Fo(t,e){var l,r,s,u,a,c,f,d;let n,i,o;return i=new ih({props:{node:e[18],id:e[18].id,data:e[18].data,selected:!!e[18].selected,hidden:!!e[18].hidden,draggable:!!(e[18].draggable||e[1]&&typeof e[18].draggable>"u"),selectable:!!(e[18].selectable||e[2]&&typeof e[18].selectable>"u"),connectable:!!(e[18].connectable||e[3]&&typeof e[18].connectable>"u"),positionX:((r=(l=e[18].computed)==null?void 0:l.positionAbsolute)==null?void 0:r.x)??0,positionY:((u=(s=e[18].computed)==null?void 0:s.positionAbsolute)==null?void 0:u.y)??0,positionOriginX:e[20].x??0,positionOriginY:e[20].y??0,isParent:!!((a=e[18][Ee])!=null&&a.isParent),style:e[18].style,class:e[18].class,type:e[18].type??"default",sourcePosition:e[18].sourcePosition,targetPosition:e[18].targetPosition,dragging:e[18].dragging,zIndex:((c=e[18][Ee])==null?void 0:c.z)??0,dragHandle:e[18].dragHandle,initialized:xn(e[18]),width:e[18].width,height:e[18].height,initialWidth:e[18].initialWidth,initialHeight:e[18].initialHeight,computedWidth:(f=e[18].computed)==null?void 0:f.width,computedHeight:(d=e[18].computed)==null?void 0:d.height,resizeObserver:e[8]}}),i.$on("nodeclick",e[9]),i.$on("nodemouseenter",e[10]),i.$on("nodemousemove",e[11]),i.$on("nodemouseleave",e[12]),i.$on("nodedrag",e[13]),i.$on("nodedragstart",e[14]),i.$on("nodedragstop",e[15]),i.$on("nodecontextmenu",e[16]),{key:t,first:null,c(){n=He(),$(i.$$.fragment),this.first=n},m(h,_){B(h,n,_),j(i,h,_),o=!0},p(h,_){var b,g,k,E,v,C,H,I;e=h;const m={};_&1&&(m.node=e[18]),_&1&&(m.id=e[18].id),_&1&&(m.data=e[18].data),_&1&&(m.selected=!!e[18].selected),_&1&&(m.hidden=!!e[18].hidden),_&3&&(m.draggable=!!(e[18].draggable||e[1]&&typeof e[18].draggable>"u")),_&5&&(m.selectable=!!(e[18].selectable||e[2]&&typeof e[18].selectable>"u")),_&9&&(m.connectable=!!(e[18].connectable||e[3]&&typeof e[18].connectable>"u")),_&1&&(m.positionX=((g=(b=e[18].computed)==null?void 0:b.positionAbsolute)==null?void 0:g.x)??0),_&1&&(m.positionY=((E=(k=e[18].computed)==null?void 0:k.positionAbsolute)==null?void 0:E.y)??0),_&1&&(m.positionOriginX=e[20].x??0),_&1&&(m.positionOriginY=e[20].y??0),_&1&&(m.isParent=!!((v=e[18][Ee])!=null&&v.isParent)),_&1&&(m.style=e[18].style),_&1&&(m.class=e[18].class),_&1&&(m.type=e[18].type??"default"),_&1&&(m.sourcePosition=e[18].sourcePosition),_&1&&(m.targetPosition=e[18].targetPosition),_&1&&(m.dragging=e[18].dragging),_&1&&(m.zIndex=((C=e[18][Ee])==null?void 0:C.z)??0),_&1&&(m.dragHandle=e[18].dragHandle),_&1&&(m.initialized=xn(e[18])),_&1&&(m.width=e[18].width),_&1&&(m.height=e[18].height),_&1&&(m.initialWidth=e[18].initialWidth),_&1&&(m.initialHeight=e[18].initialHeight),_&1&&(m.computedWidth=(H=e[18].computed)==null?void 0:H.width),_&1&&(m.computedHeight=(I=e[18].computed)==null?void 0:I.height),i.$set(m)},i(h){o||(Y(i.$$.fragment,h),o=!0)},o(h){L(i.$$.fragment,h),o=!1},d(h){h&&W(n),x(i,h)}}}function lh(t){let e,n=[],i=new oh,o,l=Te(t[0]);const r=s=>s[18].id;for(let s=0;s<l.length;s+=1){let u=Ko(t,l,s),a=r(u);i.set(a,n[s]=Fo(a,u))}return{c(){e=be("div");for(let s=0;s<n.length;s+=1)n[s].c();S(e,"class","svelte-flow__nodes svelte-tf4uy4")},m(s,u){B(s,e,u);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);o=!0},p(s,[u]){u&271&&(l=Te(s[0]),ze(),n=ii(n,u,r,1,s,l,i,e,ni,Fo,null,Ko),Pe())},i(s){if(!o){for(let u=0;u<l.length;u+=1)Y(n[u]);o=!0}},o(s){for(let u=0;u<n.length;u+=1)L(n[u]);o=!1},d(s){s&&W(e);for(let u=0;u<n.length;u+=1)n[u].d()}}}function rh(t,e,n){let i,o,l,r;const{visibleNodes:s,nodesDraggable:u,nodesConnectable:a,elementsSelectable:c,updateNodeDimensions:f}=Ce();J(t,s,C=>n(0,i=C)),J(t,u,C=>n(1,o=C)),J(t,a,C=>n(3,r=C)),J(t,c,C=>n(2,l=C));const d=typeof ResizeObserver>"u"?null:new ResizeObserver(C=>{const H=new Map;C.forEach(I=>{const D=I.target.getAttribute("data-id");H.set(D,{id:D,nodeElement:I.target,forceUpdate:!0})}),f(H)});Bi(()=>{d==null||d.disconnect()});function h(C){we.call(this,t,C)}function _(C){we.call(this,t,C)}function m(C){we.call(this,t,C)}function b(C){we.call(this,t,C)}function g(C){we.call(this,t,C)}function k(C){we.call(this,t,C)}function E(C){we.call(this,t,C)}function v(C){we.call(this,t,C)}return[i,o,l,r,s,u,a,c,d,h,_,m,b,g,k,E,v]}class sh extends oe{constructor(e){super(),ie(this,e,rh,lh,le,{})}}function Zo(t){let e,n,i,o,l,r,s,u;var a=t[25];function c(f,d){return{props:{id:f[0],source:f[1],target:f[2],sourceX:f[13],sourceY:f[14],targetX:f[15],targetY:f[16],sourcePosition:f[17],targetPosition:f[18],animated:f[6],selected:f[7],label:f[9],labelStyle:f[10],data:f[3],style:f[4],interactionWidth:f[20],sourceHandleId:f[11],targetHandleId:f[12],markerStart:f[24],markerEnd:f[23]}}}return a&&(i=Ln(a,c(t))),{c(){e=ge("svg"),n=ge("g"),i&&$(i.$$.fragment),S(n,"class",o=ke(["svelte-flow__edge",t[21]])),S(n,"data-id",t[0]),S(n,"aria-label",l=t[19]===null?void 0:t[19]?t[19]:`Edge from ${t[1]} to ${t[2]}`),S(n,"role","img"),fe(n,"animated",t[6]),fe(n,"selected",t[7]),fe(n,"selectable",t[22]),ue(e,"zIndex",t[5])},m(f,d){B(f,e,d),_e(e,n),i&&j(i,n,null),r=!0,s||(u=[ye(n,"click",t[30]),ye(n,"contextmenu",t[31])],s=!0)},p(f,d){if(d[0]&33554432&&a!==(a=f[25])){if(i){ze();const h=i;L(h.$$.fragment,1,0,()=>{x(h,1)}),Pe()}a?(i=Ln(a,c(f)),$(i.$$.fragment),Y(i.$$.fragment,1),j(i,n,null)):i=null}else if(a){const h={};d[0]&1&&(h.id=f[0]),d[0]&2&&(h.source=f[1]),d[0]&4&&(h.target=f[2]),d[0]&8192&&(h.sourceX=f[13]),d[0]&16384&&(h.sourceY=f[14]),d[0]&32768&&(h.targetX=f[15]),d[0]&65536&&(h.targetY=f[16]),d[0]&131072&&(h.sourcePosition=f[17]),d[0]&262144&&(h.targetPosition=f[18]),d[0]&64&&(h.animated=f[6]),d[0]&128&&(h.selected=f[7]),d[0]&512&&(h.label=f[9]),d[0]&1024&&(h.labelStyle=f[10]),d[0]&8&&(h.data=f[3]),d[0]&16&&(h.style=f[4]),d[0]&1048576&&(h.interactionWidth=f[20]),d[0]&2048&&(h.sourceHandleId=f[11]),d[0]&4096&&(h.targetHandleId=f[12]),d[0]&16777216&&(h.markerStart=f[24]),d[0]&8388608&&(h.markerEnd=f[23]),i.$set(h)}(!r||d[0]&2097152&&o!==(o=ke(["svelte-flow__edge",f[21]])))&&S(n,"class",o),(!r||d[0]&1)&&S(n,"data-id",f[0]),(!r||d[0]&524294&&l!==(l=f[19]===null?void 0:f[19]?f[19]:`Edge from ${f[1]} to ${f[2]}`))&&S(n,"aria-label",l),(!r||d[0]&2097216)&&fe(n,"animated",f[6]),(!r||d[0]&2097280)&&fe(n,"selected",f[7]),(!r||d[0]&6291456)&&fe(n,"selectable",f[22]),d[0]&32&&ue(e,"zIndex",f[5])},i(f){r||(i&&Y(i.$$.fragment,f),r=!0)},o(f){i&&L(i.$$.fragment,f),r=!1},d(f){f&&W(e),i&&x(i),s=!1,Ne(u)}}}function uh(t){let e,n,i=!t[8]&&Zo(t);return{c(){i&&i.c(),e=He()},m(o,l){i&&i.m(o,l),B(o,e,l),n=!0},p(o,l){o[8]?i&&(ze(),L(i,1,1,()=>{i=null}),Pe()):i?(i.p(o,l),l[0]&256&&Y(i,1)):(i=Zo(o),i.c(),Y(i,1),i.m(e.parentNode,e))},i(o){n||(Y(i),n=!0)},o(o){L(i),n=!1},d(o){o&&W(e),i&&i.d(o)}}}function ah(t,e,n){let i,o,l,r,s,u,a,c,{id:f}=e,{type:d="default"}=e,{source:h=""}=e,{target:_=""}=e,{data:m={}}=e,{style:b=void 0}=e,{zIndex:g=void 0}=e,{animated:k=!1}=e,{selected:E=!1}=e,{selectable:v=void 0}=e,{hidden:C=!1}=e,{label:H=void 0}=e,{labelStyle:I=void 0}=e,{markerStart:D=void 0}=e,{markerEnd:A=void 0}=e,{sourceHandle:y=void 0}=e,{targetHandle:z=void 0}=e,{sourceX:V}=e,{sourceY:M}=e,{targetX:w}=e,{targetY:X}=e,{sourcePosition:P}=e,{targetPosition:R}=e,{ariaLabel:T=void 0}=e,{interactionWidth:K=void 0}=e,{class:Z=""}=e;rn("svelteflow__edge_id",f);const{edgeLookup:U,edgeTypes:O,flowId:se,elementsSelectable:re}=Ce();J(t,U,F=>n(39,s=F)),J(t,O,F=>n(38,c=F)),J(t,se,F=>n(37,a=F)),J(t,re,F=>n(36,u=F));const ce=ti(),G=Cr();function he(F){const Me=s.get(f);Me&&(G(f),ce("edgeclick",{event:F,edge:Me}))}function me(F){const Me=s.get(f);Me&&ce("edgecontextmenu",{event:F,edge:Me})}return t.$$set=F=>{"id"in F&&n(0,f=F.id),"type"in F&&n(32,d=F.type),"source"in F&&n(1,h=F.source),"target"in F&&n(2,_=F.target),"data"in F&&n(3,m=F.data),"style"in F&&n(4,b=F.style),"zIndex"in F&&n(5,g=F.zIndex),"animated"in F&&n(6,k=F.animated),"selected"in F&&n(7,E=F.selected),"selectable"in F&&n(33,v=F.selectable),"hidden"in F&&n(8,C=F.hidden),"label"in F&&n(9,H=F.label),"labelStyle"in F&&n(10,I=F.labelStyle),"markerStart"in F&&n(34,D=F.markerStart),"markerEnd"in F&&n(35,A=F.markerEnd),"sourceHandle"in F&&n(11,y=F.sourceHandle),"targetHandle"in F&&n(12,z=F.targetHandle),"sourceX"in F&&n(13,V=F.sourceX),"sourceY"in F&&n(14,M=F.sourceY),"targetX"in F&&n(15,w=F.targetX),"targetY"in F&&n(16,X=F.targetY),"sourcePosition"in F&&n(17,P=F.sourcePosition),"targetPosition"in F&&n(18,R=F.targetPosition),"ariaLabel"in F&&n(19,T=F.ariaLabel),"interactionWidth"in F&&n(20,K=F.interactionWidth),"class"in F&&n(21,Z=F.class)},t.$$.update=()=>{t.$$.dirty[1]&130&&n(25,i=c[d]||zr),t.$$.dirty[1]&72&&n(24,o=D?`url(#${Li(D,a)})`:void 0),t.$$.dirty[1]&80&&n(23,l=A?`url(#${Li(A,a)})`:void 0),t.$$.dirty[1]&36&&n(22,r=v||u&&typeof v>"u")},[f,h,_,m,b,g,k,E,C,H,I,y,z,V,M,w,X,P,R,T,K,Z,r,l,o,i,U,O,se,re,he,me,d,v,D,A,u,a,c]}class ch extends oe{constructor(e){super(),ie(this,e,ah,uh,Ml,{id:0,type:32,source:1,target:2,data:3,style:4,zIndex:5,animated:6,selected:7,selectable:33,hidden:8,label:9,labelStyle:10,markerStart:34,markerEnd:35,sourceHandle:11,targetHandle:12,sourceX:13,sourceY:14,targetX:15,targetY:16,sourcePosition:17,targetPosition:18,ariaLabel:19,interactionWidth:20,class:21},null,[-1,-1])}}const fh=ch;function dh(t,e,n){let{onMount:i=void 0}=e,{onDestroy:o=void 0}=e;return ei(()=>(i==null||i(),o)),t.$$set=l=>{"onMount"in l&&n(0,i=l.onMount),"onDestroy"in l&&n(1,o=l.onDestroy)},[i,o]}class hh extends oe{constructor(e){super(),ie(this,e,dh,null,le,{onMount:0,onDestroy:1})}}const gh=hh;function qo(t,e,n){const i=t.slice();return i[2]=e[n],i}function Uo(t,e){let n,i,o;const l=[e[2]];let r={};for(let s=0;s<l.length;s+=1)r=Ie(r,l[s]);return i=new Sh({props:r}),{key:t,first:null,c(){n=He(),$(i.$$.fragment),this.first=n},m(s,u){B(s,n,u),j(i,s,u),o=!0},p(s,u){e=s;const a=u&1?ht(l,[Wt(e[2])]):{};i.$set(a)},i(s){o||(Y(i.$$.fragment,s),o=!0)},o(s){L(i.$$.fragment,s),o=!1},d(s){s&&W(n),x(i,s)}}}function mh(t){let e,n=[],i=new Map,o,l=Te(t[0]);const r=s=>s[2].id;for(let s=0;s<l.length;s+=1){let u=qo(t,l,s),a=r(u);i.set(a,n[s]=Uo(a,u))}return{c(){e=ge("defs");for(let s=0;s<n.length;s+=1)n[s].c()},m(s,u){B(s,e,u);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);o=!0},p(s,[u]){u&1&&(l=Te(s[0]),ze(),n=ii(n,u,r,1,s,l,i,e,ni,Uo,null,qo),Pe())},i(s){if(!o){for(let u=0;u<l.length;u+=1)Y(n[u]);o=!0}},o(s){for(let u=0;u<n.length;u+=1)L(n[u]);o=!1},d(s){s&&W(e);for(let u=0;u<n.length;u+=1)n[u].d()}}}function _h(t,e,n){let i;const{markers:o}=Ce();return J(t,o,l=>n(0,i=l)),[i,o]}class yh extends oe{constructor(e){super(),ie(this,e,_h,mh,le,{})}}function bh(t){let e;return{c(){e=ge("polyline"),S(e,"stroke",t[6]),S(e,"stroke-linecap","round"),S(e,"stroke-linejoin","round"),S(e,"stroke-width",t[7]),S(e,"fill",t[6]),S(e,"points","-5,-4 0,0 -5,4 -5,-4")},m(n,i){B(n,e,i)},p(n,i){i&64&&S(e,"stroke",n[6]),i&128&&S(e,"stroke-width",n[7]),i&64&&S(e,"fill",n[6])},d(n){n&&W(e)}}}function wh(t){let e;return{c(){e=ge("polyline"),S(e,"stroke",t[6]),S(e,"stroke-linecap","round"),S(e,"stroke-linejoin","round"),S(e,"stroke-width",t[7]),S(e,"fill","none"),S(e,"points","-5,-4 0,0 -5,4")},m(n,i){B(n,e,i)},p(n,i){i&64&&S(e,"stroke",n[6]),i&128&&S(e,"stroke-width",n[7])},d(n){n&&W(e)}}}function kh(t){let e,n,i;function o(s,u){if(s[1]===dn.Arrow)return wh;if(s[1]===dn.ArrowClosed)return bh}let l=o(t),r=l&&l(t);return{c(){e=ge("marker"),r&&r.c(),S(e,"class","svelte-flow__arrowhead"),S(e,"id",t[0]),S(e,"markerWidth",n=`${t[2]}`),S(e,"markerHeight",i=`${t[3]}`),S(e,"viewBox","-10 -10 20 20"),S(e,"markerUnits",t[4]),S(e,"orient",t[5]),S(e,"refX","0"),S(e,"refY","0")},m(s,u){B(s,e,u),r&&r.m(e,null)},p(s,[u]){l===(l=o(s))&&r?r.p(s,u):(r&&r.d(1),r=l&&l(s),r&&(r.c(),r.m(e,null))),u&1&&S(e,"id",s[0]),u&4&&n!==(n=`${s[2]}`)&&S(e,"markerWidth",n),u&8&&i!==(i=`${s[3]}`)&&S(e,"markerHeight",i),u&16&&S(e,"markerUnits",s[4]),u&32&&S(e,"orient",s[5])},i:ne,o:ne,d(s){s&&W(e),r&&r.d()}}}function vh(t,e,n){let{id:i}=e,{type:o}=e,{width:l=12.5}=e,{height:r=12.5}=e,{markerUnits:s="strokeWidth"}=e,{orient:u="auto-start-reverse"}=e,{color:a=void 0}=e,{strokeWidth:c=void 0}=e;return t.$$set=f=>{"id"in f&&n(0,i=f.id),"type"in f&&n(1,o=f.type),"width"in f&&n(2,l=f.width),"height"in f&&n(3,r=f.height),"markerUnits"in f&&n(4,s=f.markerUnits),"orient"in f&&n(5,u=f.orient),"color"in f&&n(6,a=f.color),"strokeWidth"in f&&n(7,c=f.strokeWidth)},[i,o,l,r,s,u,a,c]}class Sh extends oe{constructor(e){super(),ie(this,e,vh,kh,le,{id:0,type:1,width:2,height:3,markerUnits:4,orient:5,color:6,strokeWidth:7})}}function Go(t,e,n){const i=t.slice();return i[10]=e[n],i}function Jo(t,e){let n,i,o;return i=new fh({props:{id:e[10].id,source:e[10].source,target:e[10].target,data:e[10].data,style:e[10].style,animated:e[10].animated,selected:e[10].selected,selectable:e[10].selectable,hidden:e[10].hidden,label:e[10].label,labelStyle:e[10].labelStyle,markerStart:e[10].markerStart,markerEnd:e[10].markerEnd,sourceHandle:e[10].sourceHandle,targetHandle:e[10].targetHandle,sourceX:e[10].sourceX,sourceY:e[10].sourceY,targetX:e[10].targetX,targetY:e[10].targetY,sourcePosition:e[10].sourcePosition,targetPosition:e[10].targetPosition,ariaLabel:e[10].ariaLabel,interactionWidth:e[10].interactionWidth,class:e[10].class,type:e[10].type||"default",zIndex:e[10].zIndex}}),i.$on("edgeclick",e[5]),i.$on("edgecontextmenu",e[6]),{key:t,first:null,c(){n=He(),$(i.$$.fragment),this.first=n},m(l,r){B(l,n,r),j(i,l,r),o=!0},p(l,r){e=l;const s={};r&1&&(s.id=e[10].id),r&1&&(s.source=e[10].source),r&1&&(s.target=e[10].target),r&1&&(s.data=e[10].data),r&1&&(s.style=e[10].style),r&1&&(s.animated=e[10].animated),r&1&&(s.selected=e[10].selected),r&1&&(s.selectable=e[10].selectable),r&1&&(s.hidden=e[10].hidden),r&1&&(s.label=e[10].label),r&1&&(s.labelStyle=e[10].labelStyle),r&1&&(s.markerStart=e[10].markerStart),r&1&&(s.markerEnd=e[10].markerEnd),r&1&&(s.sourceHandle=e[10].sourceHandle),r&1&&(s.targetHandle=e[10].targetHandle),r&1&&(s.sourceX=e[10].sourceX),r&1&&(s.sourceY=e[10].sourceY),r&1&&(s.targetX=e[10].targetX),r&1&&(s.targetY=e[10].targetY),r&1&&(s.sourcePosition=e[10].sourcePosition),r&1&&(s.targetPosition=e[10].targetPosition),r&1&&(s.ariaLabel=e[10].ariaLabel),r&1&&(s.interactionWidth=e[10].interactionWidth),r&1&&(s.class=e[10].class),r&1&&(s.type=e[10].type||"default"),r&1&&(s.zIndex=e[10].zIndex),i.$set(s)},i(l){o||(Y(i.$$.fragment,l),o=!0)},o(l){L(i.$$.fragment,l),o=!1},d(l){l&&W(n),x(i,l)}}}function Qo(t){let e,n;return e=new gh({props:{onMount:t[7],onDestroy:t[8]}}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p(i,o){const l={};o&2&&(l.onMount=i[7]),o&2&&(l.onDestroy=i[8]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function Eh(t){let e,n,i,o,l=[],r=new Map,s,u;i=new yh({});let a=Te(t[0]);const c=d=>d[10].id;for(let d=0;d<a.length;d+=1){let h=Go(t,a,d),_=c(h);r.set(_,l[d]=Jo(_,h))}let f=t[0].length>0&&Qo(t);return{c(){e=be("div"),n=ge("svg"),$(i.$$.fragment),o=de();for(let d=0;d<l.length;d+=1)l[d].c();s=de(),f&&f.c(),S(n,"class","svelte-flow__marker"),S(e,"class","svelte-flow__edges")},m(d,h){B(d,e,h),_e(e,n),j(i,n,null),_e(e,o);for(let _=0;_<l.length;_+=1)l[_]&&l[_].m(e,null);_e(e,s),f&&f.m(e,null),u=!0},p(d,[h]){h&1&&(a=Te(d[0]),ze(),l=ii(l,h,c,1,d,a,r,e,ni,Jo,s,Go),Pe()),d[0].length>0?f?(f.p(d,h),h&1&&Y(f,1)):(f=Qo(d),f.c(),Y(f,1),f.m(e,null)):f&&(ze(),L(f,1,1,()=>{f=null}),Pe())},i(d){if(!u){Y(i.$$.fragment,d);for(let h=0;h<a.length;h+=1)Y(l[h]);Y(f),u=!0}},o(d){L(i.$$.fragment,d);for(let h=0;h<l.length;h+=1)L(l[h]);L(f),u=!1},d(d){d&&W(e),x(i);for(let h=0;h<l.length;h+=1)l[h].d();f&&f.d()}}}function Ch(t,e,n){let i,o,{defaultEdgeOptions:l}=e;const{visibleEdges:r,edgesInitialized:s,edges:{setDefaultOptions:u}}=Ce();J(t,r,h=>n(0,i=h)),J(t,s,h=>n(1,o=h)),ei(()=>{l&&u(l)});function a(h){we.call(this,t,h)}function c(h){we.call(this,t,h)}const f=()=>{Mi(s,o=!0,o)},d=()=>{Mi(s,o=!1,o)};return t.$$set=h=>{"defaultEdgeOptions"in h&&n(4,l=h.defaultEdgeOptions)},[i,o,r,s,l,a,c,f,d]}class zh extends oe{constructor(e){super(),ie(this,e,Ch,Eh,le,{defaultEdgeOptions:4})}}const Ph=zh;function jo(t){let e;return{c(){e=be("div"),S(e,"class","svelte-flow__selection svelte-1iugwpu"),ue(e,"width",typeof t[2]=="string"?t[2]:`${t[2]}px`),ue(e,"height",typeof t[3]=="string"?t[3]:`${t[3]}px`),ue(e,"transform",`translate(${t[0]}px, ${t[1]}px)`)},m(n,i){B(n,e,i)},p(n,i){i&4&&ue(e,"width",typeof n[2]=="string"?n[2]:`${n[2]}px`),i&8&&ue(e,"height",typeof n[3]=="string"?n[3]:`${n[3]}px`),i&3&&ue(e,"transform",`translate(${n[0]}px, ${n[1]}px)`)},d(n){n&&W(e)}}}function Mh(t){let e,n=t[4]&&jo(t);return{c(){n&&n.c(),e=He()},m(i,o){n&&n.m(i,o),B(i,e,o)},p(i,[o]){i[4]?n?n.p(i,o):(n=jo(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ne,o:ne,d(i){i&&W(e),n&&n.d(i)}}}function Hh(t,e,n){let{x:i=0}=e,{y:o=0}=e,{width:l=0}=e,{height:r=0}=e,{isVisible:s=!0}=e;return t.$$set=u=>{"x"in u&&n(0,i=u.x),"y"in u&&n(1,o=u.y),"width"in u&&n(2,l=u.width),"height"in u&&n(3,r=u.height),"isVisible"in u&&n(4,s=u.isVisible)},[i,o,l,r,s]}class Nh extends oe{constructor(e){super(),ie(this,e,Hh,Mh,le,{x:0,y:1,width:2,height:3,isVisible:4})}}const Or=Nh;function Ah(t){var i,o,l,r;let e,n;return e=new Or({props:{isVisible:!!(t[0]&&t[1]==="user"),width:(i=t[0])==null?void 0:i.width,height:(o=t[0])==null?void 0:o.height,x:(l=t[0])==null?void 0:l.x,y:(r=t[0])==null?void 0:r.y}}),{c(){$(e.$$.fragment)},m(s,u){j(e,s,u),n=!0},p(s,[u]){var c,f,d,h;const a={};u&3&&(a.isVisible=!!(s[0]&&s[1]==="user")),u&1&&(a.width=(c=s[0])==null?void 0:c.width),u&1&&(a.height=(f=s[0])==null?void 0:f.height),u&1&&(a.x=(d=s[0])==null?void 0:d.x),u&1&&(a.y=(h=s[0])==null?void 0:h.y),e.$set(a)},i(s){n||(Y(e.$$.fragment,s),n=!0)},o(s){L(e.$$.fragment,s),n=!1},d(s){x(e,s)}}}function Oh(t,e,n){let i,o;const{selectionRect:l,selectionRectMode:r}=Ce();return J(t,l,s=>n(0,i=s)),J(t,r,s=>n(1,o=s)),[i,o,l,r]}class Th extends oe{constructor(e){super(),ie(this,e,Oh,Ah,le,{})}}function xo(t){let e,n,i,o,l;return n=new Or({props:{width:"100%",height:"100%",x:0,y:0}}),{c(){e=be("div"),$(n.$$.fragment),S(e,"class","selection-wrapper nopan svelte-5pxri"),ue(e,"width",t[1].width+"px"),ue(e,"height",t[1].height+"px"),ue(e,"transform","translate("+t[1].x+"px, "+t[1].y+"px)")},m(r,s){B(r,e,s),j(n,e,null),i=!0,o||(l=[Ye(Ar.call(null,e,{disabled:!1,store:t[3]})),ye(e,"contextmenu",t[6]),ye(e,"click",t[7])],o=!0)},p(r,s){(!i||s&2)&&ue(e,"width",r[1].width+"px"),(!i||s&2)&&ue(e,"height",r[1].height+"px"),(!i||s&2)&&ue(e,"transform","translate("+r[1].x+"px, "+r[1].y+"px)")},i(r){i||(Y(n.$$.fragment,r),i=!0)},o(r){L(n.$$.fragment,r),i=!1},d(r){r&&W(e),x(n),o=!1,Ne(l)}}}function Ih(t){let e,n,i=t[0]&&t[2]==="nodes"&&xo(t);return{c(){i&&i.c(),e=He()},m(o,l){i&&i.m(o,l),B(o,e,l),n=!0},p(o,[l]){o[0]&&o[2]==="nodes"?i?(i.p(o,l),l&5&&Y(i,1)):(i=xo(o),i.c(),Y(i,1),i.m(e.parentNode,e)):i&&(ze(),L(i,1,1,()=>{i=null}),Pe())},i(o){n||(Y(i),n=!0)},o(o){L(i),n=!1},d(o){o&&W(e),i&&i.d(o)}}}function Dh(t,e,n){let i,o,l,r;const s=Ce(),{selectionRectMode:u,nodes:a}=s;J(t,u,h=>n(2,r=h)),J(t,a,h=>n(8,l=h));const c=ti();function f(h){c("selectioncontextmenu",{nodes:i,event:h})}function d(h){c("selectionclick",{nodes:i,event:h})}return t.$$.update=()=>{t.$$.dirty&256&&n(0,i=l.filter(h=>h.selected)),t.$$.dirty&1&&n(1,o=wn(i))},[i,o,r,s,u,a,f,d,l]}class Xh extends oe{constructor(e){super(),ie(this,e,Dh,Ih,le,{})}}function nt(t,e){let{enabled:n=!0,trigger:i,type:o="keydown"}=e;function l(r){const s=Array.isArray(i)?i:[i],u={alt:r.altKey,ctrl:r.ctrlKey,shift:r.shiftKey,meta:r.metaKey};for(const a of s){const c={modifier:[],preventDefault:!1,enabled:!0,...a},{modifier:f,key:d,callback:h,preventDefault:_,enabled:m}=c;if(m){if(f.length&&!(Array.isArray(f)?f:[f]).map(k=>typeof k=="string"?[k]:k).some(k=>k.every(E=>u[E])))continue;if(r.key===d){_&&r.preventDefault();const b={node:t,trigger:c,originalEvent:r};t.dispatchEvent(new CustomEvent("shortcut",{detail:b})),h==null||h(b)}}}}return n&&t.addEventListener(o,l),{update:r=>{const{enabled:s=!0,type:u="keydown"}=r;n&&(!s||o!==u)?t.removeEventListener(o,l):!n&&s&&t.addEventListener(u,l),n=s,o=u,i=r.trigger},destroy:()=>{t.removeEventListener(o,l)}}}function Yh(t){let e,n,i,o,l,r,s,u,a,c,f,d;return{c:ne,m(h,_){f||(d=[Ye(e=nt.call(null,window,{trigger:[{...t[4],enabled:t[4].key!==null,callback:t[15]}],type:"keydown"})),Ye(n=nt.call(null,window,{trigger:[{...t[4],enabled:t[4].key!==null,callback:t[16]}],type:"keyup"})),Ye(i=nt.call(null,window,{trigger:[{...t[3],enabled:t[3].key!==null,callback:t[17]}],type:"keydown"})),Ye(o=nt.call(null,window,{trigger:[{...t[3],enabled:t[3].key!==null,callback:t[18]}],type:"keyup"})),Ye(l=nt.call(null,window,{trigger:[{...t[2],enabled:t[2].key!==null,callback:t[19]}],type:"keydown"})),Ye(r=nt.call(null,window,{trigger:[{...t[2],enabled:t[2].key!==null,callback:t[20]}],type:"keyup"})),Ye(s=nt.call(null,window,{trigger:[{...t[1],enabled:t[1].key!==null,callback:t[21]}],type:"keydown"})),Ye(u=nt.call(null,window,{trigger:[{...t[1],enabled:t[1].key!==null,callback:t[22]}],type:"keyup"})),Ye(a=nt.call(null,window,{trigger:[{...t[0],enabled:t[0].key!==null,callback:t[23]}],type:"keydown"})),Ye(c=nt.call(null,window,{trigger:[{...t[0],enabled:t[0].key!==null,callback:t[24]}],type:"keyup"}))],f=!0)},p(h,[_]){e&&Se(e.update)&&_&16&&e.update.call(null,{trigger:[{...h[4],enabled:h[4].key!==null,callback:h[15]}],type:"keydown"}),n&&Se(n.update)&&_&16&&n.update.call(null,{trigger:[{...h[4],enabled:h[4].key!==null,callback:h[16]}],type:"keyup"}),i&&Se(i.update)&&_&8&&i.update.call(null,{trigger:[{...h[3],enabled:h[3].key!==null,callback:h[17]}],type:"keydown"}),o&&Se(o.update)&&_&8&&o.update.call(null,{trigger:[{...h[3],enabled:h[3].key!==null,callback:h[18]}],type:"keyup"}),l&&Se(l.update)&&_&4&&l.update.call(null,{trigger:[{...h[2],enabled:h[2].key!==null,callback:h[19]}],type:"keydown"}),r&&Se(r.update)&&_&4&&r.update.call(null,{trigger:[{...h[2],enabled:h[2].key!==null,callback:h[20]}],type:"keyup"}),s&&Se(s.update)&&_&2&&s.update.call(null,{trigger:[{...h[1],enabled:h[1].key!==null,callback:h[21]}],type:"keydown"}),u&&Se(u.update)&&_&2&&u.update.call(null,{trigger:[{...h[1],enabled:h[1].key!==null,callback:h[22]}],type:"keyup"}),a&&Se(a.update)&&_&1&&a.update.call(null,{trigger:[{...h[0],enabled:h[0].key!==null,callback:h[23]}],type:"keydown"}),c&&Se(c.update)&&_&1&&c.update.call(null,{trigger:[{...h[0],enabled:h[0].key!==null,callback:h[24]}],type:"keyup"})},i:ne,o:ne,d(h){f=!1,Ne(d)}}}function Tr(t){return t!==null&&typeof t=="object"}function xt(t){return Tr(t)?t.modifier||[]:[]}function $t(t){return t==null?"":Tr(t)?t.key:t}function Vh(t,e,n){let i,o,l,r,s,{selectionKey:u="Shift"}=e,{multiSelectionKey:a=jn()?"Meta":"Control"}=e,{deleteKey:c="Backspace"}=e,{panActivationKey:f=" "}=e,{zoomActivationKey:d=jn()?"Meta":"Control"}=e;const{selectionKeyPressed:h,multiselectionKeyPressed:_,deleteKeyPressed:m,panActivationKeyPressed:b,zoomActivationKeyPressed:g}=Ce(),k=()=>h.set(!0),E=()=>h.set(!1),v=()=>_.set(!0),C=()=>_.set(!1),H=V=>{!(V.originalEvent.ctrlKey||V.originalEvent.metaKey||V.originalEvent.shiftKey)&&!sf(V.originalEvent)&&m.set(!0)},I=()=>m.set(!1),D=()=>b.set(!0),A=()=>b.set(!1),y=()=>g.set(!0),z=()=>g.set(!1);return t.$$set=V=>{"selectionKey"in V&&n(10,u=V.selectionKey),"multiSelectionKey"in V&&n(11,a=V.multiSelectionKey),"deleteKey"in V&&n(12,c=V.deleteKey),"panActivationKey"in V&&n(13,f=V.panActivationKey),"zoomActivationKey"in V&&n(14,d=V.zoomActivationKey)},t.$$.update=()=>{t.$$.dirty&1024&&n(4,i={key:$t(u),modifier:xt(u)}),t.$$.dirty&2048&&n(3,o={key:$t(a),modifier:xt(a)}),t.$$.dirty&4096&&n(2,l={key:$t(c),modifier:xt(c)}),t.$$.dirty&8192&&n(1,r={key:$t(f),modifier:xt(f)}),t.$$.dirty&16384&&n(0,s={key:$t(d),modifier:xt(d)})},[s,r,l,o,i,h,_,m,b,g,u,a,c,f,d,k,E,v,C,H,I,D,A,y,z]}class Rh extends oe{constructor(e){super(),ie(this,e,Vh,Yh,le,{selectionKey:10,multiSelectionKey:11,deleteKey:12,panActivationKey:13,zoomActivationKey:14})}}const Lh=Rh,Wh=t=>({}),$o=t=>({});function el(t){let e,n,i,o;const l=t[10].connectionLine,r=Ve(l,t,t[9],$o);let s=!t[2]&&tl(t);return{c(){e=ge("svg"),n=ge("g"),r&&r.c(),s&&s.c(),S(n,"class",i=ke(["svelte-flow__connection",t[3].status])),S(e,"width",t[4]),S(e,"height",t[5]),S(e,"class","svelte-flow__connectionline"),S(e,"style",t[0])},m(u,a){B(u,e,a),_e(e,n),r&&r.m(n,null),s&&s.m(n,null),o=!0},p(u,a){r&&r.p&&(!o||a&512)&&Le(r,l,u,u[9],o?Re(l,u[9],a,Wh):We(u[9]),$o),u[2]?s&&(s.d(1),s=null):s?s.p(u,a):(s=tl(u),s.c(),s.m(n,null)),(!o||a&8&&i!==(i=ke(["svelte-flow__connection",u[3].status])))&&S(n,"class",i),(!o||a&16)&&S(e,"width",u[4]),(!o||a&32)&&S(e,"height",u[5]),(!o||a&1)&&S(e,"style",u[0])},i(u){o||(Y(r,u),o=!0)},o(u){L(r,u),o=!1},d(u){u&&W(e),r&&r.d(u),s&&s.d()}}}function tl(t){let e,n;return{c(){e=ge("path"),S(e,"d",n=t[3].path),S(e,"style",t[1]),S(e,"fill","none"),S(e,"class","svelte-flow__connection-path")},m(i,o){B(i,e,o)},p(i,o){o&8&&n!==(n=i[3].path)&&S(e,"d",n),o&2&&S(e,"style",i[1])},d(i){i&&W(e)}}}function Bh(t){let e,n,i=t[3].path&&el(t);return{c(){i&&i.c(),e=He()},m(o,l){i&&i.m(o,l),B(o,e,l),n=!0},p(o,[l]){o[3].path?i?(i.p(o,l),l&8&&Y(i,1)):(i=el(o),i.c(),Y(i,1),i.m(e.parentNode,e)):i&&(ze(),L(i,1,1,()=>{i=null}),Pe())},i(o){n||(Y(i),n=!0)},o(o){L(i),n=!1},d(o){o&&W(e),i&&i.d(o)}}}function ph(t,e,n){let i,o,l,{$$slots:r={},$$scope:s}=e,{containerStyle:u=""}=e,{style:a=""}=e,{isCustomComponent:c=!1}=e;const{width:f,height:d,connection:h}=Ce();return J(t,f,_=>n(4,o=_)),J(t,d,_=>n(5,l=_)),J(t,h,_=>n(3,i=_)),t.$$set=_=>{"containerStyle"in _&&n(0,u=_.containerStyle),"style"in _&&n(1,a=_.style),"isCustomComponent"in _&&n(2,c=_.isCustomComponent),"$$scope"in _&&n(9,s=_.$$scope)},[u,a,c,i,o,l,f,d,h,s,r]}let Kh=class extends oe{constructor(e){super(),ie(this,e,ph,Bh,le,{containerStyle:0,style:1,isCustomComponent:2})}};const Fh=Kh;function Zh(t){let e,n,i;const o=t[6].default,l=Ve(o,t,t[5],null);let r=[{class:n=ke(["svelte-flow__panel",t[1],...t[2]])},{style:t[0]},t[3]],s={};for(let u=0;u<r.length;u+=1)s=Ie(s,r[u]);return{c(){e=be("div"),l&&l.c(),Lt(e,s)},m(u,a){B(u,e,a),l&&l.m(e,null),i=!0},p(u,[a]){l&&l.p&&(!i||a&32)&&Le(l,o,u,u[5],i?Re(o,u[5],a,null):We(u[5]),null),Lt(e,s=ht(r,[(!i||a&6&&n!==(n=ke(["svelte-flow__panel",u[1],...u[2]])))&&{class:n},(!i||a&1)&&{style:u[0]},a&8&&u[3]]))},i(u){i||(Y(l,u),i=!0)},o(u){L(l,u),i=!1},d(u){u&&W(e),l&&l.d(u)}}}function qh(t,e,n){let i;const o=["position","style","class"];let l=Rt(e,o),{$$slots:r={},$$scope:s}=e,{position:u="top-right"}=e,{style:a=void 0}=e,{class:c=void 0}=e;return t.$$set=f=>{e=Ie(Ie({},e),Wi(f)),n(3,l=Rt(e,o)),"position"in f&&n(4,u=f.position),"style"in f&&n(0,a=f.style),"class"in f&&n(1,c=f.class),"$$scope"in f&&n(5,s=f.$$scope)},t.$$.update=()=>{t.$$.dirty&16&&n(2,i=`${u}`.split("-"))},[a,c,i,l,u,s,r]}class gn extends oe{constructor(e){super(),ie(this,e,qh,Zh,le,{position:4,style:0,class:1})}}function nl(t){let e,n;return e=new gn({props:{position:t[1],class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",$$slots:{default:[Uh]},$$scope:{ctx:t}}}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p(i,o){const l={};o&2&&(l.position=i[1]),o&4&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function Uh(t){let e;return{c(){e=be("a"),e.textContent="Svelte Flow",S(e,"href","https://svelteflow.dev"),S(e,"target","_blank"),S(e,"rel","noopener noreferrer"),S(e,"aria-label","Svelte Flow attribution")},m(n,i){B(n,e,i)},p:ne,d(n){n&&W(e)}}}function Gh(t){var o;let e,n,i=!((o=t[0])!=null&&o.hideAttribution)&&nl(t);return{c(){i&&i.c(),e=He()},m(l,r){i&&i.m(l,r),B(l,e,r),n=!0},p(l,[r]){var s;(s=l[0])!=null&&s.hideAttribution?i&&(ze(),L(i,1,1,()=>{i=null}),Pe()):i?(i.p(l,r),r&1&&Y(i,1)):(i=nl(l),i.c(),Y(i,1),i.m(e.parentNode,e))},i(l){n||(Y(i),n=!0)},o(l){L(i),n=!1},d(l){l&&W(e),i&&i.d(l)}}}function Jh(t,e,n){let{proOptions:i=void 0}=e,{position:o="bottom-right"}=e;return t.$$set=l=>{"proOptions"in l&&n(0,i=l.proOptions),"position"in l&&n(1,o=l.position)},[i,o]}class Qh extends oe{constructor(e){super(),ie(this,e,Jh,Gh,le,{proOptions:0,position:1})}}const jh=Qh;function il(t,{nodeTypes:e,edgeTypes:n,minZoom:i,maxZoom:o,translateExtent:l}){e!==void 0&&t.setNodeTypes(e),n!==void 0&&t.setEdgeTypes(n),i!==void 0&&t.setMinZoom(i),o!==void 0&&t.setMaxZoom(o),l!==void 0&&t.setTranslateExtent(l)}const xh=t=>Object.keys(t);function $h(t,e){xh(e).forEach(n=>{const i=e[n];i!==void 0&&t[n].set(i)})}function e0(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function t0(t="light"){return Je("light",n=>{if(t!=="system"){n(t);return}const i=e0(),o=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}})}const n0=t=>({}),ol=t=>({slot:"connectionLine"});function i0(t){let e;const n=t[70].connectionLine,i=Ve(n,t,t[89],ol);return{c(){i&&i.c()},m(o,l){i&&i.m(o,l),e=!0},p(o,l){i&&i.p&&(!e||l[2]&134217728)&&Le(i,n,o,o[89],e?Re(n,o[89],l,n0):We(o[89]),ol)},i(o){e||(Y(i,o),e=!0)},o(o){L(i,o),e=!1},d(o){i&&i.d(o)}}}function o0(t){let e,n,i,o,l,r,s,u,a,c,f,d;return e=new Ph({props:{defaultEdgeOptions:t[21]}}),e.$on("edgeclick",t[73]),e.$on("edgecontextmenu",t[74]),i=new Fh({props:{containerStyle:t[7],style:t[6],isCustomComponent:t[31].connectionLine,$$slots:{connectionLine:[i0]},$$scope:{ctx:t}}}),a=new sh({}),a.$on("nodeclick",t[75]),a.$on("nodemouseenter",t[76]),a.$on("nodemousemove",t[77]),a.$on("nodemouseleave",t[78]),a.$on("nodedragstart",t[79]),a.$on("nodedrag",t[80]),a.$on("nodedragstop",t[81]),a.$on("nodecontextmenu",t[82]),f=new Xh({}),f.$on("selectionclick",t[83]),f.$on("selectioncontextmenu",t[84]),{c(){$(e.$$.fragment),n=de(),$(i.$$.fragment),o=de(),l=be("div"),r=de(),s=be("div"),u=de(),$(a.$$.fragment),c=de(),$(f.$$.fragment),S(l,"class","svelte-flow__edgelabel-renderer"),S(s,"class","svelte-flow__viewport-portal")},m(h,_){j(e,h,_),B(h,n,_),j(i,h,_),B(h,o,_),B(h,l,_),B(h,r,_),B(h,s,_),B(h,u,_),j(a,h,_),B(h,c,_),j(f,h,_),d=!0},p(h,_){const m={};_[0]&2097152&&(m.defaultEdgeOptions=h[21]),e.$set(m);const b={};_[0]&128&&(b.containerStyle=h[7]),_[0]&64&&(b.style=h[6]),_[1]&1&&(b.isCustomComponent=h[31].connectionLine),_[2]&134217728&&(b.$$scope={dirty:_,ctx:h}),i.$set(b)},i(h){d||(Y(e.$$.fragment,h),Y(i.$$.fragment,h),Y(a.$$.fragment,h),Y(f.$$.fragment,h),d=!0)},o(h){L(e.$$.fragment,h),L(i.$$.fragment,h),L(a.$$.fragment,h),L(f.$$.fragment,h),d=!1},d(h){h&&(W(n),W(o),W(l),W(r),W(s),W(u),W(c)),x(e,h),x(i,h),x(a,h),x(f,h)}}}function l0(t){let e,n,i,o;return e=new xd({props:{$$slots:{default:[o0]},$$scope:{ctx:t}}}),i=new Th({}),{c(){$(e.$$.fragment),n=de(),$(i.$$.fragment)},m(l,r){j(e,l,r),B(l,n,r),j(i,l,r),o=!0},p(l,r){const s={};r[0]&2097344|r[1]&1|r[2]&134217728&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){o||(Y(e.$$.fragment,l),Y(i.$$.fragment,l),o=!0)},o(l){L(e.$$.fragment,l),L(i.$$.fragment,l),o=!1},d(l){l&&W(n),x(e,l),x(i,l)}}}function r0(t){let e,n;return e=new Jd({props:{panOnDrag:t[17]===void 0?!0:t[17],selectionOnDrag:t[18],$$slots:{default:[l0]},$$scope:{ctx:t}}}),e.$on("paneclick",t[85]),e.$on("panecontextmenu",t[86]),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p(i,o){const l={};o[0]&131072&&(l.panOnDrag=i[17]===void 0?!0:i[17]),o[0]&262144&&(l.selectionOnDrag=i[18]),o[0]&2097344|o[1]&1|o[2]&134217728&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function s0(t){let e,n,i,o,l,r,s,u,a,c,f,d;n=new Lh({props:{selectionKey:t[1],deleteKey:t[5],panActivationKey:t[2],multiSelectionKey:t[3],zoomActivationKey:t[4]}}),o=new Zd({props:{initialViewport:t[0],onMoveStart:t[8],onMove:t[9],onMoveEnd:t[10],panOnScrollMode:t[11]===void 0?ot.Free:t[11],preventScrolling:t[12]===void 0?!0:t[12],zoomOnScroll:t[13]===void 0?!0:t[13],zoomOnDoubleClick:t[14]===void 0?!0:t[14],zoomOnPinch:t[15]===void 0?!0:t[15],panOnScroll:t[16]===void 0?!1:t[16],panOnDrag:t[17]===void 0?!0:t[17],$$slots:{default:[r0]},$$scope:{ctx:t}}}),r=new jh({props:{proOptions:t[20],position:t[19]}});const h=t[70].default,_=Ve(h,t,t[89],null);let m=[{style:t[22]},{class:u=ke(["svelte-flow",t[23],t[28]])},{"data-testid":"svelte-flow__wrapper"},t[30],{role:"application"}],b={};for(let g=0;g<m.length;g+=1)b=Ie(b,m[g]);return{c(){e=be("div"),$(n.$$.fragment),i=de(),$(o.$$.fragment),l=de(),$(r.$$.fragment),s=de(),_&&_.c(),Lt(e,b),Bn(()=>t[88].call(e)),fe(e,"svelte-12wlba6",!0)},m(g,k){B(g,e,k),j(n,e,null),_e(e,i),j(o,e,null),_e(e,l),j(r,e,null),_e(e,s),_&&_.m(e,null),t[87](e),a=ss(e,t[88].bind(e)),c=!0,f||(d=[ye(e,"dragover",t[71]),ye(e,"drop",t[72])],f=!0)},p(g,k){const E={};k[0]&2&&(E.selectionKey=g[1]),k[0]&32&&(E.deleteKey=g[5]),k[0]&4&&(E.panActivationKey=g[2]),k[0]&8&&(E.multiSelectionKey=g[3]),k[0]&16&&(E.zoomActivationKey=g[4]),n.$set(E);const v={};k[0]&1&&(v.initialViewport=g[0]),k[0]&256&&(v.onMoveStart=g[8]),k[0]&512&&(v.onMove=g[9]),k[0]&1024&&(v.onMoveEnd=g[10]),k[0]&2048&&(v.panOnScrollMode=g[11]===void 0?ot.Free:g[11]),k[0]&4096&&(v.preventScrolling=g[12]===void 0?!0:g[12]),k[0]&8192&&(v.zoomOnScroll=g[13]===void 0?!0:g[13]),k[0]&16384&&(v.zoomOnDoubleClick=g[14]===void 0?!0:g[14]),k[0]&32768&&(v.zoomOnPinch=g[15]===void 0?!0:g[15]),k[0]&65536&&(v.panOnScroll=g[16]===void 0?!1:g[16]),k[0]&131072&&(v.panOnDrag=g[17]===void 0?!0:g[17]),k[0]&2490560|k[1]&1|k[2]&134217728&&(v.$$scope={dirty:k,ctx:g}),o.$set(v);const C={};k[0]&1048576&&(C.proOptions=g[20]),k[0]&524288&&(C.position=g[19]),r.$set(C),_&&_.p&&(!c||k[2]&134217728)&&Le(_,h,g,g[89],c?Re(h,g[89],k,null):We(g[89]),null),Lt(e,b=ht(m,[(!c||k[0]&4194304)&&{style:g[22]},(!c||k[0]&276824064&&u!==(u=ke(["svelte-flow",g[23],g[28]])))&&{class:u},{"data-testid":"svelte-flow__wrapper"},k[0]&1073741824&&g[30],{role:"application"}])),fe(e,"svelte-12wlba6",!0)},i(g){c||(Y(n.$$.fragment,g),Y(o.$$.fragment,g),Y(r.$$.fragment,g),Y(_,g),c=!0)},o(g){L(n.$$.fragment,g),L(o.$$.fragment,g),L(r.$$.fragment,g),L(_,g),c=!1},d(g){g&&W(e),x(n),x(o),x(r),_&&_.d(g),t[87](null),a(),f=!1,Ne(d)}}}function u0(t,e,n){let i;const o=["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","defaultMarkerColor","style","class"];let l=Rt(e,o),r,s,u=ne,a=()=>(u(),u=$n(i,N=>n(28,s=N)),i);t.$$.on_destroy.push(()=>u());let{$$slots:c={},$$scope:f}=e;const d=ns(c);let{id:h="1"}=e,{nodes:_}=e,{edges:m}=e,{fitView:b=void 0}=e,{fitViewOptions:g=void 0}=e,{minZoom:k=void 0}=e,{maxZoom:E=void 0}=e,{initialViewport:v={x:0,y:0,zoom:1}}=e,{viewport:C=void 0}=e,{nodeTypes:H=void 0}=e,{edgeTypes:I=void 0}=e,{selectionKey:D=void 0}=e,{selectionMode:A=void 0}=e,{panActivationKey:y=void 0}=e,{multiSelectionKey:z=void 0}=e,{zoomActivationKey:V=void 0}=e,{nodesDraggable:M=void 0}=e,{nodesConnectable:w=void 0}=e,{nodeDragThreshold:X=void 0}=e,{elementsSelectable:P=void 0}=e,{snapGrid:R=void 0}=e,{deleteKey:T=void 0}=e,{connectionRadius:K=void 0}=e,{connectionLineType:Z=void 0}=e,{connectionMode:U=Ct.Strict}=e,{connectionLineStyle:O=""}=e,{connectionLineContainerStyle:se=""}=e,{onMoveStart:re=void 0}=e,{onMove:ce=void 0}=e,{onMoveEnd:G=void 0}=e,{isValidConnection:he=void 0}=e,{translateExtent:me=void 0}=e,{onlyRenderVisibleElements:F=void 0}=e,{panOnScrollMode:Me=ot.Free}=e,{preventScrolling:Ae=!0}=e,{zoomOnScroll:De=!0}=e,{zoomOnDoubleClick:Oe=!0}=e,{zoomOnPinch:qe=!0}=e,{panOnScroll:ve=!1}=e,{panOnDrag:rt=!0}=e,{selectionOnDrag:st=void 0}=e,{autoPanOnConnect:et=!0}=e,{autoPanOnNodeDrag:tt=!0}=e,{onerror:ee=void 0}=e,{ondelete:mt=void 0}=e,{onedgecreate:_t=void 0}=e,{attributionPosition:q=void 0}=e,{proOptions:Ue=void 0}=e,{defaultEdgeOptions:Be=void 0}=e,{width:Q=void 0}=e,{height:ut=void 0}=e,{colorMode:pe="light"}=e,{onconnect:Fe=void 0}=e,{onconnectstart:zt=void 0}=e,{onconnectend:Pt=void 0}=e,{onbeforedelete:Mt=void 0}=e,{oninit:Jt=void 0}=e,{defaultMarkerColor:di="#b1b1b7"}=e,{style:xi=void 0}=e,{class:$i=void 0}=e,Sn,Ht,Nt;const Xe=as(fi)?Ce():Wd({nodes:p(_),edges:p(m),width:Q,height:ut,fitView:b});ei(()=>(Xe.width.set(Ht),Xe.height.set(Nt),Xe.domNode.set(Sn),Xe.syncNodeStores(_),Xe.syncEdgeStores(m),Xe.syncViewport(C),b!==void 0&&Xe.fitViewOnInit.set(b),g&&Xe.fitViewOptions.set(g),il(Xe,{nodeTypes:H,edgeTypes:I,minZoom:k,maxZoom:E,translateExtent:me}),()=>{Xe.reset()}));const{initialized:eo}=Xe;J(t,eo,N=>n(69,r=N));let hi=!1;function Xr(N){we.call(this,t,N)}function Yr(N){we.call(this,t,N)}function Vr(N){we.call(this,t,N)}function Rr(N){we.call(this,t,N)}function Lr(N){we.call(this,t,N)}function Wr(N){we.call(this,t,N)}function Br(N){we.call(this,t,N)}function pr(N){we.call(this,t,N)}function Kr(N){we.call(this,t,N)}function Fr(N){we.call(this,t,N)}function Zr(N){we.call(this,t,N)}function qr(N){we.call(this,t,N)}function Ur(N){we.call(this,t,N)}function Gr(N){we.call(this,t,N)}function Jr(N){we.call(this,t,N)}function Qr(N){we.call(this,t,N)}function jr(N){St[N?"unshift":"push"](()=>{Sn=N,n(26,Sn)})}function xr(){Ht=this.clientWidth,Nt=this.clientHeight,n(24,Ht),n(25,Nt)}return t.$$set=N=>{e=Ie(Ie({},e),Wi(N)),n(30,l=Rt(e,o)),"id"in N&&n(32,h=N.id),"nodes"in N&&n(33,_=N.nodes),"edges"in N&&n(34,m=N.edges),"fitView"in N&&n(35,b=N.fitView),"fitViewOptions"in N&&n(36,g=N.fitViewOptions),"minZoom"in N&&n(37,k=N.minZoom),"maxZoom"in N&&n(38,E=N.maxZoom),"initialViewport"in N&&n(0,v=N.initialViewport),"viewport"in N&&n(39,C=N.viewport),"nodeTypes"in N&&n(40,H=N.nodeTypes),"edgeTypes"in N&&n(41,I=N.edgeTypes),"selectionKey"in N&&n(1,D=N.selectionKey),"selectionMode"in N&&n(42,A=N.selectionMode),"panActivationKey"in N&&n(2,y=N.panActivationKey),"multiSelectionKey"in N&&n(3,z=N.multiSelectionKey),"zoomActivationKey"in N&&n(4,V=N.zoomActivationKey),"nodesDraggable"in N&&n(43,M=N.nodesDraggable),"nodesConnectable"in N&&n(44,w=N.nodesConnectable),"nodeDragThreshold"in N&&n(45,X=N.nodeDragThreshold),"elementsSelectable"in N&&n(46,P=N.elementsSelectable),"snapGrid"in N&&n(47,R=N.snapGrid),"deleteKey"in N&&n(5,T=N.deleteKey),"connectionRadius"in N&&n(48,K=N.connectionRadius),"connectionLineType"in N&&n(49,Z=N.connectionLineType),"connectionMode"in N&&n(50,U=N.connectionMode),"connectionLineStyle"in N&&n(6,O=N.connectionLineStyle),"connectionLineContainerStyle"in N&&n(7,se=N.connectionLineContainerStyle),"onMoveStart"in N&&n(8,re=N.onMoveStart),"onMove"in N&&n(9,ce=N.onMove),"onMoveEnd"in N&&n(10,G=N.onMoveEnd),"isValidConnection"in N&&n(51,he=N.isValidConnection),"translateExtent"in N&&n(52,me=N.translateExtent),"onlyRenderVisibleElements"in N&&n(53,F=N.onlyRenderVisibleElements),"panOnScrollMode"in N&&n(11,Me=N.panOnScrollMode),"preventScrolling"in N&&n(12,Ae=N.preventScrolling),"zoomOnScroll"in N&&n(13,De=N.zoomOnScroll),"zoomOnDoubleClick"in N&&n(14,Oe=N.zoomOnDoubleClick),"zoomOnPinch"in N&&n(15,qe=N.zoomOnPinch),"panOnScroll"in N&&n(16,ve=N.panOnScroll),"panOnDrag"in N&&n(17,rt=N.panOnDrag),"selectionOnDrag"in N&&n(18,st=N.selectionOnDrag),"autoPanOnConnect"in N&&n(54,et=N.autoPanOnConnect),"autoPanOnNodeDrag"in N&&n(55,tt=N.autoPanOnNodeDrag),"onerror"in N&&n(56,ee=N.onerror),"ondelete"in N&&n(57,mt=N.ondelete),"onedgecreate"in N&&n(58,_t=N.onedgecreate),"attributionPosition"in N&&n(19,q=N.attributionPosition),"proOptions"in N&&n(20,Ue=N.proOptions),"defaultEdgeOptions"in N&&n(21,Be=N.defaultEdgeOptions),"width"in N&&n(59,Q=N.width),"height"in N&&n(60,ut=N.height),"colorMode"in N&&n(61,pe=N.colorMode),"onconnect"in N&&n(62,Fe=N.onconnect),"onconnectstart"in N&&n(63,zt=N.onconnectstart),"onconnectend"in N&&n(64,Pt=N.onconnectend),"onbeforedelete"in N&&n(65,Mt=N.onbeforedelete),"oninit"in N&&n(66,Jt=N.oninit),"defaultMarkerColor"in N&&n(67,di=N.defaultMarkerColor),"style"in N&&n(22,xi=N.style),"class"in N&&n(23,$i=N.class),"$$scope"in N&&n(89,f=N.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&50331648&&Ht!==void 0&&Nt!==void 0&&(Xe.width.set(Ht),Xe.height.set(Nt)),t.$$.dirty[2]&208&&!hi&&r&&(Jt==null||Jt(),n(68,hi=!0)),t.$$.dirty[1]&266336258|t.$$.dirty[2]&47&&$h(Xe,{flowId:h,connectionLineType:Z,connectionRadius:K,selectionMode:A,snapGrid:R,defaultMarkerColor:di,nodesDraggable:M,nodesConnectable:w,elementsSelectable:P,onlyRenderVisibleElements:F,isValidConnection:he,autoPanOnConnect:et,autoPanOnNodeDrag:tt,onerror:ee,ondelete:mt,onedgecreate:_t,connectionMode:U,nodeDragThreshold:X,onconnect:Fe,onconnectstart:zt,onconnectend:Pt,onbeforedelete:Mt}),t.$$.dirty[1]&2098880&&il(Xe,{nodeTypes:H,edgeTypes:I,minZoom:k,maxZoom:E,translateExtent:me}),t.$$.dirty[1]&1073741824&&a(n(27,i=t0(pe)))},[v,D,y,z,V,T,O,se,re,ce,G,Me,Ae,De,Oe,qe,ve,rt,st,q,Ue,Be,xi,$i,Ht,Nt,Sn,i,s,eo,l,d,h,_,m,b,g,k,E,C,H,I,A,M,w,X,P,R,K,Z,U,he,me,F,et,tt,ee,mt,_t,Q,ut,pe,Fe,zt,Pt,Mt,Jt,di,hi,r,c,Xr,Yr,Vr,Rr,Lr,Wr,Br,pr,Kr,Fr,Zr,qr,Ur,Gr,Jr,Qr,jr,xr,f]}class a0 extends oe{constructor(e){super(),ie(this,e,u0,s0,le,{id:32,nodes:33,edges:34,fitView:35,fitViewOptions:36,minZoom:37,maxZoom:38,initialViewport:0,viewport:39,nodeTypes:40,edgeTypes:41,selectionKey:1,selectionMode:42,panActivationKey:2,multiSelectionKey:3,zoomActivationKey:4,nodesDraggable:43,nodesConnectable:44,nodeDragThreshold:45,elementsSelectable:46,snapGrid:47,deleteKey:5,connectionRadius:48,connectionLineType:49,connectionMode:50,connectionLineStyle:6,connectionLineContainerStyle:7,onMoveStart:8,onMove:9,onMoveEnd:10,isValidConnection:51,translateExtent:52,onlyRenderVisibleElements:53,panOnScrollMode:11,preventScrolling:12,zoomOnScroll:13,zoomOnDoubleClick:14,zoomOnPinch:15,panOnScroll:16,panOnDrag:17,selectionOnDrag:18,autoPanOnConnect:54,autoPanOnNodeDrag:55,onerror:56,ondelete:57,onedgecreate:58,attributionPosition:19,proOptions:20,defaultEdgeOptions:21,width:59,height:60,colorMode:61,onconnect:62,onconnectstart:63,onconnectend:64,onbeforedelete:65,oninit:66,defaultMarkerColor:67,style:22,class:23},null,[-1,-1,-1])}}const c0=a0;function f0(t){let e;const n=t[6].default,i=Ve(n,t,t[5],null);return{c(){i&&i.c()},m(o,l){i&&i.m(o,l),e=!0},p(o,[l]){i&&i.p&&(!e||l&32)&&Le(i,n,o,o[5],e?Re(n,o[5],l,null):We(o[5]),null)},i(o){e||(Y(i,o),e=!0)},o(o){L(i,o),e=!1},d(o){i&&i.d(o)}}}function d0(t,e,n){let{$$slots:i={},$$scope:o}=e,{initialNodes:l=void 0}=e,{initialEdges:r=void 0}=e,{initialWidth:s=void 0}=e,{initialHeight:u=void 0}=e,{fitView:a=void 0}=e;const c=Nr({nodes:l,edges:r,width:s,height:u,fitView:a});return rn(fi,{getStore:()=>c}),Bi(()=>{c.reset()}),t.$$set=f=>{"initialNodes"in f&&n(0,l=f.initialNodes),"initialEdges"in f&&n(1,r=f.initialEdges),"initialWidth"in f&&n(2,s=f.initialWidth),"initialHeight"in f&&n(3,u=f.initialHeight),"fitView"in f&&n(4,a=f.fitView),"$$scope"in f&&n(5,o=f.$$scope)},[l,r,s,u,a,o,i]}class h0 extends oe{constructor(e){super(),ie(this,e,d0,f0,le,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4})}}const g0=t=>({}),ll=t=>({class:"button-svg"});function m0(t){let e,n,i,o,l;const r=t[8].default,s=Ve(r,t,t[7],ll);let u=[{type:"button"},{class:n=ke(["svelte-flow__controls-button",t[0]])},t[6]],a={};for(let c=0;c<u.length;c+=1)a=Ie(a,u[c]);return{c(){e=be("button"),s&&s.c(),Lt(e,a),ue(e,"--xy-controls-button-background-color-props",t[1]),ue(e,"--xy-controls-button-background-color-hover-props",t[2]),ue(e,"--xy-controls-button-color-props",t[3]),ue(e,"--xy-controls-button-color-hover-props",t[4]),ue(e,"--xy-controls-button-border-color-props",t[5])},m(c,f){B(c,e,f),s&&s.m(e,null),e.autofocus&&e.focus(),i=!0,o||(l=ye(e,"click",t[9]),o=!0)},p(c,[f]){s&&s.p&&(!i||f&128)&&Le(s,r,c,c[7],i?Re(r,c[7],f,g0):We(c[7]),ll),Lt(e,a=ht(u,[{type:"button"},(!i||f&1&&n!==(n=ke(["svelte-flow__controls-button",c[0]])))&&{class:n},f&64&&c[6]])),ue(e,"--xy-controls-button-background-color-props",c[1]),ue(e,"--xy-controls-button-background-color-hover-props",c[2]),ue(e,"--xy-controls-button-color-props",c[3]),ue(e,"--xy-controls-button-color-hover-props",c[4]),ue(e,"--xy-controls-button-border-color-props",c[5])},i(c){i||(Y(s,c),i=!0)},o(c){L(s,c),i=!1},d(c){c&&W(e),s&&s.d(c),o=!1,l()}}}function _0(t,e,n){const i=["class"];let o=Rt(e,i),{$$slots:l={},$$scope:r}=e,{class:s=void 0}=e,u,a,c,f,d;function h(_){we.call(this,t,_)}return t.$$set=_=>{e=Ie(Ie({},e),Wi(_)),n(6,o=Rt(e,i)),"class"in _&&n(0,s=_.class),"$$scope"in _&&n(7,r=_.$$scope)},[s,u,a,c,f,d,o,r,l,h]}class mn extends oe{constructor(e){super(),ie(this,e,_0,m0,le,{class:0})}}function y0(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),S(n,"d","M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"viewBox","0 0 32 32")},m(i,o){B(i,e,o),_e(e,n)},p:ne,i:ne,o:ne,d(i){i&&W(e)}}}class b0 extends oe{constructor(e){super(),ie(this,e,null,y0,le,{})}}function w0(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),S(n,"d","M0 0h32v4.2H0z"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"viewBox","0 0 32 5")},m(i,o){B(i,e,o),_e(e,n)},p:ne,i:ne,o:ne,d(i){i&&W(e)}}}class k0 extends oe{constructor(e){super(),ie(this,e,null,w0,le,{})}}function v0(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),S(n,"d","M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"viewBox","0 0 32 30")},m(i,o){B(i,e,o),_e(e,n)},p:ne,i:ne,o:ne,d(i){i&&W(e)}}}class S0 extends oe{constructor(e){super(),ie(this,e,null,v0,le,{})}}function E0(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),S(n,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"viewBox","0 0 25 32")},m(i,o){B(i,e,o),_e(e,n)},p:ne,i:ne,o:ne,d(i){i&&W(e)}}}class C0 extends oe{constructor(e){super(),ie(this,e,null,E0,le,{})}}function z0(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),S(n,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"viewBox","0 0 25 32")},m(i,o){B(i,e,o),_e(e,n)},p:ne,i:ne,o:ne,d(i){i&&W(e)}}}class P0 extends oe{constructor(e){super(),ie(this,e,null,z0,le,{})}}const M0=t=>({}),rl=t=>({}),H0=t=>({}),sl=t=>({});function ul(t){let e,n,i,o;const l=[{class:"svelte-flow__controls-zoomin"},{title:"zoom in"},{"aria-label":"zoom in"},{disabled:t[6]},t[14]];let r={$$slots:{default:[N0]},$$scope:{ctx:t}};for(let a=0;a<l.length;a+=1)r=Ie(r,l[a]);e=new mn({props:r}),e.$on("click",t[15]);const s=[{class:"svelte-flow__controls-zoomout"},{title:"zoom out"},{"aria-label":"zoom out"},{disabled:t[7]},t[14]];let u={$$slots:{default:[A0]},$$scope:{ctx:t}};for(let a=0;a<s.length;a+=1)u=Ie(u,s[a]);return i=new mn({props:u}),i.$on("click",t[16]),{c(){$(e.$$.fragment),n=de(),$(i.$$.fragment)},m(a,c){j(e,a,c),B(a,n,c),j(i,a,c),o=!0},p(a,c){const f=c[0]&16448?ht(l,[l[0],l[1],l[2],c[0]&64&&{disabled:a[6]},c[0]&16384&&Wt(a[14])]):{};c[1]&1&&(f.$$scope={dirty:c,ctx:a}),e.$set(f);const d=c[0]&16512?ht(s,[s[0],s[1],s[2],c[0]&128&&{disabled:a[7]},c[0]&16384&&Wt(a[14])]):{};c[1]&1&&(d.$$scope={dirty:c,ctx:a}),i.$set(d)},i(a){o||(Y(e.$$.fragment,a),Y(i.$$.fragment,a),o=!0)},o(a){L(e.$$.fragment,a),L(i.$$.fragment,a),o=!1},d(a){a&&W(n),x(e,a),x(i,a)}}}function N0(t){let e,n;return e=new b0({}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function A0(t){let e,n;return e=new k0({}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function al(t){let e,n;const i=[{class:"svelte-flow__controls-fitview"},{title:"fit view"},{"aria-label":"fit view"},t[14]];let o={$$slots:{default:[O0]},$$scope:{ctx:t}};for(let l=0;l<i.length;l+=1)o=Ie(o,i[l]);return e=new mn({props:o}),e.$on("click",t[17]),{c(){$(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p(l,r){const s=r[0]&16384?ht(i,[i[0],i[1],i[2],Wt(l[14])]):{};r[1]&1&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){n||(Y(e.$$.fragment,l),n=!0)},o(l){L(e.$$.fragment,l),n=!1},d(l){x(e,l)}}}function O0(t){let e,n;return e=new S0({}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function cl(t){let e,n;const i=[{class:"svelte-flow__controls-interactive"},{title:"toggle interactivity"},{"aria-label":"toggle interactivity"},t[14]];let o={$$slots:{default:[D0]},$$scope:{ctx:t}};for(let l=0;l<i.length;l+=1)o=Ie(o,i[l]);return e=new mn({props:o}),e.$on("click",t[18]),{c(){$(e.$$.fragment)},m(l,r){j(e,l,r),n=!0},p(l,r){const s=r[0]&16384?ht(i,[i[0],i[1],i[2],Wt(l[14])]):{};r[0]&32|r[1]&1&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){n||(Y(e.$$.fragment,l),n=!0)},o(l){L(e.$$.fragment,l),n=!1},d(l){x(e,l)}}}function T0(t){let e,n;return e=new C0({}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function I0(t){let e,n;return e=new P0({}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function D0(t){let e,n,i,o;const l=[I0,T0],r=[];function s(u,a){return u[5]?0:1}return e=s(t),n=r[e]=l[e](t),{c(){n.c(),i=He()},m(u,a){r[e].m(u,a),B(u,i,a),o=!0},p(u,a){let c=e;e=s(u),e!==c&&(ze(),L(r[c],1,1,()=>{r[c]=null}),Pe(),n=r[e],n||(n=r[e]=l[e](u),n.c()),Y(n,1),n.m(i.parentNode,i))},i(u){o||(Y(n),o=!0)},o(u){L(n),o=!1},d(u){u&&W(i),r[e].d(u)}}}function X0(t){let e,n,i,o,l,r;const s=t[30].before,u=Ve(s,t,t[31],sl);let a=t[1]&&ul(t),c=t[2]&&al(t),f=t[3]&&cl(t);const d=t[30].default,h=Ve(d,t,t[31],null),_=t[30].after,m=Ve(_,t,t[31],rl);return{c(){u&&u.c(),e=de(),a&&a.c(),n=de(),c&&c.c(),i=de(),f&&f.c(),o=de(),h&&h.c(),l=de(),m&&m.c()},m(b,g){u&&u.m(b,g),B(b,e,g),a&&a.m(b,g),B(b,n,g),c&&c.m(b,g),B(b,i,g),f&&f.m(b,g),B(b,o,g),h&&h.m(b,g),B(b,l,g),m&&m.m(b,g),r=!0},p(b,g){u&&u.p&&(!r||g[1]&1)&&Le(u,s,b,b[31],r?Re(s,b[31],g,H0):We(b[31]),sl),b[1]?a?(a.p(b,g),g[0]&2&&Y(a,1)):(a=ul(b),a.c(),Y(a,1),a.m(n.parentNode,n)):a&&(ze(),L(a,1,1,()=>{a=null}),Pe()),b[2]?c?(c.p(b,g),g[0]&4&&Y(c,1)):(c=al(b),c.c(),Y(c,1),c.m(i.parentNode,i)):c&&(ze(),L(c,1,1,()=>{c=null}),Pe()),b[3]?f?(f.p(b,g),g[0]&8&&Y(f,1)):(f=cl(b),f.c(),Y(f,1),f.m(o.parentNode,o)):f&&(ze(),L(f,1,1,()=>{f=null}),Pe()),h&&h.p&&(!r||g[1]&1)&&Le(h,d,b,b[31],r?Re(d,b[31],g,null):We(b[31]),null),m&&m.p&&(!r||g[1]&1)&&Le(m,_,b,b[31],r?Re(_,b[31],g,M0):We(b[31]),rl)},i(b){r||(Y(u,b),Y(a),Y(c),Y(f),Y(h,b),Y(m,b),r=!0)},o(b){L(u,b),L(a),L(c),L(f),L(h,b),L(m,b),r=!1},d(b){b&&(W(e),W(n),W(i),W(o),W(l)),u&&u.d(b),a&&a.d(b),c&&c.d(b),f&&f.d(b),h&&h.d(b),m&&m.d(b)}}}function Y0(t){let e,n;return e=new gn({props:{class:"svelte-flow__controls",position:t[0],"data-testid":"svelte-flow__controls","aria-label":t[4]??"Svelte Flow controls",$$slots:{default:[X0]},$$scope:{ctx:t}}}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p(i,o){const l={};o[0]&1&&(l.position=i[0]),o[0]&16&&(l["aria-label"]=i[4]??"Svelte Flow controls"),o[0]&238|o[1]&1&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function V0(t,e,n){let i,o,l,r,s,u,a,c,f,{$$slots:d={},$$scope:h}=e,{position:_="bottom-left"}=e,{showZoom:m=!0}=e,{showFitView:b=!0}=e,{showLock:g=!0}=e,{buttonBgColor:k=void 0}=e,{buttonBgColorHover:E=void 0}=e,{buttonColor:v=void 0}=e,{buttonColorHover:C=void 0}=e,{buttonBorderColor:H=void 0}=e,{ariaLabel:I=void 0}=e;const{zoomIn:D,zoomOut:A,fitView:y,viewport:z,minZoom:V,maxZoom:M,nodesDraggable:w,nodesConnectable:X,elementsSelectable:P}=Ce();J(t,z,O=>n(25,s=O)),J(t,V,O=>n(26,u=O)),J(t,M,O=>n(24,r=O)),J(t,w,O=>n(29,f=O)),J(t,X,O=>n(28,c=O)),J(t,P,O=>n(27,a=O));const R={bgColor:k,bgColorHover:E,color:v,colorHover:C,borderColor:H},T=()=>{D()},K=()=>{A()},Z=()=>{y()},U=()=>{n(5,i=!i),w.set(i),X.set(i),P.set(i)};return t.$$set=O=>{"position"in O&&n(0,_=O.position),"showZoom"in O&&n(1,m=O.showZoom),"showFitView"in O&&n(2,b=O.showFitView),"showLock"in O&&n(3,g=O.showLock),"buttonBgColor"in O&&n(19,k=O.buttonBgColor),"buttonBgColorHover"in O&&n(20,E=O.buttonBgColorHover),"buttonColor"in O&&n(21,v=O.buttonColor),"buttonColorHover"in O&&n(22,C=O.buttonColorHover),"buttonBorderColor"in O&&n(23,H=O.buttonBorderColor),"ariaLabel"in O&&n(4,I=O.ariaLabel),"$$scope"in O&&n(31,h=O.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&939524096&&n(5,i=f||c||a),t.$$.dirty[0]&100663296&&n(7,o=s.zoom<=u),t.$$.dirty[0]&50331648&&n(6,l=s.zoom>=r)},[_,m,b,g,I,i,l,o,z,V,M,w,X,P,R,T,K,Z,U,k,E,v,C,H,r,s,u,a,c,f,d,h]}class R0 extends oe{constructor(e){super(),ie(this,e,V0,Y0,le,{position:0,showZoom:1,showFitView:2,showLock:3,buttonBgColor:19,buttonBgColorHover:20,buttonColor:21,buttonColorHover:22,buttonBorderColor:23,ariaLabel:4},null,[-1,-1])}}var dt;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(dt||(dt={}));function L0(t){let e,n;return{c(){e=ge("circle"),S(e,"cx",t[0]),S(e,"cy",t[0]),S(e,"r",t[0]),S(e,"class",n=ke(["svelte-flow__background-pattern","dots",t[1]]))},m(i,o){B(i,e,o)},p(i,[o]){o&1&&S(e,"cx",i[0]),o&1&&S(e,"cy",i[0]),o&1&&S(e,"r",i[0]),o&2&&n!==(n=ke(["svelte-flow__background-pattern","dots",i[1]]))&&S(e,"class",n)},i:ne,o:ne,d(i){i&&W(e)}}}function W0(t,e,n){let{radius:i=5}=e,{class:o=""}=e;return t.$$set=l=>{"radius"in l&&n(0,i=l.radius),"class"in l&&n(1,o=l.class)},[i,o]}class B0 extends oe{constructor(e){super(),ie(this,e,W0,L0,le,{radius:0,class:1})}}const p0=B0;function K0(t){let e,n,i;return{c(){e=ge("path"),S(e,"stroke-width",t[0]),S(e,"d",n=`M${t[1][0]/2} 0 V${t[1][1]} M0 ${t[1][1]/2} H${t[1][0]}`),S(e,"class",i=ke(["svelte-flow__background-pattern",t[2],t[3]]))},m(o,l){B(o,e,l)},p(o,[l]){l&1&&S(e,"stroke-width",o[0]),l&2&&n!==(n=`M${o[1][0]/2} 0 V${o[1][1]} M0 ${o[1][1]/2} H${o[1][0]}`)&&S(e,"d",n),l&12&&i!==(i=ke(["svelte-flow__background-pattern",o[2],o[3]]))&&S(e,"class",i)},i:ne,o:ne,d(o){o&&W(e)}}}function F0(t,e,n){let{lineWidth:i=1}=e,{dimensions:o}=e,{variant:l=void 0}=e,{class:r=""}=e;return t.$$set=s=>{"lineWidth"in s&&n(0,i=s.lineWidth),"dimensions"in s&&n(1,o=s.dimensions),"variant"in s&&n(2,l=s.variant),"class"in s&&n(3,r=s.class)},[i,o,l,r]}class Z0 extends oe{constructor(e){super(),ie(this,e,F0,K0,le,{lineWidth:0,dimensions:1,variant:2,class:3})}}const q0=Z0;function U0(t){let e,n;return e=new q0({props:{dimensions:t[6],variant:t[0],lineWidth:t[1],class:t[4]}}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p(i,o){const l={};o&64&&(l.dimensions=i[6]),o&1&&(l.variant=i[0]),o&2&&(l.lineWidth=i[1]),o&16&&(l.class=i[4]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function G0(t){let e,n;return e=new p0({props:{radius:t[7]/2,class:t[4]}}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p(i,o){const l={};o&128&&(l.radius=i[7]/2),o&16&&(l.class=i[4]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function J0(t){let e,n,i,o,l,r,s,u,a,c,f,d,h;const _=[G0,U0],m=[];function b(g,k){return g[14]?0:1}return i=b(t),o=m[i]=_[i](t),{c(){e=ge("svg"),n=ge("pattern"),o.c(),c=ge("rect"),S(n,"id",t[11]),S(n,"x",l=t[9].x%t[8][0]),S(n,"y",r=t[9].y%t[8][1]),S(n,"width",s=t[8][0]),S(n,"height",u=t[8][1]),S(n,"patternUnits","userSpaceOnUse"),S(n,"patternTransform",a=`translate(-${t[10][0]},-${t[10][1]})`),S(c,"x","0"),S(c,"y","0"),S(c,"width","100%"),S(c,"height","100%"),S(c,"fill",f=`url(#${t[11]})`),S(e,"class",d=no(ke(["svelte-flow__background",t[5]]))+" svelte-1r7pe8d"),S(e,"data-testid","svelte-flow__background"),ue(e,"--xy-background-color-props",t[2]),ue(e,"--xy-background-pattern-color-props",t[3])},m(g,k){B(g,e,k),_e(e,n),m[i].m(n,null),_e(e,c),h=!0},p(g,[k]){o.p(g,k),(!h||k&2048)&&S(n,"id",g[11]),(!h||k&768&&l!==(l=g[9].x%g[8][0]))&&S(n,"x",l),(!h||k&768&&r!==(r=g[9].y%g[8][1]))&&S(n,"y",r),(!h||k&256&&s!==(s=g[8][0]))&&S(n,"width",s),(!h||k&256&&u!==(u=g[8][1]))&&S(n,"height",u),(!h||k&1024&&a!==(a=`translate(-${g[10][0]},-${g[10][1]})`))&&S(n,"patternTransform",a),(!h||k&2048&&f!==(f=`url(#${g[11]})`))&&S(c,"fill",f),(!h||k&32&&d!==(d=no(ke(["svelte-flow__background",g[5]]))+" svelte-1r7pe8d"))&&S(e,"class",d),k&4&&ue(e,"--xy-background-color-props",g[2]),k&8&&ue(e,"--xy-background-pattern-color-props",g[3])},i(g){h||(Y(o),h=!0)},o(g){L(o),h=!1},d(g){g&&W(e),m[i].d()}}}const Q0={[dt.Dots]:1,[dt.Lines]:1,[dt.Cross]:6};function j0(t,e,n){let i,o,l,r,s,u,a,{id:c=void 0}=e,{variant:f=dt.Dots}=e,{gap:d=20}=e,{size:h=1}=e,{lineWidth:_=1}=e,{bgColor:m=void 0}=e,{patternColor:b=void 0}=e,{patternClass:g=void 0}=e,{class:k=""}=e;const{viewport:E,flowId:v}=Ce();J(t,E,A=>n(9,u=A)),J(t,v,A=>n(18,a=A));const C=h||Q0[f],H=f===dt.Dots,I=f===dt.Cross,D=Array.isArray(d)?d:[d,d];return t.$$set=A=>{"id"in A&&n(15,c=A.id),"variant"in A&&n(0,f=A.variant),"gap"in A&&n(16,d=A.gap),"size"in A&&n(17,h=A.size),"lineWidth"in A&&n(1,_=A.lineWidth),"bgColor"in A&&n(2,m=A.bgColor),"patternColor"in A&&n(3,b=A.patternColor),"patternClass"in A&&n(4,g=A.patternClass),"class"in A&&n(5,k=A.class)},t.$$.update=()=>{t.$$.dirty&294912&&n(11,i=`background-pattern-${a}-${c||""}`),t.$$.dirty&512&&n(8,o=[D[0]*u.zoom||1,D[1]*u.zoom||1]),t.$$.dirty&512&&n(7,l=C*u.zoom),t.$$.dirty&384&&n(6,r=I?[l,l]:o),t.$$.dirty&192&&n(10,s=H?[l/2,l/2]:[r[0]/2,r[1]/2])},[f,_,m,b,g,k,r,l,o,u,s,i,E,v,H,c,d,h,a]}class x0 extends oe{constructor(e){super(),ie(this,e,j0,J0,le,{id:15,variant:0,gap:16,size:17,lineWidth:1,bgColor:2,patternColor:3,patternClass:4,class:5})}}const $0=x0;function eg(t){let e,n,i;return{c(){e=ge("rect"),S(e,"class",n=ke(["svelte-flow__minimap-node",t[10]])),S(e,"x",t[0]),S(e,"y",t[1]),S(e,"rx",t[4]),S(e,"ry",t[4]),S(e,"width",t[2]),S(e,"height",t[3]),S(e,"style",i=`${t[5]?`fill: ${t[5]};`:""}${t[7]?`stroke: ${t[7]};`:""}${t[8]?`stroke-width: ${t[8]};`:""}`),S(e,"shape-rendering",t[6]),fe(e,"selected",t[9])},m(o,l){B(o,e,l)},p(o,[l]){l&1024&&n!==(n=ke(["svelte-flow__minimap-node",o[10]]))&&S(e,"class",n),l&1&&S(e,"x",o[0]),l&2&&S(e,"y",o[1]),l&16&&S(e,"rx",o[4]),l&16&&S(e,"ry",o[4]),l&4&&S(e,"width",o[2]),l&8&&S(e,"height",o[3]),l&416&&i!==(i=`${o[5]?`fill: ${o[5]};`:""}${o[7]?`stroke: ${o[7]};`:""}${o[8]?`stroke-width: ${o[8]};`:""}`)&&S(e,"style",i),l&64&&S(e,"shape-rendering",o[6]),l&1536&&fe(e,"selected",o[9])},i:ne,o:ne,d(o){o&&W(e)}}}function tg(t,e,n){let{x:i}=e,{y:o}=e,{width:l=0}=e,{height:r=0}=e,{borderRadius:s=5}=e,{color:u=void 0}=e,{shapeRendering:a}=e,{strokeColor:c=void 0}=e,{strokeWidth:f=2}=e,{selected:d=!1}=e,{class:h=""}=e;return t.$$set=_=>{"x"in _&&n(0,i=_.x),"y"in _&&n(1,o=_.y),"width"in _&&n(2,l=_.width),"height"in _&&n(3,r=_.height),"borderRadius"in _&&n(4,s=_.borderRadius),"color"in _&&n(5,u=_.color),"shapeRendering"in _&&n(6,a=_.shapeRendering),"strokeColor"in _&&n(7,c=_.strokeColor),"strokeWidth"in _&&n(8,f=_.strokeWidth),"selected"in _&&n(9,d=_.selected),"class"in _&&n(10,h=_.class)},[i,o,l,r,s,u,a,c,f,d,h]}class ng extends oe{constructor(e){super(),ie(this,e,tg,eg,le,{x:0,y:1,width:2,height:3,borderRadius:4,color:5,shapeRendering:6,strokeColor:7,strokeWidth:8,selected:9,class:10})}}function ig(t,e){const n=Nf({domNode:t,panZoom:e.panZoom,getTransform:()=>{const o=p(e.viewport);return[o.x,o.y,o.zoom]},getViewScale:e.getViewScale});function i(o){n.update({translateExtent:o.translateExtent,width:o.width,height:o.height,inversePan:o.inversePan,zoomStep:o.zoomStep,pannable:o.pannable,zoomable:o.zoomable})}return{update:i,destroy(){n.destroy()}}}function fl(t,e,n){const i=t.slice();return i[53]=e[n],i}function zi(t){const e=t.slice(),n=Gt(e[53]).positionAbsolute;e[56]=n;const i=kn(e[53]);return e[57]=i,e}function dl(t){let e,n,i=[],o=new Map,l,r,s,u,a,c,f,d=t[1]&&hl(t),h=Te(t[19]);const _=m=>m[53].id;for(let m=0;m<h.length;m+=1){let b=fl(t,h,m),g=_(b);o.set(g,i[m]=ml(g,b))}return{c(){e=ge("svg"),d&&d.c(),n=He();for(let m=0;m<i.length;m+=1)i[m].c();l=ge("path"),S(l,"class","svelte-flow__minimap-mask"),S(l,"d",r="M"+(t[25]-t[15])+","+(t[24]-t[15])+"h"+(t[23]+t[15]*2)+"v"+(t[22]+t[15]*2)+"h"+(-t[23]-t[15]*2)+`z
      M`+t[18].x+","+t[18].y+"h"+t[18].width+"v"+t[18].height+"h"+-t[18].width+"z"),S(l,"fill-rule","evenodd"),S(l,"pointer-events","none"),S(e,"width",t[17]),S(e,"height",t[16]),S(e,"viewBox",s=t[25]+" "+t[24]+" "+t[23]+" "+t[22]),S(e,"class","svelte-flow__minimap-svg"),S(e,"role","img"),S(e,"aria-labelledby",t[39]),ue(e,"--xy-minimap-mask-background-color-props",t[5]),ue(e,"--xy-minimap-mask-stroke-color-props",t[6]),ue(e,"--xy-minimap-mask-stroke-width-props",t[7]?t[7]*t[14]:void 0)},m(m,b){B(m,e,b),d&&d.m(e,null),_e(e,n);for(let g=0;g<i.length;g+=1)i[g]&&i[g].m(e,null);_e(e,l),a=!0,c||(f=Ye(u=ig.call(null,e,{panZoom:t[26],viewport:t[29],getViewScale:t[40],translateExtent:t[27],width:t[21],height:t[20],inversePan:t[10],zoomStep:t[11],pannable:t[8],zoomable:t[9]})),c=!0)},p(m,b){m[1]?d?d.p(m,b):(d=hl(m),d.c(),d.m(e,n)):d&&(d.d(1),d=null),b[0]&524300|b[1]&240&&(h=Te(m[19]),ze(),i=ii(i,b,_,1,m,h,o,e,ni,ml,l,fl),Pe()),(!a||b[0]&63209472&&r!==(r="M"+(m[25]-m[15])+","+(m[24]-m[15])+"h"+(m[23]+m[15]*2)+"v"+(m[22]+m[15]*2)+"h"+(-m[23]-m[15]*2)+`z
      M`+m[18].x+","+m[18].y+"h"+m[18].width+"v"+m[18].height+"h"+-m[18].width+"z"))&&S(l,"d",r),(!a||b[0]&131072)&&S(e,"width",m[17]),(!a||b[0]&65536)&&S(e,"height",m[16]),(!a||b[0]&62914560&&s!==(s=m[25]+" "+m[24]+" "+m[23]+" "+m[22]))&&S(e,"viewBox",s),u&&Se(u.update)&&b[0]&204476160&&u.update.call(null,{panZoom:m[26],viewport:m[29],getViewScale:m[40],translateExtent:m[27],width:m[21],height:m[20],inversePan:m[10],zoomStep:m[11],pannable:m[8],zoomable:m[9]}),b[0]&32&&ue(e,"--xy-minimap-mask-background-color-props",m[5]),b[0]&64&&ue(e,"--xy-minimap-mask-stroke-color-props",m[6]),b[0]&16512&&ue(e,"--xy-minimap-mask-stroke-width-props",m[7]?m[7]*m[14]:void 0)},i(m){if(!a){for(let b=0;b<h.length;b+=1)Y(i[b]);a=!0}},o(m){for(let b=0;b<i.length;b+=1)L(i[b]);a=!1},d(m){m&&W(e),d&&d.d();for(let b=0;b<i.length;b+=1)i[b].d();c=!1,f()}}}function hl(t){let e,n;return{c(){e=ge("title"),n=xe(t[1]),S(e,"id",t[39])},m(i,o){B(i,e,o),_e(e,n)},p(i,o){o[0]&2&&qt(n,i[1])},d(i){i&&W(e)}}}function gl(t){var l;let e,n;const i=[{x:t[56].x},{y:t[56].y},t[57],{selected:t[53].selected},{color:(l=t[35])==null?void 0:l.call(t,t[53])},{borderRadius:t[2]},{strokeColor:t[36](t[53])},{strokeWidth:t[3]},{shapeRendering:t[38]},{class:t[37](t[53])}];let o={};for(let r=0;r<i.length;r+=1)o=Ie(o,i[r]);return e=new ng({props:o}),{c(){$(e.$$.fragment)},m(r,s){j(e,r,s),n=!0},p(r,s){var a;const u=s[0]&524300|s[1]&240?ht(i,[s[0]&524288&&{x:r[56].x},s[0]&524288&&{y:r[56].y},s[0]&524288&&Wt(r[57]),s[0]&524288&&{selected:r[53].selected},s[0]&524288|s[1]&16&&{color:(a=r[35])==null?void 0:a.call(r,r[53])},s[0]&4&&{borderRadius:r[2]},s[0]&524288|s[1]&32&&{strokeColor:r[36](r[53])},s[0]&8&&{strokeWidth:r[3]},s[1]&128&&{shapeRendering:r[38]},s[0]&524288|s[1]&64&&{class:r[37](r[53])}]):{};e.$set(u)},i(r){n||(Y(e.$$.fragment,r),n=!0)},o(r){L(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function ml(t,e){let n,i=xn(e[53]),o,l,r=i&&gl(zi(e));return{key:t,first:null,c(){n=He(),r&&r.c(),o=He(),this.first=n},m(s,u){B(s,n,u),r&&r.m(s,u),B(s,o,u),l=!0},p(s,u){e=s,u[0]&524288&&(i=xn(e[53])),i?r?(r.p(zi(e),u),u[0]&524288&&Y(r,1)):(r=gl(zi(e)),r.c(),Y(r,1),r.m(o.parentNode,o)):r&&(ze(),L(r,1,1,()=>{r=null}),Pe())},i(s){l||(Y(r),l=!0)},o(s){L(r),l=!1},d(s){s&&(W(n),W(o)),r&&r.d(s)}}}function og(t){let e,n,i=t[26]&&dl(t);return{c(){i&&i.c(),e=He()},m(o,l){i&&i.m(o,l),B(o,e,l),n=!0},p(o,l){o[26]?i?(i.p(o,l),l[0]&67108864&&Y(i,1)):(i=dl(o),i.c(),Y(i,1),i.m(e.parentNode,e)):i&&(ze(),L(i,1,1,()=>{i=null}),Pe())},i(o){n||(Y(i),n=!0)},o(o){L(i),n=!1},d(o){o&&W(e),i&&i.d(o)}}}function lg(t){let e,n;return e=new gn({props:{position:t[0],style:t[12]+(t[4]?`;--xy-minimap-background-color-props:${t[4]}`:""),class:ke(["svelte-flow__minimap",t[13]]),"data-testid":"svelte-flow__minimap",$$slots:{default:[og]},$$scope:{ctx:t}}}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p(i,o){const l={};o[0]&1&&(l.position=i[0]),o[0]&4112&&(l.style=i[12]+(i[4]?`;--xy-minimap-background-color-props:${i[4]}`:"")),o[0]&8192&&(l.class=ke(["svelte-flow__minimap",i[13]])),o[0]&268423150|o[1]&134217728&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}const Pi=t=>t instanceof Function?t:()=>t,rg=200,sg=150;function ug(t,e,n){let i,o,l,r,s,u,a,c,f,d,h,_,m,b,g,k,E,v,C,H,I,{position:D="bottom-right"}=e,{ariaLabel:A="Mini map"}=e,{nodeStrokeColor:y="transparent"}=e,{nodeColor:z=void 0}=e,{nodeClass:V=""}=e,{nodeBorderRadius:M=5}=e,{nodeStrokeWidth:w=2}=e,{bgColor:X=void 0}=e,{maskColor:P=void 0}=e,{maskStrokeColor:R=void 0}=e,{maskStrokeWidth:T=void 0}=e,{width:K=void 0}=e,{height:Z=void 0}=e,{pannable:U=!0}=e,{zoomable:O=!0}=e,{inversePan:se=void 0}=e,{zoomStep:re=void 0}=e,{style:ce=""}=e,{class:G=""}=e;const{nodes:he,viewport:me,width:F,height:Me,flowId:Ae,panZoom:De,translateExtent:Oe}=Ce();J(t,he,ee=>n(19,g=ee)),J(t,me,ee=>n(51,k=ee)),J(t,F,ee=>n(21,v=ee)),J(t,Me,ee=>n(20,E=ee)),J(t,Ae,ee=>n(52,C=ee)),J(t,De,ee=>n(26,H=ee)),J(t,Oe,ee=>n(27,I=ee));const qe=z===void 0?void 0:Pi(z),ve=Pi(y),rt=Pi(V),st=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",et=`svelte-flow__minimap-desc-${C}`,tt=()=>a;return t.$$set=ee=>{"position"in ee&&n(0,D=ee.position),"ariaLabel"in ee&&n(1,A=ee.ariaLabel),"nodeStrokeColor"in ee&&n(41,y=ee.nodeStrokeColor),"nodeColor"in ee&&n(42,z=ee.nodeColor),"nodeClass"in ee&&n(43,V=ee.nodeClass),"nodeBorderRadius"in ee&&n(2,M=ee.nodeBorderRadius),"nodeStrokeWidth"in ee&&n(3,w=ee.nodeStrokeWidth),"bgColor"in ee&&n(4,X=ee.bgColor),"maskColor"in ee&&n(5,P=ee.maskColor),"maskStrokeColor"in ee&&n(6,R=ee.maskStrokeColor),"maskStrokeWidth"in ee&&n(7,T=ee.maskStrokeWidth),"width"in ee&&n(44,K=ee.width),"height"in ee&&n(45,Z=ee.height),"pannable"in ee&&n(8,U=ee.pannable),"zoomable"in ee&&n(9,O=ee.zoomable),"inversePan"in ee&&n(10,se=ee.inversePan),"zoomStep"in ee&&n(11,re=ee.zoomStep),"style"in ee&&n(12,ce=ee.style),"class"in ee&&n(13,G=ee.class)},t.$$.update=()=>{t.$$.dirty[0]&3145728|t.$$.dirty[1]&1048576&&n(18,i={x:-k.x/k.zoom,y:-k.y/k.zoom,width:v/k.zoom,height:E/k.zoom}),t.$$.dirty[0]&786432&&n(48,o=g.length>0?ef(wn(g),i):i),t.$$.dirty[1]&8192&&n(17,l=K??rg),t.$$.dirty[1]&16384&&n(16,r=Z??sg),t.$$.dirty[0]&131072|t.$$.dirty[1]&131072&&n(50,s=o.width/l),t.$$.dirty[0]&65536|t.$$.dirty[1]&131072&&n(49,u=o.height/r),t.$$.dirty[1]&786432&&n(14,a=Math.max(s,u)),t.$$.dirty[0]&147456&&n(47,c=a*l),t.$$.dirty[0]&81920&&n(46,f=a*r),t.$$.dirty[0]&16384&&n(15,d=5*a),t.$$.dirty[0]&32768|t.$$.dirty[1]&196608&&n(25,h=o.x-(c-o.width)/2-d),t.$$.dirty[0]&32768|t.$$.dirty[1]&163840&&n(24,_=o.y-(f-o.height)/2-d),t.$$.dirty[0]&32768|t.$$.dirty[1]&65536&&n(23,m=c+d*2),t.$$.dirty[0]&32768|t.$$.dirty[1]&32768&&n(22,b=f+d*2)},[D,A,M,w,X,P,R,T,U,O,se,re,ce,G,a,d,r,l,i,g,E,v,b,m,_,h,H,I,he,me,F,Me,Ae,De,Oe,qe,ve,rt,st,et,tt,y,z,V,K,Z,f,c,o,u,s,k]}class ag extends oe{constructor(e){super(),ie(this,e,ug,lg,le,{position:0,ariaLabel:1,nodeStrokeColor:41,nodeColor:42,nodeClass:43,nodeBorderRadius:2,nodeStrokeWidth:3,bgColor:4,maskColor:5,maskStrokeColor:6,maskStrokeWidth:7,width:44,height:45,pannable:8,zoomable:9,inversePan:10,zoomStep:11,style:12,class:13},null,[-1,-1])}}const cg=t=>Jc(t);function fg(){const{zoomIn:t,zoomOut:e,fitView:n,onbeforedelete:i,snapGrid:o,viewport:l,width:r,height:s,minZoom:u,maxZoom:a,panZoom:c,nodes:f,edges:d,domNode:h,nodeLookup:_,edgeLookup:m}=Ce(),b=k=>{const E=tf(k),v=E?null:p(f).find(H=>H.id===k.id);return!E&&!v?[null,null,E]:[E?k:Ri(v),v,E]},g=(k,E,v={replace:!1})=>{f.update(C=>C.map(H=>{if(H.id===k){const I=typeof E=="function"?E(H):E;return v.replace&&cg(I)?I:{...H,...I}}return H}))};return{zoomIn:t,zoomOut:e,getNode:k=>p(_).get(k),getNodes:k=>k===void 0?p(f):_l(p(_),k),getEdge:k=>p(m).get(k),getEdges:k=>k===void 0?p(d):_l(p(m),k),setZoom:(k,E)=>{var v;(v=p(c))==null||v.scaleTo(k,{duration:E==null?void 0:E.duration})},getZoom:()=>p(l).zoom,setViewport:(k,E)=>{var C;const v=p(l);(C=p(c))==null||C.setViewport({x:k.x??v.x,y:k.y??v.y,zoom:k.zoom??v.zoom},{duration:E==null?void 0:E.duration})},getViewport:()=>p(l),setCenter:(k,E,v)=>{var H;const C=typeof(v==null?void 0:v.zoom)<"u"?v.zoom:p(a);(H=p(c))==null||H.setViewport({x:p(r)/2-k*C,y:p(s)/2-E*C,zoom:C},{duration:v==null?void 0:v.duration})},fitView:n,fitBounds:(k,E)=>{var C;const v=ji(k,p(r),p(s),p(u),p(a),(E==null?void 0:E.padding)??.1);(C=p(c))==null||C.setViewport(v,{duration:E==null?void 0:E.duration})},getIntersectingNodes:(k,E=!0,v)=>{const[C,H,I]=b(k);return C?(v||p(f)).filter(D=>{var V;if(!I&&(D.id===H.id||!((V=D.computed)!=null&&V.positionAbsolute)))return!1;const A=Ri(D),y=Qn(A,C);return E&&y>0||y>=C.width*C.height}):[]},isNodeIntersecting:(k,E,v=!0)=>{const[C]=b(k);if(!C)return!1;const H=Qn(C,E);return v&&H>0||H>=C.width*C.height},deleteElements:async({nodes:k=[],edges:E=[]})=>{const{nodes:v,edges:C}=await rr({nodesToRemove:k,edgesToRemove:E,nodes:p(f),edges:p(d),onBeforeDelete:p(i)});return v&&f.update(H=>H.filter(I=>!v.some(({id:D})=>D===I.id))),C&&d.update(H=>H.filter(I=>!C.some(({id:D})=>D===I.id))),{deletedNodes:v,deletedEdges:C}},screenToFlowPosition:(k,E={snapToGrid:!0})=>{const v=p(h);if(!v)return k;const C=E.snapToGrid?p(o):!1,{x:H,y:I,zoom:D}=p(l),{x:A,y}=v.getBoundingClientRect(),z={x:k.x-A,y:k.y-y};return ai(z,[H,I,D],C!==null,C||[1,1])},flowToScreenPosition:k=>{const E=p(h);if(!E)return k;const{x:v,y:C,zoom:H}=p(l),{x:I,y:D}=E.getBoundingClientRect(),A=ur(k,[v,C,H]);return{x:A.x+I,y:A.y+D}},toObject:()=>({nodes:p(f).map(k=>({...k,position:{...k.position},data:{...k.data}})),edges:p(d).map(k=>({...k})),viewport:{...p(l)}}),updateNode:g,updateNodeData:(k,E,v)=>{g(k,C=>{const H=typeof E=="function"?E(C):E;return v!=null&&v.replace?{...C,data:H}:{...C,data:{...C.data,...H}}})},viewport:l}}function _l(t,e){const n=[];for(const i of e){const o=t.get(i);o&&n.push(o)}return n}function dg(){const{domNode:t,updateNodeDimensions:e}=Ce();return i=>{const o=Array.isArray(i)?i:[i],l=new Map;o.forEach(r=>{var u;const s=(u=p(t))==null?void 0:u.querySelector(`.svelte-flow__node[data-id="${r}"]`);s&&l.set(r,{id:r,nodeElement:s,forceUpdate:!0})}),requestAnimationFrame(()=>e(l))}}function hg(){const{connection:t}=Ce();return t}function Ir(){const{edges:t}=Ce();return t}function gg(t){let e,n,i,o,l,r,s,u;return{c(){e=be("p"),e.textContent="Drag'n'drop the nodes!",n=de(),i=be("div"),o=be("div"),o.textContent="empty",l=de(),r=be("div"),r.textContent="tester",S(e,"class","svelte-1pq0z1i"),S(o,"draggable",!0),S(o,"class","svelte-1pq0z1i"),S(r,"class","top bottom svelte-1pq0z1i"),S(r,"draggable",!0),S(i,"class","nodes svelte-1pq0z1i")},m(a,c){B(a,e,c),B(a,n,c),B(a,i,c),_e(i,o),_e(i,l),_e(i,r),s||(u=[ye(o,"dragstart",t[1]),ye(r,"dragstart",t[2])],s=!0)},p:ne,i:ne,o:ne,d(a){a&&(W(e),W(n),W(i)),s=!1,Ne(u)}}}function mg(t){const e=(o,l)=>{if(!o.dataTransfer)return null;o.dataTransfer.setData("application/patchcanvasnode",l),o.dataTransfer.effectAllowed="move"};return[e,o=>e(o,""),o=>e(o,"all")]}class _g extends oe{constructor(e){super(),ie(this,e,mg,gg,le,{})}}const bt={power:"var(--font-colour)",dante:"red",dmx:"dodgerblue",ethernet:"gold",sdi:"limegreen",audio:"orange",midi:"hotpink",osc:"magenta"};function yl(t,e,n){const i=t.slice();return i[9]=e[n][0],i[10]=e[n][1],i}function bl(t){let e,n=t[9]+"",i,o,l,r;function s(){return t[5](t[9])}function u(){return t[6](t[9])}function a(...c){return t[7](t[9],...c)}return{c(){e=be("div"),i=xe(n),o=de(),ue(e,"--connection",t[10]),S(e,"draggable",!0),S(e,"class","svelte-euzowa")},m(c,f){B(c,e,f),_e(e,i),_e(e,o),l||(r=[ye(e,"mouseenter",s),ye(e,"mouseleave",u),ye(e,"dragstart",a)],l=!0)},p(c,f){t=c},d(c){c&&W(e),l=!1,Ne(r)}}}function yg(t){let e,n=Te(t[1]),i=[];for(let o=0;o<n.length;o+=1)i[o]=bl(yl(t,n,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=He()},m(o,l){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(o,l);B(o,e,l)},p(o,[l]){if(l&30){n=Te(o[1]);let r;for(r=0;r<n.length;r+=1){const s=yl(o,n,r);i[r]?i[r].p(s,l):(i[r]=bl(s),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},i:ne,o:ne,d(o){o&&W(e),Rn(i,o)}}}function bg(t,e,n){let i;const o=Ir();J(t,o,d=>n(8,i=d));const l=Object.entries(bt);function r(d){for(let h of i)h.sourceHandle===d?h.class+="highlight":h.class+="fade-out";o.set(i)}function s(d){var h,_;d=d;for(let m of i)m.sourceHandle===d?m.class=(h=m.class)==null?void 0:h.replace("highlight",""):m.class=(_=m.class)==null?void 0:_.replace("fade-out","");o.set(i)}const u=(d,h)=>{if(!d.dataTransfer)return null;d.dataTransfer.setData("application/patchcanvasconnection",h),d.dataTransfer.effectAllowed="move"};return[o,l,r,s,u,d=>r(d),d=>s(d),(d,h)=>u(h,d)]}class wg extends oe{constructor(e){super(),ie(this,e,bg,yg,le,{})}}function kg(t){let e,n,i,o,l,r,s;return o=new _g({}),r=new wg({}),{c(){e=be("aside"),n=be("h1"),n.textContent="PatchCanvas",i=de(),$(o.$$.fragment),l=de(),$(r.$$.fragment),S(e,"class","svelte-iv3dgl")},m(u,a){B(u,e,a),_e(e,n),_e(e,i),j(o,e,null),_e(e,l),j(r,e,null),s=!0},p:ne,i(u){s||(Y(o.$$.fragment,u),Y(r.$$.fragment,u),s=!0)},o(u){L(o.$$.fragment,u),L(r.$$.fragment,u),s=!1},d(u){u&&W(e),x(o),x(r)}}}class vg extends oe{constructor(e){super(),ie(this,e,null,kg,le,{})}}function Sg(t){let e,n;return e=new vn({props:{path:t[6],labelX:t[5],labelY:t[4],markerStart:t[2],markerEnd:t[0],style:t[1],class:t[3]}}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p(i,[o]){const l={};o&64&&(l.path=i[6]),o&32&&(l.labelX=i[5]),o&16&&(l.labelY=i[4]),o&4&&(l.markerStart=i[2]),o&1&&(l.markerEnd=i[0]),o&2&&(l.style=i[1]),o&8&&(l.class=i[3]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function Eg(t,e,n){let i,o,l,{id:r}=e,{source:s}=e,{sourceX:u}=e,{sourceY:a}=e,{sourcePosition:c}=e,{sourceHandleId:f=""}=e,{target:d}=e,{targetX:h}=e,{targetY:_}=e,{targetPosition:m}=e,{targetHandleId:b=""}=e,{markerStart:g=void 0}=e,{markerEnd:k=void 0}=e,{animated:E=!1}=e,{selected:v=!1}=e,{label:C=""}=e,{labelStyle:H=""}=e,{data:I=void 0}=e,{interactionWidth:D=void 0}=e,{style:A=""}=e,{edgeClass:y=""}=e;return Ir(),t.$$set=z=>{"id"in z&&n(7,r=z.id),"source"in z&&n(8,s=z.source),"sourceX"in z&&n(9,u=z.sourceX),"sourceY"in z&&n(10,a=z.sourceY),"sourcePosition"in z&&n(11,c=z.sourcePosition),"sourceHandleId"in z&&n(12,f=z.sourceHandleId),"target"in z&&n(13,d=z.target),"targetX"in z&&n(14,h=z.targetX),"targetY"in z&&n(15,_=z.targetY),"targetPosition"in z&&n(16,m=z.targetPosition),"targetHandleId"in z&&n(17,b=z.targetHandleId),"markerStart"in z&&n(2,g=z.markerStart),"markerEnd"in z&&n(0,k=z.markerEnd),"animated"in z&&n(18,E=z.animated),"selected"in z&&n(19,v=z.selected),"label"in z&&n(20,C=z.label),"labelStyle"in z&&n(21,H=z.labelStyle),"data"in z&&n(22,I=z.data),"interactionWidth"in z&&n(23,D=z.interactionWidth),"style"in z&&n(1,A=z.style),"edgeClass"in z&&n(3,y=z.edgeClass)},t.$$.update=()=>{if(t.$$.dirty&118272&&n(6,[i,o,l]=Zt({sourceX:u,sourceY:a,sourcePosition:c,targetX:h,targetY:_,targetPosition:m}),i,(n(5,o),n(9,u),n(10,a),n(11,c),n(14,h),n(15,_),n(16,m)),(n(4,l),n(9,u),n(10,a),n(11,c),n(14,h),n(15,_),n(16,m))),t.$$.dirty&4096){let z=bt[f??""];n(1,A=`stroke: ${z};`),n(0,k=`url(#${f})`)}},[k,A,g,y,l,o,i,r,s,u,a,c,f,d,h,_,m,b,E,v,C,H,I,D]}class Cg extends oe{constructor(e){super(),ie(this,e,Eg,Sg,le,{id:7,source:8,sourceX:9,sourceY:10,sourcePosition:11,sourceHandleId:12,target:13,targetX:14,targetY:15,targetPosition:16,targetHandleId:17,markerStart:2,markerEnd:0,animated:18,selected:19,label:20,labelStyle:21,data:22,interactionWidth:23,style:1,edgeClass:3})}}const zg=`<svg fill="currentColor" viewBox="4 2 8 12" xmlns="http://www.w3.org/2000/svg"\r
	><path\r
		fill-rule="evenodd"\r
		d="M7.375 3.67c0-.645-.56-1.17-1.25-1.17s-1.25.525-1.25 1.17c0 .646.56 1.17 1.25 1.17s1.25-.524 1.25-1.17zm0 8.66c0-.646-.56-1.17-1.25-1.17s-1.25.524-1.25 1.17c0 .645.56 1.17 1.25 1.17s1.25-.525 1.25-1.17zm-1.25-5.5c.69 0 1.25.525 1.25 1.17 0 .645-.56 1.17-1.25 1.17S4.875 8.645 4.875 8c0-.645.56-1.17 1.25-1.17zm5-3.16c0-.645-.56-1.17-1.25-1.17s-1.25.525-1.25 1.17c0 .646.56 1.17 1.25 1.17s1.25-.524 1.25-1.17zm-1.25 7.49c.69 0 1.25.524 1.25 1.17 0 .645-.56 1.17-1.25 1.17s-1.25-.525-1.25-1.17c0-.646.56-1.17 1.25-1.17zM11.125 8c0-.645-.56-1.17-1.25-1.17s-1.25.525-1.25 1.17c0 .645.56 1.17 1.25 1.17s1.25-.525 1.25-1.17z"\r
	/></svg\r
>\r
`;function Pg(t){let e,n;return e=new hn({props:{id:t[0],type:t[1]==="input"?"target":"source",position:t[1]==="input"?ae.Top:ae.Bottom,style:t[2]+`background: ${bt[t[0]]}; border: none; width: 8px; height: 8px;`,isConnectable:!0}}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p(i,[o]){const l={};o&1&&(l.id=i[0]),o&2&&(l.type=i[1]==="input"?"target":"source"),o&2&&(l.position=i[1]==="input"?ae.Top:ae.Bottom),o&5&&(l.style=i[2]+`background: ${bt[i[0]]}; border: none; width: 8px; height: 8px;`),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function Mg(t,e,n){let{id:i}=e,{io:o}=e,{style:l}=e;return t.$$set=r=>{"id"in r&&n(0,i=r.id),"io"in r&&n(1,o=r.io),"style"in r&&n(2,l=r.style)},[i,o,l]}class Dr extends oe{constructor(e){super(),ie(this,e,Mg,Pg,le,{id:0,io:1,style:2})}}function wl(t,e,n){const i=t.slice();return i[31]=e[n],i[33]=n,i}function kl(t,e,n){const i=t.slice();return i[31]=e[n],i[33]=n,i}function vl(t){let e,n;return e=new Dr({props:{id:t[31],io:"input",style:"left: calc(12px + "+(t[31]==="power"?"8":t[0].inputs.includes("power")&&t[0].inputs.indexOf("power")<t[0].inputs.indexOf(t[31])?t[33]-1:t[33])+" * 16px);"}}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p(i,o){const l={};o[0]&1&&(l.id=i[31]),o[0]&1&&(l.style="left: calc(12px + "+(i[31]==="power"?"8":i[0].inputs.includes("power")&&i[0].inputs.indexOf("power")<i[0].inputs.indexOf(i[31])?i[33]-1:i[33])+" * 16px);"),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function Sl(t){let e,n;return e=new Dr({props:{id:t[31],io:"output",style:"left: calc(12px + 12px + "+(t[31]==="power"?"7":t[0].outputs.includes("power")&&t[0].outputs.indexOf("power")<t[0].outputs.indexOf(t[31])?t[33]-1:t[33])+" * 16px);"}}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p(i,o){const l={};o[0]&1&&(l.id=i[31]),o[0]&1&&(l.style="left: calc(12px + 12px + "+(i[31]==="power"?"7":i[0].outputs.includes("power")&&i[0].outputs.indexOf("power")<i[0].outputs.indexOf(i[31])?i[33]-1:i[33])+" * 16px);"),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function Hg(t){let e,n,i,o,l,r,s,u,a,c=t[0].label+"",f,d,h,_,m,b,g,k,E,v,C=Te(t[0].inputs),H=[];for(let z=0;z<C.length;z+=1)H[z]=vl(kl(t,C,z));const I=z=>L(H[z],1,1,()=>{H[z]=null});let D=Te(t[0].outputs),A=[];for(let z=0;z<D.length;z+=1)A[z]=Sl(wl(t,D,z));const y=z=>L(A[z],1,1,()=>{A[z]=null});return{c(){e=be("div"),n=de(),i=be("div"),o=de(),l=be("div"),r=de(),s=be("div"),u=be("span"),a=de(),f=xe(c),d=de(),h=be("button"),h.textContent="✎",m=de();for(let z=0;z<H.length;z+=1)H[z].c();b=de();for(let z=0;z<A.length;z+=1)A[z].c();g=He(),S(e,"class","input-drop-target svelte-198hokf"),S(i,"class","output-drop-target svelte-198hokf"),S(l,"class","hover svelte-198hokf"),S(u,"class","drag-handle drag-dots svelte-198hokf"),S(h,"class","svelte-198hokf"),S(s,"style",_=t[0].labelStyle),S(s,"class","label svelte-198hokf")},m(z,V){B(z,e,V),t[20](e),B(z,n,V),B(z,i,V),t[24](i),B(z,o,V),B(z,l,V),B(z,r,V),B(z,s,V),_e(s,u),u.innerHTML=zg,_e(s,a),_e(s,f),_e(s,d),_e(s,h),B(z,m,V);for(let M=0;M<H.length;M+=1)H[M]&&H[M].m(z,V);B(z,b,V);for(let M=0;M<A.length;M+=1)A[M]&&A[M].m(z,V);B(z,g,V),k=!0,E||(v=[ye(e,"dragenter",t[21]),ye(e,"dragleave",t[22]),ye(e,"drop",t[23]),ye(i,"dragenter",t[25]),ye(i,"dragleave",t[26]),ye(i,"drop",t[27]),ye(h,"click",t[28])],E=!0)},p(z,V){if((!k||V[0]&1)&&c!==(c=z[0].label+"")&&qt(f,c),(!k||V[0]&1&&_!==(_=z[0].labelStyle))&&S(s,"style",_),V[0]&1){C=Te(z[0].inputs);let M;for(M=0;M<C.length;M+=1){const w=kl(z,C,M);H[M]?(H[M].p(w,V),Y(H[M],1)):(H[M]=vl(w),H[M].c(),Y(H[M],1),H[M].m(b.parentNode,b))}for(ze(),M=C.length;M<H.length;M+=1)I(M);Pe()}if(V[0]&1){D=Te(z[0].outputs);let M;for(M=0;M<D.length;M+=1){const w=wl(z,D,M);A[M]?(A[M].p(w,V),Y(A[M],1)):(A[M]=Sl(w),A[M].c(),Y(A[M],1),A[M].m(g.parentNode,g))}for(ze(),M=D.length;M<A.length;M+=1)y(M);Pe()}},i(z){if(!k){for(let V=0;V<C.length;V+=1)Y(H[V]);for(let V=0;V<D.length;V+=1)Y(A[V]);k=!0}},o(z){H=H.filter(Boolean);for(let V=0;V<H.length;V+=1)L(H[V]);A=A.filter(Boolean);for(let V=0;V<A.length;V+=1)L(A[V]);k=!1},d(z){z&&(W(e),W(n),W(i),W(o),W(l),W(r),W(s),W(m),W(b),W(g)),t[20](null),t[24](null),Rn(H,z),Rn(A,z),E=!1,Ne(v)}}}function Tn(t,e){return!t.includes(e)}function Ng(t,e,n){let{id:i}=e,{data:o}=e,{dragHandle:l}=e,{type:r}=e,{isConnectable:s}=e,{selected:u}=e,{zIndex:a}=e,{positionAbsoluteX:c}=e,{positionAbsoluteY:f}=e,{width:d=void 0}=e,{height:h=void 0}=e,{dragging:_=!1}=e,{sourcePosition:m=void 0}=e,{targetPosition:b=void 0}=e,g,k;const E=(T,K,Z)=>{if(T.preventDefault(),T.stopPropagation(),!T.dataTransfer)return null;if(T.dataTransfer.types[0]==="application/patchcanvasconnection"){const U=T.dataTransfer.getData("application/patchcanvasconnection");let O=!1;switch(K){case"input":O=Tn(o.inputs,U);break;case"output":O=Tn(o.outputs,U);break}O?(Z.style="background-color: green;",T.dataTransfer.dropEffect="move"):(Z.style="background-color: red;",T.dataTransfer.dropEffect="none")}},v=(T,K)=>{T.preventDefault(),K.style=""},C=(T,K,Z)=>{if(T.preventDefault(),!T.dataTransfer)return null;if(T.dataTransfer.types[0]==="application/patchcanvasconnection"){const U=T.dataTransfer.getData("application/patchcanvasconnection");let O=!1;switch(K){case"input":O=Tn(o.inputs,U);break;case"output":O=Tn(o.outputs,U);break}O&&I(U,K),Z.style=""}},H=dg();function I(T,K){switch(K){case"input":o.inputs.push(T);break;case"output":o.outputs.push(T);break}n(0,o),H(i)}function D(){let T=o.label;n(0,o.label=prompt(`Rename '${o.label}' to:`,o.label),o),o.label===null&&n(0,o.label=T,o)}o.connection&&o.connection==="all"&&(o.inputs.includes("dante")||o.inputs.push("dante"),o.inputs.includes("dmx")||o.inputs.push("dmx"),o.inputs.includes("ethernet")||o.inputs.push("ethernet"),o.inputs.includes("sdi")||o.inputs.push("sdi"),o.inputs.includes("audio")||o.inputs.push("audio"),o.inputs.includes("midi")||o.inputs.push("midi"),o.inputs.includes("osc")||o.inputs.push("osc"),o.inputs.includes("power")||o.inputs.push("power"),o.outputs.includes("dante")||o.outputs.push("dante"),o.outputs.includes("dmx")||o.outputs.push("dmx"),o.outputs.includes("ethernet")||o.outputs.push("ethernet"),o.outputs.includes("sdi")||o.outputs.push("sdi"),o.outputs.includes("audio")||o.outputs.push("audio"),o.outputs.includes("midi")||o.outputs.push("midi"),o.outputs.includes("osc")||o.outputs.push("osc"));function A(T){St[T?"unshift":"push"](()=>{g=T,n(1,g)})}const y=T=>E(T,"input",g),z=T=>v(T,g),V=T=>C(T,"input",g);function M(T){St[T?"unshift":"push"](()=>{k=T,n(2,k)})}const w=T=>E(T,"output",k),X=T=>v(T,k),P=T=>C(T,"output",k),R=()=>D();return t.$$set=T=>{"id"in T&&n(7,i=T.id),"data"in T&&n(0,o=T.data),"dragHandle"in T&&n(8,l=T.dragHandle),"type"in T&&n(9,r=T.type),"isConnectable"in T&&n(10,s=T.isConnectable),"selected"in T&&n(11,u=T.selected),"zIndex"in T&&n(12,a=T.zIndex),"positionAbsoluteX"in T&&n(13,c=T.positionAbsoluteX),"positionAbsoluteY"in T&&n(14,f=T.positionAbsoluteY),"width"in T&&n(15,d=T.width),"height"in T&&n(16,h=T.height),"dragging"in T&&n(17,_=T.dragging),"sourcePosition"in T&&n(18,m=T.sourcePosition),"targetPosition"in T&&n(19,b=T.targetPosition)},[o,g,k,E,v,C,D,i,l,r,s,u,a,c,f,d,h,_,m,b,A,y,z,V,M,w,X,P,R]}class Ag extends oe{constructor(e){super(),ie(this,e,Ng,Hg,le,{id:7,data:0,dragHandle:8,type:9,isConnectable:10,selected:11,zIndex:12,positionAbsoluteX:13,positionAbsoluteY:14,width:15,height:16,dragging:17,sourcePosition:18,targetPosition:19},null,[-1,-1])}}function El(t){let e,n,i,o,l;return{c(){e=ge("path"),n=de(),i=ge("circle"),S(e,"fill","none"),S(e,"stroke-width",1.5),S(e,"class","animated"),S(e,"stroke",bt[t[3]]??"var(--font-colour)"),S(e,"d",t[1]),S(i,"cx",o=t[0].targetX),S(i,"cy",l=t[0].targetY),S(i,"fill","var(--font-colour)"),S(i,"r",3),S(i,"stroke",bt[t[3]]??"var(--font-colour)"),S(i,"stroke-width",1.5)},m(r,s){B(r,e,s),B(r,n,s),B(r,i,s)},p(r,s){s&2&&S(e,"d",r[1]),s&1&&o!==(o=r[0].targetX)&&S(i,"cx",o),s&1&&l!==(l=r[0].targetY)&&S(i,"cy",l)},d(r){r&&(W(e),W(n),W(i))}}}function Og(t){let e,n=t[0].path&&El(t);return{c(){n&&n.c(),e=He()},m(i,o){n&&n.m(i,o),B(i,e,o)},p(i,[o]){i[0].path?n?n.p(i,o):(n=El(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ne,o:ne,d(i){i&&W(e),n&&n.d(i)}}}function Tg(t,e,n){var s;let i;const o=hg();J(t,o,u=>n(0,i=u));let l="",r=((s=i.startHandle)==null?void 0:s.handleId)??"";return t.$$.update=()=>{if(t.$$.dirty&1){let{sourceX:u,sourceY:a,sourcePosition:c,targetX:f,targetY:d,targetPosition:h}=i;n(1,[l]=Zt({sourceX:u??0,sourceY:a??0,sourcePosition:c??ae.Bottom,targetX:f??0,targetY:d??0,targetPosition:h??ae.Top}),l)}},[i,l,o,r]}class Ig extends oe{constructor(e){super(),ie(this,e,Tg,Og,le,{})}}function Dg(t){let e,n,i,o,l,r;return{c(){e=ge("svg"),n=ge("defs"),i=ge("marker"),o=ge("polyline"),S(o,"stroke",t[0]),S(o,"stroke-linecap","round"),S(o,"stroke-linejoin","round"),S(o,"stroke-width",t[6]),S(o,"fill",t[0]),S(o,"points","-5,-4 0,0 -5,4 -5,-4"),S(i,"class","svelte-flow__arrowhead"),S(i,"id",t[1]),S(i,"markerWidth",l=`${t[2]}`),S(i,"markerHeight",r=`${t[3]}`),S(i,"viewBox","-10 -10 20 20"),S(i,"markerUnits",t[4]),S(i,"orient",t[5]),S(i,"refX","0"),S(i,"refY","0"),S(e,"class","svelte-1wqugfi")},m(s,u){B(s,e,u),_e(e,n),_e(n,i),_e(i,o)},p(s,[u]){u&1&&S(o,"stroke",s[0]),u&64&&S(o,"stroke-width",s[6]),u&1&&S(o,"fill",s[0]),u&2&&S(i,"id",s[1]),u&4&&l!==(l=`${s[2]}`)&&S(i,"markerWidth",l),u&8&&r!==(r=`${s[3]}`)&&S(i,"markerHeight",r),u&16&&S(i,"markerUnits",s[4]),u&32&&S(i,"orient",s[5])},i:ne,o:ne,d(s){s&&W(e)}}}function Xg(t,e,n){let{id:i}=e,{type:o}=e,{width:l=12.5}=e,{height:r=12.5}=e,{markerUnits:s="strokeWidth"}=e,{orient:u="auto-start-reverse"}=e,{color:a=void 0}=e,{strokeWidth:c=void 0}=e;return t.$$set=f=>{"id"in f&&n(1,i=f.id),"type"in f&&n(7,o=f.type),"width"in f&&n(2,l=f.width),"height"in f&&n(3,r=f.height),"markerUnits"in f&&n(4,s=f.markerUnits),"orient"in f&&n(5,u=f.orient),"color"in f&&n(0,a=f.color),"strokeWidth"in f&&n(6,c=f.strokeWidth)},t.$$.update=()=>{t.$$.dirty&2&&n(0,a=bt[i??""])},[a,i,l,r,s,u,c,o]}class Yg extends oe{constructor(e){super(),ie(this,e,Xg,Dg,le,{id:1,type:7,width:2,height:3,markerUnits:4,orient:5,color:0,strokeWidth:6})}}function Cl(t,e,n){const i=t.slice();return i[16]=e[n][0],i[17]=e[n][1],i}function zl(t){let e,n;return e=new Yg({props:{id:t[16],type:dn.ArrowClosed}}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p:ne,i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function Vg(t){let e;return{c(){e=xe("🌙")},m(n,i){B(n,e,i)},d(n){n&&W(e)}}}function Rg(t){let e,n;return e=new mn({props:{$$slots:{default:[Vg]},$$scope:{ctx:t}}}),e.$on("click",t[10]),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p(i,o){const l={};o&1048576&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function Lg(t){let e,n,i;return{c(){e=be("a"),e.textContent="GitHub",n=be("br"),i=xe("© 2024 Craig Anderson"),S(e,"href","https://github.com/theonlytechnohead/patchcanvas")},m(o,l){B(o,e,l),B(o,n,l),B(o,i,l)},p:ne,d(o){o&&(W(e),W(n),W(i))}}}function Wg(t){let e,n;return e=new vg({}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function Bg(t){let e,n,i,o,l,r,s,u,a,c,f,d=Te(t[1]),h=[];for(let m=0;m<d.length;m+=1)h[m]=zl(Cl(t,d,m));const _=m=>L(h[m],1,1,()=>{h[m]=null});return n=new $0({props:{variant:dt.Dots}}),o=new ag({props:{position:"top-right",pannable:!1,zoomable:!1,width:visualViewport!=null&&visualViewport.width?(visualViewport==null?void 0:visualViewport.width)/10:void 0,height:visualViewport!=null&&visualViewport.height?(visualViewport==null?void 0:visualViewport.height)/10:void 0}}),r=new R0({props:{position:"bottom-right",showFitView:!1,showLock:!1,$$slots:{default:[Rg]},$$scope:{ctx:t}}}),u=new gn({props:{position:"bottom-left",$$slots:{default:[Lg]},$$scope:{ctx:t}}}),c=new gn({props:{position:"top-left",$$slots:{default:[Wg]},$$scope:{ctx:t}}}),{c(){for(let m=0;m<h.length;m+=1)h[m].c();e=de(),$(n.$$.fragment),i=de(),$(o.$$.fragment),l=de(),$(r.$$.fragment),s=de(),$(u.$$.fragment),a=de(),$(c.$$.fragment)},m(m,b){for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(m,b);B(m,e,b),j(n,m,b),B(m,i,b),j(o,m,b),B(m,l,b),j(r,m,b),B(m,s,b),j(u,m,b),B(m,a,b),j(c,m,b),f=!0},p(m,b){if(b&2){d=Te(m[1]);let v;for(v=0;v<d.length;v+=1){const C=Cl(m,d,v);h[v]?(h[v].p(C,b),Y(h[v],1)):(h[v]=zl(C),h[v].c(),Y(h[v],1),h[v].m(e.parentNode,e))}for(ze(),v=d.length;v<h.length;v+=1)_(v);Pe()}const g={};b&1048577&&(g.$$scope={dirty:b,ctx:m}),r.$set(g);const k={};b&1048576&&(k.$$scope={dirty:b,ctx:m}),u.$set(k);const E={};b&1048576&&(E.$$scope={dirty:b,ctx:m}),c.$set(E)},i(m){if(!f){for(let b=0;b<d.length;b+=1)Y(h[b]);Y(n.$$.fragment,m),Y(o.$$.fragment,m),Y(r.$$.fragment,m),Y(u.$$.fragment,m),Y(c.$$.fragment,m),f=!0}},o(m){h=h.filter(Boolean);for(let b=0;b<h.length;b+=1)L(h[b]);L(n.$$.fragment,m),L(o.$$.fragment,m),L(r.$$.fragment,m),L(u.$$.fragment,m),L(c.$$.fragment,m),f=!1},d(m){m&&(W(e),W(i),W(l),W(s),W(a)),Rn(h,m),x(n,m),x(o,m),x(r,m),x(u,m),x(c,m)}}}function pg(t){let e,n;return e=new Ig({props:{slot:"connectionLine"}}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p:ne,i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function Kg(t){let e,n;return e=new c0({props:{nodes:t[4],nodeTypes:t[2],edges:t[5],edgeTypes:t[3],defaultEdgeOptions:t[6],isValidConnection:Fg,snapGrid:[25,25],colorMode:t[0],fitView:!0,fitViewOptions:t[7],minZoom:.75,maxZoom:10,onlyRenderVisibleElements:!0,attributionPosition:"top-right",deleteKey:"Delete",$$slots:{connectionLine:[pg],default:[Bg]},$$scope:{ctx:t}}}),e.$on("dragover",t[8]),e.$on("drop",t[9]),e.$on("nodeclick",t[11]),e.$on("edgeclick",t[12]),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},p(i,[o]){const l={};o&1&&(l.colorMode=i[0]),o&1048577&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function Fg(t){return t.sourceHandle===t.targetHandle}function Zg(t,e,n){let i;const o=Object.entries(bt);let l;const r={default:Ag},s={connection:Cg},u=te([{id:crypto.randomUUID().toString(),type:"default",data:{label:"Patch",connection:"",inputs:[],outputs:["ethernet","sdi","audio","power"]},position:{x:0,y:0}},{id:crypto.randomUUID().toString(),type:"default",data:{label:"Canvas",connection:"all",inputs:[],outputs:[]},dragHandle:".drag-dots",position:{x:0,y:100}}]);J(t,u,E=>n(13,i=E));const a=te([{id:crypto.randomUUID().toString(),type:"connection",class:"",source:i[0].id,sourceHandle:"ethernet",target:i[1].id,targetHandle:"ethernet"},{id:crypto.randomUUID().toString(),type:"connection",class:"",source:i[0].id,sourceHandle:"sdi",target:i[1].id,targetHandle:"sdi"},{id:crypto.randomUUID().toString(),type:"connection",class:"",source:i[0].id,sourceHandle:"audio",target:i[1].id,targetHandle:"audio"},{id:crypto.randomUUID().toString(),type:"connection",class:"",source:i[0].id,sourceHandle:"power",target:i[1].id,targetHandle:"power"}]),c={animated:!1,type:"connection",class:""},f={padding:1,duration:1e3},{screenToFlowPosition:d}=fg(),h=E=>{if(E.preventDefault(),E.dataTransfer){const v=document.elementFromPoint(E.clientX,E.clientY);let C="";switch(E.dataTransfer.types[0]){case"application/patchcanvasnode":C=".svelte-flow__pane, .svelte-flow__edge";break;case"application/patchcanvasconnection":C=".input-drop-target, .output-drop-target";break}v!=null&&v.matches(C)?E.dataTransfer.dropEffect="move":E.dataTransfer.dropEffect="none"}},_=E=>{if(E.preventDefault(),!E.dataTransfer)return null;if(E.dataTransfer.types[0]==="application/patchcanvasnode"){const v=E.dataTransfer.getData("application/patchcanvasnode");m(v,E.clientX,E.clientY)}};function m(E,v,C){const H=d({x:v,y:C}),I={id:crypto.randomUUID().toString(),type:"default",position:H,data:{label:"Unnamed node",connection:E,inputs:[],outputs:[]},dragHandle:".drag-dots",origin:[.5,0]};i.push(I),u.set(i)}const b=()=>{var E;l==="dark"?n(0,l="light"):n(0,l="dark"),document.documentElement.setAttribute("data-theme",l),(E=document.querySelector('meta[name="color-scheme"]'))==null||E.setAttribute("content",l)},g=E=>console.log("on node click",E.detail.node),k=E=>console.log("on edge click: ",E.detail.edge);return n(0,l=document.documentElement.getAttribute("data-theme")??"dark"),[l,o,r,s,u,a,c,f,h,_,b,g,k]}class qg extends oe{constructor(e){super(),ie(this,e,Zg,Kg,le,{})}}function Ug(t){let e,n;return e=new qg({}),{c(){$(e.$$.fragment)},m(i,o){j(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){L(e.$$.fragment,i),n=!1},d(i){x(e,i)}}}function Gg(t){let e,n,i,o;return i=new h0({props:{$$slots:{default:[Ug]},$$scope:{ctx:t}}}),{c(){e=be("main"),n=be("div"),$(i.$$.fragment),ue(n,"height","100%")},m(l,r){B(l,e,r),_e(e,n),j(i,n,null),o=!0},p(l,[r]){const s={};r&1&&(s.$$scope={dirty:r,ctx:l}),i.$set(s)},i(l){o||(Y(i.$$.fragment,l),o=!0)},o(l){L(i.$$.fragment,l),o=!1},d(l){l&&W(e),x(i)}}}class Jg extends oe{constructor(e){super(),ie(this,e,null,Gg,le,{})}}new Jg({target:document.body});
