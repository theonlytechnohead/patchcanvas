var ds=Object.defineProperty;var hs=(t,e,n)=>e in t?ds(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var kt=(t,e,n)=>(hs(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function se(){}function Le(t,e){for(const n in e)t[n]=e[n];return t}function pl(t){return t()}function ro(){return Object.create(null)}function Te(t){t.forEach(pl)}function ze(t){return typeof t=="function"}function ce(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Yl(t,e){return t!=t?e==e:t!==e}function gs(t){return Object.keys(t).length===0}function ai(t,...e){if(t==null){for(const i of e)i(void 0);return se}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Z(t){let e;return ai(t,n=>e=n)(),e}function Q(t,e,n){t.$$.on_destroy.push(ai(e,n))}function De(t,e,n,i){if(t){const o=Ll(t,e,n,i);return t[0](o)}}function Ll(t,e,n,i){return t[1]&&i?Le(n.ctx.slice(),t[1](i(e))):n.ctx}function Xe(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const l=[],r=Math.max(e.dirty.length,o.length);for(let s=0;s<r;s+=1)l[s]=e.dirty[s]|o[s];return l}return e.dirty|o}return e.dirty}function pe(t,e,n,i,o,l){if(o){const r=Ll(e,n,i,l);t.p(r,o)}}function Ye(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function qi(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function Bt(t,e){const n={};e=new Set(e);for(const i in t)!e.has(i)&&i[0]!=="$"&&(n[i]=t[i]);return n}function ms(t){const e={};for(const n in t)e[n]=!0;return e}function so(t){return t??""}function Gn(t,e,n){return t.set(n),e}function Ve(t){return t&&ze(t.destroy)?t.destroy:se}const _s=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function me(t,e){t.appendChild(e)}function F(t,e,n){t.insertBefore(e,n||null)}function K(t){t.parentNode&&t.parentNode.removeChild(t)}function dn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function ye(t){return document.createElement(t)}function he(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Qe(t){return document.createTextNode(t)}function de(){return Qe(" ")}function Ie(){return Qe("")}function be(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function k(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const ys=["width","height"];function Kt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&ys.indexOf(i)===-1?t[i]=e[i]:k(t,i,e[i])}function bs(t){return Array.from(t.childNodes)}function jt(t,e){e=""+e,t.data!==e&&(t.data=e)}function fe(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}let On;function ws(){if(On===void 0){On=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{On=!0}}return On}function ks(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const i=ye("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const o=ws();let l;return o?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=be(window,"message",r=>{r.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{l=be(i.contentWindow,"resize",e),e()}),me(t,i),()=>{(o||l&&i.contentWindow)&&l(),K(i)}}function _e(t,e,n){t.classList.toggle(e,!!n)}function vs(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}class Ss{constructor(e=!1){kt(this,"is_svg",!1);kt(this,"e");kt(this,"n");kt(this,"t");kt(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=he(n.nodeName):this.e=ye(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)F(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(K)}}function Jn(t,e){return new t(e)}let hn;function un(t){hn=t}function xt(){if(!hn)throw new Error("Function called outside component initialization");return hn}function Cn(t){xt().$$.on_mount.push(t)}function Zi(t){xt().$$.on_destroy.push(t)}function ui(){const t=xt();return(e,n,{cancelable:i=!1}={})=>{const o=t.$$.callbacks[e];if(o){const l=vs(e,n,{cancelable:i});return o.slice().forEach(r=>{r.call(t,l)}),!l.defaultPrevented}return!0}}function gn(t,e){return xt().$$.context.set(t,e),e}function mn(t){return xt().$$.context.get(t)}function Es(t){return xt().$$.context.has(t)}function Se(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const pt=[],mt=[];let Lt=[];const ao=[],Cs=Promise.resolve();let Ii=!1;function Ms(){Ii||(Ii=!0,Cs.then(Rl))}function Qn(t){Lt.push(t)}const Si=new Set;let Dt=0;function Rl(){if(Dt!==0)return;const t=hn;do{try{for(;Dt<pt.length;){const e=pt[Dt];Dt++,un(e),zs(e.$$)}}catch(e){throw pt.length=0,Dt=0,e}for(un(null),pt.length=0,Dt=0;mt.length;)mt.pop()();for(let e=0;e<Lt.length;e+=1){const n=Lt[e];Si.has(n)||(Si.add(n),n())}Lt.length=0}while(pt.length);for(;ao.length;)ao.pop()();Ii=!1,Si.clear(),un(t)}function zs(t){if(t.fragment!==null){t.update(),Te(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Qn)}}function Ps(t){const e=[],n=[];Lt.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Lt=e}const Kn=new Set;let Ct;function Pe(){Ct={r:0,c:[],p:Ct}}function He(){Ct.r||Te(Ct.c),Ct=Ct.p}function Y(t,e){t&&t.i&&(Kn.delete(t),t.i(e))}function B(t,e,n,i){if(t&&t.o){if(Kn.has(t))return;Kn.add(t),Ct.c.push(()=>{Kn.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function Oe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ci(t,e){B(t,1,1,()=>{e.delete(t.key)})}function fi(t,e,n,i,o,l,r,s,a,u,c,f){let d=t.length,h=l.length,m=d;const y={};for(;m--;)y[t[m].key]=m;const E=[],g=new Map,v=new Map,_=[];for(m=h;m--;){const H=f(o,l,m),M=n(H);let P=r.get(M);P?i&&_.push(()=>P.p(H,e)):(P=u(M,H),P.c()),g.set(M,E[m]=P),M in y&&v.set(M,Math.abs(m-y[M]))}const b=new Set,C=new Set;function T(H){Y(H,1),H.m(s,c),r.set(H.key,H),c=H.first,h--}for(;d&&h;){const H=E[h-1],M=t[d-1],P=H.key,w=M.key;H===M?(c=H.first,d--,h--):g.has(w)?!r.has(P)||b.has(P)?T(H):C.has(w)?d--:v.get(P)>v.get(w)?(C.add(P),T(H)):(b.add(w),d--):(a(M,r),d--)}for(;d--;){const H=t[d];g.has(H.key)||a(H,r)}for(;h;)T(E[h-1]);return Te(_),E}function _t(t,e){const n={},i={},o={$$scope:1};let l=t.length;for(;l--;){const r=t[l],s=e[l];if(s){for(const a in r)a in s||(i[a]=1);for(const a in s)o[a]||(n[a]=s[a],o[a]=1);t[l]=s}else for(const a in r)o[a]=1}for(const r in i)r in n||(n[r]=void 0);return n}function Ft(t){return typeof t=="object"&&t!==null?t:{}}function te(t){t&&t.c()}function $(t,e,n){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),Qn(()=>{const l=t.$$.on_mount.map(pl).filter(ze);t.$$.on_destroy?t.$$.on_destroy.push(...l):Te(l),t.$$.on_mount=[]}),o.forEach(Qn)}function ee(t,e){const n=t.$$;n.fragment!==null&&(Ps(n.after_update),Te(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Hs(t,e){t.$$.dirty[0]===-1&&(pt.push(t),Ms(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ae(t,e,n,i,o,l,r=null,s=[-1]){const a=hn;un(t);const u=t.$$={fragment:null,ctx:[],props:l,update:se,not_equal:o,bound:ro(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:ro(),dirty:s,skip_bound:!1,root:e.target||a.$$.root};r&&r(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(f,d,...h)=>{const m=h.length?h[0]:d;return u.ctx&&o(u.ctx[f],u.ctx[f]=m)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](m),c&&Hs(t,f)),d}):[],u.update(),c=!0,Te(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const f=bs(e.target);u.fragment&&u.fragment.l(f),f.forEach(K)}else u.fragment&&u.fragment.c();e.intro&&Y(t.$$.fragment),$(t,e.target,e.anchor),Rl()}un(a)}class ue{constructor(){kt(this,"$$");kt(this,"$$set")}$destroy(){ee(this,1),this.$destroy=se}$on(e,n){if(!ze(n))return se;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!gs(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ns="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ns);const Xt=[];function je(t,e){return{subscribe:re(t,e).subscribe}}function re(t,e=se){let n;const i=new Set;function o(s){if(ce(t,s)&&(t=s,n)){const a=!Xt.length;for(const u of i)u[1](),Xt.push(u,t);if(a){for(let u=0;u<Xt.length;u+=2)Xt[u][0](Xt[u+1]);Xt.length=0}}}function l(s){o(s(t))}function r(s,a=se){const u=[s,a];return i.add(u),i.size===1&&(n=e(o,l)||se),s(t),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:o,update:l,subscribe:r}}function qt(t,e,n){const i=!Array.isArray(t),o=i?[t]:t;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=e.length<2;return je(n,(r,s)=>{let a=!1;const u=[];let c=0,f=se;const d=()=>{if(c)return;f();const m=e(i?u[0]:u,r,s);l?r(m):f=ze(m)?m:se},h=o.map((m,y)=>ai(m,E=>{u[y]=E,c&=~(1<<y),a&&d()},()=>{c|=1<<y}));return a=!0,d(),function(){Te(h),f(),a=!1}})}function ve(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=ve(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var As={value:()=>{}};function di(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Fn(n)}function Fn(t){this._=t}function Ts(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",o=n.indexOf(".");if(o>=0&&(i=n.slice(o+1),n=n.slice(0,o)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Fn.prototype=di.prototype={constructor:Fn,on:function(t,e){var n=this._,i=Ts(t+"",n),o,l=-1,r=i.length;if(arguments.length<2){for(;++l<r;)if((o=(t=i[l]).type)&&(o=Os(n[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++l<r;)if(o=(t=i[l]).type)n[o]=uo(n[o],t.name,e);else if(e==null)for(o in n)n[o]=uo(n[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Fn(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var n=new Array(o),i=0,o,l;i<o;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],i=0,o=l.length;i<o;++i)l[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],o=0,l=i.length;o<l;++o)i[o].value.apply(e,n)}};function Os(t,e){for(var n=0,i=t.length,o;n<i;++n)if((o=t[n]).name===e)return o.value}function uo(t,e,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===e){t[i]=As,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Di="http://www.w3.org/1999/xhtml";const co={svg:"http://www.w3.org/2000/svg",xhtml:Di,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function hi(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),co.hasOwnProperty(e)?{space:co[e],local:t}:t}function Is(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Di&&e.documentElement.namespaceURI===Di?e.createElement(t):e.createElementNS(n,t)}}function Ds(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Vl(t){var e=hi(t);return(e.local?Ds:Is)(e)}function Xs(){}function Ui(t){return t==null?Xs:function(){return this.querySelector(t)}}function ps(t){typeof t!="function"&&(t=Ui(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var l=e[o],r=l.length,s=i[o]=new Array(r),a,u,c=0;c<r;++c)(a=l[c])&&(u=t.call(a,a.__data__,c,l))&&("__data__"in a&&(u.__data__=a.__data__),s[c]=u);return new Ue(i,this._parents)}function Ys(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ls(){return[]}function Wl(t){return t==null?Ls:function(){return this.querySelectorAll(t)}}function Rs(t){return function(){return Ys(t.apply(this,arguments))}}function Vs(t){typeof t=="function"?t=Rs(t):t=Wl(t);for(var e=this._groups,n=e.length,i=[],o=[],l=0;l<n;++l)for(var r=e[l],s=r.length,a,u=0;u<s;++u)(a=r[u])&&(i.push(t.call(a,a.__data__,u,r)),o.push(a));return new Ue(i,o)}function Bl(t){return function(){return this.matches(t)}}function Kl(t){return function(e){return e.matches(t)}}var Ws=Array.prototype.find;function Bs(t){return function(){return Ws.call(this.children,t)}}function Ks(){return this.firstElementChild}function Fs(t){return this.select(t==null?Ks:Bs(typeof t=="function"?t:Kl(t)))}var qs=Array.prototype.filter;function Zs(){return Array.from(this.children)}function Us(t){return function(){return qs.call(this.children,t)}}function Gs(t){return this.selectAll(t==null?Zs:Us(typeof t=="function"?t:Kl(t)))}function Js(t){typeof t!="function"&&(t=Bl(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var l=e[o],r=l.length,s=i[o]=[],a,u=0;u<r;++u)(a=l[u])&&t.call(a,a.__data__,u,l)&&s.push(a);return new Ue(i,this._parents)}function Fl(t){return new Array(t.length)}function Qs(){return new Ue(this._enter||this._groups.map(Fl),this._parents)}function jn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}jn.prototype={constructor:jn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function js(t){return function(){return t}}function xs(t,e,n,i,o,l){for(var r=0,s,a=e.length,u=l.length;r<u;++r)(s=e[r])?(s.__data__=l[r],i[r]=s):n[r]=new jn(t,l[r]);for(;r<a;++r)(s=e[r])&&(o[r]=s)}function $s(t,e,n,i,o,l,r){var s,a,u=new Map,c=e.length,f=l.length,d=new Array(c),h;for(s=0;s<c;++s)(a=e[s])&&(d[s]=h=r.call(a,a.__data__,s,e)+"",u.has(h)?o[s]=a:u.set(h,a));for(s=0;s<f;++s)h=r.call(t,l[s],s,l)+"",(a=u.get(h))?(i[s]=a,a.__data__=l[s],u.delete(h)):n[s]=new jn(t,l[s]);for(s=0;s<c;++s)(a=e[s])&&u.get(d[s])===a&&(o[s]=a)}function ea(t){return t.__data__}function ta(t,e){if(!arguments.length)return Array.from(this,ea);var n=e?$s:xs,i=this._parents,o=this._groups;typeof t!="function"&&(t=js(t));for(var l=o.length,r=new Array(l),s=new Array(l),a=new Array(l),u=0;u<l;++u){var c=i[u],f=o[u],d=f.length,h=na(t.call(c,c&&c.__data__,u,i)),m=h.length,y=s[u]=new Array(m),E=r[u]=new Array(m),g=a[u]=new Array(d);n(c,f,y,E,g,h,e);for(var v=0,_=0,b,C;v<m;++v)if(b=y[v]){for(v>=_&&(_=v+1);!(C=E[_])&&++_<m;);b._next=C||null}}return r=new Ue(r,i),r._enter=s,r._exit=a,r}function na(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ia(){return new Ue(this._exit||this._groups.map(Fl),this._parents)}function oa(t,e,n){var i=this.enter(),o=this,l=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),n==null?l.remove():n(l),i&&o?i.merge(o).order():o}function la(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,o=n.length,l=i.length,r=Math.min(o,l),s=new Array(o),a=0;a<r;++a)for(var u=n[a],c=i[a],f=u.length,d=s[a]=new Array(f),h,m=0;m<f;++m)(h=u[m]||c[m])&&(d[m]=h);for(;a<o;++a)s[a]=n[a];return new Ue(s,this._parents)}function ra(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],o=i.length-1,l=i[o],r;--o>=0;)(r=i[o])&&(l&&r.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(r,l),l=r);return this}function sa(t){t||(t=aa);function e(f,d){return f&&d?t(f.__data__,d.__data__):!f-!d}for(var n=this._groups,i=n.length,o=new Array(i),l=0;l<i;++l){for(var r=n[l],s=r.length,a=o[l]=new Array(s),u,c=0;c<s;++c)(u=r[c])&&(a[c]=u);a.sort(e)}return new Ue(o,this._parents).order()}function aa(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ua(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ca(){return Array.from(this)}function fa(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,l=i.length;o<l;++o){var r=i[o];if(r)return r}return null}function da(){let t=0;for(const e of this)++t;return t}function ha(){return!this.node()}function ga(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var o=e[n],l=0,r=o.length,s;l<r;++l)(s=o[l])&&t.call(s,s.__data__,l,o);return this}function ma(t){return function(){this.removeAttribute(t)}}function _a(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ya(t,e){return function(){this.setAttribute(t,e)}}function ba(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function wa(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ka(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function va(t,e){var n=hi(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?_a:ma:typeof e=="function"?n.local?ka:wa:n.local?ba:ya)(n,e))}function ql(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Sa(t){return function(){this.style.removeProperty(t)}}function Ea(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ca(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Ma(t,e,n){return arguments.length>1?this.each((e==null?Sa:typeof e=="function"?Ca:Ea)(t,e,n??"")):Zt(this.node(),t)}function Zt(t,e){return t.style.getPropertyValue(e)||ql(t).getComputedStyle(t,null).getPropertyValue(e)}function za(t){return function(){delete this[t]}}function Pa(t,e){return function(){this[t]=e}}function Ha(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Na(t,e){return arguments.length>1?this.each((e==null?za:typeof e=="function"?Ha:Pa)(t,e)):this.node()[t]}function Zl(t){return t.trim().split(/^|\s+/)}function Gi(t){return t.classList||new Ul(t)}function Ul(t){this._node=t,this._names=Zl(t.getAttribute("class")||"")}Ul.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Gl(t,e){for(var n=Gi(t),i=-1,o=e.length;++i<o;)n.add(e[i])}function Jl(t,e){for(var n=Gi(t),i=-1,o=e.length;++i<o;)n.remove(e[i])}function Aa(t){return function(){Gl(this,t)}}function Ta(t){return function(){Jl(this,t)}}function Oa(t,e){return function(){(e.apply(this,arguments)?Gl:Jl)(this,t)}}function Ia(t,e){var n=Zl(t+"");if(arguments.length<2){for(var i=Gi(this.node()),o=-1,l=n.length;++o<l;)if(!i.contains(n[o]))return!1;return!0}return this.each((typeof e=="function"?Oa:e?Aa:Ta)(n,e))}function Da(){this.textContent=""}function Xa(t){return function(){this.textContent=t}}function pa(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ya(t){return arguments.length?this.each(t==null?Da:(typeof t=="function"?pa:Xa)(t)):this.node().textContent}function La(){this.innerHTML=""}function Ra(t){return function(){this.innerHTML=t}}function Va(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Wa(t){return arguments.length?this.each(t==null?La:(typeof t=="function"?Va:Ra)(t)):this.node().innerHTML}function Ba(){this.nextSibling&&this.parentNode.appendChild(this)}function Ka(){return this.each(Ba)}function Fa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qa(){return this.each(Fa)}function Za(t){var e=typeof t=="function"?t:Vl(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ua(){return null}function Ga(t,e){var n=typeof t=="function"?t:Vl(t),i=e==null?Ua:typeof e=="function"?e:Ui(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Ja(){var t=this.parentNode;t&&t.removeChild(this)}function Qa(){return this.each(Ja)}function ja(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function xa(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $a(t){return this.select(t?xa:ja)}function eu(t){return arguments.length?this.property("__data__",t):this.node().__data__}function tu(t){return function(e){t.call(this,e,this.__data__)}}function nu(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function iu(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,o=e.length,l;n<o;++n)l=e[n],(!t.type||l.type===t.type)&&l.name===t.name?this.removeEventListener(l.type,l.listener,l.options):e[++i]=l;++i?e.length=i:delete this.__on}}}function ou(t,e,n){return function(){var i=this.__on,o,l=tu(e);if(i){for(var r=0,s=i.length;r<s;++r)if((o=i[r]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=l,o.options=n),o.value=e;return}}this.addEventListener(t.type,l,n),o={type:t.type,name:t.name,value:e,listener:l,options:n},i?i.push(o):this.__on=[o]}}function lu(t,e,n){var i=nu(t+""),o,l=i.length,r;if(arguments.length<2){var s=this.node().__on;if(s){for(var a=0,u=s.length,c;a<u;++a)for(o=0,c=s[a];o<l;++o)if((r=i[o]).type===c.type&&r.name===c.name)return c.value}return}for(s=e?ou:iu,o=0;o<l;++o)this.each(s(i[o],e,n));return this}function Ql(t,e,n){var i=ql(t),o=i.CustomEvent;typeof o=="function"?o=new o(e,n):(o=i.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function ru(t,e){return function(){return Ql(this,t,e)}}function su(t,e){return function(){return Ql(this,t,e.apply(this,arguments))}}function au(t,e){return this.each((typeof e=="function"?su:ru)(t,e))}function*uu(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,l=i.length,r;o<l;++o)(r=i[o])&&(yield r)}var jl=[null];function Ue(t,e){this._groups=t,this._parents=e}function Mn(){return new Ue([[document.documentElement]],jl)}function cu(){return this}Ue.prototype=Mn.prototype={constructor:Ue,select:ps,selectAll:Vs,selectChild:Fs,selectChildren:Gs,filter:Js,data:ta,enter:Qs,exit:ia,join:oa,merge:la,selection:cu,order:ra,sort:sa,call:ua,nodes:ca,node:fa,size:da,empty:ha,each:ga,attr:va,style:Ma,property:Na,classed:Ia,text:Ya,html:Wa,raise:Ka,lower:qa,append:Za,insert:Ga,remove:Qa,clone:$a,datum:eu,on:lu,dispatch:au,[Symbol.iterator]:uu};function Ze(t){return typeof t=="string"?new Ue([[document.querySelector(t)]],[document.documentElement]):new Ue([[t]],jl)}function fu(t){let e;for(;e=t.sourceEvent;)t=e;return t}function xe(t,e){if(t=fu(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}const du={passive:!1},_n={capture:!0,passive:!1};function Ei(t){t.stopImmediatePropagation()}function Rt(t){t.preventDefault(),t.stopImmediatePropagation()}function xl(t){var e=t.document.documentElement,n=Ze(t).on("dragstart.drag",Rt,_n);"onselectstart"in e?n.on("selectstart.drag",Rt,_n):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function $l(t,e){var n=t.document.documentElement,i=Ze(t).on("dragstart.drag",null);e&&(i.on("click.drag",Rt,_n),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const In=t=>()=>t;function Xi(t,{sourceEvent:e,subject:n,target:i,identifier:o,active:l,x:r,y:s,dx:a,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Xi.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function hu(t){return!t.ctrlKey&&!t.button}function gu(){return this.parentNode}function mu(t,e){return e??{x:t.x,y:t.y}}function _u(){return navigator.maxTouchPoints||"ontouchstart"in this}function er(){var t=hu,e=gu,n=mu,i=_u,o={},l=di("start","drag","end"),r=0,s,a,u,c,f=0;function d(b){b.on("mousedown.drag",h).filter(i).on("touchstart.drag",E).on("touchmove.drag",g,du).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(b,C){if(!(c||!t.call(this,b,C))){var T=_(this,e.call(this,b,C),b,C,"mouse");T&&(Ze(b.view).on("mousemove.drag",m,_n).on("mouseup.drag",y,_n),xl(b.view),Ei(b),u=!1,s=b.clientX,a=b.clientY,T("start",b))}}function m(b){if(Rt(b),!u){var C=b.clientX-s,T=b.clientY-a;u=C*C+T*T>f}o.mouse("drag",b)}function y(b){Ze(b.view).on("mousemove.drag mouseup.drag",null),$l(b.view,u),Rt(b),o.mouse("end",b)}function E(b,C){if(t.call(this,b,C)){var T=b.changedTouches,H=e.call(this,b,C),M=T.length,P,w;for(P=0;P<M;++P)(w=_(this,H,b,C,T[P].identifier,T[P]))&&(Ei(b),w("start",b,T[P]))}}function g(b){var C=b.changedTouches,T=C.length,H,M;for(H=0;H<T;++H)(M=o[C[H].identifier])&&(Rt(b),M("drag",b,C[H]))}function v(b){var C=b.changedTouches,T=C.length,H,M;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),H=0;H<T;++H)(M=o[C[H].identifier])&&(Ei(b),M("end",b,C[H]))}function _(b,C,T,H,M,P){var w=l.copy(),z=xe(P||T,C),p,N,S;if((S=n.call(b,new Xi("beforestart",{sourceEvent:T,target:d,identifier:M,active:r,x:z[0],y:z[1],dx:0,dy:0,dispatch:w}),H))!=null)return p=S.x-z[0]||0,N=S.y-z[1]||0,function O(A,V,L){var W=z,U;switch(A){case"start":o[M]=O,U=r++;break;case"end":delete o[M],--r;case"drag":z=xe(L||V,C),U=r;break}w.call(A,b,new Xi(A,{sourceEvent:V,subject:S,target:d,identifier:M,active:U,x:z[0]+p,y:z[1]+N,dx:z[0]-W[0],dy:z[1]-W[1],dispatch:w}),H)}}return d.filter=function(b){return arguments.length?(t=typeof b=="function"?b:In(!!b),d):t},d.container=function(b){return arguments.length?(e=typeof b=="function"?b:In(b),d):e},d.subject=function(b){return arguments.length?(n=typeof b=="function"?b:In(b),d):n},d.touchable=function(b){return arguments.length?(i=typeof b=="function"?b:In(!!b),d):i},d.on=function(){var b=l.on.apply(l,arguments);return b===l?d:b},d.clickDistance=function(b){return arguments.length?(f=(b=+b)*b,d):Math.sqrt(f)},d}function Ji(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function tr(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function zn(){}var yn=.7,xn=1/yn,Vt="\\s*([+-]?\\d+)\\s*",bn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yu=/^#([0-9a-f]{3,8})$/,bu=new RegExp(`^rgb\\(${Vt},${Vt},${Vt}\\)$`),wu=new RegExp(`^rgb\\(${ot},${ot},${ot}\\)$`),ku=new RegExp(`^rgba\\(${Vt},${Vt},${Vt},${bn}\\)$`),vu=new RegExp(`^rgba\\(${ot},${ot},${ot},${bn}\\)$`),Su=new RegExp(`^hsl\\(${bn},${ot},${ot}\\)$`),Eu=new RegExp(`^hsla\\(${bn},${ot},${ot},${bn}\\)$`),fo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ji(zn,wn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ho,formatHex:ho,formatHex8:Cu,formatHsl:Mu,formatRgb:go,toString:go});function ho(){return this.rgb().formatHex()}function Cu(){return this.rgb().formatHex8()}function Mu(){return nr(this).formatHsl()}function go(){return this.rgb().formatRgb()}function wn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=yu.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?mo(e):n===3?new Ke(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Dn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Dn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bu.exec(t))?new Ke(e[1],e[2],e[3],1):(e=wu.exec(t))?new Ke(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ku.exec(t))?Dn(e[1],e[2],e[3],e[4]):(e=vu.exec(t))?Dn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Su.exec(t))?bo(e[1],e[2]/100,e[3]/100,1):(e=Eu.exec(t))?bo(e[1],e[2]/100,e[3]/100,e[4]):fo.hasOwnProperty(t)?mo(fo[t]):t==="transparent"?new Ke(NaN,NaN,NaN,0):null}function mo(t){return new Ke(t>>16&255,t>>8&255,t&255,1)}function Dn(t,e,n,i){return i<=0&&(t=e=n=NaN),new Ke(t,e,n,i)}function zu(t){return t instanceof zn||(t=wn(t)),t?(t=t.rgb(),new Ke(t.r,t.g,t.b,t.opacity)):new Ke}function pi(t,e,n,i){return arguments.length===1?zu(t):new Ke(t,e,n,i??1)}function Ke(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Ji(Ke,pi,tr(zn,{brighter(t){return t=t==null?xn:Math.pow(xn,t),new Ke(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?yn:Math.pow(yn,t),new Ke(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ke(zt(this.r),zt(this.g),zt(this.b),$n(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_o,formatHex:_o,formatHex8:Pu,formatRgb:yo,toString:yo}));function _o(){return`#${Mt(this.r)}${Mt(this.g)}${Mt(this.b)}`}function Pu(){return`#${Mt(this.r)}${Mt(this.g)}${Mt(this.b)}${Mt((isNaN(this.opacity)?1:this.opacity)*255)}`}function yo(){const t=$n(this.opacity);return`${t===1?"rgb(":"rgba("}${zt(this.r)}, ${zt(this.g)}, ${zt(this.b)}${t===1?")":`, ${t})`}`}function $n(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function zt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Mt(t){return t=zt(t),(t<16?"0":"")+t.toString(16)}function bo(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new $e(t,e,n,i)}function nr(t){if(t instanceof $e)return new $e(t.h,t.s,t.l,t.opacity);if(t instanceof zn||(t=wn(t)),!t)return new $e;if(t instanceof $e)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,o=Math.min(e,n,i),l=Math.max(e,n,i),r=NaN,s=l-o,a=(l+o)/2;return s?(e===l?r=(n-i)/s+(n<i)*6:n===l?r=(i-e)/s+2:r=(e-n)/s+4,s/=a<.5?l+o:2-l-o,r*=60):s=a>0&&a<1?0:r,new $e(r,s,a,t.opacity)}function Hu(t,e,n,i){return arguments.length===1?nr(t):new $e(t,e,n,i??1)}function $e(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Ji($e,Hu,tr(zn,{brighter(t){return t=t==null?xn:Math.pow(xn,t),new $e(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?yn:Math.pow(yn,t),new $e(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,o=2*n-i;return new Ke(Ci(t>=240?t-240:t+120,o,i),Ci(t,o,i),Ci(t<120?t+240:t-120,o,i),this.opacity)},clamp(){return new $e(wo(this.h),Xn(this.s),Xn(this.l),$n(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=$n(this.opacity);return`${t===1?"hsl(":"hsla("}${wo(this.h)}, ${Xn(this.s)*100}%, ${Xn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function wo(t){return t=(t||0)%360,t<0?t+360:t}function Xn(t){return Math.max(0,Math.min(1,t||0))}function Ci(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ir=t=>()=>t;function Nu(t,e){return function(n){return t+n*e}}function Au(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Tu(t){return(t=+t)==1?or:function(e,n){return n-e?Au(e,n,t):ir(isNaN(e)?n:e)}}function or(t,e){var n=e-t;return n?Nu(t,n):ir(isNaN(t)?e:t)}const ko=function t(e){var n=Tu(e);function i(o,l){var r=n((o=pi(o)).r,(l=pi(l)).r),s=n(o.g,l.g),a=n(o.b,l.b),u=or(o.opacity,l.opacity);return function(c){return o.r=r(c),o.g=s(c),o.b=a(c),o.opacity=u(c),o+""}}return i.gamma=t,i}(1);function Et(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Yi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mi=new RegExp(Yi.source,"g");function Ou(t){return function(){return t}}function Iu(t){return function(e){return t(e)+""}}function Du(t,e){var n=Yi.lastIndex=Mi.lastIndex=0,i,o,l,r=-1,s=[],a=[];for(t=t+"",e=e+"";(i=Yi.exec(t))&&(o=Mi.exec(e));)(l=o.index)>n&&(l=e.slice(n,l),s[r]?s[r]+=l:s[++r]=l),(i=i[0])===(o=o[0])?s[r]?s[r]+=o:s[++r]=o:(s[++r]=null,a.push({i:r,x:Et(i,o)})),n=Mi.lastIndex;return n<e.length&&(l=e.slice(n),s[r]?s[r]+=l:s[++r]=l),s.length<2?a[0]?Iu(a[0].x):Ou(e):(e=a.length,function(u){for(var c=0,f;c<e;++c)s[(f=a[c]).i]=f.x(u);return s.join("")})}var vo=180/Math.PI,Li={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function lr(t,e,n,i,o,l){var r,s,a;return(r=Math.sqrt(t*t+e*e))&&(t/=r,e/=r),(a=t*n+e*i)&&(n-=t*a,i-=e*a),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,a/=s),t*i<e*n&&(t=-t,e=-e,a=-a,r=-r),{translateX:o,translateY:l,rotate:Math.atan2(e,t)*vo,skewX:Math.atan(a)*vo,scaleX:r,scaleY:s}}var pn;function Xu(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Li:lr(e.a,e.b,e.c,e.d,e.e,e.f)}function pu(t){return t==null||(pn||(pn=document.createElementNS("http://www.w3.org/2000/svg","g")),pn.setAttribute("transform",t),!(t=pn.transform.baseVal.consolidate()))?Li:(t=t.matrix,lr(t.a,t.b,t.c,t.d,t.e,t.f))}function rr(t,e,n,i){function o(u){return u.length?u.pop()+" ":""}function l(u,c,f,d,h,m){if(u!==f||c!==d){var y=h.push("translate(",null,e,null,n);m.push({i:y-4,x:Et(u,f)},{i:y-2,x:Et(c,d)})}else(f||d)&&h.push("translate("+f+e+d+n)}function r(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(o(f)+"rotate(",null,i)-2,x:Et(u,c)})):c&&f.push(o(f)+"rotate("+c+i)}function s(u,c,f,d){u!==c?d.push({i:f.push(o(f)+"skewX(",null,i)-2,x:Et(u,c)}):c&&f.push(o(f)+"skewX("+c+i)}function a(u,c,f,d,h,m){if(u!==f||c!==d){var y=h.push(o(h)+"scale(",null,",",null,")");m.push({i:y-4,x:Et(u,f)},{i:y-2,x:Et(c,d)})}else(f!==1||d!==1)&&h.push(o(h)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=t(u),c=t(c),l(u.translateX,u.translateY,c.translateX,c.translateY,f,d),r(u.rotate,c.rotate,f,d),s(u.skewX,c.skewX,f,d),a(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(h){for(var m=-1,y=d.length,E;++m<y;)f[(E=d[m]).i]=E.x(h);return f.join("")}}}var Yu=rr(Xu,"px, ","px)","deg)"),Lu=rr(pu,", ",")",")"),Ru=1e-12;function So(t){return((t=Math.exp(t))+1/t)/2}function Vu(t){return((t=Math.exp(t))-1/t)/2}function Wu(t){return((t=Math.exp(2*t))-1)/(t+1)}const Bu=function t(e,n,i){function o(l,r){var s=l[0],a=l[1],u=l[2],c=r[0],f=r[1],d=r[2],h=c-s,m=f-a,y=h*h+m*m,E,g;if(y<Ru)g=Math.log(d/u)/e,E=function(H){return[s+H*h,a+H*m,u*Math.exp(e*H*g)]};else{var v=Math.sqrt(y),_=(d*d-u*u+i*y)/(2*u*n*v),b=(d*d-u*u-i*y)/(2*d*n*v),C=Math.log(Math.sqrt(_*_+1)-_),T=Math.log(Math.sqrt(b*b+1)-b);g=(T-C)/e,E=function(H){var M=H*g,P=So(C),w=u/(n*v)*(P*Wu(e*M+C)-Vu(C));return[s+w*h,a+w*m,u*P/So(e*M+C)]}}return E.duration=g*1e3*e/Math.SQRT2,E}return o.rho=function(l){var r=Math.max(.001,+l),s=r*r,a=s*s;return t(r,s,a)},o}(Math.SQRT2,2,4);var Ut=0,rn=0,tn=0,sr=1e3,ei,sn,ti=0,Pt=0,gi=0,kn=typeof performance=="object"&&performance.now?performance:Date,ar=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Qi(){return Pt||(ar(Ku),Pt=kn.now()+gi)}function Ku(){Pt=0}function ni(){this._call=this._time=this._next=null}ni.prototype=ur.prototype={constructor:ni,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Qi():+n)+(e==null?0:+e),!this._next&&sn!==this&&(sn?sn._next=this:ei=this,sn=this),this._call=t,this._time=n,Ri()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ri())}};function ur(t,e,n){var i=new ni;return i.restart(t,e,n),i}function Fu(){Qi(),++Ut;for(var t=ei,e;t;)(e=Pt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ut}function Eo(){Pt=(ti=kn.now())+gi,Ut=rn=0;try{Fu()}finally{Ut=0,Zu(),Pt=0}}function qu(){var t=kn.now(),e=t-ti;e>sr&&(gi-=e,ti=t)}function Zu(){for(var t,e=ei,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ei=n);sn=t,Ri(i)}function Ri(t){if(!Ut){rn&&(rn=clearTimeout(rn));var e=t-Pt;e>24?(t<1/0&&(rn=setTimeout(Eo,t-kn.now()-gi)),tn&&(tn=clearInterval(tn))):(tn||(ti=kn.now(),tn=setInterval(qu,sr)),Ut=1,ar(Eo))}}function Co(t,e,n){var i=new ni;return e=e==null?0:+e,i.restart(o=>{i.stop(),t(o+e)},e,n),i}var Uu=di("start","end","cancel","interrupt"),Gu=[],cr=0,Mo=1,Vi=2,qn=3,zo=4,Wi=5,Zn=6;function mi(t,e,n,i,o,l){var r=t.__transition;if(!r)t.__transition={};else if(n in r)return;Ju(t,n,{name:e,index:i,group:o,on:Uu,tween:Gu,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:cr})}function ji(t,e){var n=et(t,e);if(n.state>cr)throw new Error("too late; already scheduled");return n}function rt(t,e){var n=et(t,e);if(n.state>qn)throw new Error("too late; already running");return n}function et(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ju(t,e,n){var i=t.__transition,o;i[e]=n,n.timer=ur(l,0,n.time);function l(u){n.state=Mo,n.timer.restart(r,n.delay,n.time),n.delay<=u&&r(u-n.delay)}function r(u){var c,f,d,h;if(n.state!==Mo)return a();for(c in i)if(h=i[c],h.name===n.name){if(h.state===qn)return Co(r);h.state===zo?(h.state=Zn,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[c]):+c<e&&(h.state=Zn,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[c])}if(Co(function(){n.state===qn&&(n.state=zo,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Vi,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Vi){for(n.state=qn,o=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(o[++f]=h);o.length=f+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=Wi,1),f=-1,d=o.length;++f<d;)o[f].call(t,c);n.state===Wi&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){n.state=Zn,n.timer.stop(),delete i[e];for(var u in i)return;delete t.__transition}}function Un(t,e){var n=t.__transition,i,o,l=!0,r;if(n){e=e==null?null:e+"";for(r in n){if((i=n[r]).name!==e){l=!1;continue}o=i.state>Vi&&i.state<Wi,i.state=Zn,i.timer.stop(),i.on.call(o?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[r]}l&&delete t.__transition}}function Qu(t){return this.each(function(){Un(this,t)})}function ju(t,e){var n,i;return function(){var o=rt(this,t),l=o.tween;if(l!==n){i=n=l;for(var r=0,s=i.length;r<s;++r)if(i[r].name===e){i=i.slice(),i.splice(r,1);break}}o.tween=i}}function xu(t,e,n){var i,o;if(typeof n!="function")throw new Error;return function(){var l=rt(this,t),r=l.tween;if(r!==i){o=(i=r).slice();for(var s={name:e,value:n},a=0,u=o.length;a<u;++a)if(o[a].name===e){o[a]=s;break}a===u&&o.push(s)}l.tween=o}}function $u(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=et(this.node(),n).tween,o=0,l=i.length,r;o<l;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((e==null?ju:xu)(n,t,e))}function xi(t,e,n){var i=t._id;return t.each(function(){var o=rt(this,i);(o.value||(o.value={}))[e]=n.apply(this,arguments)}),function(o){return et(o,i).value[e]}}function fr(t,e){var n;return(typeof e=="number"?Et:e instanceof wn?ko:(n=wn(e))?(e=n,ko):Du)(t,e)}function ec(t){return function(){this.removeAttribute(t)}}function tc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function nc(t,e,n){var i,o=n+"",l;return function(){var r=this.getAttribute(t);return r===o?null:r===i?l:l=e(i=r,n)}}function ic(t,e,n){var i,o=n+"",l;return function(){var r=this.getAttributeNS(t.space,t.local);return r===o?null:r===i?l:l=e(i=r,n)}}function oc(t,e,n){var i,o,l;return function(){var r,s=n(this),a;return s==null?void this.removeAttribute(t):(r=this.getAttribute(t),a=s+"",r===a?null:r===i&&a===o?l:(o=a,l=e(i=r,s)))}}function lc(t,e,n){var i,o,l;return function(){var r,s=n(this),a;return s==null?void this.removeAttributeNS(t.space,t.local):(r=this.getAttributeNS(t.space,t.local),a=s+"",r===a?null:r===i&&a===o?l:(o=a,l=e(i=r,s)))}}function rc(t,e){var n=hi(t),i=n==="transform"?Lu:fr;return this.attrTween(t,typeof e=="function"?(n.local?lc:oc)(n,i,xi(this,"attr."+t,e)):e==null?(n.local?tc:ec)(n):(n.local?ic:nc)(n,i,e))}function sc(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ac(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function uc(t,e){var n,i;function o(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&ac(t,l)),n}return o._value=e,o}function cc(t,e){var n,i;function o(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&sc(t,l)),n}return o._value=e,o}function fc(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=hi(t);return this.tween(n,(i.local?uc:cc)(i,e))}function dc(t,e){return function(){ji(this,t).delay=+e.apply(this,arguments)}}function hc(t,e){return e=+e,function(){ji(this,t).delay=e}}function gc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?dc:hc)(e,t)):et(this.node(),e).delay}function mc(t,e){return function(){rt(this,t).duration=+e.apply(this,arguments)}}function _c(t,e){return e=+e,function(){rt(this,t).duration=e}}function yc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?mc:_c)(e,t)):et(this.node(),e).duration}function bc(t,e){if(typeof e!="function")throw new Error;return function(){rt(this,t).ease=e}}function wc(t){var e=this._id;return arguments.length?this.each(bc(e,t)):et(this.node(),e).ease}function kc(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;rt(this,t).ease=n}}function vc(t){if(typeof t!="function")throw new Error;return this.each(kc(this._id,t))}function Sc(t){typeof t!="function"&&(t=Bl(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var l=e[o],r=l.length,s=i[o]=[],a,u=0;u<r;++u)(a=l[u])&&t.call(a,a.__data__,u,l)&&s.push(a);return new yt(i,this._parents,this._name,this._id)}function Ec(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,o=n.length,l=Math.min(i,o),r=new Array(i),s=0;s<l;++s)for(var a=e[s],u=n[s],c=a.length,f=r[s]=new Array(c),d,h=0;h<c;++h)(d=a[h]||u[h])&&(f[h]=d);for(;s<i;++s)r[s]=e[s];return new yt(r,this._parents,this._name,this._id)}function Cc(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Mc(t,e,n){var i,o,l=Cc(e)?ji:rt;return function(){var r=l(this,t),s=r.on;s!==i&&(o=(i=s).copy()).on(e,n),r.on=o}}function zc(t,e){var n=this._id;return arguments.length<2?et(this.node(),n).on.on(t):this.each(Mc(n,t,e))}function Pc(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Hc(){return this.on("end.remove",Pc(this._id))}function Nc(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ui(t));for(var i=this._groups,o=i.length,l=new Array(o),r=0;r<o;++r)for(var s=i[r],a=s.length,u=l[r]=new Array(a),c,f,d=0;d<a;++d)(c=s[d])&&(f=t.call(c,c.__data__,d,s))&&("__data__"in c&&(f.__data__=c.__data__),u[d]=f,mi(u[d],e,n,d,u,et(c,n)));return new yt(l,this._parents,e,n)}function Ac(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Wl(t));for(var i=this._groups,o=i.length,l=[],r=[],s=0;s<o;++s)for(var a=i[s],u=a.length,c,f=0;f<u;++f)if(c=a[f]){for(var d=t.call(c,c.__data__,f,a),h,m=et(c,n),y=0,E=d.length;y<E;++y)(h=d[y])&&mi(h,e,n,y,d,m);l.push(d),r.push(c)}return new yt(l,r,e,n)}var Tc=Mn.prototype.constructor;function Oc(){return new Tc(this._groups,this._parents)}function Ic(t,e){var n,i,o;return function(){var l=Zt(this,t),r=(this.style.removeProperty(t),Zt(this,t));return l===r?null:l===n&&r===i?o:o=e(n=l,i=r)}}function dr(t){return function(){this.style.removeProperty(t)}}function Dc(t,e,n){var i,o=n+"",l;return function(){var r=Zt(this,t);return r===o?null:r===i?l:l=e(i=r,n)}}function Xc(t,e,n){var i,o,l;return function(){var r=Zt(this,t),s=n(this),a=s+"";return s==null&&(a=s=(this.style.removeProperty(t),Zt(this,t))),r===a?null:r===i&&a===o?l:(o=a,l=e(i=r,s))}}function pc(t,e){var n,i,o,l="style."+e,r="end."+l,s;return function(){var a=rt(this,t),u=a.on,c=a.value[l]==null?s||(s=dr(e)):void 0;(u!==n||o!==c)&&(i=(n=u).copy()).on(r,o=c),a.on=i}}function Yc(t,e,n){var i=(t+="")=="transform"?Yu:fr;return e==null?this.styleTween(t,Ic(t,i)).on("end.style."+t,dr(t)):typeof e=="function"?this.styleTween(t,Xc(t,i,xi(this,"style."+t,e))).each(pc(this._id,t)):this.styleTween(t,Dc(t,i,e),n).on("end.style."+t,null)}function Lc(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Rc(t,e,n){var i,o;function l(){var r=e.apply(this,arguments);return r!==o&&(i=(o=r)&&Lc(t,r,n)),i}return l._value=e,l}function Vc(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Rc(t,e,n??""))}function Wc(t){return function(){this.textContent=t}}function Bc(t){return function(){var e=t(this);this.textContent=e??""}}function Kc(t){return this.tween("text",typeof t=="function"?Bc(xi(this,"text",t)):Wc(t==null?"":t+""))}function Fc(t){return function(e){this.textContent=t.call(this,e)}}function qc(t){var e,n;function i(){var o=t.apply(this,arguments);return o!==n&&(e=(n=o)&&Fc(o)),e}return i._value=t,i}function Zc(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,qc(t))}function Uc(){for(var t=this._name,e=this._id,n=hr(),i=this._groups,o=i.length,l=0;l<o;++l)for(var r=i[l],s=r.length,a,u=0;u<s;++u)if(a=r[u]){var c=et(a,e);mi(a,t,n,u,r,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new yt(i,this._parents,t,n)}function Gc(){var t,e,n=this,i=n._id,o=n.size();return new Promise(function(l,r){var s={value:r},a={value:function(){--o===0&&l()}};n.each(function(){var u=rt(this,i),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(a)),u.on=e}),o===0&&l()})}var Jc=0;function yt(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function hr(){return++Jc}var ct=Mn.prototype;yt.prototype={constructor:yt,select:Nc,selectAll:Ac,selectChild:ct.selectChild,selectChildren:ct.selectChildren,filter:Sc,merge:Ec,selection:Oc,transition:Uc,call:ct.call,nodes:ct.nodes,node:ct.node,size:ct.size,empty:ct.empty,each:ct.each,on:zc,attr:rc,attrTween:fc,style:Yc,styleTween:Vc,text:Kc,textTween:Zc,remove:Hc,tween:$u,delay:gc,duration:yc,ease:wc,easeVarying:vc,end:Gc,[Symbol.iterator]:ct[Symbol.iterator]};function Qc(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var jc={time:null,delay:0,duration:250,ease:Qc};function xc(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function $c(t){var e,n;t instanceof yt?(e=t._id,t=t._name):(e=hr(),(n=jc).time=Qi(),t=t==null?null:t+"");for(var i=this._groups,o=i.length,l=0;l<o;++l)for(var r=i[l],s=r.length,a,u=0;u<s;++u)(a=r[u])&&mi(a,t,e,u,r,n||xc(a,e));return new yt(i,this._parents,t,e)}Mn.prototype.interrupt=Qu;Mn.prototype.transition=$c;const Yn=t=>()=>t;function ef(t,{sourceEvent:e,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function dt(t,e,n){this.k=t,this.x=e,this.y=n}dt.prototype={constructor:dt,scale:function(t){return t===1?this:new dt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new dt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var _i=new dt(1,0,0);gr.prototype=dt.prototype;function gr(t){for(;!t.__zoom;)if(!(t=t.parentNode))return _i;return t.__zoom}function zi(t){t.stopImmediatePropagation()}function nn(t){t.preventDefault(),t.stopImmediatePropagation()}function tf(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function nf(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Po(){return this.__zoom||_i}function of(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function lf(){return navigator.maxTouchPoints||"ontouchstart"in this}function rf(t,e,n){var i=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],l=t.invertY(e[0][1])-n[0][1],r=t.invertY(e[1][1])-n[1][1];return t.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),r>l?(l+r)/2:Math.min(0,l)||Math.max(0,r))}function mr(){var t=tf,e=nf,n=rf,i=of,o=lf,l=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],s=250,a=Bu,u=di("start","zoom","end"),c,f,d,h=500,m=150,y=0,E=10;function g(S){S.property("__zoom",Po).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",w).filter(o).on("touchstart.zoom",z).on("touchmove.zoom",p).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(S,O,A,V){var L=S.selection?S.selection():S;L.property("__zoom",Po),S!==L?C(S,O,A,V):L.interrupt().each(function(){T(this,arguments).event(V).start().zoom(null,typeof O=="function"?O.apply(this,arguments):O).end()})},g.scaleBy=function(S,O,A,V){g.scaleTo(S,function(){var L=this.__zoom.k,W=typeof O=="function"?O.apply(this,arguments):O;return L*W},A,V)},g.scaleTo=function(S,O,A,V){g.transform(S,function(){var L=e.apply(this,arguments),W=this.__zoom,U=A==null?b(L):typeof A=="function"?A.apply(this,arguments):A,J=W.invert(U),D=typeof O=="function"?O.apply(this,arguments):O;return n(_(v(W,D),U,J),L,r)},A,V)},g.translateBy=function(S,O,A,V){g.transform(S,function(){return n(this.__zoom.translate(typeof O=="function"?O.apply(this,arguments):O,typeof A=="function"?A.apply(this,arguments):A),e.apply(this,arguments),r)},null,V)},g.translateTo=function(S,O,A,V,L){g.transform(S,function(){var W=e.apply(this,arguments),U=this.__zoom,J=V==null?b(W):typeof V=="function"?V.apply(this,arguments):V;return n(_i.translate(J[0],J[1]).scale(U.k).translate(typeof O=="function"?-O.apply(this,arguments):-O,typeof A=="function"?-A.apply(this,arguments):-A),W,r)},V,L)};function v(S,O){return O=Math.max(l[0],Math.min(l[1],O)),O===S.k?S:new dt(O,S.x,S.y)}function _(S,O,A){var V=O[0]-A[0]*S.k,L=O[1]-A[1]*S.k;return V===S.x&&L===S.y?S:new dt(S.k,V,L)}function b(S){return[(+S[0][0]+ +S[1][0])/2,(+S[0][1]+ +S[1][1])/2]}function C(S,O,A,V){S.on("start.zoom",function(){T(this,arguments).event(V).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(V).end()}).tween("zoom",function(){var L=this,W=arguments,U=T(L,W).event(V),J=e.apply(L,W),D=A==null?b(J):typeof A=="function"?A.apply(L,W):A,oe=Math.max(J[1][0]-J[0][0],J[1][1]-J[0][1]),ne=L.__zoom,R=typeof O=="function"?O.apply(L,W):O,q=a(ne.invert(D).concat(oe/ne.k),R.invert(D).concat(oe/R.k));return function(j){if(j===1)j=R;else{var le=q(j),I=oe/le[2];j=new dt(I,D[0]-le[0]*I,D[1]-le[1]*I)}U.zoom(null,j)}})}function T(S,O,A){return!A&&S.__zooming||new H(S,O)}function H(S,O){this.that=S,this.args=O,this.active=0,this.sourceEvent=null,this.extent=e.apply(S,O),this.taps=0}H.prototype={event:function(S){return S&&(this.sourceEvent=S),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(S,O){return this.mouse&&S!=="mouse"&&(this.mouse[1]=O.invert(this.mouse[0])),this.touch0&&S!=="touch"&&(this.touch0[1]=O.invert(this.touch0[0])),this.touch1&&S!=="touch"&&(this.touch1[1]=O.invert(this.touch1[0])),this.that.__zoom=O,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(S){var O=Ze(this.that).datum();u.call(S,this.that,new ef(S,{sourceEvent:this.sourceEvent,target:g,type:S,transform:this.that.__zoom,dispatch:u}),O)}};function M(S,...O){if(!t.apply(this,arguments))return;var A=T(this,O).event(S),V=this.__zoom,L=Math.max(l[0],Math.min(l[1],V.k*Math.pow(2,i.apply(this,arguments)))),W=xe(S);if(A.wheel)(A.mouse[0][0]!==W[0]||A.mouse[0][1]!==W[1])&&(A.mouse[1]=V.invert(A.mouse[0]=W)),clearTimeout(A.wheel);else{if(V.k===L)return;A.mouse=[W,V.invert(W)],Un(this),A.start()}nn(S),A.wheel=setTimeout(U,m),A.zoom("mouse",n(_(v(V,L),A.mouse[0],A.mouse[1]),A.extent,r));function U(){A.wheel=null,A.end()}}function P(S,...O){if(d||!t.apply(this,arguments))return;var A=S.currentTarget,V=T(this,O,!0).event(S),L=Ze(S.view).on("mousemove.zoom",D,!0).on("mouseup.zoom",oe,!0),W=xe(S,A),U=S.clientX,J=S.clientY;xl(S.view),zi(S),V.mouse=[W,this.__zoom.invert(W)],Un(this),V.start();function D(ne){if(nn(ne),!V.moved){var R=ne.clientX-U,q=ne.clientY-J;V.moved=R*R+q*q>y}V.event(ne).zoom("mouse",n(_(V.that.__zoom,V.mouse[0]=xe(ne,A),V.mouse[1]),V.extent,r))}function oe(ne){L.on("mousemove.zoom mouseup.zoom",null),$l(ne.view,V.moved),nn(ne),V.event(ne).end()}}function w(S,...O){if(t.apply(this,arguments)){var A=this.__zoom,V=xe(S.changedTouches?S.changedTouches[0]:S,this),L=A.invert(V),W=A.k*(S.shiftKey?.5:2),U=n(_(v(A,W),V,L),e.apply(this,O),r);nn(S),s>0?Ze(this).transition().duration(s).call(C,U,V,S):Ze(this).call(g.transform,U,V,S)}}function z(S,...O){if(t.apply(this,arguments)){var A=S.touches,V=A.length,L=T(this,O,S.changedTouches.length===V).event(S),W,U,J,D;for(zi(S),U=0;U<V;++U)J=A[U],D=xe(J,this),D=[D,this.__zoom.invert(D),J.identifier],L.touch0?!L.touch1&&L.touch0[2]!==D[2]&&(L.touch1=D,L.taps=0):(L.touch0=D,W=!0,L.taps=1+!!c);c&&(c=clearTimeout(c)),W&&(L.taps<2&&(f=D[0],c=setTimeout(function(){c=null},h)),Un(this),L.start())}}function p(S,...O){if(this.__zooming){var A=T(this,O).event(S),V=S.changedTouches,L=V.length,W,U,J,D;for(nn(S),W=0;W<L;++W)U=V[W],J=xe(U,this),A.touch0&&A.touch0[2]===U.identifier?A.touch0[0]=J:A.touch1&&A.touch1[2]===U.identifier&&(A.touch1[0]=J);if(U=A.that.__zoom,A.touch1){var oe=A.touch0[0],ne=A.touch0[1],R=A.touch1[0],q=A.touch1[1],j=(j=R[0]-oe[0])*j+(j=R[1]-oe[1])*j,le=(le=q[0]-ne[0])*le+(le=q[1]-ne[1])*le;U=v(U,Math.sqrt(j/le)),J=[(oe[0]+R[0])/2,(oe[1]+R[1])/2],D=[(ne[0]+q[0])/2,(ne[1]+q[1])/2]}else if(A.touch0)J=A.touch0[0],D=A.touch0[1];else return;A.zoom("touch",n(_(U,J,D),A.extent,r))}}function N(S,...O){if(this.__zooming){var A=T(this,O).event(S),V=S.changedTouches,L=V.length,W,U;for(zi(S),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),W=0;W<L;++W)U=V[W],A.touch0&&A.touch0[2]===U.identifier?delete A.touch0:A.touch1&&A.touch1[2]===U.identifier&&delete A.touch1;if(A.touch1&&!A.touch0&&(A.touch0=A.touch1,delete A.touch1),A.touch0)A.touch0[1]=this.__zoom.invert(A.touch0[0]);else if(A.end(),A.taps===2&&(U=xe(U,this),Math.hypot(f[0]-U[0],f[1]-U[1])<E)){var J=Ze(this).on("dblclick.zoom");J&&J.apply(this,arguments)}}}return g.wheelDelta=function(S){return arguments.length?(i=typeof S=="function"?S:Yn(+S),g):i},g.filter=function(S){return arguments.length?(t=typeof S=="function"?S:Yn(!!S),g):t},g.touchable=function(S){return arguments.length?(o=typeof S=="function"?S:Yn(!!S),g):o},g.extent=function(S){return arguments.length?(e=typeof S=="function"?S:Yn([[+S[0][0],+S[0][1]],[+S[1][0],+S[1][1]]]),g):e},g.scaleExtent=function(S){return arguments.length?(l[0]=+S[0],l[1]=+S[1],g):[l[0],l[1]]},g.translateExtent=function(S){return arguments.length?(r[0][0]=+S[0][0],r[1][0]=+S[1][0],r[0][1]=+S[0][1],r[1][1]=+S[1][1],g):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},g.constrain=function(S){return arguments.length?(n=S,g):n},g.duration=function(S){return arguments.length?(s=+S,g):s},g.interpolate=function(S){return arguments.length?(a=S,g):a},g.on=function(){var S=u.on.apply(u,arguments);return S===u?g:S},g.clickDistance=function(S){return arguments.length?(y=(S=+S)*S,g):Math.sqrt(y)},g.tapDistance=function(S){return arguments.length?(E=+S,g):E},g}const Pn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${n&&i}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Ne=Symbol.for("internals"),Ho=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var Ht;(function(t){t.Strict="strict",t.Loose="loose"})(Ht||(Ht={}));var lt;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(lt||(lt={}));var ii;(function(t){t.Partial="partial",t.Full="full"})(ii||(ii={}));var Wt;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Wt||(Wt={}));var Gt;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Gt||(Gt={}));var ge;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ge||(ge={}));function sf(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function No(t,e,n){if(!n)return;const i=[];t.forEach((o,l)=>{e!=null&&e.has(l)||i.push(o)}),i.length&&n(i)}const af=t=>"id"in t&&"source"in t&&"target"in t,uf=t=>"id"in t&&!("source"in t)&&!("target"in t),$t=(t,e=[0,0])=>{var s;if(!t)return{position:{x:0,y:0},positionAbsolute:{x:0,y:0}};const{width:n,height:i}=Nn(t),o=n*e[0],l=i*e[1],r={x:t.position.x-o,y:t.position.y-l};return{position:r,positionAbsolute:(s=t.computed)!=null&&s.positionAbsolute?{x:t.computed.positionAbsolute.x-o,y:t.computed.positionAbsolute.y-l}:r}},Hn=(t,e={nodeOrigin:[0,0],useRelativePosition:!1})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,o)=>{const l=$t(o,o.origin||e.nodeOrigin);return $i(i,oi({...l[e.useRelativePosition?"position":"positionAbsolute"],...Nn(o)}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return eo(n)},_r=(t,e,[n,i,o]=[0,0,1],l=!1,r=!1,s=[0,0])=>{const a={...yi(e,[n,i,o]),width:e.width/o,height:e.height/o};return t.reduce((c,f)=>{const{computed:d,selectable:h=!0,hidden:m=!1}=f,y=(d==null?void 0:d.width)??f.width??f.initialWidth??null,E=(d==null?void 0:d.height)??f.height??f.initialHeight??null;if(r&&!h||m)return c;const g=li(a,Ki(f,s)),v=y===null||E===null,_=l&&g>0,b=(y??0)*(E??0);return(v||_||g>=b||f.dragging)&&c.push(f),c},[])},Bi=(t,e)=>{const n=new Set;return t.forEach(i=>{n.add(i.id)}),e.filter(i=>n.has(i.source)||n.has(i.target))};function cf({nodes:t,width:e,height:n,panZoom:i,minZoom:o,maxZoom:l,nodeOrigin:r=[0,0]},s){const a=t.filter(u=>{var f,d,h;const c=((f=u.computed)==null?void 0:f.width)&&((d=u.computed)==null?void 0:d.height)&&((s==null?void 0:s.includeHiddenNodes)||!u.hidden);return(h=s==null?void 0:s.nodes)!=null&&h.length?c&&(s==null?void 0:s.nodes.some(m=>m.id===u.id)):c});if(a.length>0){const u=Hn(a,{nodeOrigin:r}),c=no(u,e,n,(s==null?void 0:s.minZoom)??o,(s==null?void 0:s.maxZoom)??l,(s==null?void 0:s.padding)??.1);return i.setViewport(c,{duration:s==null?void 0:s.duration}),!0}return!1}function ff(t,e){var n,i;return!e||e==="parent"?e:[e[0],[e[1][0]-(((n=t.computed)==null?void 0:n.width)??0),e[1][1]-(((i=t.computed)==null?void 0:i.height)??0)]]}function df({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:o,onError:l}){var d,h,m,y;const r=n.get(t),s=r.parentNode?n.get(r.parentNode):void 0,{x:a,y:u}=s?$t(s,s.origin||i).positionAbsolute:{x:0,y:0};let c=ff(r,r.extent||o);if(r.extent==="parent"&&!r.expandParent)if(!s)l==null||l("005",Pn.error005());else{const E=(d=r.computed)==null?void 0:d.width,g=(h=r.computed)==null?void 0:h.height,v=(m=s==null?void 0:s.computed)==null?void 0:m.width,_=(y=s==null?void 0:s.computed)==null?void 0:y.height;if(E&&g&&v&&_){const b=r.origin||i,C=a+E*b[0],T=u+g*b[1];c=[[C,T],[C+v-E,T+_-g]]}}else s&&Oo(r.extent)&&(c=[[r.extent[0][0]+a,r.extent[0][1]+u],[r.extent[1][0]+a,r.extent[1][1]+u]]);const f=Oo(c)?hf(e,c):e;return{position:{x:f.x-a,y:f.y-u},positionAbsolute:f}}async function yr({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:i,onBeforeDelete:o}){const l=t.map(d=>d.id),r=[];for(const d of n){if(d.deletable===!1)continue;const h=l.includes(d.id),m=!h&&d.parentNode&&r.find(y=>y.id===d.parentNode);(h||m)&&r.push(d)}const s=e.map(d=>d.id),a=i.filter(d=>d.deletable!==!1),c=Bi(r,a);for(const d of a)s.includes(d.id)&&!c.find(m=>m.id===d.id)&&c.push(d);if(!o)return{edges:c,nodes:r};const f=await o({nodes:r,edges:c});return typeof f=="boolean"?f?{edges:c,nodes:r}:{edges:[],nodes:[]}:f}const Jt=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),hf=(t={x:0,y:0},e)=>({x:Jt(t.x,e[0][0],e[1][0]),y:Jt(t.y,e[0][1],e[1][1])}),Ao=(t,e,n)=>t<e?Jt(Math.abs(t-e),1,50)/50:t>n?-Jt(Math.abs(t-n),1,50)/50:0,br=(t,e)=>{const n=Ao(t.x,35,e.width-35)*20,i=Ao(t.y,35,e.height-35)*20;return[n,i]},$i=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),oi=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),eo=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),Ki=(t,e=[0,0])=>{var i,o;const{positionAbsolute:n}=$t(t,t.origin||e);return{...n,width:((i=t.computed)==null?void 0:i.width)??t.width??0,height:((o=t.computed)==null?void 0:o.height)??t.height??0}},To=(t,e=[0,0])=>{var i,o;const{positionAbsolute:n}=$t(t,t.origin||e);return{...n,x2:n.x+(((i=t.computed)==null?void 0:i.width)??t.width??0),y2:n.y+(((o=t.computed)==null?void 0:o.height)??t.height??0)}},gf=(t,e)=>eo($i(oi(t),oi(e))),li=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},mf=t=>an(t.width)&&an(t.height)&&an(t.x)&&an(t.y),an=t=>!isNaN(t)&&isFinite(t),_f=(t,e)=>{},yf=({x:t,y:e,width:n,height:i,origin:o=[0,0]})=>!n||!i||o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:t,y:e}:{x:t-n*o[0],y:e-i*o[1]},to=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),yi=({x:t,y:e},[n,i,o],l=!1,r=[1,1])=>{const s={x:(t-n)/o,y:(e-i)/o};return l?to(s,r):s},wr=({x:t,y:e},[n,i,o])=>({x:t*o+n,y:e*o+i}),no=(t,e,n,i,o,l)=>{const r=e/(t.width*(1+l)),s=n/(t.height*(1+l)),a=Math.min(r,s),u=Jt(a,i,o),c=t.x+t.width/2,f=t.y+t.height/2,d=e/2-c*u,h=n/2-f*u;return{x:d,y:h,zoom:u}},ri=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function Oo(t){return t!==void 0&&t!=="parent"}function Nn(t){var e,n;return{width:((e=t.computed)==null?void 0:e.width)??t.width??t.initialWidth??0,height:((n=t.computed)==null?void 0:n.height)??t.height??t.initialHeight??0}}function si(t){var e,n;return(((e=t.computed)==null?void 0:e.width)??t.width??t.initialWidth)!==void 0&&(((n=t.computed)==null?void 0:n.height)??t.height??t.initialHeight)!==void 0}function cn(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:i}){const{x:o,y:l}=ht(t),r=yi({x:o,y:l},i),{x:s,y:a}=n?to(r,e):r;return{xSnapped:s,ySnapped:a,...r}}const kr=t=>({width:t.offsetWidth,height:t.offsetHeight}),bf=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},wf=["INPUT","SELECT","TEXTAREA"];function kf(t){var i,o;const e=((o=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:o[0])||t.target;return wf.includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute("contenteditable"))||!!(e!=null&&e.closest(".nokey"))}const vr=t=>"clientX"in t,ht=(t,e)=>{var l,r;const n=vr(t),i=n?t.clientX:(l=t.touches)==null?void 0:l[0].clientX,o=n?t.clientY:(r=t.touches)==null?void 0:r[0].clientY;return{x:i-((e==null?void 0:e.left)??0),y:o-((e==null?void 0:e.top)??0)}},Io=(t,e,n,i=[0,0])=>{const o=e.querySelectorAll(t);if(!o||!o.length)return null;const l=Array.from(o),r=e.getBoundingClientRect(),s={x:r.width*i[0],y:r.height*i[1]};return l.map(a=>{const u=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(u.left-r.left-s.x)/n,y:(u.top-r.top-s.y)/n,...kr(a)}})};function vf({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:r,targetControlY:s}){const a=t*.125+o*.375+r*.375+n*.125,u=e*.125+l*.375+s*.375+i*.125,c=Math.abs(a-t),f=Math.abs(u-e);return[a,u,c,f]}function Ln(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Do({pos:t,x1:e,y1:n,x2:i,y2:o,c:l}){switch(t){case ge.Left:return[e-Ln(e-i,l),n];case ge.Right:return[e+Ln(i-e,l),n];case ge.Top:return[e,n-Ln(n-o,l)];case ge.Bottom:return[e,n+Ln(o-n,l)]}}function Sr({sourceX:t,sourceY:e,sourcePosition:n=ge.Bottom,targetX:i,targetY:o,targetPosition:l=ge.Top,curvature:r=.25}){const[s,a]=Do({pos:n,x1:t,y1:e,x2:i,y2:o,c:r}),[u,c]=Do({pos:l,x1:i,y1:o,x2:t,y2:e,c:r}),[f,d,h,m]=vf({sourceX:t,sourceY:e,targetX:i,targetY:o,sourceControlX:s,sourceControlY:a,targetControlX:u,targetControlY:c});return[`M${t},${e} C${s},${a} ${u},${c} ${i},${o}`,f,d,h,m]}function Er({sourceX:t,sourceY:e,targetX:n,targetY:i}){const o=Math.abs(n-t)/2,l=n<t?n+o:n-o,r=Math.abs(i-e)/2,s=i<e?i+r:i-r;return[l,s,o,r]}function Sf({sourceNode:t,targetNode:e,selected:n=!1,zIndex:i=0,elevateOnSelect:o=!1}){var s,a;if(!o)return i;const l=n||e.selected||t.selected,r=Math.max(((s=t[Ne])==null?void 0:s.z)||0,((a=e[Ne])==null?void 0:a.z)||0,1e3);return i+(l?r:0)}function Ef({sourceNode:t,targetNode:e,width:n,height:i,transform:o}){const l=$i(To(t),To(e));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const r={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:i/o[2]};return li(r,eo(l))>0}const Cf=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`xy-edge__${t}${e||""}-${n}${i||""}`,Mf=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),zf=(t,e)=>{if(!t.source||!t.target)return e;let n;return af(t)?n={...t}:n={...t,id:Cf(t)},Mf(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function Cr({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[o,l,r,s]=Er({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,o,l,r,s]}const Xo={[ge.Left]:{x:-1,y:0},[ge.Right]:{x:1,y:0},[ge.Top]:{x:0,y:-1},[ge.Bottom]:{x:0,y:1}},Pf=({source:t,sourcePosition:e=ge.Bottom,target:n})=>e===ge.Left||e===ge.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},po=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function Hf({source:t,sourcePosition:e=ge.Bottom,target:n,targetPosition:i=ge.Top,center:o,offset:l}){const r=Xo[e],s=Xo[i],a={x:t.x+r.x*l,y:t.y+r.y*l},u={x:n.x+s.x*l,y:n.y+s.y*l},c=Pf({source:a,sourcePosition:e,target:u}),f=c.x!==0?"x":"y",d=c[f];let h=[],m,y;const E={x:0,y:0},g={x:0,y:0},[v,_,b,C]=Er({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(r[f]*s[f]===-1){m=o.x??v,y=o.y??_;const H=[{x:m,y:a.y},{x:m,y:u.y}],M=[{x:a.x,y},{x:u.x,y}];r[f]===d?h=f==="x"?H:M:h=f==="x"?M:H}else{const H=[{x:a.x,y:u.y}],M=[{x:u.x,y:a.y}];if(f==="x"?h=r.x===d?M:H:h=r.y===d?H:M,e===i){const N=Math.abs(t[f]-n[f]);if(N<=l){const S=Math.min(l-1,l-N);r[f]===d?E[f]=(a[f]>t[f]?-1:1)*S:g[f]=(u[f]>n[f]?-1:1)*S}}if(e!==i){const N=f==="x"?"y":"x",S=r[f]===s[N],O=a[N]>u[N],A=a[N]<u[N];(r[f]===1&&(!S&&O||S&&A)||r[f]!==1&&(!S&&A||S&&O))&&(h=f==="x"?H:M)}const P={x:a.x+E.x,y:a.y+E.y},w={x:u.x+g.x,y:u.y+g.y},z=Math.max(Math.abs(P.x-h[0].x),Math.abs(w.x-h[0].x)),p=Math.max(Math.abs(P.y-h[0].y),Math.abs(w.y-h[0].y));z>=p?(m=(P.x+w.x)/2,y=h[0].y):(m=h[0].x,y=(P.y+w.y)/2)}return[[t,{x:a.x+E.x,y:a.y+E.y},...h,{x:u.x+g.x,y:u.y+g.y},n],m,y,b,C]}function Nf(t,e,n,i){const o=Math.min(po(t,e)/2,po(e,n)/2,i),{x:l,y:r}=e;if(t.x===l&&l===n.x||t.y===r&&r===n.y)return`L${l} ${r}`;if(t.y===r){const u=t.x<n.x?-1:1,c=t.y<n.y?1:-1;return`L ${l+o*u},${r}Q ${l},${r} ${l},${r+o*c}`}const s=t.x<n.x?1:-1,a=t.y<n.y?-1:1;return`L ${l},${r+o*a}Q ${l},${r} ${l+o*s},${r}`}function Qt({sourceX:t,sourceY:e,sourcePosition:n=ge.Bottom,targetX:i,targetY:o,targetPosition:l=ge.Top,borderRadius:r=5,centerX:s,centerY:a,offset:u=20}){const[c,f,d,h,m]=Hf({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:o},targetPosition:l,center:{x:s,y:a},offset:u});return[c.reduce((E,g,v)=>{let _="";return v>0&&v<c.length-1?_=Nf(c[v-1],g,c[v+1],r):_=`${v===0?"M":"L"}${g.x} ${g.y}`,E+=_,E},""),f,d,h,m]}function Yo(t){var e,n,i;return!!((e=t==null?void 0:t[Ne])!=null&&e.handleBounds||(n=t==null?void 0:t.handles)!=null&&n.length)&&!!((i=t==null?void 0:t.computed)!=null&&i.width||t!=null&&t.width||t!=null&&t.initialWidth)}function Af(t){var h,m,y;const{sourceNode:e,targetNode:n}=t;if(!Yo(e)||!Yo(n))return null;const i=((h=e[Ne])==null?void 0:h.handleBounds)||Lo(e.handles),o=((m=n[Ne])==null?void 0:m.handleBounds)||Lo(n.handles),l=Vo((i==null?void 0:i.source)??[],t.sourceHandle),r=Vo(t.connectionMode===Ht.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),t.targetHandle),s=(l==null?void 0:l.position)||ge.Bottom,a=(r==null?void 0:r.position)||ge.Top;if(!l||!r)return(y=t.onError)==null||y.call(t,"008",Pn.error008(l?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const[u,c]=Ro(s,e,l),[f,d]=Ro(a,n,r);return{sourceX:u,sourceY:c,targetX:f,targetY:d,sourcePosition:s,targetPosition:a}}function Lo(t){if(!t)return null;const e=[],n=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?e.push(i):i.type==="target"&&n.push(i);return{source:e,target:n}}function Ro(t,e,n=null){var s,a,u,c;const i=((n==null?void 0:n.x)??0)+(((a=(s=e.computed)==null?void 0:s.positionAbsolute)==null?void 0:a.x)??0),o=((n==null?void 0:n.y)??0)+(((c=(u=e.computed)==null?void 0:u.positionAbsolute)==null?void 0:c.y)??0),{width:l,height:r}=n??Nn(e);switch(t){case ge.Top:return[i+l/2,o];case ge.Right:return[i+l,o+r/2];case ge.Bottom:return[i+l/2,o+r];case ge.Left:return[i,o+r/2]}}function Vo(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function Fi(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function Tf(t,{id:e,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:o}){const l=new Set;return t.reduce((r,s)=>([s.markerStart||i,s.markerEnd||o].forEach(a=>{if(a&&typeof a=="object"){const u=Fi(a,e);l.has(u)||(r.push({id:u,color:a.color||n,...a}),l.add(u))}}),r),[]).sort((r,s)=>r.id.localeCompare(s.id))}function Of(t,e,n=[0,0],i){return t.map(o=>{var l,r,s,a,u,c;if(o.parentNode&&!e.has(o.parentNode))throw new Error(`Parent node ${o.parentNode} not found`);if(o.parentNode||i!=null&&i[o.id]){const f=o.parentNode?e.get(o.parentNode):null,{x:d,y:h,z:m}=zr(o,t,e,{...o.position,z:((l=o[Ne])==null?void 0:l.z)??0},(f==null?void 0:f.origin)||n),y=d!==((s=(r=o.computed)==null?void 0:r.positionAbsolute)==null?void 0:s.x)||h!==((u=(a=o.computed)==null?void 0:a.positionAbsolute)==null?void 0:u.y);o.computed.positionAbsolute=y?{x:d,y:h}:(c=o.computed)==null?void 0:c.positionAbsolute,o[Ne].z=m,i!=null&&i[o.id]&&(o[Ne].isParent=!0)}return o})}function Mr(t,e,n={nodeOrigin:[0,0],elevateNodesOnSelect:!0,defaults:{}}){const i=new Map(e);e.clear();const o={},l=n!=null&&n.elevateNodesOnSelect?1e3:0,r=t.map(a=>{var h,m,y;const u=i.get(a.id);if(a===((h=u==null?void 0:u[Ne])==null?void 0:h.userProvidedNode))return e.set(a.id,u),u;const c={...n.defaults,...a,computed:{positionAbsolute:a.position,width:(m=a.computed)==null?void 0:m.width,height:(y=a.computed)==null?void 0:y.height}},f=(an(a.zIndex)?a.zIndex:0)+(a.selected?l:0),d=(a==null?void 0:a[Ne])||(u==null?void 0:u[Ne]);return c.parentNode&&(o[c.parentNode]=!0),Object.defineProperty(c,Ne,{enumerable:!1,value:{handleBounds:d==null?void 0:d.handleBounds,z:f,userProvidedNode:a}}),e.set(c.id,c),c});return Of(r,e,n.nodeOrigin,o)}function zr(t,e,n,i,o){var s,a;if(!t.parentNode)return i;const l=n.get(t.parentNode),{position:r}=$t(l,(l==null?void 0:l.origin)||o);return zr(l,e,n,{x:(i.x??0)+r.x,y:(i.y??0)+r.y,z:(((s=l[Ne])==null?void 0:s.z)??0)>(i.z??0)?((a=l[Ne])==null?void 0:a.z)??0:i.z??0},l.origin||o)}function If(t,e,n,i,o,l){const r=i==null?void 0:i.querySelector(".xyflow__viewport");if(!r)return null;const s=window.getComputedStyle(r),{m22:a}=new window.DOMMatrixReadOnly(s.transform);return e.map(c=>{var d,h;const f=t.get(c.id);if(f){const m=kr(f.nodeElement);if(!!(m.width&&m.height&&(((d=c.computed)==null?void 0:d.width)!==m.width||((h=c.computed)==null?void 0:h.height)!==m.height||f.forceUpdate))){l==null||l(c.id,m);const E={...c,computed:{...c.computed,...m},[Ne]:{...c[Ne],handleBounds:{source:Io(".source",f.nodeElement,a,c.origin||o),target:Io(".target",f.nodeElement,a,c.origin||o)}}};return n.set(c.id,E),E}}return c})}function Df({delta:t,panZoom:e,transform:n,translateExtent:i,width:o,height:l}){if(!e||!t.x&&!t.y)return!1;const r=e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[o,l]],i);return!!r&&(r.x!==n[0]||r.y!==n[1]||r.k!==n[2])}function Pr(t,e,n){t.clear(),e.clear();for(const i of n){const{source:o,target:l,sourceHandle:r=null,targetHandle:s=null}=i,a=`${o}-source-${r}`,u=`${l}-target-${s}`,c=t.get(a)||new Map,f=t.get(u)||new Map,d={edgeId:i.id,source:o,target:l,sourceHandle:r,targetHandle:s};e.set(i.id,i),t.set(a,c.set(`${l}-${s}`,d)),t.set(u,f.set(`${o}-${r}`,d))}}function Pi(t){return(e,n,i)=>t==null?void 0:t(e,i)}function Hr(t,e){if(!t.parentNode)return!1;const n=e.find(i=>i.id===i.parentNode);return n?n.selected?!0:Hr(n,e):!1}function Wo(t,e,n){let i=t;do{if(i!=null&&i.matches(e))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function Xf(t,e,n,i){return t.filter(o=>(o.selected||o.id===i)&&(!o.parentNode||!Hr(o,t))&&(o.draggable||e&&typeof o.draggable>"u")).map(o=>{var l,r,s,a,u,c,f;return{id:o.id,position:o.position||{x:0,y:0},distance:{x:n.x-(((r=(l=o.computed)==null?void 0:l.positionAbsolute)==null?void 0:r.x)??0),y:n.y-(((a=(s=o.computed)==null?void 0:s.positionAbsolute)==null?void 0:a.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode,origin:o.origin,expandParent:o.expandParent,computed:{positionAbsolute:((u=o.computed)==null?void 0:u.positionAbsolute)||{x:0,y:0},width:((c=o.computed)==null?void 0:c.width)||0,height:((f=o.computed)==null?void 0:f.height)||0}}})}function Hi({nodeId:t,dragItems:e,nodeLookup:n}){const i=e.map(o=>({...n.get(o.id),position:o.position,computed:{...o.computed,positionAbsolute:o.computed.positionAbsolute}}));return[t?i.find(o=>o.id===t):i[0],i]}function pf({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:i,onDragStop:o}){let l={x:null,y:null},r=0,s=[],a=!1,u={x:0,y:0},c=null,f=!1,d=null;function h({noDragClassName:y,handleSelector:E,domNode:g,isSelectable:v,nodeId:_}){d=Ze(g);function b({x:M,y:P},w){const{nodeLookup:z,nodeExtent:p,snapGrid:N,snapToGrid:S,nodeOrigin:O,onNodeDrag:A,onSelectionDrag:V,onError:L,updateNodePositions:W}=e();l={x:M,y:P};let U=!1,J={x:0,y:0,x2:0,y2:0};if(s.length>1&&p){const D=Hn(s,{nodeOrigin:O});J=oi(D)}if(s=s.map(D=>{var j,le;let oe={x:M-D.distance.x,y:P-D.distance.y};S&&(oe=to(oe,N));const ne=[[p[0][0],p[0][1]],[p[1][0],p[1][1]]];s.length>1&&p&&!D.extent&&(ne[0][0]=D.computed.positionAbsolute.x-J.x+p[0][0],ne[1][0]=D.computed.positionAbsolute.x+(((j=D.computed)==null?void 0:j.width)??0)-J.x2+p[1][0],ne[0][1]=D.computed.positionAbsolute.y-J.y+p[0][1],ne[1][1]=D.computed.positionAbsolute.y+(((le=D.computed)==null?void 0:le.height)??0)-J.y2+p[1][1]);const{position:R,positionAbsolute:q}=df({nodeId:D.id,nextPosition:oe,nodeLookup:z,nodeExtent:ne,nodeOrigin:O,onError:L});return U=U||D.position.x!==R.x||D.position.y!==R.y,D.position=R,D.computed.positionAbsolute=q,D}),!!U&&(W(s,!0),w&&(i||A||!_&&V))){const[D,oe]=Hi({nodeId:_,dragItems:s,nodeLookup:z});i==null||i(w,s,D,oe),A==null||A(w,D,oe),_||Pi(V)(w,D,oe)}}function C(){if(!c)return;const[M,P]=br(u,c);if(M!==0||P!==0){const{transform:w,panBy:z}=e();l.x=(l.x??0)-M/w[2],l.y=(l.y??0)-P/w[2],z({x:M,y:P})&&b(l,null)}r=requestAnimationFrame(C)}function T(M){var J;const{nodes:P,nodeLookup:w,multiSelectionActive:z,nodesDraggable:p,transform:N,snapGrid:S,snapToGrid:O,selectNodesOnDrag:A,onNodeDragStart:V,onSelectionDragStart:L,unselectNodesAndEdges:W}=e();f=!0,(!A||!v)&&!z&&_&&((J=w.get(_))!=null&&J.selected||W()),v&&A&&_&&(t==null||t(_));const U=cn(M.sourceEvent,{transform:N,snapGrid:S,snapToGrid:O});if(l=U,s=Xf(P,p,U,_),s.length>0&&(n||V||!_&&L)){const[D,oe]=Hi({nodeId:_,dragItems:s,nodeLookup:w});n==null||n(M.sourceEvent,s,D,oe),V==null||V(M.sourceEvent,D,oe),_||Pi(L)(M.sourceEvent,D,oe)}}const H=er().on("start",M=>{const{domNode:P,nodeDragThreshold:w,transform:z,snapGrid:p,snapToGrid:N}=e();w===0&&T(M),l=cn(M.sourceEvent,{transform:z,snapGrid:p,snapToGrid:N}),c=(P==null?void 0:P.getBoundingClientRect())||null,u=ht(M.sourceEvent,c)}).on("drag",M=>{const{autoPanOnNodeDrag:P,transform:w,snapGrid:z,snapToGrid:p,nodeDragThreshold:N}=e(),S=cn(M.sourceEvent,{transform:w,snapGrid:z,snapToGrid:p});if(!a&&P&&f&&(a=!0,C()),!f){const O=S.xSnapped-(l.x??0),A=S.ySnapped-(l.y??0);Math.sqrt(O*O+A*A)>N&&T(M)}(l.x!==S.xSnapped||l.y!==S.ySnapped)&&s&&f&&(u=ht(M.sourceEvent,c),b(S,M.sourceEvent))}).on("end",M=>{if(f&&(a=!1,f=!1,cancelAnimationFrame(r),s.length>0)){const{nodeLookup:P,updateNodePositions:w,onNodeDragStop:z,onSelectionDragStop:p}=e();if(w(s,!1),o||z||!_&&p){const[N,S]=Hi({nodeId:_,dragItems:s,nodeLookup:P});o==null||o(M.sourceEvent,s,N,S),z==null||z(M.sourceEvent,N,S),_||Pi(p)(M.sourceEvent,N,S)}}}).filter(M=>{const P=M.target;return!M.button&&(!y||!Wo(P,`.${y}`,g))&&(!E||Wo(P,E,g))});d.call(H)}function m(){d==null||d.on(".drag",null)}return{update:h,destroy:m}}function Bo(t,e,n,i){return(e[n]||[]).reduce((o,l)=>{var r,s,a,u;return`${t.id}-${l.id}-${n}`!==i&&o.push({id:l.id||null,type:n,nodeId:t.id,x:(((s=(r=t.computed)==null?void 0:r.positionAbsolute)==null?void 0:s.x)??0)+l.x+l.width/2,y:(((u=(a=t.computed)==null?void 0:a.positionAbsolute)==null?void 0:u.y)??0)+l.y+l.height/2}),o},[])}function Yf(t,e,n){let i=[],o=1/0;for(const l of n){const r=Math.sqrt(Math.pow(l.x-t.x,2)+Math.pow(l.y-t.y,2));r<=e&&(r<o?i=[l]:r===o&&i.push(l),o=r)}return i.length?i.length===1?i[0]:i.find(l=>l.type==="target")||i[0]:null}function Lf({nodes:t,nodeId:e,handleId:n,handleType:i}){return t.reduce((o,l)=>{if(l[Ne]){const{handleBounds:r}=l[Ne];let s=[],a=[];r&&(s=Bo(l,r,"source",`${e}-${n}-${i}`),a=Bo(l,r,"target",`${e}-${n}-${i}`)),o.push(...s,...a)}return o},[])}function Nr(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function Rf(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}const Ar=()=>!0;let Rn=null;function Vf(t,{connectionMode:e,connectionRadius:n,handleId:i,nodeId:o,edgeUpdaterType:l,isTarget:r,domNode:s,nodes:a,lib:u,autoPanOnConnect:c,flowId:f,panBy:d,cancelConnection:h,onConnectStart:m,onConnect:y,onConnectEnd:E,isValidConnection:g=Ar,onEdgeUpdateEnd:v,updateConnection:_,getTransform:b}){const C=bf(t.target);let T=0,H;const{x:M,y:P}=ht(t),w=C==null?void 0:C.elementFromPoint(M,P),z=Nr(l,w),p=s==null?void 0:s.getBoundingClientRect();if(!p||!z)return;let N=ht(t,p),S=!1,O=null,A=!1,V=null;const L=Lf({nodes:a,nodeId:o,handleId:i,handleType:z});function W(){if(!c||!p)return;const[D,oe]=br(N,p);d({x:D,y:oe}),T=requestAnimationFrame(W)}Rn={nodeId:o,handleId:i,type:z},_({connectionPosition:N,connectionStatus:null,connectionStartHandle:Rn,connectionEndHandle:null}),m==null||m(t,{nodeId:o,handleId:i,handleType:z});function U(D){const oe=b();N=ht(D,p),H=Yf(yi(N,oe,!1,[1,1]),n,L),S||(W(),S=!0);const ne=Tr(D,{handle:H,connectionMode:e,fromNodeId:o,fromHandleId:i,fromType:r?"target":"source",isValidConnection:g,doc:C,lib:u,flowId:f});V=ne.handleDomNode,O=ne.connection,A=ne.isValid,_({connectionStartHandle:Rn,connectionPosition:H&&A?wr({x:H.x,y:H.y},oe):N,connectionStatus:Rf(!!H,A),connectionEndHandle:ne.endHandle})}function J(D){(H||V)&&O&&A&&(y==null||y(O)),E==null||E(D),l&&(v==null||v(D)),h(),cancelAnimationFrame(T),S=!1,A=!1,O=null,V=null,Rn=null,C.removeEventListener("mousemove",U),C.removeEventListener("mouseup",J),C.removeEventListener("touchmove",U),C.removeEventListener("touchend",J)}C.addEventListener("mousemove",U),C.addEventListener("mouseup",J),C.addEventListener("touchmove",U),C.addEventListener("touchend",J)}function Tr(t,{handle:e,connectionMode:n,fromNodeId:i,fromHandleId:o,fromType:l,doc:r,lib:s,flowId:a,isValidConnection:u=Ar}){const c=l==="target",f=e?r.querySelector(`.${s}-flow__handle[data-id="${a}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`):null,{x:d,y:h}=ht(t),m=r.elementFromPoint(d,h),y=m!=null&&m.classList.contains(`${s}-flow__handle`)?m:f,E={handleDomNode:y,isValid:!1,connection:null,endHandle:null};if(y){const g=Nr(void 0,y),v=y.getAttribute("data-nodeid"),_=y.getAttribute("data-handleid"),b=y.classList.contains("connectable"),C=y.classList.contains("connectableend");if(!v)return E;const T={source:c?v:i,sourceHandle:c?_:o,target:c?i:v,targetHandle:c?o:_};E.connection=T,b&&C&&(n===Ht.Strict?c&&g==="source"||!c&&g==="target":v!==i||_!==o)&&(E.endHandle={nodeId:v,handleId:_,type:g},E.isValid=u(T))}return E}const Wf={onPointerDown:Vf,isValid:Tr};function Bf({domNode:t,panZoom:e,getTransform:n,getViewScale:i}){const o=Ze(t);function l({translateExtent:s,width:a,height:u,zoomStep:c=10,pannable:f=!0,zoomable:d=!0,inversePan:h=!1}){const m=g=>{const v=n();if(g.sourceEvent.type!=="wheel"||!e)return;const _=-g.sourceEvent.deltaY*(g.sourceEvent.deltaMode===1?.05:g.sourceEvent.deltaMode?1:.002)*c,b=v[2]*Math.pow(2,_);e.scaleTo(b)},y=g=>{const v=n();if(g.sourceEvent.type!=="mousemove"||!e)return;const _=i()*Math.max(v[2],Math.log(v[2]))*(h?-1:1),b={x:v[0]-g.sourceEvent.movementX*_,y:v[1]-g.sourceEvent.movementY*_},C=[[0,0],[a,u]];e.setViewportConstrained({x:b.x,y:b.y,zoom:v[2]},C,s)},E=mr().on("zoom",f?y:null).on("zoom.wheel",d?m:null);o.call(E,{})}function r(){o.on("zoom",null)}return{update:l,destroy:r,pointer:xe}}const Kf=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,bi=t=>({x:t.x,y:t.y,zoom:t.k}),Ni=({x:t,y:e,zoom:n})=>_i.translate(t,e).scale(n),Yt=(t,e)=>t.target.closest(`.${e}`),Or=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),Ai=(t,e=0)=>typeof e=="number"&&e>0?t.transition().duration(e):t,Ir=t=>{const e=t.ctrlKey&&ri()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function Ff({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:l,zoomOnPinch:r,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:u}){return c=>{if(Yt(c,e))return!1;c.preventDefault(),c.stopImmediatePropagation();const f=n.property("__zoom").k||1,d=ri();if(c.ctrlKey&&r&&d){const g=xe(c),v=Ir(c),_=f*Math.pow(2,v);i.scaleTo(n,_,g,c);return}const h=c.deltaMode===1?20:1;let m=o===lt.Vertical?0:c.deltaX*h,y=o===lt.Horizontal?0:c.deltaY*h;!d&&c.shiftKey&&o!==lt.Vertical&&(m=c.deltaY*h,y=0),i.translateBy(n,-(m/f)*l,-(y/f)*l,{internal:!0});const E=bi(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,s==null||s(c,E)),t.isPanScrolling&&(a==null||a(c,E),t.panScrollTimeout=setTimeout(()=>{u==null||u(c,E),t.isPanScrolling=!1},150))}}function qf({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(i,o){if(!e||Yt(i,t))return null;i.preventDefault(),n.call(this,i,o)}}function Zf({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return i=>{var l,r,s;if((l=i.sourceEvent)!=null&&l.internal)return;const o=bi(i.transform);t.mouseButton=((r=i.sourceEvent)==null?void 0:r.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=o,((s=i.sourceEvent)==null?void 0:s.type)==="mousedown"&&e(!0),n&&(n==null||n(i.sourceEvent,o))}}function Uf({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:i,onPanZoom:o}){return l=>{var r,s;t.usedRightMouseButton=!!(n&&Or(e,t.mouseButton??0)),(r=l.sourceEvent)!=null&&r.sync||i([l.transform.x,l.transform.y,l.transform.k]),o&&!((s=l.sourceEvent)!=null&&s.internal)&&(o==null||o(l.sourceEvent,bi(l.transform)))}}function Gf({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:l}){return r=>{var s;if(!((s=r.sourceEvent)!=null&&s.internal)&&(t.isZoomingOrPanning=!1,l&&Or(e,t.mouseButton??0)&&!t.usedRightMouseButton&&r.sourceEvent&&l(r.sourceEvent),t.usedRightMouseButton=!1,i(!1),o&&Kf(t.prevViewport,r.transform))){const a=bi(r.transform);t.prevViewport=a,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{o==null||o(r.sourceEvent,a)},n?150:0)}}}function Jf({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:l,userSelectionActive:r,noWheelClassName:s,noPanClassName:a,lib:u}){return c=>{const f=t||e,d=n&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(Yt(c,`${u}-flow__node`)||Yt(c,`${u}-flow__edge`)))return!0;if(!i&&!f&&!o&&!l&&!n||r||!l&&c.type==="dblclick"||Yt(c,s)&&c.type==="wheel"||Yt(c,a)&&(c.type!=="wheel"||o&&c.type==="wheel"&&!t)||!n&&c.ctrlKey&&c.type==="wheel"||!f&&!o&&!d&&c.type==="wheel"||!i&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(i)&&!i.includes(c.button)&&(c.type==="mousedown"||c.type==="touchstart"))return!1;const h=Array.isArray(i)&&i.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&h}}function Qf({domNode:t,minZoom:e,maxZoom:n,translateExtent:i,viewport:o,onPanZoom:l,onPanZoomStart:r,onPanZoomEnd:s,onTransformChange:a,onDraggingChange:u}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=t.getBoundingClientRect(),d=mr().scaleExtent([e,n]).translateExtent(i),h=Ze(t).call(d);v({x:o.x,y:o.y,zoom:Jt(o.zoom,e,n)},[[0,0],[f.width,f.height]],i);const m=h.on("wheel.zoom");d.wheelDelta(Ir);function y(w,z){h&&(d==null||d.transform(Ai(h,z==null?void 0:z.duration),w))}function E({noWheelClassName:w,noPanClassName:z,onPaneContextMenu:p,userSelectionActive:N,panOnScroll:S,panOnDrag:O,panOnScrollMode:A,panOnScrollSpeed:V,preventScrolling:L,zoomOnPinch:W,zoomOnScroll:U,zoomOnDoubleClick:J,zoomActivationKeyPressed:D,lib:oe}){N&&!c.isZoomingOrPanning&&g();const R=S&&!D&&!N?Ff({zoomPanValues:c,noWheelClassName:w,d3Selection:h,d3Zoom:d,panOnScrollMode:A,panOnScrollSpeed:V,zoomOnPinch:W,onPanZoomStart:r,onPanZoom:l,onPanZoomEnd:s}):qf({noWheelClassName:w,preventScrolling:L,d3ZoomHandler:m});if(h.on("wheel.zoom",R,{passive:!1}),!N){const j=Zf({zoomPanValues:c,onDraggingChange:u,onPanZoomStart:r});d.on("start",j);const le=Uf({zoomPanValues:c,panOnDrag:O,onPaneContextMenu:!!p,onPanZoom:l,onTransformChange:a});d.on("zoom",le);const I=Gf({zoomPanValues:c,panOnDrag:O,panOnScroll:S,onPaneContextMenu:p,onPanZoomEnd:s,onDraggingChange:u});d.on("end",I)}const q=Jf({zoomActivationKeyPressed:D,panOnDrag:O,zoomOnScroll:U,panOnScroll:S,zoomOnDoubleClick:J,zoomOnPinch:W,userSelectionActive:N,noPanClassName:z,noWheelClassName:w,lib:oe});d.filter(q)}function g(){d.on("zoom",null)}function v(w,z,p){const N=Ni(w),S=d==null?void 0:d.constrain()(N,z,p);return S&&y(S),S}function _(w,z){const p=Ni(w);return y(p,z),p}function b(w){if(h){const z=Ni(w),p=h.property("__zoom");(p.k!==w.zoom||p.x!==w.x||p.y!==w.y)&&(d==null||d.transform(h,z,null,{sync:!0}))}}function C(){const w=h?gr(h.node()):{x:0,y:0,k:1};return{x:w.x,y:w.y,zoom:w.k}}function T(w,z){h&&(d==null||d.scaleTo(Ai(h,z==null?void 0:z.duration),w))}function H(w,z){h&&(d==null||d.scaleBy(Ai(h,z==null?void 0:z.duration),w))}function M(w){d==null||d.scaleExtent(w)}function P(w){d==null||d.translateExtent(w)}return{update:E,destroy:g,setViewport:_,setViewportConstrained:v,getViewport:C,scaleTo:T,scaleBy:H,setScaleExtent:M,setTranslateExtent:P,syncViewport:b}}var fn;(function(t){t.Line="line",t.Handle="handle"})(fn||(fn={}));function jf({width:t,prevWidth:e,height:n,prevHeight:i,affectsX:o,affectsY:l}){const r=t-e,s=n-i,a=[r>0?1:r<0?-1:0,s>0?1:s<0?-1:0];return r&&o&&(a[0]=a[0]*-1),s&&l&&(a[1]=a[1]*-1),a}function xf(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),i=t.includes("left"),o=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:i,affectsY:o}}function vt(t,e){return Math.max(0,e-t)}function St(t,e){return Math.max(0,t-e)}function Vn(t,e,n){return Math.max(0,e-t,t-n)}function Ko(t,e){return t?!e:e}function $f(t,e,n,i,o,l,r,s){let{affectsX:a,affectsY:u}=e;const{isHorizontal:c,isVertical:f}=e,d=c&&f,{xSnapped:h,ySnapped:m}=n,{minWidth:y,maxWidth:E,minHeight:g,maxHeight:v}=i,{x:_,y:b,width:C,height:T,aspectRatio:H}=t;let M=Math.floor(c?h-t.pointerX:0),P=Math.floor(f?m-t.pointerY:0);const w=C+(a?-M:M),z=T+(u?-P:P),p=-l[0]*C,N=-l[1]*T;let S=Vn(w,y,E),O=Vn(z,g,v);if(r){let L=0,W=0;a&&M<0?L=vt(_+M+p,r[0][0]):!a&&M>0&&(L=St(_+w+p,r[1][0])),u&&P<0?W=vt(b+P+N,r[0][1]):!u&&P>0&&(W=St(b+z+N,r[1][1])),S=Math.max(S,L),O=Math.max(O,W)}if(s){let L=0,W=0;a&&M>0?L=St(_+M,s[0][0]):!a&&M<0&&(L=vt(_+w,s[1][0])),u&&P>0?W=St(b+P,s[0][1]):!u&&P<0&&(W=vt(b+z,s[1][1])),S=Math.max(S,L),O=Math.max(O,W)}if(o){if(c){const L=Vn(w/H,g,v)*H;if(S=Math.max(S,L),r){let W=0;!a&&!u||a&&!u&&d?W=St(b+N+w/H,r[1][1])*H:W=vt(b+N+(a?M:-M)/H,r[0][1])*H,S=Math.max(S,W)}if(s){let W=0;!a&&!u||a&&!u&&d?W=vt(b+w/H,s[1][1])*H:W=St(b+(a?M:-M)/H,s[0][1])*H,S=Math.max(S,W)}}if(f){const L=Vn(z*H,y,E)/H;if(O=Math.max(O,L),r){let W=0;!a&&!u||u&&!a&&d?W=St(_+z*H+p,r[1][0])/H:W=vt(_+(u?P:-P)*H+p,r[0][0])/H,O=Math.max(O,W)}if(s){let W=0;!a&&!u||u&&!a&&d?W=vt(_+z*H,s[1][0])/H:W=St(_+(u?P:-P)*H,s[0][0])/H,O=Math.max(O,W)}}}P=P+(P<0?O:-O),M=M+(M<0?S:-S),o&&(d?w>z*H?P=(Ko(a,u)?-M:M)/H:M=(Ko(a,u)?-P:P)*H:c?(P=M/H,u=a):(M=P*H,a=u));const A=a?_+M:_,V=u?b+P:b;return{width:C+(a?-M:M),height:T+(u?-P:P),x:l[0]*M*(a?-1:1)+A,y:l[1]*P*(u?-1:1)+V}}const Dr={width:0,height:0,x:0,y:0},ed={...Dr,pointerX:0,pointerY:0,aspectRatio:1},td={x:0,y:0,width:0,height:0,isXPosChange:!1,isYPosChange:!1,isWidthChange:!1,isHeightChange:!1};function nd(t){return[[0,0],[t.computed.width,t.computed.height]]}function id(t,e,n){const i=e.position.x+t.position.x,o=e.position.y+t.position.y,l=t.computed.width??0,r=t.computed.height??0,s=n[0]*l,a=n[1]*r;return[[i-s,o-a],[i+l-s,o+r-a]]}function od({domNode:t,nodeId:e,getStoreItems:n,onChange:i}){const o=Ze(t);function l({controlPosition:s,boundaries:a,keepAspectRatio:u,onResizeStart:c,onResize:f,onResizeEnd:d,shouldResize:h}){let m={...Dr},y={...ed};const E=xf(s);let g,v=[],_,b,C;const T=er().on("start",H=>{var N,S;const{nodeLookup:M,transform:P,snapGrid:w,snapToGrid:z,nodeOrigin:p}=n();if(g=M.get(e),g){const{xSnapped:O,ySnapped:A}=cn(H.sourceEvent,{transform:P,snapGrid:w,snapToGrid:z});m={width:((N=g.computed)==null?void 0:N.width)??0,height:((S=g.computed)==null?void 0:S.height)??0,x:g.position.x??0,y:g.position.y??0},y={...m,pointerX:O,pointerY:A,aspectRatio:m.width/m.height},_=void 0,(g.extent==="parent"||g.expandParent)&&(_=M.get(g.parentNode),_&&g.extent==="parent"&&(b=nd(_))),v=[],C=void 0;for(const[V,L]of M)if(L.parentNode===e&&(v.push({id:V,position:{...L.position},extent:L.extent}),L.extent==="parent"||L.expandParent)){const W=id(L,g,L.origin??p);C?C=[[Math.min(W[0][0],C[0][0]),Math.min(W[0][1],C[0][1])],[Math.max(W[1][0],C[1][0]),Math.max(W[1][1],C[1][1])]]:C=W}c==null||c(H,{...m})}}).on("drag",H=>{const{transform:M,snapGrid:P,snapToGrid:w,nodeOrigin:z}=n(),p=cn(H.sourceEvent,{transform:M,snapGrid:P,snapToGrid:w}),N=[];if(g){const{x:S,y:O,width:A,height:V}=m,L={...td},W=g.origin??z,{width:U,height:J,x:D,y:oe}=$f(y,E,p,a,u,W,b,C),ne=U!==A,R=J!==V,q=D!==S&&ne,j=oe!==O&&R;if((q||j||W[0]===1||W[1]==1)&&(L.isXPosChange=q,L.isYPosChange=j,L.x=q?D:S,L.y=j?oe:O,m.x=L.x,m.y=L.y,_&&g.expandParent&&(L.x<0&&(m.x=0,y.x=y.x-L.x),L.y<0&&(m.y=0,y.y=y.y-L.y)),v.length>0)){const ke=D-S,Ae=oe-O;for(const Me of v)Me.position={x:Me.position.x-ke+W[0]*(U-A),y:Me.position.y-Ae+W[1]*(J-V)},N.push(Me)}if((ne||R)&&(L.isWidthChange=ne,L.isHeightChange=R,L.width=U,L.height=J,m.width=L.width,m.height=L.height),!L.isXPosChange&&!L.isYPosChange&&!ne&&!R)return;const le=jf({width:m.width,prevWidth:A,height:m.height,prevHeight:V,affectsX:E.affectsX,affectsY:E.affectsY}),I={...m,direction:le};if((h==null?void 0:h(H,I))===!1)return;f==null||f(H,I),i(L,N)}}).on("end",H=>{d==null||d(H,{...m})});o.call(T)}function r(){o.on(".drag",null)}return{update:l,destroy:r}}function ld(t){let e,n,i,o,l,r;const s=t[41].default,a=De(s,t,t[40],null);return{c(){e=ye("div"),a&&a.c(),k(e,"data-handleid",t[13]),k(e,"data-nodeid",t[11]),k(e,"data-handlepos",t[2]),k(e,"data-id",n=t[9]+"-"+t[11]+"-"+(t[0]||null)+"-"+t[1]),k(e,"class",i=ve(["svelte-flow__handle",`svelte-flow__handle-${t[2]}`,"nodrag","nopan",t[2],{valid:t[6],connectingto:t[5],connectingfrom:t[7]},t[4]])),k(e,"style",t[3]),k(e,"role","button"),k(e,"tabindex","-1"),_e(e,"source",!t[10]),_e(e,"target",t[10]),_e(e,"connectablestart",t[8]),_e(e,"connectableend",t[8]),_e(e,"connectable",t[8]),_e(e,"connectionindicator",t[8])},m(u,c){F(u,e,c),a&&a.m(e,null),o=!0,l||(r=[be(e,"mousedown",t[30]),be(e,"touchstart",t[30])],l=!0)},p(u,c){a&&a.p&&(!o||c[1]&512)&&pe(a,s,u,u[40],o?Xe(s,u[40],c,null):Ye(u[40]),null),(!o||c[0]&4)&&k(e,"data-handlepos",u[2]),(!o||c[0]&515&&n!==(n=u[9]+"-"+u[11]+"-"+(u[0]||null)+"-"+u[1]))&&k(e,"data-id",n),(!o||c[0]&244&&i!==(i=ve(["svelte-flow__handle",`svelte-flow__handle-${u[2]}`,"nodrag","nopan",u[2],{valid:u[6],connectingto:u[5],connectingfrom:u[7]},u[4]])))&&k(e,"class",i),(!o||c[0]&8)&&k(e,"style",u[3]),(!o||c[0]&1268)&&_e(e,"source",!u[10]),(!o||c[0]&1268)&&_e(e,"target",u[10]),(!o||c[0]&500)&&_e(e,"connectablestart",u[8]),(!o||c[0]&500)&&_e(e,"connectableend",u[8]),(!o||c[0]&500)&&_e(e,"connectable",u[8]),(!o||c[0]&500)&&_e(e,"connectionindicator",u[8])},i(u){o||(Y(a,u),o=!0)},o(u){B(a,u),o=!1},d(u){u&&K(e),a&&a.d(u),l=!1,Te(r)}}}function rd(t,e,n){let i,o,l,r,s,a,u,c,f,d,h,m,y,E,g,v,_,b,C,T,H,{$$slots:M={},$$scope:P}=e,{id:w=void 0}=e,{type:z="source"}=e,{position:p=ge.Top}=e,{style:N=void 0}=e,{isConnectable:S=void 0}=e,{onconnect:O=void 0}=e,{ondisconnect:A=void 0}=e,{class:V=void 0}=e;const L=z==="target",W=mn("svelteflow__node_id"),U=mn("svelteflow__node_connectable");Q(t,U,x=>n(39,H=x));const J=w||null,D=Ce(),{connectionMode:oe,domNode:ne,nodes:R,connectionRadius:q,viewport:j,isValidConnection:le,lib:I,addEdge:we,onedgecreate:ke,panBy:Ae,cancelConnection:Me,updateConnection:Ge,autoPanOnConnect:Ee,edges:st,connectionLookup:at,onconnect:tt,onconnectstart:nt,onconnectend:ie,flowId:bt,connection:wt}=D;Q(t,oe,x=>n(50,_=x)),Q(t,ne,x=>n(52,C=x)),Q(t,R,x=>n(51,b=x)),Q(t,q,x=>n(53,T=x)),Q(t,j,x=>n(42,c=x)),Q(t,le,x=>n(47,y=x)),Q(t,I,x=>n(49,v=x)),Q(t,ke,x=>n(46,m=x)),Q(t,Ee,x=>n(48,g=x)),Q(t,st,x=>n(38,u=x)),Q(t,at,x=>n(37,a=x)),Q(t,tt,x=>n(45,h=x)),Q(t,nt,x=>n(44,d=x)),Q(t,ie,x=>n(43,f=x)),Q(t,bt,x=>n(9,E=x)),Q(t,wt,x=>n(36,s=x));function G(x){const ut=vr(x);(ut&&x.button===0||!ut)&&Wf.onPointerDown(x,{handleId:J,nodeId:W,isTarget:L,connectionRadius:T,domNode:C,nodes:b,connectionMode:_,lib:v,autoPanOnConnect:g,flowId:E,isValidConnection:y,updateConnection:Ge,cancelConnection:Me,panBy:Ae,onConnect:Be=>{const qe=m?m(Be):Be;qe&&(we(qe),h==null||h(Be))},onConnectStart:(Be,qe)=>{d==null||d(Be,{nodeId:qe.nodeId,handleId:qe.handleId,handleType:qe.handleType})},onConnectEnd:Be=>{f==null||f(Be)},getTransform:()=>[c.x,c.y,c.zoom]})}let Je=null,We;return t.$$set=x=>{"id"in x&&n(0,w=x.id),"type"in x&&n(1,z=x.type),"position"in x&&n(2,p=x.position),"style"in x&&n(3,N=x.style),"isConnectable"in x&&n(31,S=x.isConnectable),"onconnect"in x&&n(32,O=x.onconnect),"ondisconnect"in x&&n(33,A=x.ondisconnect),"class"in x&&n(4,V=x.class),"$$scope"in x&&n(40,P=x.$$scope)},t.$$.update=()=>{var x,ut,Be,qe,Nt,At;if(t.$$.dirty[1]&257&&n(8,i=S!==void 0?S:H),t.$$.dirty[0]&3|t.$$.dirty[1]&198&&(O||A)&&n(35,We=a.get(`${W}-${z}-${w||null}`)),t.$$.dirty[1]&30){if(Je&&!sf(We,Je)){const Tt=We??new Map;No(Je,Tt,A),No(Tt,Je,O)}n(34,Je=We??new Map)}t.$$.dirty[0]&2|t.$$.dirty[1]&32&&n(7,o=((x=s.startHandle)==null?void 0:x.nodeId)===W&&((ut=s.startHandle)==null?void 0:ut.type)===z&&((Be=s.startHandle)==null?void 0:Be.handleId)===J),t.$$.dirty[0]&2|t.$$.dirty[1]&32&&n(5,l=((qe=s.endHandle)==null?void 0:qe.nodeId)===W&&((Nt=s.endHandle)==null?void 0:Nt.type)===z&&((At=s.endHandle)==null?void 0:At.handleId)===J),t.$$.dirty[0]&32|t.$$.dirty[1]&32&&n(6,r=l&&s.status==="valid")},[w,z,p,N,V,l,r,o,i,E,L,W,U,J,oe,ne,R,q,j,le,I,ke,Ee,st,at,tt,nt,ie,bt,wt,G,S,O,A,Je,We,s,a,u,H,P,M]}class sd extends ue{constructor(e){super(),ae(this,e,rd,ld,ce,{id:0,type:1,position:2,style:3,isConnectable:31,onconnect:32,ondisconnect:33,class:4},null,[-1,-1])}}const vn=sd;function ad(t){var a;let e,n,i=((a=t[0])==null?void 0:a.label)+"",o,l,r,s;return e=new vn({props:{type:"target",position:t[1]}}),r=new vn({props:{type:"source",position:t[2]}}),{c(){te(e.$$.fragment),n=de(),o=Qe(i),l=de(),te(r.$$.fragment)},m(u,c){$(e,u,c),F(u,n,c),F(u,o,c),F(u,l,c),$(r,u,c),s=!0},p(u,[c]){var h;const f={};c&2&&(f.position=u[1]),e.$set(f),(!s||c&1)&&i!==(i=((h=u[0])==null?void 0:h.label)+"")&&jt(o,i);const d={};c&4&&(d.position=u[2]),r.$set(d)},i(u){s||(Y(e.$$.fragment,u),Y(r.$$.fragment,u),s=!0)},o(u){B(e.$$.fragment,u),B(r.$$.fragment,u),s=!1},d(u){u&&(K(n),K(o),K(l)),ee(e,u),ee(r,u)}}}function ud(t,e,n){let{data:i={label:"Node"}}=e,{targetPosition:o=ge.Top}=e,{sourcePosition:l=ge.Bottom}=e,{id:r=""}=e,{width:s=void 0}=e,{height:a=void 0}=e,{selected:u=void 0}=e,{type:c=void 0}=e,{zIndex:f=void 0}=e,{dragging:d=!1}=e,{dragHandle:h=void 0}=e,{positionAbsoluteX:m=0}=e,{positionAbsoluteY:y=0}=e,{isConnectable:E=void 0}=e;return t.$$set=g=>{"data"in g&&n(0,i=g.data),"targetPosition"in g&&n(1,o=g.targetPosition),"sourcePosition"in g&&n(2,l=g.sourcePosition),"id"in g&&n(3,r=g.id),"width"in g&&n(4,s=g.width),"height"in g&&n(5,a=g.height),"selected"in g&&n(6,u=g.selected),"type"in g&&n(7,c=g.type),"zIndex"in g&&n(8,f=g.zIndex),"dragging"in g&&n(9,d=g.dragging),"dragHandle"in g&&n(10,h=g.dragHandle),"positionAbsoluteX"in g&&n(11,m=g.positionAbsoluteX),"positionAbsoluteY"in g&&n(12,y=g.positionAbsoluteY),"isConnectable"in g&&n(13,E=g.isConnectable)},[i,o,l,r,s,a,u,c,f,d,h,m,y,E]}class cd extends ue{constructor(e){super(),ae(this,e,ud,ad,ce,{data:0,targetPosition:1,sourcePosition:2,id:3,width:4,height:5,selected:6,type:7,zIndex:8,dragging:9,dragHandle:10,positionAbsoluteX:11,positionAbsoluteY:12,isConnectable:13})}}const Xr=cd;function fd(t){var r;let e=((r=t[0])==null?void 0:r.label)+"",n,i,o,l;return o=new vn({props:{type:"source",position:t[1]}}),{c(){n=Qe(e),i=de(),te(o.$$.fragment)},m(s,a){F(s,n,a),F(s,i,a),$(o,s,a),l=!0},p(s,[a]){var c;(!l||a&1)&&e!==(e=((c=s[0])==null?void 0:c.label)+"")&&jt(n,e);const u={};a&2&&(u.position=s[1]),o.$set(u)},i(s){l||(Y(o.$$.fragment,s),l=!0)},o(s){B(o.$$.fragment,s),l=!1},d(s){s&&(K(n),K(i)),ee(o,s)}}}function dd(t,e,n){let{data:i={label:"Node"}}=e,{sourcePosition:o=ge.Bottom}=e,{id:l=""}=e,{width:r=void 0}=e,{height:s=void 0}=e,{selected:a=void 0}=e,{targetPosition:u=void 0}=e,{type:c=void 0}=e,{zIndex:f=void 0}=e,{dragging:d=!1}=e,{dragHandle:h=void 0}=e,{positionAbsoluteX:m=0}=e,{positionAbsoluteY:y=0}=e,{isConnectable:E=void 0}=e;return t.$$set=g=>{"data"in g&&n(0,i=g.data),"sourcePosition"in g&&n(1,o=g.sourcePosition),"id"in g&&n(2,l=g.id),"width"in g&&n(3,r=g.width),"height"in g&&n(4,s=g.height),"selected"in g&&n(5,a=g.selected),"targetPosition"in g&&n(6,u=g.targetPosition),"type"in g&&n(7,c=g.type),"zIndex"in g&&n(8,f=g.zIndex),"dragging"in g&&n(9,d=g.dragging),"dragHandle"in g&&n(10,h=g.dragHandle),"positionAbsoluteX"in g&&n(11,m=g.positionAbsoluteX),"positionAbsoluteY"in g&&n(12,y=g.positionAbsoluteY),"isConnectable"in g&&n(13,E=g.isConnectable)},[i,o,l,r,s,a,u,c,f,d,h,m,y,E]}class hd extends ue{constructor(e){super(),ae(this,e,dd,fd,ce,{data:0,sourcePosition:1,id:2,width:3,height:4,selected:5,targetPosition:6,type:7,zIndex:8,dragging:9,dragHandle:10,positionAbsoluteX:11,positionAbsoluteY:12,isConnectable:13})}}const gd=hd;function md(t){var r;let e=((r=t[0])==null?void 0:r.label)+"",n,i,o,l;return o=new vn({props:{type:"target",position:t[1]}}),{c(){n=Qe(e),i=de(),te(o.$$.fragment)},m(s,a){F(s,n,a),F(s,i,a),$(o,s,a),l=!0},p(s,[a]){var c;(!l||a&1)&&e!==(e=((c=s[0])==null?void 0:c.label)+"")&&jt(n,e);const u={};a&2&&(u.position=s[1]),o.$set(u)},i(s){l||(Y(o.$$.fragment,s),l=!0)},o(s){B(o.$$.fragment,s),l=!1},d(s){s&&(K(n),K(i)),ee(o,s)}}}function _d(t,e,n){let{data:i={label:"Node"}}=e,{targetPosition:o=ge.Top}=e,{id:l=""}=e,{width:r=void 0}=e,{height:s=void 0}=e,{selected:a=void 0}=e,{sourcePosition:u=void 0}=e,{type:c=void 0}=e,{zIndex:f=void 0}=e,{dragging:d=!1}=e,{dragHandle:h=void 0}=e,{positionAbsoluteX:m=0}=e,{positionAbsoluteY:y=0}=e,{isConnectable:E=void 0}=e;return t.$$set=g=>{"data"in g&&n(0,i=g.data),"targetPosition"in g&&n(1,o=g.targetPosition),"id"in g&&n(2,l=g.id),"width"in g&&n(3,r=g.width),"height"in g&&n(4,s=g.height),"selected"in g&&n(5,a=g.selected),"sourcePosition"in g&&n(6,u=g.sourcePosition),"type"in g&&n(7,c=g.type),"zIndex"in g&&n(8,f=g.zIndex),"dragging"in g&&n(9,d=g.dragging),"dragHandle"in g&&n(10,h=g.dragHandle),"positionAbsoluteX"in g&&n(11,m=g.positionAbsoluteX),"positionAbsoluteY"in g&&n(12,y=g.positionAbsoluteY),"isConnectable"in g&&n(13,E=g.isConnectable)},[i,o,l,r,s,a,u,c,f,d,h,m,y,E]}class yd extends ue{constructor(e){super(),ae(this,e,_d,md,ce,{data:0,targetPosition:1,id:2,width:3,height:4,selected:5,sourcePosition:6,type:7,zIndex:8,dragging:9,dragHandle:10,positionAbsoluteX:11,positionAbsoluteY:12,isConnectable:13})}}const bd=yd;function wd(t,e,n){let{id:i=""}=e,{width:o=void 0}=e,{height:l=void 0}=e,{data:r={}}=e,{selected:s=void 0}=e,{sourcePosition:a=void 0}=e,{targetPosition:u=void 0}=e,{type:c=void 0}=e,{zIndex:f=void 0}=e,{dragging:d=!1}=e,{dragHandle:h=void 0}=e,{positionAbsoluteX:m=0}=e,{positionAbsoluteY:y=0}=e,{isConnectable:E=void 0}=e;return t.$$set=g=>{"id"in g&&n(0,i=g.id),"width"in g&&n(1,o=g.width),"height"in g&&n(2,l=g.height),"data"in g&&n(3,r=g.data),"selected"in g&&n(4,s=g.selected),"sourcePosition"in g&&n(5,a=g.sourcePosition),"targetPosition"in g&&n(6,u=g.targetPosition),"type"in g&&n(7,c=g.type),"zIndex"in g&&n(8,f=g.zIndex),"dragging"in g&&n(9,d=g.dragging),"dragHandle"in g&&n(10,h=g.dragHandle),"positionAbsoluteX"in g&&n(11,m=g.positionAbsoluteX),"positionAbsoluteY"in g&&n(12,y=g.positionAbsoluteY),"isConnectable"in g&&n(13,E=g.isConnectable)},[i,o,l,r,s,a,u,c,f,d,h,m,y,E]}class kd extends ue{constructor(e){super(),ae(this,e,wd,null,ce,{id:0,width:1,height:2,data:3,selected:4,sourcePosition:5,targetPosition:6,type:7,zIndex:8,dragging:9,dragHandle:10,positionAbsoluteX:11,positionAbsoluteY:12,isConnectable:13})}}const vd=kd;function Fo(t,e,n){if(!e)return;const i=n?e.querySelector(n):e;i&&i.appendChild(t)}function Sd(t,{target:e,domNode:n}){return Fo(t,n,e),{async update({target:i,domNode:o}){Fo(t,o,i)},destroy(){t.parentNode&&t.parentNode.removeChild(t)}}}function Ed(t){let e,n,i,o,l;const r=t[3].default,s=De(r,t,t[2],null);return{c(){e=ye("div"),s&&s.c()},m(a,u){F(a,e,u),s&&s.m(e,null),i=!0,o||(l=Ve(n=Sd.call(null,e,{target:".svelte-flow__edgelabel-renderer",domNode:t[0]})),o=!0)},p(a,[u]){s&&s.p&&(!i||u&4)&&pe(s,r,a,a[2],i?Xe(r,a[2],u,null):Ye(a[2]),null),n&&ze(n.update)&&u&1&&n.update.call(null,{target:".svelte-flow__edgelabel-renderer",domNode:a[0]})},i(a){i||(Y(s,a),i=!0)},o(a){B(s,a),i=!1},d(a){a&&K(e),s&&s.d(a),o=!1,l()}}}function Cd(t,e,n){let i,{$$slots:o={},$$scope:l}=e;const{domNode:r}=Ce();return Q(t,r,s=>n(0,i=s)),t.$$set=s=>{"$$scope"in s&&n(2,l=s.$$scope)},[i,r,l,o]}class Md extends ue{constructor(e){super(),ae(this,e,Cd,Ed,ce,{})}}function pr(){const{edgeLookup:t,selectionRect:e,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:o,unselectNodesAndEdges:l,elementsSelectable:r}=Ce();return s=>{const a=Z(t).get(s);if(!a){console.warn("012",Pn.error012(s));return}(a.selectable||Z(r)&&typeof a.selectable>"u")&&(e.set(null),n.set(null),a.selected?a.selected&&Z(i)&&l({nodes:[],edges:[a]}):o([s]))}}function zd(t){let e,n,i=`translate(-50%, -50%) translate(${t[1]}px,${t[2]}px)`,o,l,r;const s=t[5].default,a=De(s,t,t[7],null);return{c(){e=ye("div"),a&&a.c(),k(e,"class","svelte-flow__edge-label"),k(e,"style",n="pointer-events: all;"+t[0]),k(e,"role","button"),fe(e,"transform",i)},m(u,c){F(u,e,c),a&&a.m(e,null),o=!0,l||(r=be(e,"click",t[6]),l=!0)},p(u,c){a&&a.p&&(!o||c&128)&&pe(a,s,u,u[7],o?Xe(s,u[7],c,null):Ye(u[7]),null),(!o||c&1&&n!==(n="pointer-events: all;"+u[0]))&&k(e,"style",n);const f=c&1;(c&7&&i!==(i=`translate(-50%, -50%) translate(${u[1]}px,${u[2]}px)`)||f)&&fe(e,"transform",i)},i(u){o||(Y(a,u),o=!0)},o(u){B(a,u),o=!1},d(u){u&&K(e),a&&a.d(u),l=!1,r()}}}function Pd(t){let e,n;return e=new Md({props:{$$slots:{default:[zd]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p(i,[o]){const l={};o&135&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function Hd(t,e,n){let{$$slots:i={},$$scope:o}=e,{style:l=void 0}=e,{x:r=void 0}=e,{y:s=void 0}=e;const a=pr(),u=mn("svelteflow__edge_id"),c=()=>{u&&a(u)};return t.$$set=f=>{"style"in f&&n(0,l=f.style),"x"in f&&n(1,r=f.x),"y"in f&&n(2,s=f.y),"$$scope"in f&&n(7,o=f.$$scope)},[l,r,s,a,u,i,c,o]}class Nd extends ue{constructor(e){super(),ae(this,e,Hd,Pd,ce,{style:0,x:1,y:2})}}const Ad=Nd;function Td(t){let e;return{c(){e=he("path"),k(e,"d",t[1]),k(e,"stroke-opacity",0),k(e,"stroke-width",t[10]),k(e,"fill","none"),k(e,"class","svelte-flow__edge-interaction")},m(n,i){F(n,e,i)},p(n,i){i&2&&k(e,"d",n[1])},d(n){n&&K(e)}}}function qo(t){let e,n;return e=new Ad({props:{x:t[3],y:t[4],style:t[5],$$slots:{default:[Od]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p(i,o){const l={};o&8&&(l.x=i[3]),o&16&&(l.y=i[4]),o&32&&(l.style=i[5]),o&4100&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function Od(t){let e;return{c(){e=Qe(t[2])},m(n,i){F(n,e,i)},p(n,i){i&4&&jt(e,n[2])},d(n){n&&K(e)}}}function Id(t){let e,n,i,o,l,r,s=t[10]&&Td(t),a=t[2]&&qo(t);return{c(){e=he("path"),i=de(),s&&s.c(),o=de(),a&&a.c(),l=Ie(),k(e,"id",t[0]),k(e,"d",t[1]),k(e,"class",n=ve(["svelte-flow__edge-path",t[9]])),k(e,"marker-start",t[6]),k(e,"marker-end",t[7]),k(e,"fill","none"),k(e,"style",t[8])},m(u,c){F(u,e,c),F(u,i,c),s&&s.m(u,c),F(u,o,c),a&&a.m(u,c),F(u,l,c),r=!0},p(u,[c]){(!r||c&1)&&k(e,"id",u[0]),(!r||c&2)&&k(e,"d",u[1]),(!r||c&512&&n!==(n=ve(["svelte-flow__edge-path",u[9]])))&&k(e,"class",n),(!r||c&64)&&k(e,"marker-start",u[6]),(!r||c&128)&&k(e,"marker-end",u[7]),(!r||c&256)&&k(e,"style",u[8]),u[10]&&s.p(u,c),u[2]?a?(a.p(u,c),c&4&&Y(a,1)):(a=qo(u),a.c(),Y(a,1),a.m(l.parentNode,l)):a&&(Pe(),B(a,1,1,()=>{a=null}),He())},i(u){r||(Y(a),r=!0)},o(u){B(a),r=!1},d(u){u&&(K(e),K(i),K(o),K(l)),s&&s.d(u),a&&a.d(u)}}}function Dd(t,e,n){let{id:i=void 0}=e,{path:o}=e,{label:l=void 0}=e,{labelX:r=void 0}=e,{labelY:s=void 0}=e,{labelStyle:a=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:c=void 0}=e,{style:f=void 0}=e,{interactionWidth:d=20}=e,{class:h=void 0}=e,m=d===void 0?20:d;return t.$$set=y=>{"id"in y&&n(0,i=y.id),"path"in y&&n(1,o=y.path),"label"in y&&n(2,l=y.label),"labelX"in y&&n(3,r=y.labelX),"labelY"in y&&n(4,s=y.labelY),"labelStyle"in y&&n(5,a=y.labelStyle),"markerStart"in y&&n(6,u=y.markerStart),"markerEnd"in y&&n(7,c=y.markerEnd),"style"in y&&n(8,f=y.style),"interactionWidth"in y&&n(11,d=y.interactionWidth),"class"in y&&n(9,h=y.class)},[i,o,l,r,s,a,u,c,f,h,m,d]}class Xd extends ue{constructor(e){super(),ae(this,e,Dd,Id,ce,{id:0,path:1,label:2,labelX:3,labelY:4,labelStyle:5,markerStart:6,markerEnd:7,style:8,interactionWidth:11,class:9})}}const An=Xd;function pd(t){let e,n;return e=new An({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function Yd(t,e,n){let i,o,l,{id:r=""}=e,{source:s=""}=e,{target:a=""}=e,{animated:u=void 0}=e,{selected:c=void 0}=e,{label:f=void 0}=e,{labelStyle:d=void 0}=e,{data:h=void 0}=e,{style:m=void 0}=e,{markerStart:y=void 0}=e,{markerEnd:E=void 0}=e,{interactionWidth:g=void 0}=e,{sourceX:v}=e,{sourceY:_}=e,{sourcePosition:b}=e,{sourceHandleId:C=void 0}=e,{targetX:T}=e,{targetY:H}=e,{targetPosition:M}=e,{targetHandleId:P=void 0}=e;return t.$$set=w=>{"id"in w&&n(9,r=w.id),"source"in w&&n(10,s=w.source),"target"in w&&n(11,a=w.target),"animated"in w&&n(12,u=w.animated),"selected"in w&&n(13,c=w.selected),"label"in w&&n(0,f=w.label),"labelStyle"in w&&n(1,d=w.labelStyle),"data"in w&&n(14,h=w.data),"style"in w&&n(2,m=w.style),"markerStart"in w&&n(3,y=w.markerStart),"markerEnd"in w&&n(4,E=w.markerEnd),"interactionWidth"in w&&n(5,g=w.interactionWidth),"sourceX"in w&&n(15,v=w.sourceX),"sourceY"in w&&n(16,_=w.sourceY),"sourcePosition"in w&&n(17,b=w.sourcePosition),"sourceHandleId"in w&&n(18,C=w.sourceHandleId),"targetX"in w&&n(19,T=w.targetX),"targetY"in w&&n(20,H=w.targetY),"targetPosition"in w&&n(21,M=w.targetPosition),"targetHandleId"in w&&n(22,P=w.targetHandleId)},t.$$.update=()=>{t.$$.dirty&3899392&&n(8,[i,o,l]=Sr({sourceX:v,sourceY:_,targetX:T,targetY:H,sourcePosition:b,targetPosition:M}),i,(n(7,o),n(15,v),n(16,_),n(19,T),n(20,H),n(17,b),n(21,M)),(n(6,l),n(15,v),n(16,_),n(19,T),n(20,H),n(17,b),n(21,M)))},[f,d,m,y,E,g,l,o,i,r,s,a,u,c,h,v,_,b,C,T,H,M,P]}class Ld extends ue{constructor(e){super(),ae(this,e,Yd,pd,ce,{id:9,source:10,target:11,animated:12,selected:13,label:0,labelStyle:1,data:14,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:15,sourceY:16,sourcePosition:17,sourceHandleId:18,targetX:19,targetY:20,targetPosition:21,targetHandleId:22})}}const Yr=Ld;function Rd(t){let e,n;return e=new An({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function Vd(t,e,n){let i,o,l,{id:r=""}=e,{source:s=""}=e,{target:a=""}=e,{animated:u=void 0}=e,{selected:c=void 0}=e,{label:f=void 0}=e,{labelStyle:d=void 0}=e,{data:h=void 0}=e,{style:m=void 0}=e,{markerStart:y=void 0}=e,{markerEnd:E=void 0}=e,{interactionWidth:g=void 0}=e,{sourceX:v}=e,{sourceY:_}=e,{sourcePosition:b}=e,{sourceHandleId:C=void 0}=e,{targetX:T}=e,{targetY:H}=e,{targetPosition:M}=e,{targetHandleId:P=void 0}=e;return t.$$set=w=>{"id"in w&&n(9,r=w.id),"source"in w&&n(10,s=w.source),"target"in w&&n(11,a=w.target),"animated"in w&&n(12,u=w.animated),"selected"in w&&n(13,c=w.selected),"label"in w&&n(0,f=w.label),"labelStyle"in w&&n(1,d=w.labelStyle),"data"in w&&n(14,h=w.data),"style"in w&&n(2,m=w.style),"markerStart"in w&&n(3,y=w.markerStart),"markerEnd"in w&&n(4,E=w.markerEnd),"interactionWidth"in w&&n(5,g=w.interactionWidth),"sourceX"in w&&n(15,v=w.sourceX),"sourceY"in w&&n(16,_=w.sourceY),"sourcePosition"in w&&n(17,b=w.sourcePosition),"sourceHandleId"in w&&n(18,C=w.sourceHandleId),"targetX"in w&&n(19,T=w.targetX),"targetY"in w&&n(20,H=w.targetY),"targetPosition"in w&&n(21,M=w.targetPosition),"targetHandleId"in w&&n(22,P=w.targetHandleId)},t.$$.update=()=>{t.$$.dirty&3899392&&n(8,[i,o,l]=Qt({sourceX:v,sourceY:_,targetX:T,targetY:H,sourcePosition:b,targetPosition:M}),i,(n(7,o),n(15,v),n(16,_),n(19,T),n(20,H),n(17,b),n(21,M)),(n(6,l),n(15,v),n(16,_),n(19,T),n(20,H),n(17,b),n(21,M)))},[f,d,m,y,E,g,l,o,i,r,s,a,u,c,h,v,_,b,C,T,H,M,P]}class Wd extends ue{constructor(e){super(),ae(this,e,Vd,Rd,ce,{id:9,source:10,target:11,animated:12,selected:13,label:0,labelStyle:1,data:14,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:15,sourceY:16,sourcePosition:17,sourceHandleId:18,targetX:19,targetY:20,targetPosition:21,targetHandleId:22})}}const Bd=Wd;function Kd(t){let e,n;return e=new An({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function Fd(t,e,n){let i,o,l,{id:r=""}=e,{source:s=""}=e,{target:a=""}=e,{animated:u=void 0}=e,{selected:c=void 0}=e,{label:f=void 0}=e,{labelStyle:d=void 0}=e,{data:h=void 0}=e,{style:m=void 0}=e,{markerStart:y=void 0}=e,{markerEnd:E=void 0}=e,{interactionWidth:g=void 0}=e,{sourceX:v}=e,{sourceY:_}=e,{sourcePosition:b}=e,{sourceHandleId:C=void 0}=e,{targetX:T}=e,{targetY:H}=e,{targetPosition:M}=e,{targetHandleId:P=void 0}=e;return t.$$set=w=>{"id"in w&&n(9,r=w.id),"source"in w&&n(10,s=w.source),"target"in w&&n(11,a=w.target),"animated"in w&&n(12,u=w.animated),"selected"in w&&n(13,c=w.selected),"label"in w&&n(0,f=w.label),"labelStyle"in w&&n(1,d=w.labelStyle),"data"in w&&n(14,h=w.data),"style"in w&&n(2,m=w.style),"markerStart"in w&&n(3,y=w.markerStart),"markerEnd"in w&&n(4,E=w.markerEnd),"interactionWidth"in w&&n(5,g=w.interactionWidth),"sourceX"in w&&n(15,v=w.sourceX),"sourceY"in w&&n(16,_=w.sourceY),"sourcePosition"in w&&n(17,b=w.sourcePosition),"sourceHandleId"in w&&n(18,C=w.sourceHandleId),"targetX"in w&&n(19,T=w.targetX),"targetY"in w&&n(20,H=w.targetY),"targetPosition"in w&&n(21,M=w.targetPosition),"targetHandleId"in w&&n(22,P=w.targetHandleId)},t.$$.update=()=>{t.$$.dirty&1671168&&n(8,[i,o,l]=Cr({sourceX:v,sourceY:_,targetX:T,targetY:H}),i,(n(7,o),n(15,v),n(16,_),n(19,T),n(20,H)),(n(6,l),n(15,v),n(16,_),n(19,T),n(20,H)))},[f,d,m,y,E,g,l,o,i,r,s,a,u,c,h,v,_,b,C,T,H,M,P]}class qd extends ue{constructor(e){super(),ae(this,e,Fd,Kd,ce,{id:9,source:10,target:11,animated:12,selected:13,label:0,labelStyle:1,data:14,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:15,sourceY:16,sourcePosition:17,sourceHandleId:18,targetX:19,targetY:20,targetPosition:21,targetHandleId:22})}}const Zd=qd;function Ud(t){let e,n;return e=new An({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function Gd(t,e,n){let i,o,l,{id:r=""}=e,{source:s=""}=e,{target:a=""}=e,{animated:u=void 0}=e,{selected:c=void 0}=e,{label:f=void 0}=e,{data:d=void 0}=e,{labelStyle:h=void 0}=e,{style:m=void 0}=e,{markerStart:y=void 0}=e,{markerEnd:E=void 0}=e,{interactionWidth:g=void 0}=e,{sourceX:v}=e,{sourceY:_}=e,{sourcePosition:b}=e,{sourceHandleId:C=void 0}=e,{targetX:T}=e,{targetY:H}=e,{targetPosition:M}=e,{targetHandleId:P=void 0}=e;return t.$$set=w=>{"id"in w&&n(9,r=w.id),"source"in w&&n(10,s=w.source),"target"in w&&n(11,a=w.target),"animated"in w&&n(12,u=w.animated),"selected"in w&&n(13,c=w.selected),"label"in w&&n(0,f=w.label),"data"in w&&n(14,d=w.data),"labelStyle"in w&&n(1,h=w.labelStyle),"style"in w&&n(2,m=w.style),"markerStart"in w&&n(3,y=w.markerStart),"markerEnd"in w&&n(4,E=w.markerEnd),"interactionWidth"in w&&n(5,g=w.interactionWidth),"sourceX"in w&&n(15,v=w.sourceX),"sourceY"in w&&n(16,_=w.sourceY),"sourcePosition"in w&&n(17,b=w.sourcePosition),"sourceHandleId"in w&&n(18,C=w.sourceHandleId),"targetX"in w&&n(19,T=w.targetX),"targetY"in w&&n(20,H=w.targetY),"targetPosition"in w&&n(21,M=w.targetPosition),"targetHandleId"in w&&n(22,P=w.targetHandleId)},t.$$.update=()=>{t.$$.dirty&3899392&&n(8,[i,o,l]=Qt({sourceX:v,sourceY:_,targetX:T,targetY:H,sourcePosition:b,targetPosition:M,borderRadius:0}),i,(n(7,o),n(15,v),n(16,_),n(19,T),n(20,H),n(17,b),n(21,M)),(n(6,l),n(15,v),n(16,_),n(19,T),n(20,H),n(17,b),n(21,M)))},[f,h,m,y,E,g,l,o,i,r,s,a,u,c,d,v,_,b,C,T,H,M,P]}class Jd extends ue{constructor(e){super(),ae(this,e,Gd,Ud,ce,{id:9,source:10,target:11,animated:12,selected:13,label:0,data:14,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:15,sourceY:16,sourcePosition:17,sourceHandleId:18,targetX:19,targetY:20,targetPosition:21,targetHandleId:22})}}const Qd=Jd;function jd(t,e){const n=t.set,i=e.set,o=Z(t),l=Z(e);let s=o.length===0&&l.length>0?l:o;t.set(s);const a=u=>{const c=n(u);return s=c,i(s),c};t.set=e.set=a,t.update=e.update=u=>a(u(s))}function xd(t,e){const n=t.set,i=e.set;let o=Z(e);t.set(o);const l=r=>{n(r),i(r),o=r};t.set=e.set=l,t.update=e.update=r=>l(r(o))}const $d=(t,e,n)=>{if(!n)return;const i=Z(t),o=e.set,l=n.set;let r=n?Z(n):{x:0,y:0,zoom:1};e.set(r),e.set=s=>(o(s),l(s),r=s,s),n.set=s=>(i==null||i.syncViewport(s),o(s),l(s),r=s,s),e.update=s=>{e.set(s(r))},n.update=s=>{n.set(s(r))}},eh=(t,e)=>{const{subscribe:n,set:i,update:o}=re([]);let l=t,r={},s=!0;const a=d=>(l=Mr(d,e,{elevateNodesOnSelect:s,defaults:r}),i(l),l),u=d=>a(d(l)),c=d=>{r=d},f=d=>{s=d.elevateNodesOnSelect??s};return a(l),{subscribe:n,set:a,update:u,setDefaultOptions:c,setOptions:f}},th=(t,e,n,i)=>{const{subscribe:o,set:l,update:r}=re([]);let s=t,a=i||{};const u=d=>{const h=a?d.map(m=>({...a,...m})):d;Pr(e,n,h),s=h,l(s)},c=d=>u(d(s)),f=d=>{a=d};return u(s),{subscribe:o,set:u,update:c,setDefaultOptions:f}},Lr={path:null,sourceX:null,sourceY:null,sourcePosition:null,targetX:null,targetY:null,targetPosition:null,pointerPosition:null,startHandle:null,endHandle:null,status:null},nh={[ge.Left]:ge.Right,[ge.Right]:ge.Left,[ge.Top]:ge.Bottom,[ge.Bottom]:ge.Top};function ih(t,e){return qt([e,t.connectionLineType,t.connectionMode,t.nodeLookup,t.viewport],([n,i,o,l,r])=>{var C,T,H,M,P,w,z,p,N,S,O,A,V;if(!((C=n.connectionStartHandle)!=null&&C.nodeId))return Lr;const s=l.get((T=n.connectionStartHandle)==null?void 0:T.nodeId),a=(H=s==null?void 0:s[Ne])==null?void 0:H.handleBounds,u=(a==null?void 0:a[n.connectionStartHandle.type||"source"])||[],c=u||(a==null?void 0:a[((M=n==null?void 0:n.connectionStartHandle)==null?void 0:M.type)==="source"?"target":"source"]),f=o===Ht.Strict?u:c,d=(P=n.connectionStartHandle)!=null&&P.handleId?f.find(L=>{var W;return L.id===((W=n.connectionStartHandle)==null?void 0:W.handleId)}):f[0],h=d?d.x+d.width/2:(((w=s==null?void 0:s.computed)==null?void 0:w.width)??0)/2,m=d?d.y+d.height/2:((z=s==null?void 0:s.computed)==null?void 0:z.height)??0,y=(((N=(p=s==null?void 0:s.computed)==null?void 0:p.positionAbsolute)==null?void 0:N.x)??0)+h,E=(((O=(S=s==null?void 0:s.computed)==null?void 0:S.positionAbsolute)==null?void 0:O.y)??0)+m,g=d==null?void 0:d.position,v=g?nh[g]:void 0,_={sourceX:y,sourceY:E,sourcePosition:g,targetX:((((A=n.connectionPosition)==null?void 0:A.x)??0)-r.x)/r.zoom,targetY:((((V=n.connectionPosition)==null?void 0:V.y)??0)-r.y)/r.zoom,targetPosition:v};let b="";return i===Wt.Bezier?[b]=Sr(_):i===Wt.Step?[b]=Qt({..._,borderRadius:0}):i===Wt.SmoothStep?[b]=Qt(_):[b]=Cr(_),{path:b,..._,pointerPosition:n.connectionPosition,startHandle:n.connectionStartHandle,endHandle:n.connectionEndHandle,status:n.connectionStatus}})}const Rr={input:gd,output:bd,default:Xr,group:vd},Vr={straight:Zd,smoothstep:Bd,default:Yr,step:Qd},oh=({nodes:t=[],edges:e=[],width:n,height:i,fitView:o})=>{const l=new Map,r=Mr(t,l,{nodeOrigin:[0,0],elevateNodesOnSelect:!1}),s=new Map,a=new Map;Pr(s,a,e);let u={x:0,y:0,zoom:1};if(o&&n&&i){const c=r.filter(d=>d.width&&d.height||d.initialWidth&&d.initialHeight),f=Hn(c,{nodeOrigin:[0,0]});u=no(f,n,i,.5,2,.1)}return{flowId:re(null),nodes:eh(r,l),nodeLookup:je(l),edgeLookup:je(a),visibleNodes:je([]),edges:th(e,s,a),visibleEdges:je([]),connectionLookup:je(s),height:re(500),width:re(500),minZoom:re(.5),maxZoom:re(2),nodeOrigin:re([0,0]),nodeDragThreshold:re(1),nodeExtent:re(Ho),translateExtent:re(Ho),autoPanOnNodeDrag:re(!0),autoPanOnConnect:re(!0),fitViewOnInit:re(!1),fitViewOnInitDone:re(!1),fitViewOptions:re(void 0),panZoom:re(null),snapGrid:re(null),dragging:re(!1),selectionRect:re(null),selectionKeyPressed:re(!1),multiselectionKeyPressed:re(!1),deleteKeyPressed:re(!1),panActivationKeyPressed:re(!1),zoomActivationKeyPressed:re(!1),selectionRectMode:re(null),selectionMode:re(ii.Partial),nodeTypes:re(Rr),edgeTypes:re(Vr),viewport:re(u),connectionMode:re(Ht.Strict),domNode:re(null),connection:je(Lr),connectionLineType:re(Wt.Bezier),connectionRadius:re(20),isValidConnection:re(()=>!0),nodesDraggable:re(!0),nodesConnectable:re(!0),elementsSelectable:re(!0),selectNodesOnDrag:re(!0),markers:je([]),defaultMarkerColor:re("#b1b1b7"),lib:je("svelte"),onlyRenderVisibleElements:re(!1),onerror:re(_f),ondelete:re(void 0),onedgecreate:re(void 0),onconnect:re(void 0),onconnectstart:re(void 0),onconnectend:re(void 0),onbeforedelete:re(void 0),nodesInitialized:re(!1),edgesInitialized:re(!1),viewportInitialized:re(!1),initialized:je(!1)}};function lh(t){const e=qt([t.edges,t.nodes,t.nodeLookup,t.onlyRenderVisibleElements,t.viewport,t.width,t.height],([n,,i,o,l,r,s])=>o&&r&&s?n.filter(u=>{const c=i.get(u.source),f=i.get(u.target);return c&&f&&Ef({sourceNode:c,targetNode:f,width:r,height:s,transform:[l.x,l.y,l.zoom]})}):n);return qt([e,t.nodes,t.nodeLookup,t.connectionMode,t.onerror],([n,,i,o,l])=>n.reduce((s,a)=>{const u=i.get(a.source),c=i.get(a.target);if(!u||!c)return s;const f=Af({id:a.id,sourceNode:u,targetNode:c,sourceHandle:a.sourceHandle||null,targetHandle:a.targetHandle||null,connectionMode:o,onError:l});return f&&s.push({...a,zIndex:Sf({selected:a.selected,zIndex:a.zIndex,sourceNode:u,targetNode:c,elevateOnSelect:!1}),...f}),s},[]))}function rh(t){return qt([t.nodes,t.onlyRenderVisibleElements,t.width,t.height,t.viewport],([e,n,i,o,l])=>{const r=[l.x,l.y,l.zoom];return n?_r(e,{x:0,y:0,width:i,height:o},r,!0):e})}const wi=Symbol();function Wr({nodes:t,edges:e,width:n,height:i,fitView:o}){const l=oh({nodes:t,edges:e,width:n,height:i,fitView:o});function r(N){l.nodeTypes.set({...Rr,...N})}function s(N){l.edgeTypes.set({...Vr,...N})}function a(N){const S=Z(l.edges);l.edges.set(zf(N,S))}const u=(N,S=!1)=>{const O=Z(l.nodeLookup);N.forEach(A=>{var L;const V=O.get(A.id);V&&(V.position=A.position,V.dragging=S,V.computed={...V.computed,positionAbsolute:(L=A.computed)==null?void 0:L.positionAbsolute})}),l.nodes.set(Z(l.nodes))};function c(N){const S=If(N,Z(l.nodes),Z(l.nodeLookup),Z(l.domNode),Z(l.nodeOrigin));if(S){if(!Z(l.fitViewOnInitDone)&&Z(l.fitViewOnInit)){const O=Z(l.fitViewOptions),A=f(S,{...O,nodes:(O==null?void 0:O.nodes)||S});l.fitViewOnInitDone.set(A)}l.nodes.set(S),Z(l.nodesInitialized)||l.nodesInitialized.set(!0)}}function f(N,S){const O=Z(l.panZoom);return O?cf({nodes:N,width:Z(l.width),height:Z(l.height),minZoom:Z(l.minZoom),maxZoom:Z(l.maxZoom),panZoom:O,nodeOrigin:Z(l.nodeOrigin)},S):!1}function d(N,S){const O=Z(l.panZoom);O&&O.scaleBy(N,S)}function h(N){d(1.2,N)}function m(N){d(1/1.2,N)}function y(N){const S=Z(l.panZoom);S&&(S.setScaleExtent([N,Z(l.maxZoom)]),l.minZoom.set(N))}function E(N){const S=Z(l.panZoom);S&&(S.setScaleExtent([Z(l.minZoom),N]),l.maxZoom.set(N))}function g(N){const S=Z(l.panZoom);S&&(S.setTranslateExtent(N),l.translateExtent.set(N))}function v(N){let S=!1;return N.forEach(O=>{O.selected&&(O.selected=!1,S=!0)}),S}function _(N){v((N==null?void 0:N.nodes)||Z(l.nodes))&&l.nodes.set(Z(l.nodes)),v((N==null?void 0:N.edges)||Z(l.edges))&&l.edges.set(Z(l.edges))}l.deleteKeyPressed.subscribe(async N=>{var S;if(N){const O=Z(l.nodes),A=Z(l.edges),V=O.filter(J=>J.selected),L=A.filter(J=>J.selected),{nodes:W,edges:U}=await yr({nodesToRemove:V,edgesToRemove:L,nodes:O,edges:A,onBeforeDelete:Z(l.onbeforedelete)});(W.length||U.length)&&(l.nodes.update(J=>J.filter(D=>!W.some(oe=>oe.id===D.id))),l.edges.update(J=>J.filter(D=>!U.some(oe=>oe.id===D.id))),(S=Z(l.ondelete))==null||S({nodes:W,edges:U}))}});function b(N){const S=Z(l.multiselectionKeyPressed);l.nodes.update(O=>O.map(A=>{const V=N.includes(A.id),L=S&&A.selected||V;return A.selected=L,A})),S||l.edges.update(O=>O.map(A=>(A.selected=!1,A)))}function C(N){const S=Z(l.multiselectionKeyPressed);l.edges.update(O=>O.map(A=>{const V=N.includes(A.id),L=S&&A.selected||V;return A.selected=L,A})),S||l.nodes.update(O=>O.map(A=>(A.selected=!1,A)))}function T(N){var O;const S=(O=Z(l.nodes))==null?void 0:O.find(A=>A.id===N);if(!S){console.warn("012",Pn.error012(N));return}l.selectionRect.set(null),l.selectionRectMode.set(null),S.selected?S.selected&&Z(l.multiselectionKeyPressed)&&_({nodes:[S],edges:[]}):b([N])}function H(N){const S=Z(l.viewport);return Df({delta:N,panZoom:Z(l.panZoom),transform:[S.x,S.y,S.zoom],translateExtent:Z(l.translateExtent),width:Z(l.width),height:Z(l.height)})}const M={connectionStartHandle:null,connectionEndHandle:null,connectionPosition:null,connectionStatus:null},P=re(M),w=N=>{P.set(N)};function z(){w(M)}function p(){l.fitViewOnInitDone.set(!1),l.selectionRect.set(null),l.selectionRectMode.set(null),l.snapGrid.set(null),l.isValidConnection.set(()=>!0),l.nodes.set([]),l.edges.set([]),_(),z()}return{...l,connection:ih(l,P),visibleEdges:lh(l),visibleNodes:rh(l),markers:qt([l.edges,l.defaultMarkerColor,l.flowId],([N,S,O])=>Tf(N,{defaultColor:S,id:O})),initialized:(()=>{let N=!1;const S=Z(l.nodes).length,O=Z(l.edges).length;return qt([l.nodesInitialized,l.edgesInitialized,l.viewportInitialized],([A,V,L])=>N||(S===0?N=L:O===0?N=L&&A:N=L&&A&&V,N))})(),syncNodeStores:N=>jd(l.nodes,N),syncEdgeStores:N=>xd(l.edges,N),syncViewport:N=>$d(l.panZoom,l.viewport,N),setNodeTypes:r,setEdgeTypes:s,addEdge:a,updateNodePositions:u,updateNodeDimensions:c,zoomIn:h,zoomOut:m,fitView:N=>f(Z(l.nodes),N),setMinZoom:y,setMaxZoom:E,setTranslateExtent:g,unselectNodesAndEdges:_,addSelectedNodes:b,addSelectedEdges:C,handleNodeSelection:T,panBy:H,updateConnection:w,cancelConnection:z,reset:p}}function Ce(){const t=mn(wi);if(!t)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return t.getStore()}function sh({nodes:t,edges:e,width:n,height:i,fitView:o}){const l=Wr({nodes:t,edges:e,width:n,height:i,fitView:o});return gn(wi,{getStore:()=>l}),l}function ah(t,e){const{panZoom:n,minZoom:i,maxZoom:o,initialViewport:l,viewport:r,dragging:s,translateExtent:a}=e,u=Qf({domNode:t,minZoom:i,maxZoom:o,translateExtent:a,viewport:l,onTransformChange:f=>r.set({x:f[0],y:f[1],zoom:f[2]}),onDraggingChange:s.set}),c=u.getViewport();return r.set(c),n.set(u),u.update(e),{update(f){u.update(f)}}}function uh(t){let e,n,i,o,l;const r=t[33].default,s=De(r,t,t[32],null);return{c(){e=ye("div"),s&&s.c(),k(e,"class","svelte-flow__zoom svelte-4xkw84")},m(a,u){F(a,e,u),s&&s.m(e,null),i=!0,o||(l=Ve(n=ah.call(null,e,{viewport:t[17],minZoom:t[11],maxZoom:t[12],initialViewport:t[10],dragging:t[22],panZoom:t[18],onPanZoomStart:t[0],onPanZoom:t[1],onPanZoomEnd:t[2],zoomOnScroll:t[5],zoomOnDoubleClick:t[6],zoomOnPinch:t[7],panOnScroll:t[8],panOnDrag:t[9],panOnScrollSpeed:.5,panOnScrollMode:t[3]||lt.Free,zoomActivationKeyPressed:t[13],preventScrolling:typeof t[4]=="boolean"?t[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:t[14],translateExtent:t[15],lib:t[16]})),o=!0)},p(a,u){s&&s.p&&(!i||u[1]&2)&&pe(s,r,a,a[32],i?Xe(r,a[32],u,null):Ye(a[32]),null),n&&ze(n.update)&&u[0]&131071&&n.update.call(null,{viewport:a[17],minZoom:a[11],maxZoom:a[12],initialViewport:a[10],dragging:a[22],panZoom:a[18],onPanZoomStart:a[0],onPanZoom:a[1],onPanZoomEnd:a[2],zoomOnScroll:a[5],zoomOnDoubleClick:a[6],zoomOnPinch:a[7],panOnScroll:a[8],panOnDrag:a[9],panOnScrollSpeed:.5,panOnScrollMode:a[3]||lt.Free,zoomActivationKeyPressed:a[13],preventScrolling:typeof a[4]=="boolean"?a[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:a[14],translateExtent:a[15],lib:a[16]})},i(a){i||(Y(s,a),i=!0)},o(a){B(s,a),i=!1},d(a){a&&K(e),s&&s.d(a),o=!1,l()}}}function ch(t,e,n){let i,o,l,r,s,a,u,c,f,d,h,{$$slots:m={},$$scope:y}=e,{initialViewport:E}=e,{onMoveStart:g=void 0}=e,{onMove:v=void 0}=e,{onMoveEnd:_=void 0}=e,{panOnScrollMode:b}=e,{preventScrolling:C}=e,{zoomOnScroll:T}=e,{zoomOnDoubleClick:H}=e,{zoomOnPinch:M}=e,{panOnDrag:P}=e,{panOnScroll:w}=e;const{viewport:z,panZoom:p,selectionKeyPressed:N,minZoom:S,maxZoom:O,dragging:A,translateExtent:V,lib:L,panActivationKeyPressed:W,zoomActivationKeyPressed:U,viewportInitialized:J}=Ce();return Q(t,N,D=>n(14,f=D)),Q(t,S,D=>n(11,a=D)),Q(t,O,D=>n(12,u=D)),Q(t,V,D=>n(15,d=D)),Q(t,L,D=>n(16,h=D)),Q(t,W,D=>n(31,s=D)),Q(t,U,D=>n(13,c=D)),Q(t,J,D=>n(34,r=D)),Cn(()=>{Gn(J,r=!0,r)}),t.$$set=D=>{"initialViewport"in D&&n(28,E=D.initialViewport),"onMoveStart"in D&&n(0,g=D.onMoveStart),"onMove"in D&&n(1,v=D.onMove),"onMoveEnd"in D&&n(2,_=D.onMoveEnd),"panOnScrollMode"in D&&n(3,b=D.panOnScrollMode),"preventScrolling"in D&&n(4,C=D.preventScrolling),"zoomOnScroll"in D&&n(5,T=D.zoomOnScroll),"zoomOnDoubleClick"in D&&n(6,H=D.zoomOnDoubleClick),"zoomOnPinch"in D&&n(7,M=D.zoomOnPinch),"panOnDrag"in D&&n(29,P=D.panOnDrag),"panOnScroll"in D&&n(30,w=D.panOnScroll),"$$scope"in D&&n(32,y=D.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&268435456&&n(10,i=E||{x:0,y:0,zoom:1}),t.$$.dirty[0]&536870912|t.$$.dirty[1]&1&&n(9,o=s||P),t.$$.dirty[0]&1073741824|t.$$.dirty[1]&1&&n(8,l=s||w)},[g,v,_,b,C,T,H,M,l,o,i,a,u,c,f,d,h,z,p,N,S,O,A,V,L,W,U,J,E,P,w,s,y,m]}class fh extends ue{constructor(e){super(),ae(this,e,ch,uh,ce,{initialViewport:28,onMoveStart:0,onMove:1,onMoveEnd:2,panOnScrollMode:3,preventScrolling:4,zoomOnScroll:5,zoomOnDoubleClick:6,zoomOnPinch:7,panOnDrag:29,panOnScroll:30},null,[-1,-1])}}const dh=fh;function hh(t){let e,n,i,o;const l=t[29].default,r=De(l,t,t[28],null);return{c(){e=ye("div"),r&&r.c(),k(e,"class","svelte-flow__pane svelte-1esy7hx"),_e(e,"draggable",t[0]),_e(e,"dragging",t[4]),_e(e,"selection",t[1])},m(s,a){F(s,e,a),r&&r.m(e,null),t[30](e),n=!0,i||(o=[be(e,"click",function(){ze(t[3]?void 0:Wn(t[15],t[2]))&&(t[3]?void 0:Wn(t[15],t[2])).apply(this,arguments)}),be(e,"mousedown",function(){ze(t[3]?t[16]:void 0)&&(t[3]?t[16]:void 0).apply(this,arguments)}),be(e,"mousemove",function(){ze(t[3]?t[17]:void 0)&&(t[3]?t[17]:void 0).apply(this,arguments)}),be(e,"mouseup",function(){ze(t[3]?t[18]:void 0)&&(t[3]?t[18]:void 0).apply(this,arguments)}),be(e,"mouseleave",function(){ze(t[3]?t[19]:void 0)&&(t[3]?t[19]:void 0).apply(this,arguments)}),be(e,"contextmenu",function(){ze(Wn(t[20],t[2]))&&Wn(t[20],t[2]).apply(this,arguments)})],i=!0)},p(s,a){t=s,r&&r.p&&(!n||a[0]&268435456)&&pe(r,l,t,t[28],n?Xe(l,t[28],a,null):Ye(t[28]),null),(!n||a[0]&1)&&_e(e,"draggable",t[0]),(!n||a[0]&16)&&_e(e,"dragging",t[4]),(!n||a[0]&2)&&_e(e,"selection",t[1])},i(s){n||(Y(r,s),n=!0)},o(s){B(r,s),n=!1},d(s){s&&K(e),r&&r.d(s),t[30](null),i=!1,Te(o)}}}function Wn(t,e){return n=>{n.target===e&&(t==null||t(n))}}function Zo(t){return e=>{const n=t.includes(e.id);return e.selected!==n?{...e,selected:n}:e}}function gh(t,e,n){let i,o,l,r,s,a,u,c,f,d,h,m,y,{$$slots:E={},$$scope:g}=e,{panOnDrag:v=void 0}=e,{selectionOnDrag:_=void 0}=e;const b=ui(),{nodes:C,edges:T,viewport:H,dragging:M,elementsSelectable:P,selectionRect:w,selectionRectMode:z,selectionKeyPressed:p,selectionMode:N,panActivationKeyPressed:S,unselectNodesAndEdges:O}=Ce();Q(t,C,q=>n(36,c=q)),Q(t,T,q=>n(33,s=q)),Q(t,H,q=>n(35,u=q)),Q(t,M,q=>n(4,y=q)),Q(t,P,q=>n(25,d=q)),Q(t,w,q=>n(24,f=q)),Q(t,z,q=>n(23,r=q)),Q(t,p,q=>n(26,h=q)),Q(t,N,q=>n(34,a=q)),Q(t,S,q=>n(27,m=q));let A,V=null,L=[];function W(q){b("paneclick",{event:q}),O(),z.set(null)}function U(q){if(V=A.getBoundingClientRect(),!P||!o||q.button!==0||q.target!==A||!V)return;const{x:j,y:le}=ht(q,V);O(),w.set({width:0,height:0,startX:j,startY:le,x:j,y:le})}function J(q){if(!o||!V||!f)return;const j=ht(q,V),le=f.startX??0,I=f.startY??0,we={...f,x:j.x<le?j.x:le,y:j.y<I?j.y:I,width:Math.abs(j.x-le),height:Math.abs(j.y-I)},ke=L.map(Ee=>Ee.id),Ae=Bi(L,s).map(Ee=>Ee.id);L=_r(c,we,[u.x,u.y,u.zoom],a===ii.Partial,!0);const Me=Bi(L,s).map(Ee=>Ee.id),Ge=L.map(Ee=>Ee.id);(ke.length!==Ge.length||Ge.some(Ee=>!ke.includes(Ee)))&&C.update(Ee=>Ee.map(Zo(Ge))),(Ae.length!==Me.length||Me.some(Ee=>!Ae.includes(Ee)))&&T.update(Ee=>Ee.map(Zo(Me))),z.set("user"),w.set(we)}function D(q){q.button===0&&(!o&&r==="user"&&q.target===A&&(W==null||W(q)),w.set(null),L.length>0&&z.set("nodes"))}const oe=q=>{r==="user"&&z.set(L.length>0?"nodes":null),w.set(null)},ne=q=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){q.preventDefault();return}b("panecontextmenu",{event:q})};function R(q){mt[q?"unshift":"push"](()=>{A=q,n(2,A)})}return t.$$set=q=>{"panOnDrag"in q&&n(0,v=q.panOnDrag),"selectionOnDrag"in q&&n(21,_=q.selectionOnDrag),"$$scope"in q&&n(28,g=q.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&134217729&&n(22,i=m||v),t.$$.dirty[0]&90177536&&n(1,o=h||f||_&&i!==!0),t.$$.dirty[0]&41943042&&n(3,l=d&&(o||r==="user"))},[v,o,A,l,y,C,T,H,M,P,w,z,p,N,S,W,U,J,D,oe,ne,_,i,r,f,d,h,m,g,E,R]}class mh extends ue{constructor(e){super(),ae(this,e,gh,hh,ce,{panOnDrag:0,selectionOnDrag:21},null,[-1,-1])}}const _h=mh;function yh(t){let e,n;const i=t[3].default,o=De(i,t,t[2],null);return{c(){e=ye("div"),o&&o.c(),k(e,"class","svelte-flow__viewport xyflow__viewport svelte-1floaup"),fe(e,"transform","translate("+t[0].x+"px, "+t[0].y+"px) scale("+t[0].zoom+")")},m(l,r){F(l,e,r),o&&o.m(e,null),n=!0},p(l,[r]){o&&o.p&&(!n||r&4)&&pe(o,i,l,l[2],n?Xe(i,l[2],r,null):Ye(l[2]),null),(!n||r&1)&&fe(e,"transform","translate("+l[0].x+"px, "+l[0].y+"px) scale("+l[0].zoom+")")},i(l){n||(Y(o,l),n=!0)},o(l){B(o,l),n=!1},d(l){l&&K(e),o&&o.d(l)}}}function bh(t,e,n){let i,{$$slots:o={},$$scope:l}=e;const{viewport:r}=Ce();return Q(t,r,s=>n(0,i=s)),t.$$set=s=>{"$$scope"in s&&n(2,l=s.$$scope)},[i,r,l,o]}class wh extends ue{constructor(e){super(),ae(this,e,bh,yh,ce,{})}}function Br(t,e){const{store:n,onDrag:i,onDragStart:o,onDragStop:l,onNodeMouseDown:r}=e,s=pf({onDrag:i,onDragStart:o,onDragStop:l,onNodeMouseDown:r,getStoreItems:()=>{const u=Z(n.snapGrid),c=Z(n.viewport);return{nodes:Z(n.nodes),nodeLookup:Z(n.nodeLookup),edges:Z(n.edges),nodeExtent:Z(n.nodeExtent),snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:[0,0],multiSelectionActive:Z(n.multiselectionKeyPressed),domNode:Z(n.domNode),transform:[c.x,c.y,c.zoom],autoPanOnNodeDrag:Z(n.autoPanOnNodeDrag),nodesDraggable:Z(n.nodesDraggable),selectNodesOnDrag:Z(n.selectNodesOnDrag),nodeDragThreshold:Z(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function a(u,c){if(c.disabled){s.destroy();return}s.update({domNode:u,noDragClassName:c.noDragClass,handleSelector:c.handleSelector,nodeId:c.nodeId,isSelectable:c.isSelectable})}return a(t,e),{update(u){a(t,u)},destroy(){s.destroy()}}}function kh({width:t,height:e,initialWidth:n,initialHeight:i,computedWidth:o,computedHeight:l}){if(o===void 0&&l===void 0){const r=t??n,s=e??i;return{width:r?`width:${r}px;`:"",height:s?`height:${s}px;`:""}}return{width:t?`width:${t}px;`:"",height:e?`height:${e}px;`:""}}function Uo(t){let e,n,i,o,l,r=`translate(${t[14]}px, ${t[15]}px)`,s,a,u;var c=t[30];function f(d,h){return{props:{data:d[2],id:d[1],selected:d[3],sourcePosition:d[16],targetPosition:d[17],type:d[10],zIndex:d[18],dragging:d[8],dragHandle:d[21],isConnectable:d[6],positionAbsoluteX:d[12],positionAbsoluteY:d[13],width:d[19],height:d[20]}}}return c&&(n=Jn(c,f(t))),{c(){e=ye("div"),n&&te(n.$$.fragment),k(e,"data-id",t[1]),k(e,"class",i=ve(["svelte-flow__node",`svelte-flow__node-${t[29]}`,t[23]])),k(e,"style",o=(t[9]??"")+";"+t[25].width+t[25].height),_e(e,"dragging",t[8]),_e(e,"selected",t[3]),_e(e,"draggable",t[4]),_e(e,"connectable",t[6]),_e(e,"selectable",t[5]),_e(e,"nopan",t[4]),_e(e,"parent",t[11]),fe(e,"z-index",t[18]),fe(e,"transform",r),fe(e,"visibility",t[22]?"visible":"hidden")},m(d,h){F(d,e,h),n&&$(n,e,null),t[45](e),s=!0,a||(u=[Ve(l=Br.call(null,e,{nodeId:t[1],isSelectable:t[5],disabled:!1,handleSelector:t[21],noDragClass:"nodrag",onNodeMouseDown:t[28],onDrag:t[42],onDragStart:t[43],onDragStop:t[44],store:t[26]})),be(e,"click",t[32]),be(e,"mouseenter",t[46]),be(e,"mouseleave",t[47]),be(e,"mousemove",t[48]),be(e,"contextmenu",t[49])],a=!0)},p(d,h){if(c!==(c=d[30])){if(n){Pe();const y=n;B(y.$$.fragment,1,0,()=>{ee(y,1)}),He()}c?(n=Jn(c,f(d)),te(n.$$.fragment),Y(n.$$.fragment,1),$(n,e,null)):n=null}else if(c){const y={};h[0]&4&&(y.data=d[2]),h[0]&2&&(y.id=d[1]),h[0]&8&&(y.selected=d[3]),h[0]&65536&&(y.sourcePosition=d[16]),h[0]&131072&&(y.targetPosition=d[17]),h[0]&1024&&(y.type=d[10]),h[0]&262144&&(y.zIndex=d[18]),h[0]&256&&(y.dragging=d[8]),h[0]&2097152&&(y.dragHandle=d[21]),h[0]&64&&(y.isConnectable=d[6]),h[0]&4096&&(y.positionAbsoluteX=d[12]),h[0]&8192&&(y.positionAbsoluteY=d[13]),h[0]&524288&&(y.width=d[19]),h[0]&1048576&&(y.height=d[20]),n.$set(y)}(!s||h[0]&2)&&k(e,"data-id",d[1]),(!s||h[0]&8388608&&i!==(i=ve(["svelte-flow__node",`svelte-flow__node-${d[29]}`,d[23]])))&&k(e,"class",i),(!s||h[0]&33554944&&o!==(o=(d[9]??"")+";"+d[25].width+d[25].height))&&k(e,"style",o),l&&ze(l.update)&&h[0]&2097186&&l.update.call(null,{nodeId:d[1],isSelectable:d[5],disabled:!1,handleSelector:d[21],noDragClass:"nodrag",onNodeMouseDown:d[28],onDrag:d[42],onDragStart:d[43],onDragStop:d[44],store:d[26]}),(!s||h[0]&8388864)&&_e(e,"dragging",d[8]),(!s||h[0]&8388616)&&_e(e,"selected",d[3]),(!s||h[0]&8388624)&&_e(e,"draggable",d[4]),(!s||h[0]&8388672)&&_e(e,"connectable",d[6]),(!s||h[0]&8388640)&&_e(e,"selectable",d[5]),(!s||h[0]&8388624)&&_e(e,"nopan",d[4]),(!s||h[0]&8390656)&&_e(e,"parent",d[11]);const m=h[0]&33554944;(h[0]&33817088||m)&&fe(e,"z-index",d[18]),(h[0]&33604096&&r!==(r=`translate(${d[14]}px, ${d[15]}px)`)||m)&&fe(e,"transform",r),(h[0]&37749248||m)&&fe(e,"visibility",d[22]?"visible":"hidden")},i(d){s||(n&&Y(n.$$.fragment,d),s=!0)},o(d){n&&B(n.$$.fragment,d),s=!1},d(d){d&&K(e),n&&ee(n),t[45](null),a=!1,Te(u)}}}function vh(t){let e,n,i=!t[7]&&Uo(t);return{c(){i&&i.c(),e=Ie()},m(o,l){i&&i.m(o,l),F(o,e,l),n=!0},p(o,l){o[7]?i&&(Pe(),B(i,1,1,()=>{i=null}),He()):i?(i.p(o,l),l[0]&128&&Y(i,1)):(i=Uo(o),i.c(),Y(i,1),i.m(e.parentNode,e))},i(o){n||(Y(i),n=!0)},o(o){B(i),n=!1},d(o){o&&K(e),i&&i.d(o)}}}function Sh(t,e,n){let i,o,{node:l}=e,{id:r}=e,{data:s={}}=e,{selected:a=!1}=e,{draggable:u=void 0}=e,{selectable:c=void 0}=e,{connectable:f=!0}=e,{hidden:d=!1}=e,{dragging:h=!1}=e,{resizeObserver:m=null}=e,{style:y=void 0}=e,{type:E="default"}=e,{isParent:g=!1}=e,{positionX:v}=e,{positionY:_}=e,{positionOriginX:b}=e,{positionOriginY:C}=e,{sourcePosition:T=void 0}=e,{targetPosition:H=void 0}=e,{zIndex:M}=e,{computedWidth:P=void 0}=e,{computedHeight:w=void 0}=e,{initialWidth:z=void 0}=e,{initialHeight:p=void 0}=e,{width:N=void 0}=e,{height:S=void 0}=e,{dragHandle:O=void 0}=e,{initialized:A=!1}=e,{class:V=""}=e;const L=Ce(),{nodeTypes:W,nodeDragThreshold:U,selectNodesOnDrag:J,handleNodeSelection:D,updateNodeDimensions:oe}=L;Q(t,W,G=>n(50,o=G));const ne=E||"default";let R,q;!!o[ne]||console.warn("003",Pn.error003(E));const le=o[ne]||Xr,I=ui(),we=re(f);let ke,Ae,Me;gn("svelteflow__node_id",r),gn("svelteflow__node_connectable",we),Zi(()=>{m==null||m.unobserve(R)});function Ge(G){c&&(!Z(J)||!u||Z(U)>0)&&D(r),I("nodeclick",{node:l,event:G})}const Ee=(G,Je,We,x)=>{I("nodedrag",{event:G,node:We,nodes:x})},st=(G,Je,We,x)=>{I("nodedragstart",{event:G,node:We,nodes:x})},at=(G,Je,We,x)=>{I("nodedragstop",{event:G,node:We,nodes:x})};function tt(G){mt[G?"unshift":"push"](()=>{R=G,n(24,R)})}const nt=G=>I("nodemouseenter",{node:l,event:G}),ie=G=>I("nodemouseleave",{node:l,event:G}),bt=G=>I("nodemousemove",{node:l,event:G}),wt=G=>I("nodecontextmenu",{node:l,event:G});return t.$$set=G=>{"node"in G&&n(0,l=G.node),"id"in G&&n(1,r=G.id),"data"in G&&n(2,s=G.data),"selected"in G&&n(3,a=G.selected),"draggable"in G&&n(4,u=G.draggable),"selectable"in G&&n(5,c=G.selectable),"connectable"in G&&n(6,f=G.connectable),"hidden"in G&&n(7,d=G.hidden),"dragging"in G&&n(8,h=G.dragging),"resizeObserver"in G&&n(33,m=G.resizeObserver),"style"in G&&n(9,y=G.style),"type"in G&&n(10,E=G.type),"isParent"in G&&n(11,g=G.isParent),"positionX"in G&&n(12,v=G.positionX),"positionY"in G&&n(13,_=G.positionY),"positionOriginX"in G&&n(14,b=G.positionOriginX),"positionOriginY"in G&&n(15,C=G.positionOriginY),"sourcePosition"in G&&n(16,T=G.sourcePosition),"targetPosition"in G&&n(17,H=G.targetPosition),"zIndex"in G&&n(18,M=G.zIndex),"computedWidth"in G&&n(34,P=G.computedWidth),"computedHeight"in G&&n(35,w=G.computedHeight),"initialWidth"in G&&n(36,z=G.initialWidth),"initialHeight"in G&&n(37,p=G.initialHeight),"width"in G&&n(19,N=G.width),"height"in G&&n(20,S=G.height),"dragHandle"in G&&n(21,O=G.dragHandle),"initialized"in G&&n(22,A=G.initialized),"class"in G&&n(23,V=G.class)},t.$$.update=()=>{t.$$.dirty[0]&1572864|t.$$.dirty[1]&120&&n(25,i=kh({width:N,height:S,initialWidth:z,initialHeight:p,computedWidth:P,computedHeight:w})),t.$$.dirty[0]&64&&we.set(!!f),t.$$.dirty[0]&16973826|t.$$.dirty[1]&1792&&((ke&&ne!==ke||Ae&&T!==Ae||Me&&H!==Me)&&requestAnimationFrame(()=>oe(new Map([[r,{id:r,nodeElement:R,forceUpdate:!0}]]))),n(39,ke=ne),n(40,Ae=T),n(41,Me=H)),t.$$.dirty[0]&16777216|t.$$.dirty[1]&156&&R&&(q?(q!==R||!P&&!w)&&(m==null||m.unobserve(q),m==null||m.observe(R),n(38,q=R)):(m==null||m.observe(R),n(38,q=R)))},[l,r,s,a,u,c,f,d,h,y,E,g,v,_,b,C,T,H,M,N,S,O,A,V,R,i,L,W,D,ne,le,I,Ge,m,P,w,z,p,q,ke,Ae,Me,Ee,st,at,tt,nt,ie,bt,wt]}class Eh extends ue{constructor(e){super(),ae(this,e,Sh,vh,Yl,{node:0,id:1,data:2,selected:3,draggable:4,selectable:5,connectable:6,hidden:7,dragging:8,resizeObserver:33,style:9,type:10,isParent:11,positionX:12,positionY:13,positionOriginX:14,positionOriginY:15,sourcePosition:16,targetPosition:17,zIndex:18,computedWidth:34,computedHeight:35,initialWidth:36,initialHeight:37,width:19,height:20,dragHandle:21,initialized:22,class:23},null,[-1,-1])}}const Ch=Eh,{Map:Mh}=_s;function Go(t,e,n){var r,s,a,u;const i=t.slice();i[18]=e[n];const o=Nn(i[18]);i[19]=o;const l=yf({x:((s=(r=i[18].computed)==null?void 0:r.positionAbsolute)==null?void 0:s.x)??0,y:((u=(a=i[18].computed)==null?void 0:a.positionAbsolute)==null?void 0:u.y)??0,...i[19],origin:i[18].origin});return i[20]=l,i}function Jo(t,e){var l,r,s,a,u,c,f,d;let n,i,o;return i=new Ch({props:{node:e[18],id:e[18].id,data:e[18].data,selected:!!e[18].selected,hidden:!!e[18].hidden,draggable:!!(e[18].draggable||e[1]&&typeof e[18].draggable>"u"),selectable:!!(e[18].selectable||e[2]&&typeof e[18].selectable>"u"),connectable:!!(e[18].connectable||e[3]&&typeof e[18].connectable>"u"),positionX:((r=(l=e[18].computed)==null?void 0:l.positionAbsolute)==null?void 0:r.x)??0,positionY:((a=(s=e[18].computed)==null?void 0:s.positionAbsolute)==null?void 0:a.y)??0,positionOriginX:e[20].x??0,positionOriginY:e[20].y??0,isParent:!!((u=e[18][Ne])!=null&&u.isParent),style:e[18].style,class:e[18].class,type:e[18].type??"default",sourcePosition:e[18].sourcePosition,targetPosition:e[18].targetPosition,dragging:e[18].dragging,zIndex:((c=e[18][Ne])==null?void 0:c.z)??0,dragHandle:e[18].dragHandle,initialized:si(e[18]),width:e[18].width,height:e[18].height,initialWidth:e[18].initialWidth,initialHeight:e[18].initialHeight,computedWidth:(f=e[18].computed)==null?void 0:f.width,computedHeight:(d=e[18].computed)==null?void 0:d.height,resizeObserver:e[8]}}),i.$on("nodeclick",e[9]),i.$on("nodemouseenter",e[10]),i.$on("nodemousemove",e[11]),i.$on("nodemouseleave",e[12]),i.$on("nodedrag",e[13]),i.$on("nodedragstart",e[14]),i.$on("nodedragstop",e[15]),i.$on("nodecontextmenu",e[16]),{key:t,first:null,c(){n=Ie(),te(i.$$.fragment),this.first=n},m(h,m){F(h,n,m),$(i,h,m),o=!0},p(h,m){var E,g,v,_,b,C,T,H;e=h;const y={};m&1&&(y.node=e[18]),m&1&&(y.id=e[18].id),m&1&&(y.data=e[18].data),m&1&&(y.selected=!!e[18].selected),m&1&&(y.hidden=!!e[18].hidden),m&3&&(y.draggable=!!(e[18].draggable||e[1]&&typeof e[18].draggable>"u")),m&5&&(y.selectable=!!(e[18].selectable||e[2]&&typeof e[18].selectable>"u")),m&9&&(y.connectable=!!(e[18].connectable||e[3]&&typeof e[18].connectable>"u")),m&1&&(y.positionX=((g=(E=e[18].computed)==null?void 0:E.positionAbsolute)==null?void 0:g.x)??0),m&1&&(y.positionY=((_=(v=e[18].computed)==null?void 0:v.positionAbsolute)==null?void 0:_.y)??0),m&1&&(y.positionOriginX=e[20].x??0),m&1&&(y.positionOriginY=e[20].y??0),m&1&&(y.isParent=!!((b=e[18][Ne])!=null&&b.isParent)),m&1&&(y.style=e[18].style),m&1&&(y.class=e[18].class),m&1&&(y.type=e[18].type??"default"),m&1&&(y.sourcePosition=e[18].sourcePosition),m&1&&(y.targetPosition=e[18].targetPosition),m&1&&(y.dragging=e[18].dragging),m&1&&(y.zIndex=((C=e[18][Ne])==null?void 0:C.z)??0),m&1&&(y.dragHandle=e[18].dragHandle),m&1&&(y.initialized=si(e[18])),m&1&&(y.width=e[18].width),m&1&&(y.height=e[18].height),m&1&&(y.initialWidth=e[18].initialWidth),m&1&&(y.initialHeight=e[18].initialHeight),m&1&&(y.computedWidth=(T=e[18].computed)==null?void 0:T.width),m&1&&(y.computedHeight=(H=e[18].computed)==null?void 0:H.height),i.$set(y)},i(h){o||(Y(i.$$.fragment,h),o=!0)},o(h){B(i.$$.fragment,h),o=!1},d(h){h&&K(n),ee(i,h)}}}function zh(t){let e,n=[],i=new Mh,o,l=Oe(t[0]);const r=s=>s[18].id;for(let s=0;s<l.length;s+=1){let a=Go(t,l,s),u=r(a);i.set(u,n[s]=Jo(u,a))}return{c(){e=ye("div");for(let s=0;s<n.length;s+=1)n[s].c();k(e,"class","svelte-flow__nodes svelte-tf4uy4")},m(s,a){F(s,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);o=!0},p(s,[a]){a&271&&(l=Oe(s[0]),Pe(),n=fi(n,a,r,1,s,l,i,e,ci,Jo,null,Go),He())},i(s){if(!o){for(let a=0;a<l.length;a+=1)Y(n[a]);o=!0}},o(s){for(let a=0;a<n.length;a+=1)B(n[a]);o=!1},d(s){s&&K(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Ph(t,e,n){let i,o,l,r;const{visibleNodes:s,nodesDraggable:a,nodesConnectable:u,elementsSelectable:c,updateNodeDimensions:f}=Ce();Q(t,s,C=>n(0,i=C)),Q(t,a,C=>n(1,o=C)),Q(t,u,C=>n(3,r=C)),Q(t,c,C=>n(2,l=C));const d=typeof ResizeObserver>"u"?null:new ResizeObserver(C=>{const T=new Map;C.forEach(H=>{const M=H.target.getAttribute("data-id");T.set(M,{id:M,nodeElement:H.target,forceUpdate:!0})}),f(T)});Zi(()=>{d==null||d.disconnect()});function h(C){Se.call(this,t,C)}function m(C){Se.call(this,t,C)}function y(C){Se.call(this,t,C)}function E(C){Se.call(this,t,C)}function g(C){Se.call(this,t,C)}function v(C){Se.call(this,t,C)}function _(C){Se.call(this,t,C)}function b(C){Se.call(this,t,C)}return[i,o,l,r,s,a,u,c,d,h,m,y,E,g,v,_,b]}class Hh extends ue{constructor(e){super(),ae(this,e,Ph,zh,ce,{})}}function Qo(t){let e,n,i,o,l,r,s,a;var u=t[25];function c(f,d){return{props:{id:f[0],source:f[1],target:f[2],sourceX:f[13],sourceY:f[14],targetX:f[15],targetY:f[16],sourcePosition:f[17],targetPosition:f[18],animated:f[6],selected:f[7],label:f[9],labelStyle:f[10],data:f[3],style:f[4],interactionWidth:f[20],sourceHandleId:f[11],targetHandleId:f[12],markerStart:f[24],markerEnd:f[23]}}}return u&&(i=Jn(u,c(t))),{c(){e=he("svg"),n=he("g"),i&&te(i.$$.fragment),k(n,"class",o=ve(["svelte-flow__edge",t[21]])),k(n,"data-id",t[0]),k(n,"aria-label",l=t[19]===null?void 0:t[19]?t[19]:`Edge from ${t[1]} to ${t[2]}`),k(n,"role","img"),_e(n,"animated",t[6]),_e(n,"selected",t[7]),_e(n,"selectable",t[22]),fe(e,"zIndex",t[5])},m(f,d){F(f,e,d),me(e,n),i&&$(i,n,null),r=!0,s||(a=[be(n,"click",t[30]),be(n,"contextmenu",t[31])],s=!0)},p(f,d){if(d[0]&33554432&&u!==(u=f[25])){if(i){Pe();const h=i;B(h.$$.fragment,1,0,()=>{ee(h,1)}),He()}u?(i=Jn(u,c(f)),te(i.$$.fragment),Y(i.$$.fragment,1),$(i,n,null)):i=null}else if(u){const h={};d[0]&1&&(h.id=f[0]),d[0]&2&&(h.source=f[1]),d[0]&4&&(h.target=f[2]),d[0]&8192&&(h.sourceX=f[13]),d[0]&16384&&(h.sourceY=f[14]),d[0]&32768&&(h.targetX=f[15]),d[0]&65536&&(h.targetY=f[16]),d[0]&131072&&(h.sourcePosition=f[17]),d[0]&262144&&(h.targetPosition=f[18]),d[0]&64&&(h.animated=f[6]),d[0]&128&&(h.selected=f[7]),d[0]&512&&(h.label=f[9]),d[0]&1024&&(h.labelStyle=f[10]),d[0]&8&&(h.data=f[3]),d[0]&16&&(h.style=f[4]),d[0]&1048576&&(h.interactionWidth=f[20]),d[0]&2048&&(h.sourceHandleId=f[11]),d[0]&4096&&(h.targetHandleId=f[12]),d[0]&16777216&&(h.markerStart=f[24]),d[0]&8388608&&(h.markerEnd=f[23]),i.$set(h)}(!r||d[0]&2097152&&o!==(o=ve(["svelte-flow__edge",f[21]])))&&k(n,"class",o),(!r||d[0]&1)&&k(n,"data-id",f[0]),(!r||d[0]&524294&&l!==(l=f[19]===null?void 0:f[19]?f[19]:`Edge from ${f[1]} to ${f[2]}`))&&k(n,"aria-label",l),(!r||d[0]&2097216)&&_e(n,"animated",f[6]),(!r||d[0]&2097280)&&_e(n,"selected",f[7]),(!r||d[0]&6291456)&&_e(n,"selectable",f[22]),d[0]&32&&fe(e,"zIndex",f[5])},i(f){r||(i&&Y(i.$$.fragment,f),r=!0)},o(f){i&&B(i.$$.fragment,f),r=!1},d(f){f&&K(e),i&&ee(i),s=!1,Te(a)}}}function Nh(t){let e,n,i=!t[8]&&Qo(t);return{c(){i&&i.c(),e=Ie()},m(o,l){i&&i.m(o,l),F(o,e,l),n=!0},p(o,l){o[8]?i&&(Pe(),B(i,1,1,()=>{i=null}),He()):i?(i.p(o,l),l[0]&256&&Y(i,1)):(i=Qo(o),i.c(),Y(i,1),i.m(e.parentNode,e))},i(o){n||(Y(i),n=!0)},o(o){B(i),n=!1},d(o){o&&K(e),i&&i.d(o)}}}function Ah(t,e,n){let i,o,l,r,s,a,u,c,{id:f}=e,{type:d="default"}=e,{source:h=""}=e,{target:m=""}=e,{data:y={}}=e,{style:E=void 0}=e,{zIndex:g=void 0}=e,{animated:v=!1}=e,{selected:_=!1}=e,{selectable:b=void 0}=e,{hidden:C=!1}=e,{label:T=void 0}=e,{labelStyle:H=void 0}=e,{markerStart:M=void 0}=e,{markerEnd:P=void 0}=e,{sourceHandle:w=void 0}=e,{targetHandle:z=void 0}=e,{sourceX:p}=e,{sourceY:N}=e,{targetX:S}=e,{targetY:O}=e,{sourcePosition:A}=e,{targetPosition:V}=e,{ariaLabel:L=void 0}=e,{interactionWidth:W=void 0}=e,{class:U=""}=e;gn("svelteflow__edge_id",f);const{edgeLookup:J,edgeTypes:D,flowId:oe,elementsSelectable:ne}=Ce();Q(t,J,I=>n(39,s=I)),Q(t,D,I=>n(38,c=I)),Q(t,oe,I=>n(37,u=I)),Q(t,ne,I=>n(36,a=I));const R=ui(),q=pr();function j(I){const we=s.get(f);we&&(q(f),R("edgeclick",{event:I,edge:we}))}function le(I){const we=s.get(f);we&&R("edgecontextmenu",{event:I,edge:we})}return t.$$set=I=>{"id"in I&&n(0,f=I.id),"type"in I&&n(32,d=I.type),"source"in I&&n(1,h=I.source),"target"in I&&n(2,m=I.target),"data"in I&&n(3,y=I.data),"style"in I&&n(4,E=I.style),"zIndex"in I&&n(5,g=I.zIndex),"animated"in I&&n(6,v=I.animated),"selected"in I&&n(7,_=I.selected),"selectable"in I&&n(33,b=I.selectable),"hidden"in I&&n(8,C=I.hidden),"label"in I&&n(9,T=I.label),"labelStyle"in I&&n(10,H=I.labelStyle),"markerStart"in I&&n(34,M=I.markerStart),"markerEnd"in I&&n(35,P=I.markerEnd),"sourceHandle"in I&&n(11,w=I.sourceHandle),"targetHandle"in I&&n(12,z=I.targetHandle),"sourceX"in I&&n(13,p=I.sourceX),"sourceY"in I&&n(14,N=I.sourceY),"targetX"in I&&n(15,S=I.targetX),"targetY"in I&&n(16,O=I.targetY),"sourcePosition"in I&&n(17,A=I.sourcePosition),"targetPosition"in I&&n(18,V=I.targetPosition),"ariaLabel"in I&&n(19,L=I.ariaLabel),"interactionWidth"in I&&n(20,W=I.interactionWidth),"class"in I&&n(21,U=I.class)},t.$$.update=()=>{t.$$.dirty[1]&130&&n(25,i=c[d]||Yr),t.$$.dirty[1]&72&&n(24,o=M?`url(#${Fi(M,u)})`:void 0),t.$$.dirty[1]&80&&n(23,l=P?`url(#${Fi(P,u)})`:void 0),t.$$.dirty[1]&36&&n(22,r=b||a&&typeof b>"u")},[f,h,m,y,E,g,v,_,C,T,H,w,z,p,N,S,O,A,V,L,W,U,r,l,o,i,J,D,oe,ne,j,le,d,b,M,P,a,u,c]}class Th extends ue{constructor(e){super(),ae(this,e,Ah,Nh,Yl,{id:0,type:32,source:1,target:2,data:3,style:4,zIndex:5,animated:6,selected:7,selectable:33,hidden:8,label:9,labelStyle:10,markerStart:34,markerEnd:35,sourceHandle:11,targetHandle:12,sourceX:13,sourceY:14,targetX:15,targetY:16,sourcePosition:17,targetPosition:18,ariaLabel:19,interactionWidth:20,class:21},null,[-1,-1])}}const Oh=Th;function Ih(t,e,n){let{onMount:i=void 0}=e,{onDestroy:o=void 0}=e;return Cn(()=>(i==null||i(),o)),t.$$set=l=>{"onMount"in l&&n(0,i=l.onMount),"onDestroy"in l&&n(1,o=l.onDestroy)},[i,o]}class Dh extends ue{constructor(e){super(),ae(this,e,Ih,null,ce,{onMount:0,onDestroy:1})}}const Xh=Dh;function jo(t,e,n){const i=t.slice();return i[2]=e[n],i}function xo(t,e){let n,i,o;const l=[e[2]];let r={};for(let s=0;s<l.length;s+=1)r=Le(r,l[s]);return i=new Kh({props:r}),{key:t,first:null,c(){n=Ie(),te(i.$$.fragment),this.first=n},m(s,a){F(s,n,a),$(i,s,a),o=!0},p(s,a){e=s;const u=a&1?_t(l,[Ft(e[2])]):{};i.$set(u)},i(s){o||(Y(i.$$.fragment,s),o=!0)},o(s){B(i.$$.fragment,s),o=!1},d(s){s&&K(n),ee(i,s)}}}function ph(t){let e,n=[],i=new Map,o,l=Oe(t[0]);const r=s=>s[2].id;for(let s=0;s<l.length;s+=1){let a=jo(t,l,s),u=r(a);i.set(u,n[s]=xo(u,a))}return{c(){e=he("defs");for(let s=0;s<n.length;s+=1)n[s].c()},m(s,a){F(s,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);o=!0},p(s,[a]){a&1&&(l=Oe(s[0]),Pe(),n=fi(n,a,r,1,s,l,i,e,ci,xo,null,jo),He())},i(s){if(!o){for(let a=0;a<l.length;a+=1)Y(n[a]);o=!0}},o(s){for(let a=0;a<n.length;a+=1)B(n[a]);o=!1},d(s){s&&K(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Yh(t,e,n){let i;const{markers:o}=Ce();return Q(t,o,l=>n(0,i=l)),[i,o]}class Lh extends ue{constructor(e){super(),ae(this,e,Yh,ph,ce,{})}}function Rh(t){let e;return{c(){e=he("polyline"),k(e,"stroke",t[6]),k(e,"stroke-linecap","round"),k(e,"stroke-linejoin","round"),k(e,"stroke-width",t[7]),k(e,"fill",t[6]),k(e,"points","-5,-4 0,0 -5,4 -5,-4")},m(n,i){F(n,e,i)},p(n,i){i&64&&k(e,"stroke",n[6]),i&128&&k(e,"stroke-width",n[7]),i&64&&k(e,"fill",n[6])},d(n){n&&K(e)}}}function Vh(t){let e;return{c(){e=he("polyline"),k(e,"stroke",t[6]),k(e,"stroke-linecap","round"),k(e,"stroke-linejoin","round"),k(e,"stroke-width",t[7]),k(e,"fill","none"),k(e,"points","-5,-4 0,0 -5,4")},m(n,i){F(n,e,i)},p(n,i){i&64&&k(e,"stroke",n[6]),i&128&&k(e,"stroke-width",n[7])},d(n){n&&K(e)}}}function Wh(t){let e,n,i;function o(s,a){if(s[1]===Gt.Arrow)return Vh;if(s[1]===Gt.ArrowClosed)return Rh}let l=o(t),r=l&&l(t);return{c(){e=he("marker"),r&&r.c(),k(e,"class","svelte-flow__arrowhead"),k(e,"id",t[0]),k(e,"markerWidth",n=`${t[2]}`),k(e,"markerHeight",i=`${t[3]}`),k(e,"viewBox","-10 -10 20 20"),k(e,"markerUnits",t[4]),k(e,"orient",t[5]),k(e,"refX","0"),k(e,"refY","0")},m(s,a){F(s,e,a),r&&r.m(e,null)},p(s,[a]){l===(l=o(s))&&r?r.p(s,a):(r&&r.d(1),r=l&&l(s),r&&(r.c(),r.m(e,null))),a&1&&k(e,"id",s[0]),a&4&&n!==(n=`${s[2]}`)&&k(e,"markerWidth",n),a&8&&i!==(i=`${s[3]}`)&&k(e,"markerHeight",i),a&16&&k(e,"markerUnits",s[4]),a&32&&k(e,"orient",s[5])},i:se,o:se,d(s){s&&K(e),r&&r.d()}}}function Bh(t,e,n){let{id:i}=e,{type:o}=e,{width:l=12.5}=e,{height:r=12.5}=e,{markerUnits:s="strokeWidth"}=e,{orient:a="auto-start-reverse"}=e,{color:u=void 0}=e,{strokeWidth:c=void 0}=e;return t.$$set=f=>{"id"in f&&n(0,i=f.id),"type"in f&&n(1,o=f.type),"width"in f&&n(2,l=f.width),"height"in f&&n(3,r=f.height),"markerUnits"in f&&n(4,s=f.markerUnits),"orient"in f&&n(5,a=f.orient),"color"in f&&n(6,u=f.color),"strokeWidth"in f&&n(7,c=f.strokeWidth)},[i,o,l,r,s,a,u,c]}class Kh extends ue{constructor(e){super(),ae(this,e,Bh,Wh,ce,{id:0,type:1,width:2,height:3,markerUnits:4,orient:5,color:6,strokeWidth:7})}}function $o(t,e,n){const i=t.slice();return i[10]=e[n],i}function el(t,e){let n,i,o;return i=new Oh({props:{id:e[10].id,source:e[10].source,target:e[10].target,data:e[10].data,style:e[10].style,animated:e[10].animated,selected:e[10].selected,selectable:e[10].selectable,hidden:e[10].hidden,label:e[10].label,labelStyle:e[10].labelStyle,markerStart:e[10].markerStart,markerEnd:e[10].markerEnd,sourceHandle:e[10].sourceHandle,targetHandle:e[10].targetHandle,sourceX:e[10].sourceX,sourceY:e[10].sourceY,targetX:e[10].targetX,targetY:e[10].targetY,sourcePosition:e[10].sourcePosition,targetPosition:e[10].targetPosition,ariaLabel:e[10].ariaLabel,interactionWidth:e[10].interactionWidth,class:e[10].class,type:e[10].type||"default",zIndex:e[10].zIndex}}),i.$on("edgeclick",e[5]),i.$on("edgecontextmenu",e[6]),{key:t,first:null,c(){n=Ie(),te(i.$$.fragment),this.first=n},m(l,r){F(l,n,r),$(i,l,r),o=!0},p(l,r){e=l;const s={};r&1&&(s.id=e[10].id),r&1&&(s.source=e[10].source),r&1&&(s.target=e[10].target),r&1&&(s.data=e[10].data),r&1&&(s.style=e[10].style),r&1&&(s.animated=e[10].animated),r&1&&(s.selected=e[10].selected),r&1&&(s.selectable=e[10].selectable),r&1&&(s.hidden=e[10].hidden),r&1&&(s.label=e[10].label),r&1&&(s.labelStyle=e[10].labelStyle),r&1&&(s.markerStart=e[10].markerStart),r&1&&(s.markerEnd=e[10].markerEnd),r&1&&(s.sourceHandle=e[10].sourceHandle),r&1&&(s.targetHandle=e[10].targetHandle),r&1&&(s.sourceX=e[10].sourceX),r&1&&(s.sourceY=e[10].sourceY),r&1&&(s.targetX=e[10].targetX),r&1&&(s.targetY=e[10].targetY),r&1&&(s.sourcePosition=e[10].sourcePosition),r&1&&(s.targetPosition=e[10].targetPosition),r&1&&(s.ariaLabel=e[10].ariaLabel),r&1&&(s.interactionWidth=e[10].interactionWidth),r&1&&(s.class=e[10].class),r&1&&(s.type=e[10].type||"default"),r&1&&(s.zIndex=e[10].zIndex),i.$set(s)},i(l){o||(Y(i.$$.fragment,l),o=!0)},o(l){B(i.$$.fragment,l),o=!1},d(l){l&&K(n),ee(i,l)}}}function tl(t){let e,n;return e=new Xh({props:{onMount:t[7],onDestroy:t[8]}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p(i,o){const l={};o&2&&(l.onMount=i[7]),o&2&&(l.onDestroy=i[8]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function Fh(t){let e,n,i,o,l=[],r=new Map,s,a;i=new Lh({});let u=Oe(t[0]);const c=d=>d[10].id;for(let d=0;d<u.length;d+=1){let h=$o(t,u,d),m=c(h);r.set(m,l[d]=el(m,h))}let f=t[0].length>0&&tl(t);return{c(){e=ye("div"),n=he("svg"),te(i.$$.fragment),o=de();for(let d=0;d<l.length;d+=1)l[d].c();s=de(),f&&f.c(),k(n,"class","svelte-flow__marker"),k(e,"class","svelte-flow__edges")},m(d,h){F(d,e,h),me(e,n),$(i,n,null),me(e,o);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(e,null);me(e,s),f&&f.m(e,null),a=!0},p(d,[h]){h&1&&(u=Oe(d[0]),Pe(),l=fi(l,h,c,1,d,u,r,e,ci,el,s,$o),He()),d[0].length>0?f?(f.p(d,h),h&1&&Y(f,1)):(f=tl(d),f.c(),Y(f,1),f.m(e,null)):f&&(Pe(),B(f,1,1,()=>{f=null}),He())},i(d){if(!a){Y(i.$$.fragment,d);for(let h=0;h<u.length;h+=1)Y(l[h]);Y(f),a=!0}},o(d){B(i.$$.fragment,d);for(let h=0;h<l.length;h+=1)B(l[h]);B(f),a=!1},d(d){d&&K(e),ee(i);for(let h=0;h<l.length;h+=1)l[h].d();f&&f.d()}}}function qh(t,e,n){let i,o,{defaultEdgeOptions:l}=e;const{visibleEdges:r,edgesInitialized:s,edges:{setDefaultOptions:a}}=Ce();Q(t,r,h=>n(0,i=h)),Q(t,s,h=>n(1,o=h)),Cn(()=>{l&&a(l)});function u(h){Se.call(this,t,h)}function c(h){Se.call(this,t,h)}const f=()=>{Gn(s,o=!0,o)},d=()=>{Gn(s,o=!1,o)};return t.$$set=h=>{"defaultEdgeOptions"in h&&n(4,l=h.defaultEdgeOptions)},[i,o,r,s,l,u,c,f,d]}class Zh extends ue{constructor(e){super(),ae(this,e,qh,Fh,ce,{defaultEdgeOptions:4})}}const Uh=Zh;function nl(t){let e;return{c(){e=ye("div"),k(e,"class","svelte-flow__selection svelte-1iugwpu"),fe(e,"width",typeof t[2]=="string"?t[2]:`${t[2]}px`),fe(e,"height",typeof t[3]=="string"?t[3]:`${t[3]}px`),fe(e,"transform",`translate(${t[0]}px, ${t[1]}px)`)},m(n,i){F(n,e,i)},p(n,i){i&4&&fe(e,"width",typeof n[2]=="string"?n[2]:`${n[2]}px`),i&8&&fe(e,"height",typeof n[3]=="string"?n[3]:`${n[3]}px`),i&3&&fe(e,"transform",`translate(${n[0]}px, ${n[1]}px)`)},d(n){n&&K(e)}}}function Gh(t){let e,n=t[4]&&nl(t);return{c(){n&&n.c(),e=Ie()},m(i,o){n&&n.m(i,o),F(i,e,o)},p(i,[o]){i[4]?n?n.p(i,o):(n=nl(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:se,o:se,d(i){i&&K(e),n&&n.d(i)}}}function Jh(t,e,n){let{x:i=0}=e,{y:o=0}=e,{width:l=0}=e,{height:r=0}=e,{isVisible:s=!0}=e;return t.$$set=a=>{"x"in a&&n(0,i=a.x),"y"in a&&n(1,o=a.y),"width"in a&&n(2,l=a.width),"height"in a&&n(3,r=a.height),"isVisible"in a&&n(4,s=a.isVisible)},[i,o,l,r,s]}class Qh extends ue{constructor(e){super(),ae(this,e,Jh,Gh,ce,{x:0,y:1,width:2,height:3,isVisible:4})}}const Kr=Qh;function jh(t){var i,o,l,r;let e,n;return e=new Kr({props:{isVisible:!!(t[0]&&t[1]==="user"),width:(i=t[0])==null?void 0:i.width,height:(o=t[0])==null?void 0:o.height,x:(l=t[0])==null?void 0:l.x,y:(r=t[0])==null?void 0:r.y}}),{c(){te(e.$$.fragment)},m(s,a){$(e,s,a),n=!0},p(s,[a]){var c,f,d,h;const u={};a&3&&(u.isVisible=!!(s[0]&&s[1]==="user")),a&1&&(u.width=(c=s[0])==null?void 0:c.width),a&1&&(u.height=(f=s[0])==null?void 0:f.height),a&1&&(u.x=(d=s[0])==null?void 0:d.x),a&1&&(u.y=(h=s[0])==null?void 0:h.y),e.$set(u)},i(s){n||(Y(e.$$.fragment,s),n=!0)},o(s){B(e.$$.fragment,s),n=!1},d(s){ee(e,s)}}}function xh(t,e,n){let i,o;const{selectionRect:l,selectionRectMode:r}=Ce();return Q(t,l,s=>n(0,i=s)),Q(t,r,s=>n(1,o=s)),[i,o,l,r]}class $h extends ue{constructor(e){super(),ae(this,e,xh,jh,ce,{})}}function il(t){let e,n,i,o,l;return n=new Kr({props:{width:"100%",height:"100%",x:0,y:0}}),{c(){e=ye("div"),te(n.$$.fragment),k(e,"class","selection-wrapper nopan svelte-5pxri"),fe(e,"width",t[1].width+"px"),fe(e,"height",t[1].height+"px"),fe(e,"transform","translate("+t[1].x+"px, "+t[1].y+"px)")},m(r,s){F(r,e,s),$(n,e,null),i=!0,o||(l=[Ve(Br.call(null,e,{disabled:!1,store:t[3]})),be(e,"contextmenu",t[6]),be(e,"click",t[7])],o=!0)},p(r,s){(!i||s&2)&&fe(e,"width",r[1].width+"px"),(!i||s&2)&&fe(e,"height",r[1].height+"px"),(!i||s&2)&&fe(e,"transform","translate("+r[1].x+"px, "+r[1].y+"px)")},i(r){i||(Y(n.$$.fragment,r),i=!0)},o(r){B(n.$$.fragment,r),i=!1},d(r){r&&K(e),ee(n),o=!1,Te(l)}}}function e0(t){let e,n,i=t[0]&&t[2]==="nodes"&&il(t);return{c(){i&&i.c(),e=Ie()},m(o,l){i&&i.m(o,l),F(o,e,l),n=!0},p(o,[l]){o[0]&&o[2]==="nodes"?i?(i.p(o,l),l&5&&Y(i,1)):(i=il(o),i.c(),Y(i,1),i.m(e.parentNode,e)):i&&(Pe(),B(i,1,1,()=>{i=null}),He())},i(o){n||(Y(i),n=!0)},o(o){B(i),n=!1},d(o){o&&K(e),i&&i.d(o)}}}function t0(t,e,n){let i,o,l,r;const s=Ce(),{selectionRectMode:a,nodes:u}=s;Q(t,a,h=>n(2,r=h)),Q(t,u,h=>n(8,l=h));const c=ui();function f(h){c("selectioncontextmenu",{nodes:i,event:h})}function d(h){c("selectionclick",{nodes:i,event:h})}return t.$$.update=()=>{t.$$.dirty&256&&n(0,i=l.filter(h=>h.selected)),t.$$.dirty&1&&n(1,o=Hn(i))},[i,o,r,s,a,u,f,d,l]}class n0 extends ue{constructor(e){super(),ae(this,e,t0,e0,ce,{})}}function it(t,e){let{enabled:n=!0,trigger:i,type:o="keydown"}=e;function l(r){const s=Array.isArray(i)?i:[i],a={alt:r.altKey,ctrl:r.ctrlKey,shift:r.shiftKey,meta:r.metaKey};for(const u of s){const c={modifier:[],preventDefault:!1,enabled:!0,...u},{modifier:f,key:d,callback:h,preventDefault:m,enabled:y}=c;if(y){if(f.length&&!(Array.isArray(f)?f:[f]).map(v=>typeof v=="string"?[v]:v).some(v=>v.every(_=>a[_])))continue;if(r.key===d){m&&r.preventDefault();const E={node:t,trigger:c,originalEvent:r};t.dispatchEvent(new CustomEvent("shortcut",{detail:E})),h==null||h(E)}}}}return n&&t.addEventListener(o,l),{update:r=>{const{enabled:s=!0,type:a="keydown"}=r;n&&(!s||o!==a)?t.removeEventListener(o,l):!n&&s&&t.addEventListener(a,l),n=s,o=a,i=r.trigger},destroy:()=>{t.removeEventListener(o,l)}}}function i0(t){let e,n,i,o,l,r,s,a,u,c,f,d;return{c:se,m(h,m){f||(d=[Ve(e=it.call(null,window,{trigger:[{...t[4],enabled:t[4].key!==null,callback:t[15]}],type:"keydown"})),Ve(n=it.call(null,window,{trigger:[{...t[4],enabled:t[4].key!==null,callback:t[16]}],type:"keyup"})),Ve(i=it.call(null,window,{trigger:[{...t[3],enabled:t[3].key!==null,callback:t[17]}],type:"keydown"})),Ve(o=it.call(null,window,{trigger:[{...t[3],enabled:t[3].key!==null,callback:t[18]}],type:"keyup"})),Ve(l=it.call(null,window,{trigger:[{...t[2],enabled:t[2].key!==null,callback:t[19]}],type:"keydown"})),Ve(r=it.call(null,window,{trigger:[{...t[2],enabled:t[2].key!==null,callback:t[20]}],type:"keyup"})),Ve(s=it.call(null,window,{trigger:[{...t[1],enabled:t[1].key!==null,callback:t[21]}],type:"keydown"})),Ve(a=it.call(null,window,{trigger:[{...t[1],enabled:t[1].key!==null,callback:t[22]}],type:"keyup"})),Ve(u=it.call(null,window,{trigger:[{...t[0],enabled:t[0].key!==null,callback:t[23]}],type:"keydown"})),Ve(c=it.call(null,window,{trigger:[{...t[0],enabled:t[0].key!==null,callback:t[24]}],type:"keyup"}))],f=!0)},p(h,[m]){e&&ze(e.update)&&m&16&&e.update.call(null,{trigger:[{...h[4],enabled:h[4].key!==null,callback:h[15]}],type:"keydown"}),n&&ze(n.update)&&m&16&&n.update.call(null,{trigger:[{...h[4],enabled:h[4].key!==null,callback:h[16]}],type:"keyup"}),i&&ze(i.update)&&m&8&&i.update.call(null,{trigger:[{...h[3],enabled:h[3].key!==null,callback:h[17]}],type:"keydown"}),o&&ze(o.update)&&m&8&&o.update.call(null,{trigger:[{...h[3],enabled:h[3].key!==null,callback:h[18]}],type:"keyup"}),l&&ze(l.update)&&m&4&&l.update.call(null,{trigger:[{...h[2],enabled:h[2].key!==null,callback:h[19]}],type:"keydown"}),r&&ze(r.update)&&m&4&&r.update.call(null,{trigger:[{...h[2],enabled:h[2].key!==null,callback:h[20]}],type:"keyup"}),s&&ze(s.update)&&m&2&&s.update.call(null,{trigger:[{...h[1],enabled:h[1].key!==null,callback:h[21]}],type:"keydown"}),a&&ze(a.update)&&m&2&&a.update.call(null,{trigger:[{...h[1],enabled:h[1].key!==null,callback:h[22]}],type:"keyup"}),u&&ze(u.update)&&m&1&&u.update.call(null,{trigger:[{...h[0],enabled:h[0].key!==null,callback:h[23]}],type:"keydown"}),c&&ze(c.update)&&m&1&&c.update.call(null,{trigger:[{...h[0],enabled:h[0].key!==null,callback:h[24]}],type:"keyup"})},i:se,o:se,d(h){f=!1,Te(d)}}}function Fr(t){return t!==null&&typeof t=="object"}function on(t){return Fr(t)?t.modifier||[]:[]}function ln(t){return t==null?"":Fr(t)?t.key:t}function o0(t,e,n){let i,o,l,r,s,{selectionKey:a="Shift"}=e,{multiSelectionKey:u=ri()?"Meta":"Control"}=e,{deleteKey:c="Backspace"}=e,{panActivationKey:f=" "}=e,{zoomActivationKey:d=ri()?"Meta":"Control"}=e;const{selectionKeyPressed:h,multiselectionKeyPressed:m,deleteKeyPressed:y,panActivationKeyPressed:E,zoomActivationKeyPressed:g}=Ce(),v=()=>h.set(!0),_=()=>h.set(!1),b=()=>m.set(!0),C=()=>m.set(!1),T=p=>{!(p.originalEvent.ctrlKey||p.originalEvent.metaKey||p.originalEvent.shiftKey)&&!kf(p.originalEvent)&&y.set(!0)},H=()=>y.set(!1),M=()=>E.set(!0),P=()=>E.set(!1),w=()=>g.set(!0),z=()=>g.set(!1);return t.$$set=p=>{"selectionKey"in p&&n(10,a=p.selectionKey),"multiSelectionKey"in p&&n(11,u=p.multiSelectionKey),"deleteKey"in p&&n(12,c=p.deleteKey),"panActivationKey"in p&&n(13,f=p.panActivationKey),"zoomActivationKey"in p&&n(14,d=p.zoomActivationKey)},t.$$.update=()=>{t.$$.dirty&1024&&n(4,i={key:ln(a),modifier:on(a)}),t.$$.dirty&2048&&n(3,o={key:ln(u),modifier:on(u)}),t.$$.dirty&4096&&n(2,l={key:ln(c),modifier:on(c)}),t.$$.dirty&8192&&n(1,r={key:ln(f),modifier:on(f)}),t.$$.dirty&16384&&n(0,s={key:ln(d),modifier:on(d)})},[s,r,l,o,i,h,m,y,E,g,a,u,c,f,d,v,_,b,C,T,H,M,P,w,z]}class l0 extends ue{constructor(e){super(),ae(this,e,o0,i0,ce,{selectionKey:10,multiSelectionKey:11,deleteKey:12,panActivationKey:13,zoomActivationKey:14})}}const r0=l0,s0=t=>({}),ol=t=>({});function ll(t){let e,n,i,o;const l=t[10].connectionLine,r=De(l,t,t[9],ol);let s=!t[2]&&rl(t);return{c(){e=he("svg"),n=he("g"),r&&r.c(),s&&s.c(),k(n,"class",i=ve(["svelte-flow__connection",t[3].status])),k(e,"width",t[4]),k(e,"height",t[5]),k(e,"class","svelte-flow__connectionline"),k(e,"style",t[0])},m(a,u){F(a,e,u),me(e,n),r&&r.m(n,null),s&&s.m(n,null),o=!0},p(a,u){r&&r.p&&(!o||u&512)&&pe(r,l,a,a[9],o?Xe(l,a[9],u,s0):Ye(a[9]),ol),a[2]?s&&(s.d(1),s=null):s?s.p(a,u):(s=rl(a),s.c(),s.m(n,null)),(!o||u&8&&i!==(i=ve(["svelte-flow__connection",a[3].status])))&&k(n,"class",i),(!o||u&16)&&k(e,"width",a[4]),(!o||u&32)&&k(e,"height",a[5]),(!o||u&1)&&k(e,"style",a[0])},i(a){o||(Y(r,a),o=!0)},o(a){B(r,a),o=!1},d(a){a&&K(e),r&&r.d(a),s&&s.d()}}}function rl(t){let e,n;return{c(){e=he("path"),k(e,"d",n=t[3].path),k(e,"style",t[1]),k(e,"fill","none"),k(e,"class","svelte-flow__connection-path")},m(i,o){F(i,e,o)},p(i,o){o&8&&n!==(n=i[3].path)&&k(e,"d",n),o&2&&k(e,"style",i[1])},d(i){i&&K(e)}}}function a0(t){let e,n,i=t[3].path&&ll(t);return{c(){i&&i.c(),e=Ie()},m(o,l){i&&i.m(o,l),F(o,e,l),n=!0},p(o,[l]){o[3].path?i?(i.p(o,l),l&8&&Y(i,1)):(i=ll(o),i.c(),Y(i,1),i.m(e.parentNode,e)):i&&(Pe(),B(i,1,1,()=>{i=null}),He())},i(o){n||(Y(i),n=!0)},o(o){B(i),n=!1},d(o){o&&K(e),i&&i.d(o)}}}function u0(t,e,n){let i,o,l,{$$slots:r={},$$scope:s}=e,{containerStyle:a=""}=e,{style:u=""}=e,{isCustomComponent:c=!1}=e;const{width:f,height:d,connection:h}=Ce();return Q(t,f,m=>n(4,o=m)),Q(t,d,m=>n(5,l=m)),Q(t,h,m=>n(3,i=m)),t.$$set=m=>{"containerStyle"in m&&n(0,a=m.containerStyle),"style"in m&&n(1,u=m.style),"isCustomComponent"in m&&n(2,c=m.isCustomComponent),"$$scope"in m&&n(9,s=m.$$scope)},[a,u,c,i,o,l,f,d,h,s,r]}let c0=class extends ue{constructor(e){super(),ae(this,e,u0,a0,ce,{containerStyle:0,style:1,isCustomComponent:2})}};const f0=c0;function d0(t){let e,n,i;const o=t[6].default,l=De(o,t,t[5],null);let r=[{class:n=ve(["svelte-flow__panel",t[1],...t[2]])},{style:t[0]},t[3]],s={};for(let a=0;a<r.length;a+=1)s=Le(s,r[a]);return{c(){e=ye("div"),l&&l.c(),Kt(e,s)},m(a,u){F(a,e,u),l&&l.m(e,null),i=!0},p(a,[u]){l&&l.p&&(!i||u&32)&&pe(l,o,a,a[5],i?Xe(o,a[5],u,null):Ye(a[5]),null),Kt(e,s=_t(r,[(!i||u&6&&n!==(n=ve(["svelte-flow__panel",a[1],...a[2]])))&&{class:n},(!i||u&1)&&{style:a[0]},u&8&&a[3]]))},i(a){i||(Y(l,a),i=!0)},o(a){B(l,a),i=!1},d(a){a&&K(e),l&&l.d(a)}}}function h0(t,e,n){let i;const o=["position","style","class"];let l=Bt(e,o),{$$slots:r={},$$scope:s}=e,{position:a="top-right"}=e,{style:u=void 0}=e,{class:c=void 0}=e;return t.$$set=f=>{e=Le(Le({},e),qi(f)),n(3,l=Bt(e,o)),"position"in f&&n(4,a=f.position),"style"in f&&n(0,u=f.style),"class"in f&&n(1,c=f.class),"$$scope"in f&&n(5,s=f.$$scope)},t.$$.update=()=>{t.$$.dirty&16&&n(2,i=`${a}`.split("-"))},[u,c,i,l,a,s,r]}class Sn extends ue{constructor(e){super(),ae(this,e,h0,d0,ce,{position:4,style:0,class:1})}}function sl(t){let e,n;return e=new Sn({props:{position:t[1],class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",$$slots:{default:[g0]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p(i,o){const l={};o&2&&(l.position=i[1]),o&4&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function g0(t){let e;return{c(){e=ye("a"),e.textContent="Svelte Flow",k(e,"href","https://svelteflow.dev"),k(e,"target","_blank"),k(e,"rel","noopener noreferrer"),k(e,"aria-label","Svelte Flow attribution")},m(n,i){F(n,e,i)},p:se,d(n){n&&K(e)}}}function m0(t){var o;let e,n,i=!((o=t[0])!=null&&o.hideAttribution)&&sl(t);return{c(){i&&i.c(),e=Ie()},m(l,r){i&&i.m(l,r),F(l,e,r),n=!0},p(l,[r]){var s;(s=l[0])!=null&&s.hideAttribution?i&&(Pe(),B(i,1,1,()=>{i=null}),He()):i?(i.p(l,r),r&1&&Y(i,1)):(i=sl(l),i.c(),Y(i,1),i.m(e.parentNode,e))},i(l){n||(Y(i),n=!0)},o(l){B(i),n=!1},d(l){l&&K(e),i&&i.d(l)}}}function _0(t,e,n){let{proOptions:i=void 0}=e,{position:o="bottom-right"}=e;return t.$$set=l=>{"proOptions"in l&&n(0,i=l.proOptions),"position"in l&&n(1,o=l.position)},[i,o]}class y0 extends ue{constructor(e){super(),ae(this,e,_0,m0,ce,{proOptions:0,position:1})}}const b0=y0;function al(t,{nodeTypes:e,edgeTypes:n,minZoom:i,maxZoom:o,translateExtent:l}){e!==void 0&&t.setNodeTypes(e),n!==void 0&&t.setEdgeTypes(n),i!==void 0&&t.setMinZoom(i),o!==void 0&&t.setMaxZoom(o),l!==void 0&&t.setTranslateExtent(l)}const w0=t=>Object.keys(t);function k0(t,e){w0(e).forEach(n=>{const i=e[n];i!==void 0&&t[n].set(i)})}function v0(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function S0(t="light"){return je("light",n=>{if(t!=="system"){n(t);return}const i=v0(),o=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}})}const E0=t=>({}),ul=t=>({slot:"connectionLine"});function C0(t){let e;const n=t[70].connectionLine,i=De(n,t,t[89],ul);return{c(){i&&i.c()},m(o,l){i&&i.m(o,l),e=!0},p(o,l){i&&i.p&&(!e||l[2]&134217728)&&pe(i,n,o,o[89],e?Xe(n,o[89],l,E0):Ye(o[89]),ul)},i(o){e||(Y(i,o),e=!0)},o(o){B(i,o),e=!1},d(o){i&&i.d(o)}}}function M0(t){let e,n,i,o,l,r,s,a,u,c,f,d;return e=new Uh({props:{defaultEdgeOptions:t[21]}}),e.$on("edgeclick",t[73]),e.$on("edgecontextmenu",t[74]),i=new f0({props:{containerStyle:t[7],style:t[6],isCustomComponent:t[31].connectionLine,$$slots:{connectionLine:[C0]},$$scope:{ctx:t}}}),u=new Hh({}),u.$on("nodeclick",t[75]),u.$on("nodemouseenter",t[76]),u.$on("nodemousemove",t[77]),u.$on("nodemouseleave",t[78]),u.$on("nodedragstart",t[79]),u.$on("nodedrag",t[80]),u.$on("nodedragstop",t[81]),u.$on("nodecontextmenu",t[82]),f=new n0({}),f.$on("selectionclick",t[83]),f.$on("selectioncontextmenu",t[84]),{c(){te(e.$$.fragment),n=de(),te(i.$$.fragment),o=de(),l=ye("div"),r=de(),s=ye("div"),a=de(),te(u.$$.fragment),c=de(),te(f.$$.fragment),k(l,"class","svelte-flow__edgelabel-renderer"),k(s,"class","svelte-flow__viewport-portal")},m(h,m){$(e,h,m),F(h,n,m),$(i,h,m),F(h,o,m),F(h,l,m),F(h,r,m),F(h,s,m),F(h,a,m),$(u,h,m),F(h,c,m),$(f,h,m),d=!0},p(h,m){const y={};m[0]&2097152&&(y.defaultEdgeOptions=h[21]),e.$set(y);const E={};m[0]&128&&(E.containerStyle=h[7]),m[0]&64&&(E.style=h[6]),m[1]&1&&(E.isCustomComponent=h[31].connectionLine),m[2]&134217728&&(E.$$scope={dirty:m,ctx:h}),i.$set(E)},i(h){d||(Y(e.$$.fragment,h),Y(i.$$.fragment,h),Y(u.$$.fragment,h),Y(f.$$.fragment,h),d=!0)},o(h){B(e.$$.fragment,h),B(i.$$.fragment,h),B(u.$$.fragment,h),B(f.$$.fragment,h),d=!1},d(h){h&&(K(n),K(o),K(l),K(r),K(s),K(a),K(c)),ee(e,h),ee(i,h),ee(u,h),ee(f,h)}}}function z0(t){let e,n,i,o;return e=new wh({props:{$$slots:{default:[M0]},$$scope:{ctx:t}}}),i=new $h({}),{c(){te(e.$$.fragment),n=de(),te(i.$$.fragment)},m(l,r){$(e,l,r),F(l,n,r),$(i,l,r),o=!0},p(l,r){const s={};r[0]&2097344|r[1]&1|r[2]&134217728&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){o||(Y(e.$$.fragment,l),Y(i.$$.fragment,l),o=!0)},o(l){B(e.$$.fragment,l),B(i.$$.fragment,l),o=!1},d(l){l&&K(n),ee(e,l),ee(i,l)}}}function P0(t){let e,n;return e=new _h({props:{panOnDrag:t[17]===void 0?!0:t[17],selectionOnDrag:t[18],$$slots:{default:[z0]},$$scope:{ctx:t}}}),e.$on("paneclick",t[85]),e.$on("panecontextmenu",t[86]),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p(i,o){const l={};o[0]&131072&&(l.panOnDrag=i[17]===void 0?!0:i[17]),o[0]&262144&&(l.selectionOnDrag=i[18]),o[0]&2097344|o[1]&1|o[2]&134217728&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function H0(t){let e,n,i,o,l,r,s,a,u,c,f,d;n=new r0({props:{selectionKey:t[1],deleteKey:t[5],panActivationKey:t[2],multiSelectionKey:t[3],zoomActivationKey:t[4]}}),o=new dh({props:{initialViewport:t[0],onMoveStart:t[8],onMove:t[9],onMoveEnd:t[10],panOnScrollMode:t[11]===void 0?lt.Free:t[11],preventScrolling:t[12]===void 0?!0:t[12],zoomOnScroll:t[13]===void 0?!0:t[13],zoomOnDoubleClick:t[14]===void 0?!0:t[14],zoomOnPinch:t[15]===void 0?!0:t[15],panOnScroll:t[16]===void 0?!1:t[16],panOnDrag:t[17]===void 0?!0:t[17],$$slots:{default:[P0]},$$scope:{ctx:t}}}),r=new b0({props:{proOptions:t[20],position:t[19]}});const h=t[70].default,m=De(h,t,t[89],null);let y=[{style:t[22]},{class:a=ve(["svelte-flow",t[23],t[28]])},{"data-testid":"svelte-flow__wrapper"},t[30],{role:"application"}],E={};for(let g=0;g<y.length;g+=1)E=Le(E,y[g]);return{c(){e=ye("div"),te(n.$$.fragment),i=de(),te(o.$$.fragment),l=de(),te(r.$$.fragment),s=de(),m&&m.c(),Kt(e,E),Qn(()=>t[88].call(e)),_e(e,"svelte-12wlba6",!0)},m(g,v){F(g,e,v),$(n,e,null),me(e,i),$(o,e,null),me(e,l),$(r,e,null),me(e,s),m&&m.m(e,null),t[87](e),u=ks(e,t[88].bind(e)),c=!0,f||(d=[be(e,"dragover",t[71]),be(e,"drop",t[72])],f=!0)},p(g,v){const _={};v[0]&2&&(_.selectionKey=g[1]),v[0]&32&&(_.deleteKey=g[5]),v[0]&4&&(_.panActivationKey=g[2]),v[0]&8&&(_.multiSelectionKey=g[3]),v[0]&16&&(_.zoomActivationKey=g[4]),n.$set(_);const b={};v[0]&1&&(b.initialViewport=g[0]),v[0]&256&&(b.onMoveStart=g[8]),v[0]&512&&(b.onMove=g[9]),v[0]&1024&&(b.onMoveEnd=g[10]),v[0]&2048&&(b.panOnScrollMode=g[11]===void 0?lt.Free:g[11]),v[0]&4096&&(b.preventScrolling=g[12]===void 0?!0:g[12]),v[0]&8192&&(b.zoomOnScroll=g[13]===void 0?!0:g[13]),v[0]&16384&&(b.zoomOnDoubleClick=g[14]===void 0?!0:g[14]),v[0]&32768&&(b.zoomOnPinch=g[15]===void 0?!0:g[15]),v[0]&65536&&(b.panOnScroll=g[16]===void 0?!1:g[16]),v[0]&131072&&(b.panOnDrag=g[17]===void 0?!0:g[17]),v[0]&2490560|v[1]&1|v[2]&134217728&&(b.$$scope={dirty:v,ctx:g}),o.$set(b);const C={};v[0]&1048576&&(C.proOptions=g[20]),v[0]&524288&&(C.position=g[19]),r.$set(C),m&&m.p&&(!c||v[2]&134217728)&&pe(m,h,g,g[89],c?Xe(h,g[89],v,null):Ye(g[89]),null),Kt(e,E=_t(y,[(!c||v[0]&4194304)&&{style:g[22]},(!c||v[0]&276824064&&a!==(a=ve(["svelte-flow",g[23],g[28]])))&&{class:a},{"data-testid":"svelte-flow__wrapper"},v[0]&1073741824&&g[30],{role:"application"}])),_e(e,"svelte-12wlba6",!0)},i(g){c||(Y(n.$$.fragment,g),Y(o.$$.fragment,g),Y(r.$$.fragment,g),Y(m,g),c=!0)},o(g){B(n.$$.fragment,g),B(o.$$.fragment,g),B(r.$$.fragment,g),B(m,g),c=!1},d(g){g&&K(e),ee(n),ee(o),ee(r),m&&m.d(g),t[87](null),u(),f=!1,Te(d)}}}function N0(t,e,n){let i;const o=["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","defaultMarkerColor","style","class"];let l=Bt(e,o),r,s,a=se,u=()=>(a(),a=ai(i,X=>n(28,s=X)),i);t.$$.on_destroy.push(()=>a());let{$$slots:c={},$$scope:f}=e;const d=ms(c);let{id:h="1"}=e,{nodes:m}=e,{edges:y}=e,{fitView:E=void 0}=e,{fitViewOptions:g=void 0}=e,{minZoom:v=void 0}=e,{maxZoom:_=void 0}=e,{initialViewport:b={x:0,y:0,zoom:1}}=e,{viewport:C=void 0}=e,{nodeTypes:T=void 0}=e,{edgeTypes:H=void 0}=e,{selectionKey:M=void 0}=e,{selectionMode:P=void 0}=e,{panActivationKey:w=void 0}=e,{multiSelectionKey:z=void 0}=e,{zoomActivationKey:p=void 0}=e,{nodesDraggable:N=void 0}=e,{nodesConnectable:S=void 0}=e,{nodeDragThreshold:O=void 0}=e,{elementsSelectable:A=void 0}=e,{snapGrid:V=void 0}=e,{deleteKey:L=void 0}=e,{connectionRadius:W=void 0}=e,{connectionLineType:U=void 0}=e,{connectionMode:J=Ht.Strict}=e,{connectionLineStyle:D=""}=e,{connectionLineContainerStyle:oe=""}=e,{onMoveStart:ne=void 0}=e,{onMove:R=void 0}=e,{onMoveEnd:q=void 0}=e,{isValidConnection:j=void 0}=e,{translateExtent:le=void 0}=e,{onlyRenderVisibleElements:I=void 0}=e,{panOnScrollMode:we=lt.Free}=e,{preventScrolling:ke=!0}=e,{zoomOnScroll:Ae=!0}=e,{zoomOnDoubleClick:Me=!0}=e,{zoomOnPinch:Ge=!0}=e,{panOnScroll:Ee=!1}=e,{panOnDrag:st=!0}=e,{selectionOnDrag:at=void 0}=e,{autoPanOnConnect:tt=!0}=e,{autoPanOnNodeDrag:nt=!0}=e,{onerror:ie=void 0}=e,{ondelete:bt=void 0}=e,{onedgecreate:wt=void 0}=e,{attributionPosition:G=void 0}=e,{proOptions:Je=void 0}=e,{defaultEdgeOptions:We=void 0}=e,{width:x=void 0}=e,{height:ut=void 0}=e,{colorMode:Be="light"}=e,{onconnect:qe=void 0}=e,{onconnectstart:Nt=void 0}=e,{onconnectend:At=void 0}=e,{onbeforedelete:Tt=void 0}=e,{oninit:en=void 0}=e,{defaultMarkerColor:ki="#b1b1b7"}=e,{style:io=void 0}=e,{class:oo=void 0}=e,Tn,Ot,It;const Re=Es(wi)?Ce():sh({nodes:Z(m),edges:Z(y),width:x,height:ut,fitView:E});Cn(()=>(Re.width.set(Ot),Re.height.set(It),Re.domNode.set(Tn),Re.syncNodeStores(m),Re.syncEdgeStores(y),Re.syncViewport(C),E!==void 0&&Re.fitViewOnInit.set(E),g&&Re.fitViewOptions.set(g),al(Re,{nodeTypes:T,edgeTypes:H,minZoom:v,maxZoom:_,translateExtent:le}),()=>{Re.reset()}));const{initialized:lo}=Re;Q(t,lo,X=>n(69,r=X));let vi=!1;function Gr(X){Se.call(this,t,X)}function Jr(X){Se.call(this,t,X)}function Qr(X){Se.call(this,t,X)}function jr(X){Se.call(this,t,X)}function xr(X){Se.call(this,t,X)}function $r(X){Se.call(this,t,X)}function es(X){Se.call(this,t,X)}function ts(X){Se.call(this,t,X)}function ns(X){Se.call(this,t,X)}function is(X){Se.call(this,t,X)}function os(X){Se.call(this,t,X)}function ls(X){Se.call(this,t,X)}function rs(X){Se.call(this,t,X)}function ss(X){Se.call(this,t,X)}function as(X){Se.call(this,t,X)}function us(X){Se.call(this,t,X)}function cs(X){mt[X?"unshift":"push"](()=>{Tn=X,n(26,Tn)})}function fs(){Ot=this.clientWidth,It=this.clientHeight,n(24,Ot),n(25,It)}return t.$$set=X=>{e=Le(Le({},e),qi(X)),n(30,l=Bt(e,o)),"id"in X&&n(32,h=X.id),"nodes"in X&&n(33,m=X.nodes),"edges"in X&&n(34,y=X.edges),"fitView"in X&&n(35,E=X.fitView),"fitViewOptions"in X&&n(36,g=X.fitViewOptions),"minZoom"in X&&n(37,v=X.minZoom),"maxZoom"in X&&n(38,_=X.maxZoom),"initialViewport"in X&&n(0,b=X.initialViewport),"viewport"in X&&n(39,C=X.viewport),"nodeTypes"in X&&n(40,T=X.nodeTypes),"edgeTypes"in X&&n(41,H=X.edgeTypes),"selectionKey"in X&&n(1,M=X.selectionKey),"selectionMode"in X&&n(42,P=X.selectionMode),"panActivationKey"in X&&n(2,w=X.panActivationKey),"multiSelectionKey"in X&&n(3,z=X.multiSelectionKey),"zoomActivationKey"in X&&n(4,p=X.zoomActivationKey),"nodesDraggable"in X&&n(43,N=X.nodesDraggable),"nodesConnectable"in X&&n(44,S=X.nodesConnectable),"nodeDragThreshold"in X&&n(45,O=X.nodeDragThreshold),"elementsSelectable"in X&&n(46,A=X.elementsSelectable),"snapGrid"in X&&n(47,V=X.snapGrid),"deleteKey"in X&&n(5,L=X.deleteKey),"connectionRadius"in X&&n(48,W=X.connectionRadius),"connectionLineType"in X&&n(49,U=X.connectionLineType),"connectionMode"in X&&n(50,J=X.connectionMode),"connectionLineStyle"in X&&n(6,D=X.connectionLineStyle),"connectionLineContainerStyle"in X&&n(7,oe=X.connectionLineContainerStyle),"onMoveStart"in X&&n(8,ne=X.onMoveStart),"onMove"in X&&n(9,R=X.onMove),"onMoveEnd"in X&&n(10,q=X.onMoveEnd),"isValidConnection"in X&&n(51,j=X.isValidConnection),"translateExtent"in X&&n(52,le=X.translateExtent),"onlyRenderVisibleElements"in X&&n(53,I=X.onlyRenderVisibleElements),"panOnScrollMode"in X&&n(11,we=X.panOnScrollMode),"preventScrolling"in X&&n(12,ke=X.preventScrolling),"zoomOnScroll"in X&&n(13,Ae=X.zoomOnScroll),"zoomOnDoubleClick"in X&&n(14,Me=X.zoomOnDoubleClick),"zoomOnPinch"in X&&n(15,Ge=X.zoomOnPinch),"panOnScroll"in X&&n(16,Ee=X.panOnScroll),"panOnDrag"in X&&n(17,st=X.panOnDrag),"selectionOnDrag"in X&&n(18,at=X.selectionOnDrag),"autoPanOnConnect"in X&&n(54,tt=X.autoPanOnConnect),"autoPanOnNodeDrag"in X&&n(55,nt=X.autoPanOnNodeDrag),"onerror"in X&&n(56,ie=X.onerror),"ondelete"in X&&n(57,bt=X.ondelete),"onedgecreate"in X&&n(58,wt=X.onedgecreate),"attributionPosition"in X&&n(19,G=X.attributionPosition),"proOptions"in X&&n(20,Je=X.proOptions),"defaultEdgeOptions"in X&&n(21,We=X.defaultEdgeOptions),"width"in X&&n(59,x=X.width),"height"in X&&n(60,ut=X.height),"colorMode"in X&&n(61,Be=X.colorMode),"onconnect"in X&&n(62,qe=X.onconnect),"onconnectstart"in X&&n(63,Nt=X.onconnectstart),"onconnectend"in X&&n(64,At=X.onconnectend),"onbeforedelete"in X&&n(65,Tt=X.onbeforedelete),"oninit"in X&&n(66,en=X.oninit),"defaultMarkerColor"in X&&n(67,ki=X.defaultMarkerColor),"style"in X&&n(22,io=X.style),"class"in X&&n(23,oo=X.class),"$$scope"in X&&n(89,f=X.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&50331648&&Ot!==void 0&&It!==void 0&&(Re.width.set(Ot),Re.height.set(It)),t.$$.dirty[2]&208&&!vi&&r&&(en==null||en(),n(68,vi=!0)),t.$$.dirty[1]&266336258|t.$$.dirty[2]&47&&k0(Re,{flowId:h,connectionLineType:U,connectionRadius:W,selectionMode:P,snapGrid:V,defaultMarkerColor:ki,nodesDraggable:N,nodesConnectable:S,elementsSelectable:A,onlyRenderVisibleElements:I,isValidConnection:j,autoPanOnConnect:tt,autoPanOnNodeDrag:nt,onerror:ie,ondelete:bt,onedgecreate:wt,connectionMode:J,nodeDragThreshold:O,onconnect:qe,onconnectstart:Nt,onconnectend:At,onbeforedelete:Tt}),t.$$.dirty[1]&2098880&&al(Re,{nodeTypes:T,edgeTypes:H,minZoom:v,maxZoom:_,translateExtent:le}),t.$$.dirty[1]&1073741824&&u(n(27,i=S0(Be)))},[b,M,w,z,p,L,D,oe,ne,R,q,we,ke,Ae,Me,Ge,Ee,st,at,G,Je,We,io,oo,Ot,It,Tn,i,s,lo,l,d,h,m,y,E,g,v,_,C,T,H,P,N,S,O,A,V,W,U,J,j,le,I,tt,nt,ie,bt,wt,x,ut,Be,qe,Nt,At,Tt,en,ki,vi,r,c,Gr,Jr,Qr,jr,xr,$r,es,ts,ns,is,os,ls,rs,ss,as,us,cs,fs,f]}class A0 extends ue{constructor(e){super(),ae(this,e,N0,H0,ce,{id:32,nodes:33,edges:34,fitView:35,fitViewOptions:36,minZoom:37,maxZoom:38,initialViewport:0,viewport:39,nodeTypes:40,edgeTypes:41,selectionKey:1,selectionMode:42,panActivationKey:2,multiSelectionKey:3,zoomActivationKey:4,nodesDraggable:43,nodesConnectable:44,nodeDragThreshold:45,elementsSelectable:46,snapGrid:47,deleteKey:5,connectionRadius:48,connectionLineType:49,connectionMode:50,connectionLineStyle:6,connectionLineContainerStyle:7,onMoveStart:8,onMove:9,onMoveEnd:10,isValidConnection:51,translateExtent:52,onlyRenderVisibleElements:53,panOnScrollMode:11,preventScrolling:12,zoomOnScroll:13,zoomOnDoubleClick:14,zoomOnPinch:15,panOnScroll:16,panOnDrag:17,selectionOnDrag:18,autoPanOnConnect:54,autoPanOnNodeDrag:55,onerror:56,ondelete:57,onedgecreate:58,attributionPosition:19,proOptions:20,defaultEdgeOptions:21,width:59,height:60,colorMode:61,onconnect:62,onconnectstart:63,onconnectend:64,onbeforedelete:65,oninit:66,defaultMarkerColor:67,style:22,class:23},null,[-1,-1,-1])}}const T0=A0;function O0(t){let e;const n=t[6].default,i=De(n,t,t[5],null);return{c(){i&&i.c()},m(o,l){i&&i.m(o,l),e=!0},p(o,[l]){i&&i.p&&(!e||l&32)&&pe(i,n,o,o[5],e?Xe(n,o[5],l,null):Ye(o[5]),null)},i(o){e||(Y(i,o),e=!0)},o(o){B(i,o),e=!1},d(o){i&&i.d(o)}}}function I0(t,e,n){let{$$slots:i={},$$scope:o}=e,{initialNodes:l=void 0}=e,{initialEdges:r=void 0}=e,{initialWidth:s=void 0}=e,{initialHeight:a=void 0}=e,{fitView:u=void 0}=e;const c=Wr({nodes:l,edges:r,width:s,height:a,fitView:u});return gn(wi,{getStore:()=>c}),Zi(()=>{c.reset()}),t.$$set=f=>{"initialNodes"in f&&n(0,l=f.initialNodes),"initialEdges"in f&&n(1,r=f.initialEdges),"initialWidth"in f&&n(2,s=f.initialWidth),"initialHeight"in f&&n(3,a=f.initialHeight),"fitView"in f&&n(4,u=f.fitView),"$$scope"in f&&n(5,o=f.$$scope)},[l,r,s,a,u,o,i]}class D0 extends ue{constructor(e){super(),ae(this,e,I0,O0,ce,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4})}}const X0=t=>({}),cl=t=>({class:"button-svg"});function p0(t){let e,n,i,o,l;const r=t[8].default,s=De(r,t,t[7],cl);let a=[{type:"button"},{class:n=ve(["svelte-flow__controls-button",t[0]])},t[6]],u={};for(let c=0;c<a.length;c+=1)u=Le(u,a[c]);return{c(){e=ye("button"),s&&s.c(),Kt(e,u),fe(e,"--xy-controls-button-background-color-props",t[1]),fe(e,"--xy-controls-button-background-color-hover-props",t[2]),fe(e,"--xy-controls-button-color-props",t[3]),fe(e,"--xy-controls-button-color-hover-props",t[4]),fe(e,"--xy-controls-button-border-color-props",t[5])},m(c,f){F(c,e,f),s&&s.m(e,null),e.autofocus&&e.focus(),i=!0,o||(l=be(e,"click",t[9]),o=!0)},p(c,[f]){s&&s.p&&(!i||f&128)&&pe(s,r,c,c[7],i?Xe(r,c[7],f,X0):Ye(c[7]),cl),Kt(e,u=_t(a,[{type:"button"},(!i||f&1&&n!==(n=ve(["svelte-flow__controls-button",c[0]])))&&{class:n},f&64&&c[6]])),fe(e,"--xy-controls-button-background-color-props",c[1]),fe(e,"--xy-controls-button-background-color-hover-props",c[2]),fe(e,"--xy-controls-button-color-props",c[3]),fe(e,"--xy-controls-button-color-hover-props",c[4]),fe(e,"--xy-controls-button-border-color-props",c[5])},i(c){i||(Y(s,c),i=!0)},o(c){B(s,c),i=!1},d(c){c&&K(e),s&&s.d(c),o=!1,l()}}}function Y0(t,e,n){const i=["class"];let o=Bt(e,i),{$$slots:l={},$$scope:r}=e,{class:s=void 0}=e,a,u,c,f,d;function h(m){Se.call(this,t,m)}return t.$$set=m=>{e=Le(Le({},e),qi(m)),n(6,o=Bt(e,i)),"class"in m&&n(0,s=m.class),"$$scope"in m&&n(7,r=m.$$scope)},[s,a,u,c,f,d,o,r,l,h]}class En extends ue{constructor(e){super(),ae(this,e,Y0,p0,ce,{class:0})}}function L0(t){let e,n;return{c(){e=he("svg"),n=he("path"),k(n,"d","M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"),k(e,"xmlns","http://www.w3.org/2000/svg"),k(e,"viewBox","0 0 32 32")},m(i,o){F(i,e,o),me(e,n)},p:se,i:se,o:se,d(i){i&&K(e)}}}class R0 extends ue{constructor(e){super(),ae(this,e,null,L0,ce,{})}}function V0(t){let e,n;return{c(){e=he("svg"),n=he("path"),k(n,"d","M0 0h32v4.2H0z"),k(e,"xmlns","http://www.w3.org/2000/svg"),k(e,"viewBox","0 0 32 5")},m(i,o){F(i,e,o),me(e,n)},p:se,i:se,o:se,d(i){i&&K(e)}}}class W0 extends ue{constructor(e){super(),ae(this,e,null,V0,ce,{})}}function B0(t){let e,n;return{c(){e=he("svg"),n=he("path"),k(n,"d","M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"),k(e,"xmlns","http://www.w3.org/2000/svg"),k(e,"viewBox","0 0 32 30")},m(i,o){F(i,e,o),me(e,n)},p:se,i:se,o:se,d(i){i&&K(e)}}}class K0 extends ue{constructor(e){super(),ae(this,e,null,B0,ce,{})}}function F0(t){let e,n;return{c(){e=he("svg"),n=he("path"),k(n,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"),k(e,"xmlns","http://www.w3.org/2000/svg"),k(e,"viewBox","0 0 25 32")},m(i,o){F(i,e,o),me(e,n)},p:se,i:se,o:se,d(i){i&&K(e)}}}class q0 extends ue{constructor(e){super(),ae(this,e,null,F0,ce,{})}}function Z0(t){let e,n;return{c(){e=he("svg"),n=he("path"),k(n,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"),k(e,"xmlns","http://www.w3.org/2000/svg"),k(e,"viewBox","0 0 25 32")},m(i,o){F(i,e,o),me(e,n)},p:se,i:se,o:se,d(i){i&&K(e)}}}class U0 extends ue{constructor(e){super(),ae(this,e,null,Z0,ce,{})}}const G0=t=>({}),fl=t=>({}),J0=t=>({}),dl=t=>({});function hl(t){let e,n,i,o;const l=[{class:"svelte-flow__controls-zoomin"},{title:"zoom in"},{"aria-label":"zoom in"},{disabled:t[6]},t[14]];let r={$$slots:{default:[Q0]},$$scope:{ctx:t}};for(let u=0;u<l.length;u+=1)r=Le(r,l[u]);e=new En({props:r}),e.$on("click",t[15]);const s=[{class:"svelte-flow__controls-zoomout"},{title:"zoom out"},{"aria-label":"zoom out"},{disabled:t[7]},t[14]];let a={$$slots:{default:[j0]},$$scope:{ctx:t}};for(let u=0;u<s.length;u+=1)a=Le(a,s[u]);return i=new En({props:a}),i.$on("click",t[16]),{c(){te(e.$$.fragment),n=de(),te(i.$$.fragment)},m(u,c){$(e,u,c),F(u,n,c),$(i,u,c),o=!0},p(u,c){const f=c[0]&16448?_t(l,[l[0],l[1],l[2],c[0]&64&&{disabled:u[6]},c[0]&16384&&Ft(u[14])]):{};c[1]&1&&(f.$$scope={dirty:c,ctx:u}),e.$set(f);const d=c[0]&16512?_t(s,[s[0],s[1],s[2],c[0]&128&&{disabled:u[7]},c[0]&16384&&Ft(u[14])]):{};c[1]&1&&(d.$$scope={dirty:c,ctx:u}),i.$set(d)},i(u){o||(Y(e.$$.fragment,u),Y(i.$$.fragment,u),o=!0)},o(u){B(e.$$.fragment,u),B(i.$$.fragment,u),o=!1},d(u){u&&K(n),ee(e,u),ee(i,u)}}}function Q0(t){let e,n;return e=new R0({}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function j0(t){let e,n;return e=new W0({}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function gl(t){let e,n;const i=[{class:"svelte-flow__controls-fitview"},{title:"fit view"},{"aria-label":"fit view"},t[14]];let o={$$slots:{default:[x0]},$$scope:{ctx:t}};for(let l=0;l<i.length;l+=1)o=Le(o,i[l]);return e=new En({props:o}),e.$on("click",t[17]),{c(){te(e.$$.fragment)},m(l,r){$(e,l,r),n=!0},p(l,r){const s=r[0]&16384?_t(i,[i[0],i[1],i[2],Ft(l[14])]):{};r[1]&1&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){n||(Y(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){ee(e,l)}}}function x0(t){let e,n;return e=new K0({}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function ml(t){let e,n;const i=[{class:"svelte-flow__controls-interactive"},{title:"toggle interactivity"},{"aria-label":"toggle interactivity"},t[14]];let o={$$slots:{default:[tg]},$$scope:{ctx:t}};for(let l=0;l<i.length;l+=1)o=Le(o,i[l]);return e=new En({props:o}),e.$on("click",t[18]),{c(){te(e.$$.fragment)},m(l,r){$(e,l,r),n=!0},p(l,r){const s=r[0]&16384?_t(i,[i[0],i[1],i[2],Ft(l[14])]):{};r[0]&32|r[1]&1&&(s.$$scope={dirty:r,ctx:l}),e.$set(s)},i(l){n||(Y(e.$$.fragment,l),n=!0)},o(l){B(e.$$.fragment,l),n=!1},d(l){ee(e,l)}}}function $0(t){let e,n;return e=new q0({}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function eg(t){let e,n;return e=new U0({}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function tg(t){let e,n,i,o;const l=[eg,$0],r=[];function s(a,u){return a[5]?0:1}return e=s(t),n=r[e]=l[e](t),{c(){n.c(),i=Ie()},m(a,u){r[e].m(a,u),F(a,i,u),o=!0},p(a,u){let c=e;e=s(a),e!==c&&(Pe(),B(r[c],1,1,()=>{r[c]=null}),He(),n=r[e],n||(n=r[e]=l[e](a),n.c()),Y(n,1),n.m(i.parentNode,i))},i(a){o||(Y(n),o=!0)},o(a){B(n),o=!1},d(a){a&&K(i),r[e].d(a)}}}function ng(t){let e,n,i,o,l,r;const s=t[30].before,a=De(s,t,t[31],dl);let u=t[1]&&hl(t),c=t[2]&&gl(t),f=t[3]&&ml(t);const d=t[30].default,h=De(d,t,t[31],null),m=t[30].after,y=De(m,t,t[31],fl);return{c(){a&&a.c(),e=de(),u&&u.c(),n=de(),c&&c.c(),i=de(),f&&f.c(),o=de(),h&&h.c(),l=de(),y&&y.c()},m(E,g){a&&a.m(E,g),F(E,e,g),u&&u.m(E,g),F(E,n,g),c&&c.m(E,g),F(E,i,g),f&&f.m(E,g),F(E,o,g),h&&h.m(E,g),F(E,l,g),y&&y.m(E,g),r=!0},p(E,g){a&&a.p&&(!r||g[1]&1)&&pe(a,s,E,E[31],r?Xe(s,E[31],g,J0):Ye(E[31]),dl),E[1]?u?(u.p(E,g),g[0]&2&&Y(u,1)):(u=hl(E),u.c(),Y(u,1),u.m(n.parentNode,n)):u&&(Pe(),B(u,1,1,()=>{u=null}),He()),E[2]?c?(c.p(E,g),g[0]&4&&Y(c,1)):(c=gl(E),c.c(),Y(c,1),c.m(i.parentNode,i)):c&&(Pe(),B(c,1,1,()=>{c=null}),He()),E[3]?f?(f.p(E,g),g[0]&8&&Y(f,1)):(f=ml(E),f.c(),Y(f,1),f.m(o.parentNode,o)):f&&(Pe(),B(f,1,1,()=>{f=null}),He()),h&&h.p&&(!r||g[1]&1)&&pe(h,d,E,E[31],r?Xe(d,E[31],g,null):Ye(E[31]),null),y&&y.p&&(!r||g[1]&1)&&pe(y,m,E,E[31],r?Xe(m,E[31],g,G0):Ye(E[31]),fl)},i(E){r||(Y(a,E),Y(u),Y(c),Y(f),Y(h,E),Y(y,E),r=!0)},o(E){B(a,E),B(u),B(c),B(f),B(h,E),B(y,E),r=!1},d(E){E&&(K(e),K(n),K(i),K(o),K(l)),a&&a.d(E),u&&u.d(E),c&&c.d(E),f&&f.d(E),h&&h.d(E),y&&y.d(E)}}}function ig(t){let e,n;return e=new Sn({props:{class:"svelte-flow__controls",position:t[0],"data-testid":"svelte-flow__controls","aria-label":t[4]??"Svelte Flow controls",$$slots:{default:[ng]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p(i,o){const l={};o[0]&1&&(l.position=i[0]),o[0]&16&&(l["aria-label"]=i[4]??"Svelte Flow controls"),o[0]&238|o[1]&1&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function og(t,e,n){let i,o,l,r,s,a,u,c,f,{$$slots:d={},$$scope:h}=e,{position:m="bottom-left"}=e,{showZoom:y=!0}=e,{showFitView:E=!0}=e,{showLock:g=!0}=e,{buttonBgColor:v=void 0}=e,{buttonBgColorHover:_=void 0}=e,{buttonColor:b=void 0}=e,{buttonColorHover:C=void 0}=e,{buttonBorderColor:T=void 0}=e,{ariaLabel:H=void 0}=e;const{zoomIn:M,zoomOut:P,fitView:w,viewport:z,minZoom:p,maxZoom:N,nodesDraggable:S,nodesConnectable:O,elementsSelectable:A}=Ce();Q(t,z,D=>n(25,s=D)),Q(t,p,D=>n(26,a=D)),Q(t,N,D=>n(24,r=D)),Q(t,S,D=>n(29,f=D)),Q(t,O,D=>n(28,c=D)),Q(t,A,D=>n(27,u=D));const V={bgColor:v,bgColorHover:_,color:b,colorHover:C,borderColor:T},L=()=>{M()},W=()=>{P()},U=()=>{w()},J=()=>{n(5,i=!i),S.set(i),O.set(i),A.set(i)};return t.$$set=D=>{"position"in D&&n(0,m=D.position),"showZoom"in D&&n(1,y=D.showZoom),"showFitView"in D&&n(2,E=D.showFitView),"showLock"in D&&n(3,g=D.showLock),"buttonBgColor"in D&&n(19,v=D.buttonBgColor),"buttonBgColorHover"in D&&n(20,_=D.buttonBgColorHover),"buttonColor"in D&&n(21,b=D.buttonColor),"buttonColorHover"in D&&n(22,C=D.buttonColorHover),"buttonBorderColor"in D&&n(23,T=D.buttonBorderColor),"ariaLabel"in D&&n(4,H=D.ariaLabel),"$$scope"in D&&n(31,h=D.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&939524096&&n(5,i=f||c||u),t.$$.dirty[0]&100663296&&n(7,o=s.zoom<=a),t.$$.dirty[0]&50331648&&n(6,l=s.zoom>=r)},[m,y,E,g,H,i,l,o,z,p,N,S,O,A,V,L,W,U,J,v,_,b,C,T,r,s,a,u,c,f,d,h]}class lg extends ue{constructor(e){super(),ae(this,e,og,ig,ce,{position:0,showZoom:1,showFitView:2,showLock:3,buttonBgColor:19,buttonBgColorHover:20,buttonColor:21,buttonColorHover:22,buttonBorderColor:23,ariaLabel:4},null,[-1,-1])}}var gt;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(gt||(gt={}));function rg(t){let e,n;return{c(){e=he("circle"),k(e,"cx",t[0]),k(e,"cy",t[0]),k(e,"r",t[0]),k(e,"class",n=ve(["svelte-flow__background-pattern","dots",t[1]]))},m(i,o){F(i,e,o)},p(i,[o]){o&1&&k(e,"cx",i[0]),o&1&&k(e,"cy",i[0]),o&1&&k(e,"r",i[0]),o&2&&n!==(n=ve(["svelte-flow__background-pattern","dots",i[1]]))&&k(e,"class",n)},i:se,o:se,d(i){i&&K(e)}}}function sg(t,e,n){let{radius:i=5}=e,{class:o=""}=e;return t.$$set=l=>{"radius"in l&&n(0,i=l.radius),"class"in l&&n(1,o=l.class)},[i,o]}class ag extends ue{constructor(e){super(),ae(this,e,sg,rg,ce,{radius:0,class:1})}}const ug=ag;function cg(t){let e,n,i;return{c(){e=he("path"),k(e,"stroke-width",t[0]),k(e,"d",n=`M${t[1][0]/2} 0 V${t[1][1]} M0 ${t[1][1]/2} H${t[1][0]}`),k(e,"class",i=ve(["svelte-flow__background-pattern",t[2],t[3]]))},m(o,l){F(o,e,l)},p(o,[l]){l&1&&k(e,"stroke-width",o[0]),l&2&&n!==(n=`M${o[1][0]/2} 0 V${o[1][1]} M0 ${o[1][1]/2} H${o[1][0]}`)&&k(e,"d",n),l&12&&i!==(i=ve(["svelte-flow__background-pattern",o[2],o[3]]))&&k(e,"class",i)},i:se,o:se,d(o){o&&K(e)}}}function fg(t,e,n){let{lineWidth:i=1}=e,{dimensions:o}=e,{variant:l=void 0}=e,{class:r=""}=e;return t.$$set=s=>{"lineWidth"in s&&n(0,i=s.lineWidth),"dimensions"in s&&n(1,o=s.dimensions),"variant"in s&&n(2,l=s.variant),"class"in s&&n(3,r=s.class)},[i,o,l,r]}class dg extends ue{constructor(e){super(),ae(this,e,fg,cg,ce,{lineWidth:0,dimensions:1,variant:2,class:3})}}const hg=dg;function gg(t){let e,n;return e=new hg({props:{dimensions:t[6],variant:t[0],lineWidth:t[1],class:t[4]}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p(i,o){const l={};o&64&&(l.dimensions=i[6]),o&1&&(l.variant=i[0]),o&2&&(l.lineWidth=i[1]),o&16&&(l.class=i[4]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function mg(t){let e,n;return e=new ug({props:{radius:t[7]/2,class:t[4]}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p(i,o){const l={};o&128&&(l.radius=i[7]/2),o&16&&(l.class=i[4]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function _g(t){let e,n,i,o,l,r,s,a,u,c,f,d,h;const m=[mg,gg],y=[];function E(g,v){return g[14]?0:1}return i=E(t),o=y[i]=m[i](t),{c(){e=he("svg"),n=he("pattern"),o.c(),c=he("rect"),k(n,"id",t[11]),k(n,"x",l=t[9].x%t[8][0]),k(n,"y",r=t[9].y%t[8][1]),k(n,"width",s=t[8][0]),k(n,"height",a=t[8][1]),k(n,"patternUnits","userSpaceOnUse"),k(n,"patternTransform",u=`translate(-${t[10][0]},-${t[10][1]})`),k(c,"x","0"),k(c,"y","0"),k(c,"width","100%"),k(c,"height","100%"),k(c,"fill",f=`url(#${t[11]})`),k(e,"class",d=so(ve(["svelte-flow__background",t[5]]))+" svelte-1r7pe8d"),k(e,"data-testid","svelte-flow__background"),fe(e,"--xy-background-color-props",t[2]),fe(e,"--xy-background-pattern-color-props",t[3])},m(g,v){F(g,e,v),me(e,n),y[i].m(n,null),me(e,c),h=!0},p(g,[v]){o.p(g,v),(!h||v&2048)&&k(n,"id",g[11]),(!h||v&768&&l!==(l=g[9].x%g[8][0]))&&k(n,"x",l),(!h||v&768&&r!==(r=g[9].y%g[8][1]))&&k(n,"y",r),(!h||v&256&&s!==(s=g[8][0]))&&k(n,"width",s),(!h||v&256&&a!==(a=g[8][1]))&&k(n,"height",a),(!h||v&1024&&u!==(u=`translate(-${g[10][0]},-${g[10][1]})`))&&k(n,"patternTransform",u),(!h||v&2048&&f!==(f=`url(#${g[11]})`))&&k(c,"fill",f),(!h||v&32&&d!==(d=so(ve(["svelte-flow__background",g[5]]))+" svelte-1r7pe8d"))&&k(e,"class",d),v&4&&fe(e,"--xy-background-color-props",g[2]),v&8&&fe(e,"--xy-background-pattern-color-props",g[3])},i(g){h||(Y(o),h=!0)},o(g){B(o),h=!1},d(g){g&&K(e),y[i].d()}}}const yg={[gt.Dots]:1,[gt.Lines]:1,[gt.Cross]:6};function bg(t,e,n){let i,o,l,r,s,a,u,{id:c=void 0}=e,{variant:f=gt.Dots}=e,{gap:d=20}=e,{size:h=1}=e,{lineWidth:m=1}=e,{bgColor:y=void 0}=e,{patternColor:E=void 0}=e,{patternClass:g=void 0}=e,{class:v=""}=e;const{viewport:_,flowId:b}=Ce();Q(t,_,P=>n(9,a=P)),Q(t,b,P=>n(18,u=P));const C=h||yg[f],T=f===gt.Dots,H=f===gt.Cross,M=Array.isArray(d)?d:[d,d];return t.$$set=P=>{"id"in P&&n(15,c=P.id),"variant"in P&&n(0,f=P.variant),"gap"in P&&n(16,d=P.gap),"size"in P&&n(17,h=P.size),"lineWidth"in P&&n(1,m=P.lineWidth),"bgColor"in P&&n(2,y=P.bgColor),"patternColor"in P&&n(3,E=P.patternColor),"patternClass"in P&&n(4,g=P.patternClass),"class"in P&&n(5,v=P.class)},t.$$.update=()=>{t.$$.dirty&294912&&n(11,i=`background-pattern-${u}-${c||""}`),t.$$.dirty&512&&n(8,o=[M[0]*a.zoom||1,M[1]*a.zoom||1]),t.$$.dirty&512&&n(7,l=C*a.zoom),t.$$.dirty&384&&n(6,r=H?[l,l]:o),t.$$.dirty&192&&n(10,s=T?[l/2,l/2]:[r[0]/2,r[1]/2])},[f,m,y,E,g,v,r,l,o,a,s,i,_,b,T,c,d,h,u]}class wg extends ue{constructor(e){super(),ae(this,e,bg,_g,ce,{id:15,variant:0,gap:16,size:17,lineWidth:1,bgColor:2,patternColor:3,patternClass:4,class:5})}}const kg=wg;function vg(t){let e,n,i;return{c(){e=he("rect"),k(e,"class",n=ve(["svelte-flow__minimap-node",t[10]])),k(e,"x",t[0]),k(e,"y",t[1]),k(e,"rx",t[4]),k(e,"ry",t[4]),k(e,"width",t[2]),k(e,"height",t[3]),k(e,"style",i=`${t[5]?`fill: ${t[5]};`:""}${t[7]?`stroke: ${t[7]};`:""}${t[8]?`stroke-width: ${t[8]};`:""}`),k(e,"shape-rendering",t[6]),_e(e,"selected",t[9])},m(o,l){F(o,e,l)},p(o,[l]){l&1024&&n!==(n=ve(["svelte-flow__minimap-node",o[10]]))&&k(e,"class",n),l&1&&k(e,"x",o[0]),l&2&&k(e,"y",o[1]),l&16&&k(e,"rx",o[4]),l&16&&k(e,"ry",o[4]),l&4&&k(e,"width",o[2]),l&8&&k(e,"height",o[3]),l&416&&i!==(i=`${o[5]?`fill: ${o[5]};`:""}${o[7]?`stroke: ${o[7]};`:""}${o[8]?`stroke-width: ${o[8]};`:""}`)&&k(e,"style",i),l&64&&k(e,"shape-rendering",o[6]),l&1536&&_e(e,"selected",o[9])},i:se,o:se,d(o){o&&K(e)}}}function Sg(t,e,n){let{x:i}=e,{y:o}=e,{width:l=0}=e,{height:r=0}=e,{borderRadius:s=5}=e,{color:a=void 0}=e,{shapeRendering:u}=e,{strokeColor:c=void 0}=e,{strokeWidth:f=2}=e,{selected:d=!1}=e,{class:h=""}=e;return t.$$set=m=>{"x"in m&&n(0,i=m.x),"y"in m&&n(1,o=m.y),"width"in m&&n(2,l=m.width),"height"in m&&n(3,r=m.height),"borderRadius"in m&&n(4,s=m.borderRadius),"color"in m&&n(5,a=m.color),"shapeRendering"in m&&n(6,u=m.shapeRendering),"strokeColor"in m&&n(7,c=m.strokeColor),"strokeWidth"in m&&n(8,f=m.strokeWidth),"selected"in m&&n(9,d=m.selected),"class"in m&&n(10,h=m.class)},[i,o,l,r,s,a,u,c,f,d,h]}class Eg extends ue{constructor(e){super(),ae(this,e,Sg,vg,ce,{x:0,y:1,width:2,height:3,borderRadius:4,color:5,shapeRendering:6,strokeColor:7,strokeWidth:8,selected:9,class:10})}}function Cg(t,e){const n=Bf({domNode:t,panZoom:e.panZoom,getTransform:()=>{const o=Z(e.viewport);return[o.x,o.y,o.zoom]},getViewScale:e.getViewScale});function i(o){n.update({translateExtent:o.translateExtent,width:o.width,height:o.height,inversePan:o.inversePan,zoomStep:o.zoomStep,pannable:o.pannable,zoomable:o.zoomable})}return{update:i,destroy(){n.destroy()}}}function _l(t,e,n){const i=t.slice();return i[53]=e[n],i}function Ti(t){const e=t.slice(),n=$t(e[53]).positionAbsolute;e[56]=n;const i=Nn(e[53]);return e[57]=i,e}function yl(t){let e,n,i=[],o=new Map,l,r,s,a,u,c,f,d=t[1]&&bl(t),h=Oe(t[19]);const m=y=>y[53].id;for(let y=0;y<h.length;y+=1){let E=_l(t,h,y),g=m(E);o.set(g,i[y]=kl(g,E))}return{c(){e=he("svg"),d&&d.c(),n=Ie();for(let y=0;y<i.length;y+=1)i[y].c();l=he("path"),k(l,"class","svelte-flow__minimap-mask"),k(l,"d",r="M"+(t[25]-t[15])+","+(t[24]-t[15])+"h"+(t[23]+t[15]*2)+"v"+(t[22]+t[15]*2)+"h"+(-t[23]-t[15]*2)+`z
      M`+t[18].x+","+t[18].y+"h"+t[18].width+"v"+t[18].height+"h"+-t[18].width+"z"),k(l,"fill-rule","evenodd"),k(l,"pointer-events","none"),k(e,"width",t[17]),k(e,"height",t[16]),k(e,"viewBox",s=t[25]+" "+t[24]+" "+t[23]+" "+t[22]),k(e,"class","svelte-flow__minimap-svg"),k(e,"role","img"),k(e,"aria-labelledby",t[39]),fe(e,"--xy-minimap-mask-background-color-props",t[5]),fe(e,"--xy-minimap-mask-stroke-color-props",t[6]),fe(e,"--xy-minimap-mask-stroke-width-props",t[7]?t[7]*t[14]:void 0)},m(y,E){F(y,e,E),d&&d.m(e,null),me(e,n);for(let g=0;g<i.length;g+=1)i[g]&&i[g].m(e,null);me(e,l),u=!0,c||(f=Ve(a=Cg.call(null,e,{panZoom:t[26],viewport:t[29],getViewScale:t[40],translateExtent:t[27],width:t[21],height:t[20],inversePan:t[10],zoomStep:t[11],pannable:t[8],zoomable:t[9]})),c=!0)},p(y,E){y[1]?d?d.p(y,E):(d=bl(y),d.c(),d.m(e,n)):d&&(d.d(1),d=null),E[0]&524300|E[1]&240&&(h=Oe(y[19]),Pe(),i=fi(i,E,m,1,y,h,o,e,ci,kl,l,_l),He()),(!u||E[0]&63209472&&r!==(r="M"+(y[25]-y[15])+","+(y[24]-y[15])+"h"+(y[23]+y[15]*2)+"v"+(y[22]+y[15]*2)+"h"+(-y[23]-y[15]*2)+`z
      M`+y[18].x+","+y[18].y+"h"+y[18].width+"v"+y[18].height+"h"+-y[18].width+"z"))&&k(l,"d",r),(!u||E[0]&131072)&&k(e,"width",y[17]),(!u||E[0]&65536)&&k(e,"height",y[16]),(!u||E[0]&62914560&&s!==(s=y[25]+" "+y[24]+" "+y[23]+" "+y[22]))&&k(e,"viewBox",s),a&&ze(a.update)&&E[0]&204476160&&a.update.call(null,{panZoom:y[26],viewport:y[29],getViewScale:y[40],translateExtent:y[27],width:y[21],height:y[20],inversePan:y[10],zoomStep:y[11],pannable:y[8],zoomable:y[9]}),E[0]&32&&fe(e,"--xy-minimap-mask-background-color-props",y[5]),E[0]&64&&fe(e,"--xy-minimap-mask-stroke-color-props",y[6]),E[0]&16512&&fe(e,"--xy-minimap-mask-stroke-width-props",y[7]?y[7]*y[14]:void 0)},i(y){if(!u){for(let E=0;E<h.length;E+=1)Y(i[E]);u=!0}},o(y){for(let E=0;E<i.length;E+=1)B(i[E]);u=!1},d(y){y&&K(e),d&&d.d();for(let E=0;E<i.length;E+=1)i[E].d();c=!1,f()}}}function bl(t){let e,n;return{c(){e=he("title"),n=Qe(t[1]),k(e,"id",t[39])},m(i,o){F(i,e,o),me(e,n)},p(i,o){o[0]&2&&jt(n,i[1])},d(i){i&&K(e)}}}function wl(t){var l;let e,n;const i=[{x:t[56].x},{y:t[56].y},t[57],{selected:t[53].selected},{color:(l=t[35])==null?void 0:l.call(t,t[53])},{borderRadius:t[2]},{strokeColor:t[36](t[53])},{strokeWidth:t[3]},{shapeRendering:t[38]},{class:t[37](t[53])}];let o={};for(let r=0;r<i.length;r+=1)o=Le(o,i[r]);return e=new Eg({props:o}),{c(){te(e.$$.fragment)},m(r,s){$(e,r,s),n=!0},p(r,s){var u;const a=s[0]&524300|s[1]&240?_t(i,[s[0]&524288&&{x:r[56].x},s[0]&524288&&{y:r[56].y},s[0]&524288&&Ft(r[57]),s[0]&524288&&{selected:r[53].selected},s[0]&524288|s[1]&16&&{color:(u=r[35])==null?void 0:u.call(r,r[53])},s[0]&4&&{borderRadius:r[2]},s[0]&524288|s[1]&32&&{strokeColor:r[36](r[53])},s[0]&8&&{strokeWidth:r[3]},s[1]&128&&{shapeRendering:r[38]},s[0]&524288|s[1]&64&&{class:r[37](r[53])}]):{};e.$set(a)},i(r){n||(Y(e.$$.fragment,r),n=!0)},o(r){B(e.$$.fragment,r),n=!1},d(r){ee(e,r)}}}function kl(t,e){let n,i=si(e[53]),o,l,r=i&&wl(Ti(e));return{key:t,first:null,c(){n=Ie(),r&&r.c(),o=Ie(),this.first=n},m(s,a){F(s,n,a),r&&r.m(s,a),F(s,o,a),l=!0},p(s,a){e=s,a[0]&524288&&(i=si(e[53])),i?r?(r.p(Ti(e),a),a[0]&524288&&Y(r,1)):(r=wl(Ti(e)),r.c(),Y(r,1),r.m(o.parentNode,o)):r&&(Pe(),B(r,1,1,()=>{r=null}),He())},i(s){l||(Y(r),l=!0)},o(s){B(r),l=!1},d(s){s&&(K(n),K(o)),r&&r.d(s)}}}function Mg(t){let e,n,i=t[26]&&yl(t);return{c(){i&&i.c(),e=Ie()},m(o,l){i&&i.m(o,l),F(o,e,l),n=!0},p(o,l){o[26]?i?(i.p(o,l),l[0]&67108864&&Y(i,1)):(i=yl(o),i.c(),Y(i,1),i.m(e.parentNode,e)):i&&(Pe(),B(i,1,1,()=>{i=null}),He())},i(o){n||(Y(i),n=!0)},o(o){B(i),n=!1},d(o){o&&K(e),i&&i.d(o)}}}function zg(t){let e,n;return e=new Sn({props:{position:t[0],style:t[12]+(t[4]?`;--xy-minimap-background-color-props:${t[4]}`:""),class:ve(["svelte-flow__minimap",t[13]]),"data-testid":"svelte-flow__minimap",$$slots:{default:[Mg]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p(i,o){const l={};o[0]&1&&(l.position=i[0]),o[0]&4112&&(l.style=i[12]+(i[4]?`;--xy-minimap-background-color-props:${i[4]}`:"")),o[0]&8192&&(l.class=ve(["svelte-flow__minimap",i[13]])),o[0]&268423150|o[1]&134217728&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}const Oi=t=>t instanceof Function?t:()=>t,Pg=200,Hg=150;function Ng(t,e,n){let i,o,l,r,s,a,u,c,f,d,h,m,y,E,g,v,_,b,C,T,H,{position:M="bottom-right"}=e,{ariaLabel:P="Mini map"}=e,{nodeStrokeColor:w="transparent"}=e,{nodeColor:z=void 0}=e,{nodeClass:p=""}=e,{nodeBorderRadius:N=5}=e,{nodeStrokeWidth:S=2}=e,{bgColor:O=void 0}=e,{maskColor:A=void 0}=e,{maskStrokeColor:V=void 0}=e,{maskStrokeWidth:L=void 0}=e,{width:W=void 0}=e,{height:U=void 0}=e,{pannable:J=!0}=e,{zoomable:D=!0}=e,{inversePan:oe=void 0}=e,{zoomStep:ne=void 0}=e,{style:R=""}=e,{class:q=""}=e;const{nodes:j,viewport:le,width:I,height:we,flowId:ke,panZoom:Ae,translateExtent:Me}=Ce();Q(t,j,ie=>n(19,g=ie)),Q(t,le,ie=>n(51,v=ie)),Q(t,I,ie=>n(21,b=ie)),Q(t,we,ie=>n(20,_=ie)),Q(t,ke,ie=>n(52,C=ie)),Q(t,Ae,ie=>n(26,T=ie)),Q(t,Me,ie=>n(27,H=ie));const Ge=z===void 0?void 0:Oi(z),Ee=Oi(w),st=Oi(p),at=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",tt=`svelte-flow__minimap-desc-${C}`,nt=()=>u;return t.$$set=ie=>{"position"in ie&&n(0,M=ie.position),"ariaLabel"in ie&&n(1,P=ie.ariaLabel),"nodeStrokeColor"in ie&&n(41,w=ie.nodeStrokeColor),"nodeColor"in ie&&n(42,z=ie.nodeColor),"nodeClass"in ie&&n(43,p=ie.nodeClass),"nodeBorderRadius"in ie&&n(2,N=ie.nodeBorderRadius),"nodeStrokeWidth"in ie&&n(3,S=ie.nodeStrokeWidth),"bgColor"in ie&&n(4,O=ie.bgColor),"maskColor"in ie&&n(5,A=ie.maskColor),"maskStrokeColor"in ie&&n(6,V=ie.maskStrokeColor),"maskStrokeWidth"in ie&&n(7,L=ie.maskStrokeWidth),"width"in ie&&n(44,W=ie.width),"height"in ie&&n(45,U=ie.height),"pannable"in ie&&n(8,J=ie.pannable),"zoomable"in ie&&n(9,D=ie.zoomable),"inversePan"in ie&&n(10,oe=ie.inversePan),"zoomStep"in ie&&n(11,ne=ie.zoomStep),"style"in ie&&n(12,R=ie.style),"class"in ie&&n(13,q=ie.class)},t.$$.update=()=>{t.$$.dirty[0]&3145728|t.$$.dirty[1]&1048576&&n(18,i={x:-v.x/v.zoom,y:-v.y/v.zoom,width:b/v.zoom,height:_/v.zoom}),t.$$.dirty[0]&786432&&n(48,o=g.length>0?gf(Hn(g),i):i),t.$$.dirty[1]&8192&&n(17,l=W??Pg),t.$$.dirty[1]&16384&&n(16,r=U??Hg),t.$$.dirty[0]&131072|t.$$.dirty[1]&131072&&n(50,s=o.width/l),t.$$.dirty[0]&65536|t.$$.dirty[1]&131072&&n(49,a=o.height/r),t.$$.dirty[1]&786432&&n(14,u=Math.max(s,a)),t.$$.dirty[0]&147456&&n(47,c=u*l),t.$$.dirty[0]&81920&&n(46,f=u*r),t.$$.dirty[0]&16384&&n(15,d=5*u),t.$$.dirty[0]&32768|t.$$.dirty[1]&196608&&n(25,h=o.x-(c-o.width)/2-d),t.$$.dirty[0]&32768|t.$$.dirty[1]&163840&&n(24,m=o.y-(f-o.height)/2-d),t.$$.dirty[0]&32768|t.$$.dirty[1]&65536&&n(23,y=c+d*2),t.$$.dirty[0]&32768|t.$$.dirty[1]&32768&&n(22,E=f+d*2)},[M,P,N,S,O,A,V,L,J,D,oe,ne,R,q,u,d,r,l,i,g,_,b,E,y,m,h,T,H,j,le,I,we,ke,Ae,Me,Ge,Ee,st,at,tt,nt,w,z,p,W,U,f,c,o,a,s,v]}class Ag extends ue{constructor(e){super(),ae(this,e,Ng,zg,ce,{position:0,ariaLabel:1,nodeStrokeColor:41,nodeColor:42,nodeClass:43,nodeBorderRadius:2,nodeStrokeWidth:3,bgColor:4,maskColor:5,maskStrokeColor:6,maskStrokeWidth:7,width:44,height:45,pannable:8,zoomable:9,inversePan:10,zoomStep:11,style:12,class:13},null,[-1,-1])}}function Tg(t){let e,n,i;const o=t[33].default,l=De(o,t,t[32],null);return{c(){e=ye("div"),l&&l.c(),k(e,"class",n=ve(["svelte-flow__resize-control","nodrag",...t[4],t[0],t[1]])),k(e,"style",t[3])},m(r,s){F(r,e,s),l&&l.m(e,null),t[34](e),i=!0},p(r,s){l&&l.p&&(!i||s[1]&2)&&pe(l,o,r,r[32],i?Xe(o,r[32],s,null):Ye(r[32]),null),(!i||s[0]&19&&n!==(n=ve(["svelte-flow__resize-control","nodrag",...r[4],r[0],r[1]])))&&k(e,"class",n),(!i||s[0]&8)&&k(e,"style",r[3])},i(r){i||(Y(l,r),i=!0)},o(r){B(l,r),i=!1},d(r){r&&K(e),l&&l.d(r),t[34](null)}}}function Og(t,e,n){let i,o,l,r,s,a,u,c,f,d,h,m,y,E,g,v,{$$slots:_={},$$scope:b}=e,{nodeId:C=void 0}=e,{position:T=void 0}=e,{variant:H=fn.Handle}=e,{color:M=void 0}=e,{minWidth:P=10}=e,{minHeight:w=10}=e,{maxWidth:z=Number.MAX_VALUE}=e,{maxHeight:p=Number.MAX_VALUE}=e,{keepAspectRatio:N=!1}=e,{shouldResize:S=void 0}=e,{onResizeStart:O=void 0}=e,{onResize:A=void 0}=e,{onResizeEnd:V=void 0}=e,{style:L=""}=e,{class:W=""}=e;const{nodeLookup:U,snapGrid:J,viewport:D,nodes:oe,nodeOrigin:ne}=Ce();Q(t,U,I=>n(37,y=I)),Q(t,J,I=>n(39,g=I)),Q(t,D,I=>n(40,v=I)),Q(t,oe,I=>n(36,m=I)),Q(t,ne,I=>n(38,E=I));const R=mn("svelteflow__node_id");let q,j=null;Cn(()=>(q&&n(23,j=od({domNode:q,nodeId:s,getStoreItems:()=>({nodeLookup:y,transform:[v.x,v.y,v.zoom],snapGrid:g??void 0,snapToGrid:!!g,nodeOrigin:E}),onChange:(I,we)=>{const ke=y.get(s);if(ke){ke.height=I.isHeightChange?I.height:ke.height,ke.width=I.isWidthChange?I.width:ke.width,ke.position=I.isXPosChange||I.isYPosChange?{x:I.x,y:I.y}:ke.position;for(const Ae of we){const Me=y.get(Ae.id);Me&&(Me.position=Ae.position)}oe.set(m)}}})),()=>{j==null||j.destroy()}));function le(I){mt[I?"unshift":"push"](()=>{q=I,n(2,q)})}return t.$$set=I=>{"nodeId"in I&&n(10,C=I.nodeId),"position"in I&&n(11,T=I.position),"variant"in I&&n(0,H=I.variant),"color"in I&&n(12,M=I.color),"minWidth"in I&&n(13,P=I.minWidth),"minHeight"in I&&n(14,w=I.minHeight),"maxWidth"in I&&n(15,z=I.maxWidth),"maxHeight"in I&&n(16,p=I.maxHeight),"keepAspectRatio"in I&&n(17,N=I.keepAspectRatio),"shouldResize"in I&&n(18,S=I.shouldResize),"onResizeStart"in I&&n(19,O=I.onResizeStart),"onResize"in I&&n(20,A=I.onResize),"onResizeEnd"in I&&n(21,V=I.onResizeEnd),"style"in I&&n(22,L=I.style),"class"in I&&n(1,W=I.class),"$$scope"in I&&n(32,b=I.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&8192&&n(27,i=P??10),t.$$.dirty[0]&16384&&n(26,o=w??10),t.$$.dirty[0]&32768&&n(25,l=z??Number.MAX_VALUE),t.$$.dirty[0]&65536&&n(24,r=p??Number.MAX_VALUE),t.$$.dirty[0]&1024&&(s=typeof C=="string"?C:R),t.$$.dirty[0]&1&&n(31,a=H===fn.Line?"right":"bottom-right"),t.$$.dirty[0]&2048|t.$$.dirty[1]&1&&n(28,u=T??a),t.$$.dirty[0]&268435456&&n(4,c=u.split("-")),t.$$.dirty[0]&1&&n(30,f=H===fn.Line?"border-color":"background-color"),t.$$.dirty[0]&4194304&&n(29,d=L??""),t.$$.dirty[0]&1610616832&&n(3,h=M?`${d} ${f}: ${M};`:d),t.$$.dirty[0]&532545536&&(j==null||j.update({controlPosition:u,boundaries:{minWidth:i,minHeight:o,maxWidth:l,maxHeight:r},keepAspectRatio:!!N,onResizeStart:O,onResize:A,onResizeEnd:V,shouldResize:S}))},[H,W,q,h,c,U,J,D,oe,ne,C,T,M,P,w,z,p,N,S,O,A,V,L,j,r,l,o,i,u,d,f,a,b,_,le]}class Ig extends ue{constructor(e){super(),ae(this,e,Og,Tg,ce,{nodeId:10,position:11,variant:0,color:12,minWidth:13,minHeight:14,maxWidth:15,maxHeight:16,keepAspectRatio:17,shouldResize:18,onResizeStart:19,onResize:20,onResizeEnd:21,style:22,class:1},null,[-1,-1])}}const Dg=t=>uf(t);function Xg(){const{zoomIn:t,zoomOut:e,fitView:n,onbeforedelete:i,snapGrid:o,viewport:l,width:r,height:s,minZoom:a,maxZoom:u,panZoom:c,nodes:f,edges:d,domNode:h,nodeLookup:m,edgeLookup:y}=Ce(),E=v=>{const _=mf(v),b=_?null:Z(f).find(T=>T.id===v.id);return!_&&!b?[null,null,_]:[_?v:Ki(b),b,_]},g=(v,_,b={replace:!1})=>{f.update(C=>C.map(T=>{if(T.id===v){const H=typeof _=="function"?_(T):_;return b.replace&&Dg(H)?H:{...T,...H}}return T}))};return{zoomIn:t,zoomOut:e,getNode:v=>Z(m).get(v),getNodes:v=>v===void 0?Z(f):vl(Z(m),v),getEdge:v=>Z(y).get(v),getEdges:v=>v===void 0?Z(d):vl(Z(y),v),setZoom:(v,_)=>{var b;(b=Z(c))==null||b.scaleTo(v,{duration:_==null?void 0:_.duration})},getZoom:()=>Z(l).zoom,setViewport:(v,_)=>{var C;const b=Z(l);(C=Z(c))==null||C.setViewport({x:v.x??b.x,y:v.y??b.y,zoom:v.zoom??b.zoom},{duration:_==null?void 0:_.duration})},getViewport:()=>Z(l),setCenter:(v,_,b)=>{var T;const C=typeof(b==null?void 0:b.zoom)<"u"?b.zoom:Z(u);(T=Z(c))==null||T.setViewport({x:Z(r)/2-v*C,y:Z(s)/2-_*C,zoom:C},{duration:b==null?void 0:b.duration})},fitView:n,fitBounds:(v,_)=>{var C;const b=no(v,Z(r),Z(s),Z(a),Z(u),(_==null?void 0:_.padding)??.1);(C=Z(c))==null||C.setViewport(b,{duration:_==null?void 0:_.duration})},getIntersectingNodes:(v,_=!0,b)=>{const[C,T,H]=E(v);return C?(b||Z(f)).filter(M=>{var p;if(!H&&(M.id===T.id||!((p=M.computed)!=null&&p.positionAbsolute)))return!1;const P=Ki(M),w=li(P,C);return _&&w>0||w>=C.width*C.height}):[]},isNodeIntersecting:(v,_,b=!0)=>{const[C]=E(v);if(!C)return!1;const T=li(C,_);return b&&T>0||T>=C.width*C.height},deleteElements:async({nodes:v=[],edges:_=[]})=>{const{nodes:b,edges:C}=await yr({nodesToRemove:v,edgesToRemove:_,nodes:Z(f),edges:Z(d),onBeforeDelete:Z(i)});return b&&f.update(T=>T.filter(H=>!b.some(({id:M})=>M===H.id))),C&&d.update(T=>T.filter(H=>!C.some(({id:M})=>M===H.id))),{deletedNodes:b,deletedEdges:C}},screenToFlowPosition:(v,_={snapToGrid:!0})=>{const b=Z(h);if(!b)return v;const C=_.snapToGrid?Z(o):!1,{x:T,y:H,zoom:M}=Z(l),{x:P,y:w}=b.getBoundingClientRect(),z={x:v.x-P,y:v.y-w};return yi(z,[T,H,M],C!==null,C||[1,1])},flowToScreenPosition:v=>{const _=Z(h);if(!_)return v;const{x:b,y:C,zoom:T}=Z(l),{x:H,y:M}=_.getBoundingClientRect(),P=wr(v,[b,C,T]);return{x:P.x+H,y:P.y+M}},toObject:()=>({nodes:Z(f).map(v=>({...v,position:{...v.position},data:{...v.data}})),edges:Z(d).map(v=>({...v})),viewport:{...Z(l)}}),updateNode:g,updateNodeData:(v,_,b)=>{g(v,C=>{const T=typeof _=="function"?_(C):_;return b!=null&&b.replace?{...C,data:T}:{...C,data:{...C.data,...T}}})},viewport:l}}function vl(t,e){const n=[];for(const i of e){const o=t.get(i);o&&n.push(o)}return n}function pg(){const{domNode:t,updateNodeDimensions:e}=Ce();return i=>{const o=Array.isArray(i)?i:[i],l=new Map;o.forEach(r=>{var a;const s=(a=Z(t))==null?void 0:a.querySelector(`.svelte-flow__node[data-id="${r}"]`);s&&l.set(r,{id:r,nodeElement:s,forceUpdate:!0})}),requestAnimationFrame(()=>e(l))}}function Yg(){const{connection:t}=Ce();return t}function Lg(){const{nodes:t}=Ce();return t}function qr(){const{edges:t}=Ce();return t}function Rg(t){let e,n,i,o,l,r,s,a;return{c(){e=ye("p"),e.textContent="Drag to the canvas!",n=de(),i=ye("div"),o=ye("div"),o.textContent="node",l=de(),r=ye("div"),r.textContent="group",k(e,"class","svelte-1bj5q5r"),k(o,"draggable",!0),k(o,"class","svelte-1bj5q5r"),k(r,"draggable",!0),k(r,"class","svelte-1bj5q5r"),k(i,"class","nodes svelte-1bj5q5r")},m(u,c){F(u,e,c),F(u,n,c),F(u,i,c),me(i,o),me(i,l),me(i,r),s||(a=[be(o,"dragstart",t[1]),be(r,"dragstart",t[2])],s=!0)},p:se,i:se,o:se,d(u){u&&(K(e),K(n),K(i)),s=!1,Te(a)}}}function Vg(t){const e=(o,l)=>{if(!o.dataTransfer)return null;o.dataTransfer.setData("application/patchcanvasnode",l),o.dataTransfer.effectAllowed="move"};return[e,o=>e(o,JSON.stringify({inputs:[],outputs:[]})),o=>e(o,JSON.stringify({group:!0}))]}class Wg extends ue{constructor(e){super(),ae(this,e,Vg,Rg,ce,{})}}const Sl=["dante","dmx","sdi","ethernet","audio","midi","osc","power"],Fe={dante:["red",1],dmx:["dodgerblue",2],sdi:["limegreen",3],ethernet:["gold",4],audio:["orange",5],midi:["hotpink",6],osc:["magenta",7],power:["var(--font-colour)",8]};function Bg(t,e){let n=Sl.indexOf(t),i=Sl.indexOf(e);return Math.sign(n-i)}const Kg='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 122.88 103.38" fill="currentColor" style="enable-background:new 0 0 122.88 103.38" xml:space="preserve"><style type="text/css">.st0{fill-rule:evenodd;clip-rule:evenodd;}</style><g><path class="st0" d="M27.66,93.53h32.49l9.1-9.08c1.4-1.4,1.41-3.7,0.01-5.1l-27.02-27.1c-1.4-1.4-3.7-1.41-5.1-0.01L14.3,75.03 c-1.41,1.4-1.41,3.7-0.01,5.1L27.66,93.53L27.66,93.53z M71.03,93.53h51.84v9.85H61.16H50.28h-12.8H25.7h-0.35L1.05,79.01 c-1.4-1.4-1.4-3.7,0.01-5.1L74.11,1.05c1.41-1.4,3.7-1.4,5.1,0.01l39.62,39.72c1.4,1.4,1.4,3.7-0.01,5.1L71.03,93.53L71.03,93.53z"/></g></svg>';function El(t,e,n){const i=t.slice();return i[15]=e[n][0],i[16]=e[n][1],i}function Cl(t){let e,n=t[15]+"",i,o,l,r;function s(){return t[10](t[15])}function a(){return t[11](t[15])}function u(...c){return t[12](t[15],...c)}return{c(){e=ye("div"),i=Qe(n),o=de(),fe(e,"--connection",t[16][0]),k(e,"draggable",!0),k(e,"class","svelte-1nhkcvz")},m(c,f){F(c,e,f),me(e,i),me(e,o),l||(r=[be(e,"mouseenter",s),be(e,"mouseleave",a),be(e,"dragstart",u)],l=!0)},p(c,f){t=c},d(c){c&&K(e),l=!1,Te(r)}}}function Fg(t){let e,n,i,o,l,r,s,a,u,c=Oe(t[2]),f=[];for(let d=0;d<c.length;d+=1)f[d]=Cl(El(t,c,d));return{c(){e=ye("div"),n=new Ss(!1),i=Qe(" erase"),o=de(),l=ye("div"),r=de(),s=ye("div");for(let d=0;d<f.length;d+=1)f[d].c();n.a=i,k(e,"class","eraser svelte-1nhkcvz"),k(e,"draggable",!0),k(l,"id","coverup"),k(s,"class","connections svelte-1nhkcvz")},m(d,h){F(d,e,h),n.m(Kg,e),me(e,i),t[8](e),F(d,o,h),F(d,l,h),F(d,r,h),F(d,s,h);for(let m=0;m<f.length;m+=1)f[m]&&f[m].m(s,null);a||(u=[be(e,"dragstart",t[9]),be(e,"dragend",t[7])],a=!0)},p(d,[h]){if(h&60){c=Oe(d[2]);let m;for(m=0;m<c.length;m+=1){const y=El(d,c,m);f[m]?f[m].p(y,h):(f[m]=Cl(y),f[m].c(),f[m].m(s,null))}for(;m<f.length;m+=1)f[m].d(1);f.length=c.length}},i:se,o:se,d(d){d&&(K(e),K(o),K(l),K(r),K(s)),t[8](null),dn(f,d),a=!1,Te(u)}}}function qg(t,e,n){let i;const o=qr();Q(t,o,v=>n(14,i=v));const l=Object.entries(Fe);function r(v){for(let _ of i)_.sourceHandle===v?_.class+="highlight":_.class+="fade-out";o.set(i);for(let _ of document.querySelectorAll(".svelte-flow__handle"))_.getAttribute("data-handleid")===v?_.classList.add("highlight"):_.classList.add("fade-out")}function s(v){var _,b;v=v;for(let C of i)C.sourceHandle===v?C.class=(_=C.class)==null?void 0:_.replace("highlight",""):C.class=(b=C.class)==null?void 0:b.replace("fade-out","");o.set(i);for(let C of document.querySelectorAll(".svelte-flow__handle"))C.getAttribute("data-handleid")===v?C.classList.remove("highlight"):C.classList.remove("fade-out")}const a=(v,_)=>{if(!v.dataTransfer)return null;v.dataTransfer.setData(`patchcanvasconnection/${_}`,""),v.dataTransfer.effectAllowed="move"};let u,c;const f=v=>{var _;if(!v.dataTransfer)return null;v.dataTransfer.setData("application/patchcanvaseraser",""),v.dataTransfer.effectAllowed="move",c=u.cloneNode(!0),c.classList.add("dragging"),c.style.position="absolute",c.style.top="0",c.style.right="0",c.style.zIndex="-1",document.body.appendChild(c),(_=v.dataTransfer)==null||_.setDragImage(c,0,0)},d=()=>{c.remove()};function h(v){mt[v?"unshift":"push"](()=>{u=v,n(0,u)})}return[u,o,l,r,s,a,f,d,h,v=>f(v),v=>r(v),v=>s(v),(v,_)=>a(_,v)]}class Zg extends ue{constructor(e){super(),ae(this,e,qg,Fg,ce,{})}}function Ug(t){let e,n,i,o,l,r,s;return o=new Wg({}),r=new Zg({}),{c(){e=ye("aside"),n=ye("h1"),n.textContent="PatchCanvas",i=de(),te(o.$$.fragment),l=de(),te(r.$$.fragment),k(n,"class","svelte-5ndvm3"),k(e,"class","svelte-5ndvm3")},m(a,u){F(a,e,u),me(e,n),me(e,i),$(o,e,null),me(e,l),$(r,e,null),s=!0},p:se,i(a){s||(Y(o.$$.fragment,a),Y(r.$$.fragment,a),s=!0)},o(a){B(o.$$.fragment,a),B(r.$$.fragment,a),s=!1},d(a){a&&K(e),ee(o),ee(r)}}}class Gg extends ue{constructor(e){super(),ae(this,e,null,Ug,ce,{})}}function Jg(t){let e,n;return e=new An({props:{path:t[6],labelX:t[5],labelY:t[4],markerStart:t[2],markerEnd:t[0],style:t[1],class:t[3]}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p(i,[o]){const l={};o&64&&(l.path=i[6]),o&32&&(l.labelX=i[5]),o&16&&(l.labelY=i[4]),o&4&&(l.markerStart=i[2]),o&1&&(l.markerEnd=i[0]),o&2&&(l.style=i[1]),o&8&&(l.class=i[3]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function Qg(t,e,n){let i,o,l,{id:r}=e,{source:s}=e,{sourceX:a}=e,{sourceY:u}=e,{sourcePosition:c}=e,{sourceHandleId:f=""}=e,{target:d}=e,{targetX:h}=e,{targetY:m}=e,{targetPosition:y}=e,{targetHandleId:E=""}=e,{markerStart:g=void 0}=e,{markerEnd:v=void 0}=e,{animated:_=!1}=e,{selected:b=!1}=e,{label:C=""}=e,{labelStyle:T=""}=e,{data:H=void 0}=e,{interactionWidth:M=void 0}=e,{style:P=""}=e,{edgeClass:w=""}=e;return qr(),t.$$set=z=>{"id"in z&&n(7,r=z.id),"source"in z&&n(8,s=z.source),"sourceX"in z&&n(9,a=z.sourceX),"sourceY"in z&&n(10,u=z.sourceY),"sourcePosition"in z&&n(11,c=z.sourcePosition),"sourceHandleId"in z&&n(12,f=z.sourceHandleId),"target"in z&&n(13,d=z.target),"targetX"in z&&n(14,h=z.targetX),"targetY"in z&&n(15,m=z.targetY),"targetPosition"in z&&n(16,y=z.targetPosition),"targetHandleId"in z&&n(17,E=z.targetHandleId),"markerStart"in z&&n(2,g=z.markerStart),"markerEnd"in z&&n(0,v=z.markerEnd),"animated"in z&&n(18,_=z.animated),"selected"in z&&n(19,b=z.selected),"label"in z&&n(20,C=z.label),"labelStyle"in z&&n(21,T=z.labelStyle),"data"in z&&n(22,H=z.data),"interactionWidth"in z&&n(23,M=z.interactionWidth),"style"in z&&n(1,P=z.style),"edgeClass"in z&&n(3,w=z.edgeClass)},t.$$.update=()=>{if(t.$$.dirty&118272&&n(6,[i,o,l]=Qt({sourceX:a,sourceY:u,sourcePosition:c,targetX:h,targetY:m,targetPosition:y}),i,(n(5,o),n(9,a),n(10,u),n(11,c),n(14,h),n(15,m),n(16,y)),(n(4,l),n(9,a),n(10,u),n(11,c),n(14,h),n(15,m),n(16,y))),t.$$.dirty&4096){let z=Fe[f??""][0];n(1,P=`stroke: ${z};`),n(0,v=`url(#${f})`)}},[v,P,g,w,l,o,i,r,s,a,u,c,f,d,h,m,y,E,_,b,C,T,H,M]}class jg extends ue{constructor(e){super(),ae(this,e,Qg,Jg,ce,{id:7,source:8,sourceX:9,sourceY:10,sourcePosition:11,sourceHandleId:12,target:13,targetX:14,targetY:15,targetPosition:16,targetHandleId:17,markerStart:2,markerEnd:0,animated:18,selected:19,label:20,labelStyle:21,data:22,interactionWidth:23,style:1,edgeClass:3})}}const xg=`<svg fill="currentColor" viewBox="4 2 8 12" xmlns="http://www.w3.org/2000/svg"\r
	><path\r
		fill-rule="evenodd"\r
		d="M7.375 3.67c0-.645-.56-1.17-1.25-1.17s-1.25.525-1.25 1.17c0 .646.56 1.17 1.25 1.17s1.25-.524 1.25-1.17zm0 8.66c0-.646-.56-1.17-1.25-1.17s-1.25.524-1.25 1.17c0 .645.56 1.17 1.25 1.17s1.25-.525 1.25-1.17zm-1.25-5.5c.69 0 1.25.525 1.25 1.17 0 .645-.56 1.17-1.25 1.17S4.875 8.645 4.875 8c0-.645.56-1.17 1.25-1.17zm5-3.16c0-.645-.56-1.17-1.25-1.17s-1.25.525-1.25 1.17c0 .646.56 1.17 1.25 1.17s1.25-.524 1.25-1.17zm-1.25 7.49c.69 0 1.25.524 1.25 1.17 0 .645-.56 1.17-1.25 1.17s-1.25-.525-1.25-1.17c0-.646.56-1.17 1.25-1.17zM11.125 8c0-.645-.56-1.17-1.25-1.17s-1.25.525-1.25 1.17c0 .645.56 1.17 1.25 1.17s1.25-.525 1.25-1.17z"\r
	/></svg\r
>\r
`;function $g(t){let e,n;return e=new vn({props:{id:t[0],type:t[1]==="input"?"target":"source",position:t[1]==="input"?ge.Top:ge.Bottom,style:t[2]+`background: ${Fe[t[0]][0]};
		left: calc( ${t[1]==="input"?"":"12px + "} (${Fe[t[0]][1]}px * 16));
		border: none;
		width: 8px;
		height: 8px;`,isConnectable:!0}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p(i,[o]){const l={};o&1&&(l.id=i[0]),o&2&&(l.type=i[1]==="input"?"target":"source"),o&2&&(l.position=i[1]==="input"?ge.Top:ge.Bottom),o&7&&(l.style=i[2]+`background: ${Fe[i[0]][0]};
		left: calc( ${i[1]==="input"?"":"12px + "} (${Fe[i[0]][1]}px * 16));
		border: none;
		width: 8px;
		height: 8px;`),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function e1(t,e,n){let{id:i}=e,{io:o}=e,{style:l=""}=e,{drop:r}=e;return addEventListener("drop",r),t.$$set=s=>{"id"in s&&n(0,i=s.id),"io"in s&&n(1,o=s.io),"style"in s&&n(2,l=s.style),"drop"in s&&n(3,r=s.drop)},[i,o,l,r]}class Zr extends ue{constructor(e){super(),ae(this,e,e1,$g,ce,{id:0,io:1,style:2,drop:3})}}function Ml(t,e,n){const i=t.slice();return i[38]=e[n],i[40]=n,i}function zl(t,e,n){const i=t.slice();return i[38]=e[n],i[40]=n,i}function Pl(t){let e,n,i,o,l,r,s;return{c(){e=ye("div"),n=de(),i=ye("div"),o=de(),l=ye("div"),k(e,"class","drop-target inputs svelte-qy4456"),k(i,"class","drop-target outputs svelte-qy4456"),k(l,"class","hover svelte-qy4456")},m(a,u){F(a,e,u),t[23](e),F(a,n,u),F(a,i,u),t[27](i),F(a,o,u),F(a,l,u),r||(s=[be(e,"dragenter",t[24]),be(e,"dragleave",t[25]),be(e,"drop",t[26]),be(i,"dragenter",t[28]),be(i,"dragleave",t[29]),be(i,"drop",t[30])],r=!0)},p:se,d(a){a&&(K(e),K(n),K(i),K(o),K(l)),t[23](null),t[27](null),r=!1,Te(s)}}}function Hl(t){let e,n;return e=new Ig({props:{minWidth:200,minHeight:105,style:"background: transparent; border: none;",$$slots:{default:[t1]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function t1(t){let e,n,i,o,l,r;return{c(){e=he("svg"),n=he("path"),i=he("polyline"),o=he("line"),l=he("polyline"),r=he("line"),k(n,"stroke","none"),k(n,"d","M0 0h24v24H0z"),k(n,"fill","none"),k(i,"points","16 20 20 20 20 16"),k(o,"x1","14"),k(o,"y1","14"),k(o,"x2","20"),k(o,"y2","20"),k(l,"points","8 4 4 4 4 8"),k(r,"x1","4"),k(r,"y1","4"),k(r,"x2","10"),k(r,"y2","10"),k(e,"xmlns","http://www.w3.org/2000/svg"),k(e,"width","15"),k(e,"height","15"),k(e,"viewBox","0 0 24 24"),k(e,"stroke-width","2"),k(e,"stroke","var(--font-colour)"),k(e,"fill","none"),k(e,"stroke-linecap","round"),k(e,"stroke-linejoin","round"),fe(e,"position","absolute"),fe(e,"right","0.5em"),fe(e,"bottom","0.5em")},m(s,a){F(s,e,a),me(e,n),me(e,i),me(e,o),me(e,l),me(e,r)},p:se,d(s){s&&K(e)}}}function Nl(t){let e,n;return e=new Zr({props:{id:t[38],io:"input",drop:t[7]}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p(i,o){const l={};o[0]&1&&(l.id=i[38]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function Al(t){let e,n;return e=new Zr({props:{id:t[38],io:"output",drop:t[7]}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p(i,o){const l={};o[0]&1&&(l.id=i[38]),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function n1(t){let e,n,i,o,l=t[0].label+"",r,s,a,u,c,f,d,h,m,y,E,g,v,_=!t[0].group&&Pl(t),b=t[0].group&&Hl(t),C=Oe(t[0].inputs),T=[];for(let z=0;z<C.length;z+=1)T[z]=Nl(zl(t,C,z));const H=z=>B(T[z],1,1,()=>{T[z]=null});let M=Oe(t[0].outputs),P=[];for(let z=0;z<M.length;z+=1)P[z]=Al(Ml(t,M,z));const w=z=>B(P[z],1,1,()=>{P[z]=null});return{c(){_&&_.c(),e=de(),n=ye("div"),i=ye("span"),o=de(),r=Qe(l),s=de(),a=ye("button"),a.textContent="✎",u=de(),c=ye("button"),c.textContent="❌",d=de(),b&&b.c(),h=de();for(let z=0;z<T.length;z+=1)T[z].c();m=de();for(let z=0;z<P.length;z+=1)P[z].c();y=Ie(),k(i,"class","drag-handle drag-dots svelte-qy4456"),k(a,"class","reverse svelte-qy4456"),k(c,"class","svelte-qy4456"),k(n,"style",f=t[0].labelStyle),k(n,"class","label svelte-qy4456")},m(z,p){_&&_.m(z,p),F(z,e,p),F(z,n,p),me(n,i),i.innerHTML=xg,me(n,o),me(n,r),me(n,s),me(n,a),me(n,u),me(n,c),F(z,d,p),b&&b.m(z,p),F(z,h,p);for(let N=0;N<T.length;N+=1)T[N]&&T[N].m(z,p);F(z,m,p);for(let N=0;N<P.length;N+=1)P[N]&&P[N].m(z,p);F(z,y,p),E=!0,g||(v=[be(a,"click",t[31]),be(c,"click",t[32])],g=!0)},p(z,p){if(z[0].group?_&&(_.d(1),_=null):_?_.p(z,p):(_=Pl(z),_.c(),_.m(e.parentNode,e)),(!E||p[0]&1)&&l!==(l=z[0].label+"")&&jt(r,l),(!E||p[0]&1&&f!==(f=z[0].labelStyle))&&k(n,"style",f),z[0].group?b?p[0]&1&&Y(b,1):(b=Hl(z),b.c(),Y(b,1),b.m(h.parentNode,h)):b&&(Pe(),B(b,1,1,()=>{b=null}),He()),p[0]&129){C=Oe(z[0].inputs);let N;for(N=0;N<C.length;N+=1){const S=zl(z,C,N);T[N]?(T[N].p(S,p),Y(T[N],1)):(T[N]=Nl(S),T[N].c(),Y(T[N],1),T[N].m(m.parentNode,m))}for(Pe(),N=C.length;N<T.length;N+=1)H(N);He()}if(p[0]&129){M=Oe(z[0].outputs);let N;for(N=0;N<M.length;N+=1){const S=Ml(z,M,N);P[N]?(P[N].p(S,p),Y(P[N],1)):(P[N]=Al(S),P[N].c(),Y(P[N],1),P[N].m(y.parentNode,y))}for(Pe(),N=M.length;N<P.length;N+=1)w(N);He()}},i(z){if(!E){Y(b);for(let p=0;p<C.length;p+=1)Y(T[p]);for(let p=0;p<M.length;p+=1)Y(P[p]);E=!0}},o(z){B(b),T=T.filter(Boolean);for(let p=0;p<T.length;p+=1)B(T[p]);P=P.filter(Boolean);for(let p=0;p<P.length;p+=1)B(P[p]);E=!1},d(z){z&&(K(e),K(n),K(d),K(h),K(m),K(y)),_&&_.d(z),b&&b.d(z),dn(T,z),dn(P,z),g=!1,Te(v)}}}function Bn(t,e){return!t.includes(e)}function i1(t,e,n){let i;const o=Lg();Q(t,o,R=>n(33,i=R));let{id:l}=e,{data:r}=e,{dragHandle:s}=e,{type:a}=e,{isConnectable:u}=e,{selected:c}=e,{zIndex:f}=e,{positionAbsoluteX:d}=e,{positionAbsoluteY:h}=e,{width:m=void 0}=e,{height:y=void 0}=e,{dragging:E=!1}=e,{sourcePosition:g=void 0}=e,{targetPosition:v=void 0}=e,_,b;const C=(R,q,j)=>{if(R.preventDefault(),R.stopPropagation(),!R.dataTransfer)return null;if(R.dataTransfer.types[0].includes("patchcanvasconnection/")){const le=R.dataTransfer.types[0].replace("patchcanvasconnection/","");let I=!1;switch(q){case"input":I=Bn(r.inputs,le);break;case"output":I=Bn(r.outputs,le);break}I?(N([...q==="input"?r.inputs:r.outputs,le],j),j.style.backgroundColor="green",R.dataTransfer.dropEffect="move"):(j.style.backgroundColor="red",j.style.backgroundImage="",R.dataTransfer.dropEffect="none")}},T=(R,q)=>{R.preventDefault(),q.style.backgroundColor="",q===_?N(r.inputs,_):N(r.outputs,b)},H=(R,q,j)=>{if(R.preventDefault(),!R.dataTransfer)return null;if(R.dataTransfer.types[0].includes("patchcanvasconnection/")){const le=R.dataTransfer.types[0].replace("patchcanvasconnection/","");let I=!1;switch(q){case"input":I=Bn(r.inputs,le);break;case"output":I=Bn(r.outputs,le);break}I&&w(le,q),j.style.backgroundColor="",N(q==="input"?r.inputs:r.outputs,j)}},M=R=>{var q,j,le;if(R.preventDefault(),!R.dataTransfer)return null;if(R.dataTransfer.types[0]==="application/patchcanvaseraser"){if(((q=R.target.attributes.getNamedItem("data-nodeid"))==null?void 0:q.value)!==l)return null;let I=(j=R.target.attributes.getNamedItem("data-handleid"))==null?void 0:j.value,we=((le=R.target.attributes.getNamedItem("data-handlepos"))==null?void 0:le.value)==="top"?"input":"output";S(I,we),N(we==="input"?r.inputs:r.outputs,we==="input"?_:b)}},P=pg();function w(R,q){switch(q){case"input":r.inputs.push(R);break;case"output":r.outputs.push(R);break}n(0,r),P(l)}function z(){let R=r.label;n(0,r.label=prompt(`Rename '${r.label}' to:`,r.label),r),r.label===null&&n(0,r.label=R,r)}function p(){window.confirm(`Actually delete ${r.label}?`)&&Gn(o,i=i.filter(q=>q.id!=l),i)}function N(R,q){if(q==null){setTimeout(N,0,R,q);return}let j=[...R];j.sort(Bg);let le=[];le.push("transparent 2%");for(const I in Fe){let we="transparent";j.includes(I)&&(we=Fe[I][0]);let ke=Fe[I][1];q===b&&(ke+=.75);let Ae=ke*16/150*100;we+=` ${Ae}%`,le.push(we)}le.push("transparent"),q.style.backgroundImage=`linear-gradient(to right, ${le.join(", ")})`}setTimeout(()=>{N(r.inputs,_),N(r.outputs,b)},0);function S(R,q){switch(q){case"input":n(0,r.inputs=r.inputs.filter(j=>j!==R),r);break;case"output":n(0,r.outputs=r.outputs.filter(j=>j!==R),r);break}n(0,r),P(l)}function O(R){mt[R?"unshift":"push"](()=>{_=R,n(1,_)})}const A=R=>C(R,"input",_),V=R=>T(R,_),L=R=>H(R,"input",_);function W(R){mt[R?"unshift":"push"](()=>{b=R,n(2,b)})}const U=R=>C(R,"output",b),J=R=>T(R,b),D=R=>H(R,"output",b),oe=()=>z(),ne=()=>p();return t.$$set=R=>{"id"in R&&n(10,l=R.id),"data"in R&&n(0,r=R.data),"dragHandle"in R&&n(11,s=R.dragHandle),"type"in R&&n(12,a=R.type),"isConnectable"in R&&n(13,u=R.isConnectable),"selected"in R&&n(14,c=R.selected),"zIndex"in R&&n(15,f=R.zIndex),"positionAbsoluteX"in R&&n(16,d=R.positionAbsoluteX),"positionAbsoluteY"in R&&n(17,h=R.positionAbsoluteY),"width"in R&&n(18,m=R.width),"height"in R&&n(19,y=R.height),"dragging"in R&&n(20,E=R.dragging),"sourcePosition"in R&&n(21,g=R.sourcePosition),"targetPosition"in R&&n(22,v=R.targetPosition)},[r,_,b,o,C,T,H,M,z,p,l,s,a,u,c,f,d,h,m,y,E,g,v,O,A,V,L,W,U,J,D,oe,ne]}class o1 extends ue{constructor(e){super(),ae(this,e,i1,n1,ce,{id:10,data:0,dragHandle:11,type:12,isConnectable:13,selected:14,zIndex:15,positionAbsoluteX:16,positionAbsoluteY:17,width:18,height:19,dragging:20,sourcePosition:21,targetPosition:22},null,[-1,-1])}}function Tl(t){let e,n,i,o;function l(a,u){var c,f;if(((c=a[0].startHandle)==null?void 0:c.type)=="target")return r1;if(((f=a[0].startHandle)==null?void 0:f.type)=="source")return l1}let r=l(t),s=r&&r(t);return{c(){s&&s.c(),e=de(),n=he("circle"),k(n,"cx",i=t[0].targetX),k(n,"cy",o=t[0].targetY),k(n,"fill","var(--font-colour)"),k(n,"r",3),k(n,"stroke",Fe[t[3]][0]??"var(--font-colour)"),k(n,"stroke-width",1.5)},m(a,u){s&&s.m(a,u),F(a,e,u),F(a,n,u)},p(a,u){r===(r=l(a))&&s?s.p(a,u):(s&&s.d(1),s=r&&r(a),s&&(s.c(),s.m(e.parentNode,e))),u&1&&i!==(i=a[0].targetX)&&k(n,"cx",i),u&1&&o!==(o=a[0].targetY)&&k(n,"cy",o)},d(a){a&&(K(e),K(n)),s&&s.d(a)}}}function l1(t){let e,n;return{c(){var i;e=he("path"),k(e,"fill","none"),k(e,"stroke-width",1.5),k(e,"class","animated"),k(e,"stroke",Fe[t[3]][0]??"var(--font-colour)"),k(e,"d",t[1]),k(e,"marker-end",n="url(#"+((i=t[0].startHandle)==null?void 0:i.handleId)+"line)")},m(i,o){F(i,e,o)},p(i,o){var l;o&2&&k(e,"d",i[1]),o&1&&n!==(n="url(#"+((l=i[0].startHandle)==null?void 0:l.handleId)+"line)")&&k(e,"marker-end",n)},d(i){i&&K(e)}}}function r1(t){let e,n;return{c(){var i;e=he("path"),k(e,"fill","none"),k(e,"stroke-width",1.5),k(e,"class","animated"),k(e,"stroke",Fe[t[3]][0]??"var(--font-colour)"),k(e,"d",t[1]),k(e,"marker-start",n="url(#"+((i=t[0].startHandle)==null?void 0:i.handleId)+"line)")},m(i,o){F(i,e,o)},p(i,o){var l;o&2&&k(e,"d",i[1]),o&1&&n!==(n="url(#"+((l=i[0].startHandle)==null?void 0:l.handleId)+"line)")&&k(e,"marker-start",n)},d(i){i&&K(e)}}}function s1(t){let e,n=t[0].path&&Tl(t);return{c(){n&&n.c(),e=Ie()},m(i,o){n&&n.m(i,o),F(i,e,o)},p(i,[o]){i[0].path?n?n.p(i,o):(n=Tl(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:se,o:se,d(i){i&&K(e),n&&n.d(i)}}}function a1(t,e,n){var s;let i;const o=Yg();Q(t,o,a=>n(0,i=a));let l="",r=((s=i.startHandle)==null?void 0:s.handleId)??"";return t.$$.update=()=>{if(t.$$.dirty&1){let{sourceX:a,sourceY:u,sourcePosition:c,targetX:f,targetY:d,targetPosition:h}=i;n(1,[l]=Qt({sourceX:a??0,sourceY:u??0,sourcePosition:c??ge.Bottom,targetX:f??0,targetY:d??0,targetPosition:h??ge.Top}),l)}},[i,l,o,r]}class u1 extends ue{constructor(e){super(),ae(this,e,a1,s1,ce,{})}}function c1(t){let e,n,i,o,l,r,s;return{c(){e=he("svg"),n=he("defs"),i=he("marker"),o=he("polyline"),k(o,"stroke",t[0]),k(o,"stroke-linecap","round"),k(o,"stroke-linejoin","round"),k(o,"stroke-width",t[6]),k(o,"fill",t[0]),k(o,"points","-5,-4 0,0 -5,4 -5,-4"),k(i,"class","svelte-flow__arrowhead"),k(i,"id",t[1]),k(i,"markerWidth",l=`${t[2]}`),k(i,"markerHeight",r=`${t[3]}`),k(i,"viewBox","-10 -10 20 20"),k(i,"markerUnits",t[4]),k(i,"orient",t[5]),k(i,"refX",s=t[1].includes("line")?"4":"0"),k(i,"refY","0"),k(e,"class","svelte-1wqugfi")},m(a,u){F(a,e,u),me(e,n),me(n,i),me(i,o)},p(a,[u]){u&1&&k(o,"stroke",a[0]),u&64&&k(o,"stroke-width",a[6]),u&1&&k(o,"fill",a[0]),u&2&&k(i,"id",a[1]),u&4&&l!==(l=`${a[2]}`)&&k(i,"markerWidth",l),u&8&&r!==(r=`${a[3]}`)&&k(i,"markerHeight",r),u&16&&k(i,"markerUnits",a[4]),u&32&&k(i,"orient",a[5]),u&2&&s!==(s=a[1].includes("line")?"4":"0")&&k(i,"refX",s)},i:se,o:se,d(a){a&&K(e)}}}function f1(t,e,n){let{id:i}=e,{type:o}=e,{width:l=12.5}=e,{height:r=12.5}=e,{markerUnits:s="strokeWidth"}=e,{orient:a="auto-start-reverse"}=e,{color:u=void 0}=e,{strokeWidth:c=void 0}=e;return t.$$set=f=>{"id"in f&&n(1,i=f.id),"type"in f&&n(7,o=f.type),"width"in f&&n(2,l=f.width),"height"in f&&n(3,r=f.height),"markerUnits"in f&&n(4,s=f.markerUnits),"orient"in f&&n(5,a=f.orient),"color"in f&&n(0,u=f.color),"strokeWidth"in f&&n(6,c=f.strokeWidth)},t.$$.update=()=>{t.$$.dirty&2&&n(0,u=Fe[i.replace("line","")??""][0])},[u,i,l,r,s,a,c,o]}class Ur extends ue{constructor(e){super(),ae(this,e,f1,c1,ce,{id:1,type:7,width:2,height:3,markerUnits:4,orient:5,color:0,strokeWidth:6})}}const ft=[{id:crypto.randomUUID().toString(),data:{label:"Group",inputs:[],outputs:[],group:!0},class:"group",dragHandle:".drag-dots",position:{x:200,y:0}},{id:crypto.randomUUID().toString(),type:"default",data:{label:"Patch",connection:"",inputs:[],outputs:["ethernet","sdi","audio","power"],group:!1},position:{x:0,y:0}},{id:crypto.randomUUID().toString(),type:"default",data:{label:"Canvas",inputs:["dante","dmx","ethernet","sdi","audio","midi","osc","power"],outputs:["dante","dmx","ethernet","sdi","audio","midi","osc"]},dragHandle:".drag-dots",position:{x:0,y:100}},{id:crypto.randomUUID().toString(),type:"default",data:{label:"Subnode",connection:"",inputs:["dante","power"],outputs:["dante"],group:!1},dragHandle:".drag-dots",position:{x:225,y:50}}],d1=[{id:crypto.randomUUID().toString(),type:"connection",class:"",source:ft[1].id,sourceHandle:"ethernet",target:ft[2].id,targetHandle:"ethernet"},{id:crypto.randomUUID().toString(),type:"connection",class:"",source:ft[1].id,sourceHandle:"sdi",target:ft[2].id,targetHandle:"sdi"},{id:crypto.randomUUID().toString(),type:"connection",class:"",source:ft[1].id,sourceHandle:"audio",target:ft[2].id,targetHandle:"audio"},{id:crypto.randomUUID().toString(),type:"connection",class:"",source:ft[1].id,sourceHandle:"power",target:ft[2].id,targetHandle:"power"}];function Ol(t,e,n){const i=t.slice();return i[16]=e[n][0],i[17]=e[n][1],i}function Il(t,e,n){const i=t.slice();return i[16]=e[n][0],i[17]=e[n][1],i}function Dl(t){let e,n;return e=new Ur({props:{id:t[16],type:Gt.ArrowClosed}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p:se,i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function Xl(t){let e,n;return e=new Ur({props:{id:t[16]+"line",type:Gt.ArrowClosed}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p:se,i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function h1(t){let e;return{c(){e=Qe("🌙")},m(n,i){F(n,e,i)},d(n){n&&K(e)}}}function g1(t){let e,n;return e=new En({props:{$$slots:{default:[h1]},$$scope:{ctx:t}}}),e.$on("click",t[10]),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p(i,o){const l={};o&4194304&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function m1(t){let e,n,i;return{c(){e=ye("a"),e.textContent="GitHub",n=ye("br"),i=Qe("© 2024 Craig Anderson"),k(e,"href","https://github.com/theonlytechnohead/patchcanvas")},m(o,l){F(o,e,l),F(o,n,l),F(o,i,l)},p:se,d(o){o&&(K(e),K(n),K(i))}}}function _1(t){let e,n;return e=new Gg({}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function y1(t){let e,n,i,o,l,r,s,a,u,c,f,d,h=Oe(t[1]),m=[];for(let _=0;_<h.length;_+=1)m[_]=Dl(Il(t,h,_));const y=_=>B(m[_],1,1,()=>{m[_]=null});let E=Oe(t[1]),g=[];for(let _=0;_<E.length;_+=1)g[_]=Xl(Ol(t,E,_));const v=_=>B(g[_],1,1,()=>{g[_]=null});return i=new kg({props:{variant:gt.Dots}}),l=new Ag({props:{position:"top-right",pannable:!1,zoomable:!1,width:visualViewport!=null&&visualViewport.width?(visualViewport==null?void 0:visualViewport.width)/10:void 0,height:visualViewport!=null&&visualViewport.height?(visualViewport==null?void 0:visualViewport.height)/10:void 0}}),s=new lg({props:{position:"bottom-right",showFitView:!1,showLock:!1,$$slots:{default:[g1]},$$scope:{ctx:t}}}),u=new Sn({props:{position:"bottom-left",$$slots:{default:[m1]},$$scope:{ctx:t}}}),f=new Sn({props:{position:"top-left",$$slots:{default:[_1]},$$scope:{ctx:t}}}),{c(){for(let _=0;_<m.length;_+=1)m[_].c();e=de();for(let _=0;_<g.length;_+=1)g[_].c();n=de(),te(i.$$.fragment),o=de(),te(l.$$.fragment),r=de(),te(s.$$.fragment),a=de(),te(u.$$.fragment),c=de(),te(f.$$.fragment)},m(_,b){for(let C=0;C<m.length;C+=1)m[C]&&m[C].m(_,b);F(_,e,b);for(let C=0;C<g.length;C+=1)g[C]&&g[C].m(_,b);F(_,n,b),$(i,_,b),F(_,o,b),$(l,_,b),F(_,r,b),$(s,_,b),F(_,a,b),$(u,_,b),F(_,c,b),$(f,_,b),d=!0},p(_,b){if(b&2){h=Oe(_[1]);let M;for(M=0;M<h.length;M+=1){const P=Il(_,h,M);m[M]?(m[M].p(P,b),Y(m[M],1)):(m[M]=Dl(P),m[M].c(),Y(m[M],1),m[M].m(e.parentNode,e))}for(Pe(),M=h.length;M<m.length;M+=1)y(M);He()}if(b&2){E=Oe(_[1]);let M;for(M=0;M<E.length;M+=1){const P=Ol(_,E,M);g[M]?(g[M].p(P,b),Y(g[M],1)):(g[M]=Xl(P),g[M].c(),Y(g[M],1),g[M].m(n.parentNode,n))}for(Pe(),M=E.length;M<g.length;M+=1)v(M);He()}const C={};b&4194305&&(C.$$scope={dirty:b,ctx:_}),s.$set(C);const T={};b&4194304&&(T.$$scope={dirty:b,ctx:_}),u.$set(T);const H={};b&4194304&&(H.$$scope={dirty:b,ctx:_}),f.$set(H)},i(_){if(!d){for(let b=0;b<h.length;b+=1)Y(m[b]);for(let b=0;b<E.length;b+=1)Y(g[b]);Y(i.$$.fragment,_),Y(l.$$.fragment,_),Y(s.$$.fragment,_),Y(u.$$.fragment,_),Y(f.$$.fragment,_),d=!0}},o(_){m=m.filter(Boolean);for(let b=0;b<m.length;b+=1)B(m[b]);g=g.filter(Boolean);for(let b=0;b<g.length;b+=1)B(g[b]);B(i.$$.fragment,_),B(l.$$.fragment,_),B(s.$$.fragment,_),B(u.$$.fragment,_),B(f.$$.fragment,_),d=!1},d(_){_&&(K(e),K(n),K(o),K(r),K(a),K(c)),dn(m,_),dn(g,_),ee(i,_),ee(l,_),ee(s,_),ee(u,_),ee(f,_)}}}function b1(t){let e,n;return e=new u1({props:{slot:"connectionLine"}}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p:se,i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function w1(t){let e,n;return e=new T0({props:{nodes:t[4],nodeTypes:t[2],edges:t[5],edgeTypes:t[3],defaultEdgeOptions:t[6],isValidConnection:k1,snapGrid:[25,25],colorMode:t[0],fitView:!0,fitViewOptions:t[7],minZoom:.75,maxZoom:10,onlyRenderVisibleElements:!0,attributionPosition:"top-right",deleteKey:"Delete",$$slots:{connectionLine:[b1],default:[y1]},$$scope:{ctx:t}}}),e.$on("dragover",t[8]),e.$on("drop",t[9]),e.$on("nodeclick",t[11]),e.$on("edgeclick",t[12]),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},p(i,[o]){const l={};o&1&&(l.colorMode=i[0]),o&4194305&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function k1(t){return t.sourceHandle===t.targetHandle}function v1(t,e,n){let i;const o=Object.entries(Fe);let l;const r={default:o1},s={connection:jg},a=re(ft);Q(t,a,_=>n(13,i=_));const u=re(d1),c={animated:!1,type:"connection",class:""},f={padding:1,duration:1e3},{screenToFlowPosition:d}=Xg(),h=_=>{if(_.preventDefault(),_.dataTransfer){const b=document.elementFromPoint(_.clientX,_.clientY);let C="";_.dataTransfer.types[0]==="application/patchcanvasnode"?C=".svelte-flow__pane, .svelte-flow__edge, .svelte-flow__node.group":_.dataTransfer.types[0].includes("patchcanvasconnection/")?C=".drop-target":_.dataTransfer.types[0]==="application/patchcanvaseraser"&&(C=".svelte-flow__handle"),b!=null&&b.matches(C)?_.dataTransfer.dropEffect="move":_.dataTransfer.dropEffect="none"}},m=_=>{if(_.preventDefault(),!_.dataTransfer)return null;if(_.dataTransfer.types[0]==="application/patchcanvasnode"){const b=JSON.parse(_.dataTransfer.getData("application/patchcanvasnode"));y(b,_.clientX,_.clientY)}};function y(_,b,C){const T=d({x:b,y:C}),H={id:crypto.randomUUID().toString(),type:"default",position:T,connectable:!_.group,data:{label:"Unnamed "+(_.group?"group":"node"),group:_.group??!1,inputs:_.inputs??[],outputs:_.outputs??[]},class:_.group?"group":void 0,dragHandle:".drag-dots",origin:[.5,0]};i.push(H),i.sort((M,P)=>M.data.group?P.data.group?0:-1:P.data.group?1:0),a.set(i)}const E=()=>{var _;l==="dark"?n(0,l="light"):n(0,l="dark"),document.documentElement.setAttribute("data-theme",l),(_=document.querySelector('meta[name="color-scheme"]'))==null||_.setAttribute("content",l)},g=_=>console.log("on node click",_.detail.node),v=_=>console.log("on edge click: ",_.detail.edge);return n(0,l=document.documentElement.getAttribute("data-theme")??"dark"),[l,o,r,s,a,u,c,f,h,m,E,g,v]}class S1 extends ue{constructor(e){super(),ae(this,e,v1,w1,ce,{})}}function E1(t){let e,n;return e=new S1({}),{c(){te(e.$$.fragment)},m(i,o){$(e,i,o),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){B(e.$$.fragment,i),n=!1},d(i){ee(e,i)}}}function C1(t){let e,n,i,o;return i=new D0({props:{$$slots:{default:[E1]},$$scope:{ctx:t}}}),{c(){e=ye("main"),n=ye("div"),te(i.$$.fragment),fe(n,"height","100%")},m(l,r){F(l,e,r),me(e,n),$(i,n,null),o=!0},p(l,[r]){const s={};r&1&&(s.$$scope={dirty:r,ctx:l}),i.$set(s)},i(l){o||(Y(i.$$.fragment,l),o=!0)},o(l){B(i.$$.fragment,l),o=!1},d(l){l&&K(e),ee(i)}}}class M1 extends ue{constructor(e){super(),ae(this,e,null,C1,ce,{})}}new M1({target:document.body});
