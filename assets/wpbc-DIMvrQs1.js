import{S as b,i as C,s as k,a as q,e as d,c as h,b as y,d as _,f as S,m as v,t as l,g as i,h as w,j as $,k as f,n as p,o as L,p as P,q as j,r as x,C as R,l as u,u as m}from"./Canvas-C4PaSAOz.js";function g(r){let t,o;return t=new R({}),{c(){h(t.$$.fragment)},m(e,n){v(t,e,n),o=!0},i(e){o||(l(t.$$.fragment,e),o=!0)},o(e){i(t.$$.fragment,e),o=!1},d(e){$(t,e)}}}function B(r){let t,o,e=r[0]&&g();return{c(){e&&e.c(),t=P()},m(n,s){e&&e.m(n,s),_(n,t,s),o=!0},p(n,s){n[0]?e?s&1&&l(e,1):(e=g(),e.c(),l(e,1),e.m(t.parentNode,t)):e&&(j(),i(e,1,1,()=>{e=null}),x())},i(n){o||(l(e),o=!0)},o(n){i(e),o=!1},d(n){n&&w(t),e&&e.d(n)}}}function F(r){let t,o,e,n;return e=new q({props:{$$slots:{default:[B]},$$scope:{ctx:r}}}),{c(){t=d("main"),o=d("div"),h(e.$$.fragment),y(o,"height","100%")},m(s,a){_(s,t,a),S(t,o),v(e,o,null),n=!0},p(s,[a]){const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),e.$set(c)},i(s){n||(l(e.$$.fragment,s),n=!0)},o(s){i(e.$$.fragment,s),n=!1},d(s){s&&w(t),$(e)}}}function M(r,t,o){let e,n;f(r,u,a=>o(1,e=a)),f(r,p,a=>o(2,n=a)),p.set("wpbc");let s=!1;return L(()=>{if(n==="wpbc"&&!s){const a=new URLSearchParams(window.location.search).get("canvas");a!==null&&typeof a=="string"&&0<a.length?(console.log("Requested canvas is:",a),fetch(`https://anderserver.ddns.net/patchcanvas/wpbc/${a}.patch`).then(c=>c.json()).then(c=>{console.log("Loaded requested canvas:",c),m(u,e=structuredClone(c),e),m(u,e.updated=!0,e),console.log("Load complete?",e.nodes.length,e.edges.length),o(0,s=!0)}).catch(c=>{console.log("Couldn't fetch requested canvas:",c),window.location.pathname="/",window.location.search=""})):window.location.pathname="/"}}),r.$$.update=()=>{r.$$.dirty&2&&console.log("Save changed",e.nodes.length,e.edges.length)},[s,e]}class N extends b{constructor(t){super(),C(this,t,M,F,k,{})}}new N({target:document.body});
