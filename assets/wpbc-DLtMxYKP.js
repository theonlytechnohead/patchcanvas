import{S as b,i as k,s as C,a as y,e as f,c as w,b as F,d as _,f as S,m as g,t as l,g as i,h as $,j as v,k as d,n as p,u as q,v as x,w as P,x as j,C as U,l as u,p as m,y as B}from"./Canvas-CY7jUllN.js";function h(r){let t,o;return t=new U({}),{c(){w(t.$$.fragment)},m(e,n){g(t,e,n),o=!0},i(e){o||(l(t.$$.fragment,e),o=!0)},o(e){i(t.$$.fragment,e),o=!1},d(e){v(t,e)}}}function E(r){let t,o,e=r[0]&&h();return{c(){e&&e.c(),t=x()},m(n,a){e&&e.m(n,a),_(n,t,a),o=!0},p(n,a){n[0]?e?a&1&&l(e,1):(e=h(),e.c(),l(e,1),e.m(t.parentNode,t)):e&&(P(),i(e,1,1,()=>{e=null}),j())},i(n){o||(l(e),o=!0)},o(n){i(e),o=!1},d(n){n&&$(t),e&&e.d(n)}}}function L(r){let t,o,e,n;return e=new y({props:{$$slots:{default:[E]},$$scope:{ctx:r}}}),{c(){t=f("main"),o=f("div"),w(e.$$.fragment),F(o,"height","100%")},m(a,s){_(a,t,s),S(t,o),g(e,o,null),n=!0},p(a,[s]){const c={};s&9&&(c.$$scope={dirty:s,ctx:a}),e.$set(c)},i(a){n||(l(e.$$.fragment,a),n=!0)},o(a){i(e.$$.fragment,a),n=!1},d(a){a&&$(t),v(e)}}}function M(r,t,o){let e,n;d(r,u,s=>o(1,e=s)),d(r,p,s=>o(2,n=s)),p.set("wpbc");let a=!1;return q(()=>{if(n==="wpbc"&&!a){const s=new URLSearchParams(window.location.search).get("canvas");s!==null&&typeof s=="string"&&0<s.length?(console.log("Fetching",`${s}...`),fetch(`https://anderserver.ddns.net/patchcanvas/wpbc/${s}.patch`).then(c=>c.json()).then(c=>{if(console.log("Fetched requested canvas, updating..."),m(u,e=structuredClone(c),e),e.mode!==n)throw new Error("Fetched a save with an incorrect mode!");B().then(()=>m(u,e.updated=!0,e)).then(()=>o(0,a=!0)).then(()=>console.log("Update complete!"))}).catch(c=>{console.log("Couldn't fetch requested canvas:",c),window.location.pathname="/",window.location.search=""})):window.location.pathname="/"}}),[a]}class N extends b{constructor(t){super(),k(this,t,M,L,C,{})}}new N({target:document.body});
