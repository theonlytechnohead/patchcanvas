var Fr=Object.defineProperty;var Zr=(t,e,n)=>e in t?Fr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fi=(t,e,n)=>(Zr(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function ae(){}function Oe(t,e){for(const n in e)t[n]=e[n];return t}function wl(t){return t()}function xi(){return Object.create(null)}function pe(t){t.forEach(wl)}function Se(t){return typeof t=="function"}function se(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function vl(t,e){return t!=t?e==e:t!==e}function qr(t){return Object.keys(t).length===0}function Jn(t,...e){if(t==null){for(const i of e)i(void 0);return ae}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function V(t){let e;return Jn(t,n=>e=n)(),e}function J(t,e,n){t.$$.on_destroy.push(Jn(e,n))}function Xe(t,e,n,i){if(t){const o=kl(t,e,n,i);return t[0](o)}}function kl(t,e,n,i){return t[1]&&i?Oe(n.ctx.slice(),t[1](i(e))):n.ctx}function Ye(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const l=[],s=Math.max(e.dirty.length,o.length);for(let r=0;r<s;r+=1)l[r]=e.dirty[r]|o[r];return l}return e.dirty|o}return e.dirty}function Ve(t,e,n,i,o,l){if(o){const s=kl(e,n,i,l);t.p(s,o)}}function Re(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function Vi(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function Vt(t,e){const n={};e=new Set(e);for(const i in t)!e.has(i)&&i[0]!=="$"&&(n[i]=t[i]);return n}function Gr(t){const e={};for(const n in t)e[n]=!0;return e}function $i(t){return t??""}function Ci(t,e,n){return t.set(n),e}function De(t){return t&&Se(t.destroy)?t.destroy:ae}const Ur=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function oe(t,e){t.appendChild(e)}function K(t,e,n){t.insertBefore(e,n||null)}function B(t){t.parentNode&&t.parentNode.removeChild(t)}function eo(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function _e(t){return document.createElement(t)}function ye(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ze(t){return document.createTextNode(t)}function ge(){return ze(" ")}function Le(){return ze("")}function ve(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function S(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const Jr=["width","height"];function Rt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set&&Jr.indexOf(i)===-1?t[i]=e[i]:S(t,i,e[i])}function Qr(t){return Array.from(t.childNodes)}function Je(t,e){e=""+e,t.data!==e&&(t.data=e)}function ue(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}let bn;function jr(){if(bn===void 0){bn=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{bn=!0}}return bn}function xr(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const i=_e("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const o=jr();let l;return o?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=ve(window,"message",s=>{s.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{l=ve(i.contentWindow,"resize",e),e()}),oe(t,i),()=>{(o||l&&i.contentWindow)&&l(),B(i)}}function fe(t,e,n){t.classList.toggle(e,!!n)}function $r(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}function Tn(t,e){return new t(e)}let tn;function en(t){tn=t}function Ft(){if(!tn)throw new Error("Function called outside component initialization");return tn}function Qn(t){Ft().$$.on_mount.push(t)}function Ri(t){Ft().$$.on_destroy.push(t)}function jn(){const t=Ft();return(e,n,{cancelable:i=!1}={})=>{const o=t.$$.callbacks[e];if(o){const l=$r(e,n,{cancelable:i});return o.slice().forEach(s=>{s.call(t,l)}),!l.defaultPrevented}return!0}}function nn(t,e){return Ft().$$.context.set(t,e),e}function In(t){return Ft().$$.context.get(t)}function es(t){return Ft().$$.context.has(t)}function be(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const Tt=[],on=[];let Dt=[];const to=[],ts=Promise.resolve();let zi=!1;function ns(){zi||(zi=!0,ts.then(Sl))}function Dn(t){Dt.push(t)}const di=new Set;let Ht=0;function Sl(){if(Ht!==0)return;const t=tn;do{try{for(;Ht<Tt.length;){const e=Tt[Ht];Ht++,en(e),is(e.$$)}}catch(e){throw Tt.length=0,Ht=0,e}for(en(null),Tt.length=0,Ht=0;on.length;)on.pop()();for(let e=0;e<Dt.length;e+=1){const n=Dt[e];di.has(n)||(di.add(n),n())}Dt.length=0}while(Tt.length);for(;to.length;)to.pop()();zi=!1,di.clear(),en(t)}function is(t){if(t.fragment!==null){t.update(),pe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Dn)}}function os(t){const e=[],n=[];Dt.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Dt=e}const Pn=new Set;let wt;function Pe(){wt={r:0,c:[],p:wt}}function Ne(){wt.r||pe(wt.c),wt=wt.p}function X(t,e){t&&t.i&&(Pn.delete(t),t.i(e))}function Y(t,e,n,i){if(t&&t.o){if(Pn.has(t))return;Pn.add(t),wt.c.push(()=>{Pn.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function Qe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function xn(t,e){Y(t,1,1,()=>{e.delete(t.key)})}function $n(t,e,n,i,o,l,s,r,u,a,c,f){let d=t.length,h=l.length,m=d;const _={};for(;m--;)_[t[m].key]=m;const b=[],g=new Map,w=new Map,E=[];for(m=h;m--;){const N=f(o,l,m),O=n(N);let I=s.get(O);I?i&&E.push(()=>I.p(N,e)):(I=a(O,N),I.c()),g.set(O,b[m]=I),O in _&&w.set(O,Math.abs(m-_[O]))}const k=new Set,C=new Set;function H(N){X(N,1),N.m(r,c),s.set(N.key,N),c=N.first,h--}for(;d&&h;){const N=b[h-1],O=t[d-1],I=N.key,y=O.key;N===O?(c=N.first,d--,h--):g.has(y)?!s.has(I)||k.has(I)?H(N):C.has(y)?d--:w.get(I)>w.get(y)?(C.add(I),H(N)):(k.add(y),d--):(u(O,s),d--)}for(;d--;){const N=t[d];g.has(N.key)||u(N,s)}for(;h;)H(b[h-1]);return pe(E),b}function gt(t,e){const n={},i={},o={$$scope:1};let l=t.length;for(;l--;){const s=t[l],r=e[l];if(r){for(const u in s)u in r||(i[u]=1);for(const u in r)o[u]||(n[u]=r[u],o[u]=1);t[l]=r}else for(const u in s)o[u]=1}for(const s in i)s in n||(n[s]=void 0);return n}function Lt(t){return typeof t=="object"&&t!==null?t:{}}function ee(t){t&&t.c()}function x(t,e,n){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),Dn(()=>{const l=t.$$.on_mount.map(wl).filter(Se);t.$$.on_destroy?t.$$.on_destroy.push(...l):pe(l),t.$$.on_mount=[]}),o.forEach(Dn)}function $(t,e){const n=t.$$;n.fragment!==null&&(os(n.after_update),pe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ls(t,e){t.$$.dirty[0]===-1&&(Tt.push(t),ns(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function le(t,e,n,i,o,l,s=null,r=[-1]){const u=tn;en(t);const a=t.$$={fragment:null,ctx:[],props:l,update:ae,not_equal:o,bound:xi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:xi(),dirty:r,skip_bound:!1,root:e.target||u.$$.root};s&&s(a.root);let c=!1;if(a.ctx=n?n(t,e.props||{},(f,d,...h)=>{const m=h.length?h[0]:d;return a.ctx&&o(a.ctx[f],a.ctx[f]=m)&&(!a.skip_bound&&a.bound[f]&&a.bound[f](m),c&&ls(t,f)),d}):[],a.update(),c=!0,pe(a.before_update),a.fragment=i?i(a.ctx):!1,e.target){if(e.hydrate){const f=Qr(e.target);a.fragment&&a.fragment.l(f),f.forEach(B)}else a.fragment&&a.fragment.c();e.intro&&X(t.$$.fragment),x(t,e.target,e.anchor),Sl()}en(u)}class re{constructor(){fi(this,"$$");fi(this,"$$set")}$destroy(){$(this,1),this.$destroy=ae}$on(e,n){if(!Se(n))return ae;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!qr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const rs="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(rs);const Ot=[];function je(t,e){return{subscribe:te(t,e).subscribe}}function te(t,e=ae){let n;const i=new Set;function o(r){if(se(t,r)&&(t=r,n)){const u=!Ot.length;for(const a of i)a[1](),Ot.push(a,t);if(u){for(let a=0;a<Ot.length;a+=2)Ot[a][0](Ot[a+1]);Ot.length=0}}}function l(r){o(r(t))}function s(r,u=ae){const a=[r,u];return i.add(a),i.size===1&&(n=e(o,l)||ae),r(t),()=>{i.delete(a),i.size===0&&n&&(n(),n=null)}}return{set:o,update:l,subscribe:s}}function pt(t,e,n){const i=!Array.isArray(t),o=i?[t]:t;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=e.length<2;return je(n,(s,r)=>{let u=!1;const a=[];let c=0,f=ae;const d=()=>{if(c)return;f();const m=e(i?a[0]:a,s,r);l?s(m):f=Se(m)?m:ae},h=o.map((m,_)=>Jn(m,b=>{a[_]=b,c&=~(1<<_),u&&d()},()=>{c|=1<<_}));return u=!0,d(),function(){pe(h),f(),u=!1}})}function we(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=we(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var ss={value:()=>{}};function ei(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Nn(n)}function Nn(t){this._=t}function us(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",o=n.indexOf(".");if(o>=0&&(i=n.slice(o+1),n=n.slice(0,o)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Nn.prototype=ei.prototype={constructor:Nn,on:function(t,e){var n=this._,i=us(t+"",n),o,l=-1,s=i.length;if(arguments.length<2){for(;++l<s;)if((o=(t=i[l]).type)&&(o=as(n[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++l<s;)if(o=(t=i[l]).type)n[o]=no(n[o],t.name,e);else if(e==null)for(o in n)n[o]=no(n[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Nn(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var n=new Array(o),i=0,o,l;i<o;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],i=0,o=l.length;i<o;++i)l[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],o=0,l=i.length;o<l;++o)i[o].value.apply(e,n)}};function as(t,e){for(var n=0,i=t.length,o;n<i;++n)if((o=t[n]).name===e)return o.value}function no(t,e,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===e){t[i]=ss,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Mi="http://www.w3.org/1999/xhtml";const io={svg:"http://www.w3.org/2000/svg",xhtml:Mi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ti(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),io.hasOwnProperty(e)?{space:io[e],local:t}:t}function cs(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Mi&&e.documentElement.namespaceURI===Mi?e.createElement(t):e.createElementNS(n,t)}}function fs(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function El(t){var e=ti(t);return(e.local?fs:cs)(e)}function ds(){}function Li(t){return t==null?ds:function(){return this.querySelector(t)}}function hs(t){typeof t!="function"&&(t=Li(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var l=e[o],s=l.length,r=i[o]=new Array(s),u,a,c=0;c<s;++c)(u=l[c])&&(a=t.call(u,u.__data__,c,l))&&("__data__"in u&&(a.__data__=u.__data__),r[c]=a);return new Ze(i,this._parents)}function gs(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ms(){return[]}function Cl(t){return t==null?ms:function(){return this.querySelectorAll(t)}}function _s(t){return function(){return gs(t.apply(this,arguments))}}function ys(t){typeof t=="function"?t=_s(t):t=Cl(t);for(var e=this._groups,n=e.length,i=[],o=[],l=0;l<n;++l)for(var s=e[l],r=s.length,u,a=0;a<r;++a)(u=s[a])&&(i.push(t.call(u,u.__data__,a,s)),o.push(u));return new Ze(i,o)}function zl(t){return function(){return this.matches(t)}}function Ml(t){return function(e){return e.matches(t)}}var bs=Array.prototype.find;function ws(t){return function(){return bs.call(this.children,t)}}function vs(){return this.firstElementChild}function ks(t){return this.select(t==null?vs:ws(typeof t=="function"?t:Ml(t)))}var Ss=Array.prototype.filter;function Es(){return Array.from(this.children)}function Cs(t){return function(){return Ss.call(this.children,t)}}function zs(t){return this.selectAll(t==null?Es:Cs(typeof t=="function"?t:Ml(t)))}function Ms(t){typeof t!="function"&&(t=zl(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var l=e[o],s=l.length,r=i[o]=[],u,a=0;a<s;++a)(u=l[a])&&t.call(u,u.__data__,a,l)&&r.push(u);return new Ze(i,this._parents)}function Pl(t){return new Array(t.length)}function Ps(){return new Ze(this._enter||this._groups.map(Pl),this._parents)}function Xn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Xn.prototype={constructor:Xn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ns(t){return function(){return t}}function As(t,e,n,i,o,l){for(var s=0,r,u=e.length,a=l.length;s<a;++s)(r=e[s])?(r.__data__=l[s],i[s]=r):n[s]=new Xn(t,l[s]);for(;s<u;++s)(r=e[s])&&(o[s]=r)}function Hs(t,e,n,i,o,l,s){var r,u,a=new Map,c=e.length,f=l.length,d=new Array(c),h;for(r=0;r<c;++r)(u=e[r])&&(d[r]=h=s.call(u,u.__data__,r,e)+"",a.has(h)?o[r]=u:a.set(h,u));for(r=0;r<f;++r)h=s.call(t,l[r],r,l)+"",(u=a.get(h))?(i[r]=u,u.__data__=l[r],a.delete(h)):n[r]=new Xn(t,l[r]);for(r=0;r<c;++r)(u=e[r])&&a.get(d[r])===u&&(o[r]=u)}function Os(t){return t.__data__}function Ts(t,e){if(!arguments.length)return Array.from(this,Os);var n=e?Hs:As,i=this._parents,o=this._groups;typeof t!="function"&&(t=Ns(t));for(var l=o.length,s=new Array(l),r=new Array(l),u=new Array(l),a=0;a<l;++a){var c=i[a],f=o[a],d=f.length,h=Is(t.call(c,c&&c.__data__,a,i)),m=h.length,_=r[a]=new Array(m),b=s[a]=new Array(m),g=u[a]=new Array(d);n(c,f,_,b,g,h,e);for(var w=0,E=0,k,C;w<m;++w)if(k=_[w]){for(w>=E&&(E=w+1);!(C=b[E])&&++E<m;);k._next=C||null}}return s=new Ze(s,i),s._enter=r,s._exit=u,s}function Is(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ds(){return new Ze(this._exit||this._groups.map(Pl),this._parents)}function Xs(t,e,n){var i=this.enter(),o=this,l=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),n==null?l.remove():n(l),i&&o?i.merge(o).order():o}function Ys(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,o=n.length,l=i.length,s=Math.min(o,l),r=new Array(o),u=0;u<s;++u)for(var a=n[u],c=i[u],f=a.length,d=r[u]=new Array(f),h,m=0;m<f;++m)(h=a[m]||c[m])&&(d[m]=h);for(;u<o;++u)r[u]=n[u];return new Ze(r,this._parents)}function Vs(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],o=i.length-1,l=i[o],s;--o>=0;)(s=i[o])&&(l&&s.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(s,l),l=s);return this}function Rs(t){t||(t=Ls);function e(f,d){return f&&d?t(f.__data__,d.__data__):!f-!d}for(var n=this._groups,i=n.length,o=new Array(i),l=0;l<i;++l){for(var s=n[l],r=s.length,u=o[l]=new Array(r),a,c=0;c<r;++c)(a=s[c])&&(u[c]=a);u.sort(e)}return new Ze(o,this._parents).order()}function Ls(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ps(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ws(){return Array.from(this)}function Bs(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,l=i.length;o<l;++o){var s=i[o];if(s)return s}return null}function Ks(){let t=0;for(const e of this)++t;return t}function Fs(){return!this.node()}function Zs(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var o=e[n],l=0,s=o.length,r;l<s;++l)(r=o[l])&&t.call(r,r.__data__,l,o);return this}function qs(t){return function(){this.removeAttribute(t)}}function Gs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Us(t,e){return function(){this.setAttribute(t,e)}}function Js(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Qs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function js(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function xs(t,e){var n=ti(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Gs:qs:typeof e=="function"?n.local?js:Qs:n.local?Js:Us)(n,e))}function Nl(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function $s(t){return function(){this.style.removeProperty(t)}}function eu(t,e,n){return function(){this.style.setProperty(t,e,n)}}function tu(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function nu(t,e,n){return arguments.length>1?this.each((e==null?$s:typeof e=="function"?tu:eu)(t,e,n??"")):Wt(this.node(),t)}function Wt(t,e){return t.style.getPropertyValue(e)||Nl(t).getComputedStyle(t,null).getPropertyValue(e)}function iu(t){return function(){delete this[t]}}function ou(t,e){return function(){this[t]=e}}function lu(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ru(t,e){return arguments.length>1?this.each((e==null?iu:typeof e=="function"?lu:ou)(t,e)):this.node()[t]}function Al(t){return t.trim().split(/^|\s+/)}function pi(t){return t.classList||new Hl(t)}function Hl(t){this._node=t,this._names=Al(t.getAttribute("class")||"")}Hl.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ol(t,e){for(var n=pi(t),i=-1,o=e.length;++i<o;)n.add(e[i])}function Tl(t,e){for(var n=pi(t),i=-1,o=e.length;++i<o;)n.remove(e[i])}function su(t){return function(){Ol(this,t)}}function uu(t){return function(){Tl(this,t)}}function au(t,e){return function(){(e.apply(this,arguments)?Ol:Tl)(this,t)}}function cu(t,e){var n=Al(t+"");if(arguments.length<2){for(var i=pi(this.node()),o=-1,l=n.length;++o<l;)if(!i.contains(n[o]))return!1;return!0}return this.each((typeof e=="function"?au:e?su:uu)(n,e))}function fu(){this.textContent=""}function du(t){return function(){this.textContent=t}}function hu(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function gu(t){return arguments.length?this.each(t==null?fu:(typeof t=="function"?hu:du)(t)):this.node().textContent}function mu(){this.innerHTML=""}function _u(t){return function(){this.innerHTML=t}}function yu(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function bu(t){return arguments.length?this.each(t==null?mu:(typeof t=="function"?yu:_u)(t)):this.node().innerHTML}function wu(){this.nextSibling&&this.parentNode.appendChild(this)}function vu(){return this.each(wu)}function ku(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Su(){return this.each(ku)}function Eu(t){var e=typeof t=="function"?t:El(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Cu(){return null}function zu(t,e){var n=typeof t=="function"?t:El(t),i=e==null?Cu:typeof e=="function"?e:Li(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Mu(){var t=this.parentNode;t&&t.removeChild(this)}function Pu(){return this.each(Mu)}function Nu(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Au(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Hu(t){return this.select(t?Au:Nu)}function Ou(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Tu(t){return function(e){t.call(this,e,this.__data__)}}function Iu(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function Du(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,o=e.length,l;n<o;++n)l=e[n],(!t.type||l.type===t.type)&&l.name===t.name?this.removeEventListener(l.type,l.listener,l.options):e[++i]=l;++i?e.length=i:delete this.__on}}}function Xu(t,e,n){return function(){var i=this.__on,o,l=Tu(e);if(i){for(var s=0,r=i.length;s<r;++s)if((o=i[s]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=l,o.options=n),o.value=e;return}}this.addEventListener(t.type,l,n),o={type:t.type,name:t.name,value:e,listener:l,options:n},i?i.push(o):this.__on=[o]}}function Yu(t,e,n){var i=Iu(t+""),o,l=i.length,s;if(arguments.length<2){var r=this.node().__on;if(r){for(var u=0,a=r.length,c;u<a;++u)for(o=0,c=r[u];o<l;++o)if((s=i[o]).type===c.type&&s.name===c.name)return c.value}return}for(r=e?Xu:Du,o=0;o<l;++o)this.each(r(i[o],e,n));return this}function Il(t,e,n){var i=Nl(t),o=i.CustomEvent;typeof o=="function"?o=new o(e,n):(o=i.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function Vu(t,e){return function(){return Il(this,t,e)}}function Ru(t,e){return function(){return Il(this,t,e.apply(this,arguments))}}function Lu(t,e){return this.each((typeof e=="function"?Ru:Vu)(t,e))}function*pu(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,l=i.length,s;o<l;++o)(s=i[o])&&(yield s)}var Dl=[null];function Ze(t,e){this._groups=t,this._parents=e}function dn(){return new Ze([[document.documentElement]],Dl)}function Wu(){return this}Ze.prototype=dn.prototype={constructor:Ze,select:hs,selectAll:ys,selectChild:ks,selectChildren:zs,filter:Ms,data:Ts,enter:Ps,exit:Ds,join:Xs,merge:Ys,selection:Wu,order:Vs,sort:Rs,call:ps,nodes:Ws,node:Bs,size:Ks,empty:Fs,each:Zs,attr:xs,style:nu,property:ru,classed:cu,text:gu,html:bu,raise:vu,lower:Su,append:Eu,insert:zu,remove:Pu,clone:Hu,datum:Ou,on:Yu,dispatch:Lu,[Symbol.iterator]:pu};function Ue(t){return typeof t=="string"?new Ze([[document.querySelector(t)]],[document.documentElement]):new Ze([[t]],Dl)}function Bu(t){let e;for(;e=t.sourceEvent;)t=e;return t}function xe(t,e){if(t=Bu(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}const Ku={passive:!1},ln={capture:!0,passive:!1};function hi(t){t.stopImmediatePropagation()}function Xt(t){t.preventDefault(),t.stopImmediatePropagation()}function Xl(t){var e=t.document.documentElement,n=Ue(t).on("dragstart.drag",Xt,ln);"onselectstart"in e?n.on("selectstart.drag",Xt,ln):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Yl(t,e){var n=t.document.documentElement,i=Ue(t).on("dragstart.drag",null);e&&(i.on("click.drag",Xt,ln),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const wn=t=>()=>t;function Pi(t,{sourceEvent:e,subject:n,target:i,identifier:o,active:l,x:s,y:r,dx:u,dy:a,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:r,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:a,enumerable:!0,configurable:!0},_:{value:c}})}Pi.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Fu(t){return!t.ctrlKey&&!t.button}function Zu(){return this.parentNode}function qu(t,e){return e??{x:t.x,y:t.y}}function Gu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Uu(){var t=Fu,e=Zu,n=qu,i=Gu,o={},l=ei("start","drag","end"),s=0,r,u,a,c,f=0;function d(k){k.on("mousedown.drag",h).filter(i).on("touchstart.drag",b).on("touchmove.drag",g,Ku).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(k,C){if(!(c||!t.call(this,k,C))){var H=E(this,e.call(this,k,C),k,C,"mouse");H&&(Ue(k.view).on("mousemove.drag",m,ln).on("mouseup.drag",_,ln),Xl(k.view),hi(k),a=!1,r=k.clientX,u=k.clientY,H("start",k))}}function m(k){if(Xt(k),!a){var C=k.clientX-r,H=k.clientY-u;a=C*C+H*H>f}o.mouse("drag",k)}function _(k){Ue(k.view).on("mousemove.drag mouseup.drag",null),Yl(k.view,a),Xt(k),o.mouse("end",k)}function b(k,C){if(t.call(this,k,C)){var H=k.changedTouches,N=e.call(this,k,C),O=H.length,I,y;for(I=0;I<O;++I)(y=E(this,N,k,C,H[I].identifier,H[I]))&&(hi(k),y("start",k,H[I]))}}function g(k){var C=k.changedTouches,H=C.length,N,O;for(N=0;N<H;++N)(O=o[C[N].identifier])&&(Xt(k),O("drag",k,C[N]))}function w(k){var C=k.changedTouches,H=C.length,N,O;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),N=0;N<H;++N)(O=o[C[N].identifier])&&(hi(k),O("end",k,C[N]))}function E(k,C,H,N,O,I){var y=l.copy(),R=xe(I||H,C),W,T,v;if((v=n.call(k,new Pi("beforestart",{sourceEvent:H,target:d,identifier:O,active:s,x:R[0],y:R[1],dx:0,dy:0,dispatch:y}),N))!=null)return W=v.x-R[0]||0,T=v.y-R[1]||0,function A(z,D,L){var F=R,q;switch(z){case"start":o[O]=A,q=s++;break;case"end":delete o[O],--s;case"drag":R=xe(L||D,C),q=s;break}y.call(z,k,new Pi(z,{sourceEvent:D,subject:v,target:d,identifier:O,active:q,x:R[0]+W,y:R[1]+T,dx:R[0]-F[0],dy:R[1]-F[1],dispatch:y}),N)}}return d.filter=function(k){return arguments.length?(t=typeof k=="function"?k:wn(!!k),d):t},d.container=function(k){return arguments.length?(e=typeof k=="function"?k:wn(k),d):e},d.subject=function(k){return arguments.length?(n=typeof k=="function"?k:wn(k),d):n},d.touchable=function(k){return arguments.length?(i=typeof k=="function"?k:wn(!!k),d):i},d.on=function(){var k=l.on.apply(l,arguments);return k===l?d:k},d.clickDistance=function(k){return arguments.length?(f=(k=+k)*k,d):Math.sqrt(f)},d}function Wi(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Vl(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function hn(){}var rn=.7,Yn=1/rn,Yt="\\s*([+-]?\\d+)\\s*",sn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ju=/^#([0-9a-f]{3,8})$/,Qu=new RegExp(`^rgb\\(${Yt},${Yt},${Yt}\\)$`),ju=new RegExp(`^rgb\\(${ot},${ot},${ot}\\)$`),xu=new RegExp(`^rgba\\(${Yt},${Yt},${Yt},${sn}\\)$`),$u=new RegExp(`^rgba\\(${ot},${ot},${ot},${sn}\\)$`),ea=new RegExp(`^hsl\\(${sn},${ot},${ot}\\)$`),ta=new RegExp(`^hsla\\(${sn},${ot},${ot},${sn}\\)$`),oo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wi(hn,un,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:lo,formatHex:lo,formatHex8:na,formatHsl:ia,formatRgb:ro,toString:ro});function lo(){return this.rgb().formatHex()}function na(){return this.rgb().formatHex8()}function ia(){return Rl(this).formatHsl()}function ro(){return this.rgb().formatRgb()}function un(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ju.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?so(e):n===3?new Ke(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?vn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?vn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Qu.exec(t))?new Ke(e[1],e[2],e[3],1):(e=ju.exec(t))?new Ke(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=xu.exec(t))?vn(e[1],e[2],e[3],e[4]):(e=$u.exec(t))?vn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ea.exec(t))?co(e[1],e[2]/100,e[3]/100,1):(e=ta.exec(t))?co(e[1],e[2]/100,e[3]/100,e[4]):oo.hasOwnProperty(t)?so(oo[t]):t==="transparent"?new Ke(NaN,NaN,NaN,0):null}function so(t){return new Ke(t>>16&255,t>>8&255,t&255,1)}function vn(t,e,n,i){return i<=0&&(t=e=n=NaN),new Ke(t,e,n,i)}function oa(t){return t instanceof hn||(t=un(t)),t?(t=t.rgb(),new Ke(t.r,t.g,t.b,t.opacity)):new Ke}function Ni(t,e,n,i){return arguments.length===1?oa(t):new Ke(t,e,n,i??1)}function Ke(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Wi(Ke,Ni,Vl(hn,{brighter(t){return t=t==null?Yn:Math.pow(Yn,t),new Ke(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?rn:Math.pow(rn,t),new Ke(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ke(kt(this.r),kt(this.g),kt(this.b),Vn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uo,formatHex:uo,formatHex8:la,formatRgb:ao,toString:ao}));function uo(){return`#${vt(this.r)}${vt(this.g)}${vt(this.b)}`}function la(){return`#${vt(this.r)}${vt(this.g)}${vt(this.b)}${vt((isNaN(this.opacity)?1:this.opacity)*255)}`}function ao(){const t=Vn(this.opacity);return`${t===1?"rgb(":"rgba("}${kt(this.r)}, ${kt(this.g)}, ${kt(this.b)}${t===1?")":`, ${t})`}`}function Vn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function kt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vt(t){return t=kt(t),(t<16?"0":"")+t.toString(16)}function co(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new $e(t,e,n,i)}function Rl(t){if(t instanceof $e)return new $e(t.h,t.s,t.l,t.opacity);if(t instanceof hn||(t=un(t)),!t)return new $e;if(t instanceof $e)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,o=Math.min(e,n,i),l=Math.max(e,n,i),s=NaN,r=l-o,u=(l+o)/2;return r?(e===l?s=(n-i)/r+(n<i)*6:n===l?s=(i-e)/r+2:s=(e-n)/r+4,r/=u<.5?l+o:2-l-o,s*=60):r=u>0&&u<1?0:s,new $e(s,r,u,t.opacity)}function ra(t,e,n,i){return arguments.length===1?Rl(t):new $e(t,e,n,i??1)}function $e(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Wi($e,ra,Vl(hn,{brighter(t){return t=t==null?Yn:Math.pow(Yn,t),new $e(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?rn:Math.pow(rn,t),new $e(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,o=2*n-i;return new Ke(gi(t>=240?t-240:t+120,o,i),gi(t,o,i),gi(t<120?t+240:t-120,o,i),this.opacity)},clamp(){return new $e(fo(this.h),kn(this.s),kn(this.l),Vn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Vn(this.opacity);return`${t===1?"hsl(":"hsla("}${fo(this.h)}, ${kn(this.s)*100}%, ${kn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function fo(t){return t=(t||0)%360,t<0?t+360:t}function kn(t){return Math.max(0,Math.min(1,t||0))}function gi(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ll=t=>()=>t;function sa(t,e){return function(n){return t+n*e}}function ua(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function aa(t){return(t=+t)==1?pl:function(e,n){return n-e?ua(e,n,t):Ll(isNaN(e)?n:e)}}function pl(t,e){var n=e-t;return n?sa(t,n):Ll(isNaN(t)?e:t)}const ho=function t(e){var n=aa(e);function i(o,l){var s=n((o=Ni(o)).r,(l=Ni(l)).r),r=n(o.g,l.g),u=n(o.b,l.b),a=pl(o.opacity,l.opacity);return function(c){return o.r=s(c),o.g=r(c),o.b=u(c),o.opacity=a(c),o+""}}return i.gamma=t,i}(1);function bt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Ai=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mi=new RegExp(Ai.source,"g");function ca(t){return function(){return t}}function fa(t){return function(e){return t(e)+""}}function da(t,e){var n=Ai.lastIndex=mi.lastIndex=0,i,o,l,s=-1,r=[],u=[];for(t=t+"",e=e+"";(i=Ai.exec(t))&&(o=mi.exec(e));)(l=o.index)>n&&(l=e.slice(n,l),r[s]?r[s]+=l:r[++s]=l),(i=i[0])===(o=o[0])?r[s]?r[s]+=o:r[++s]=o:(r[++s]=null,u.push({i:s,x:bt(i,o)})),n=mi.lastIndex;return n<e.length&&(l=e.slice(n),r[s]?r[s]+=l:r[++s]=l),r.length<2?u[0]?fa(u[0].x):ca(e):(e=u.length,function(a){for(var c=0,f;c<e;++c)r[(f=u[c]).i]=f.x(a);return r.join("")})}var go=180/Math.PI,Hi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Wl(t,e,n,i,o,l){var s,r,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*i)&&(n-=t*u,i-=e*u),(r=Math.sqrt(n*n+i*i))&&(n/=r,i/=r,u/=r),t*i<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:o,translateY:l,rotate:Math.atan2(e,t)*go,skewX:Math.atan(u)*go,scaleX:s,scaleY:r}}var Sn;function ha(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Hi:Wl(e.a,e.b,e.c,e.d,e.e,e.f)}function ga(t){return t==null||(Sn||(Sn=document.createElementNS("http://www.w3.org/2000/svg","g")),Sn.setAttribute("transform",t),!(t=Sn.transform.baseVal.consolidate()))?Hi:(t=t.matrix,Wl(t.a,t.b,t.c,t.d,t.e,t.f))}function Bl(t,e,n,i){function o(a){return a.length?a.pop()+" ":""}function l(a,c,f,d,h,m){if(a!==f||c!==d){var _=h.push("translate(",null,e,null,n);m.push({i:_-4,x:bt(a,f)},{i:_-2,x:bt(c,d)})}else(f||d)&&h.push("translate("+f+e+d+n)}function s(a,c,f,d){a!==c?(a-c>180?c+=360:c-a>180&&(a+=360),d.push({i:f.push(o(f)+"rotate(",null,i)-2,x:bt(a,c)})):c&&f.push(o(f)+"rotate("+c+i)}function r(a,c,f,d){a!==c?d.push({i:f.push(o(f)+"skewX(",null,i)-2,x:bt(a,c)}):c&&f.push(o(f)+"skewX("+c+i)}function u(a,c,f,d,h,m){if(a!==f||c!==d){var _=h.push(o(h)+"scale(",null,",",null,")");m.push({i:_-4,x:bt(a,f)},{i:_-2,x:bt(c,d)})}else(f!==1||d!==1)&&h.push(o(h)+"scale("+f+","+d+")")}return function(a,c){var f=[],d=[];return a=t(a),c=t(c),l(a.translateX,a.translateY,c.translateX,c.translateY,f,d),s(a.rotate,c.rotate,f,d),r(a.skewX,c.skewX,f,d),u(a.scaleX,a.scaleY,c.scaleX,c.scaleY,f,d),a=c=null,function(h){for(var m=-1,_=d.length,b;++m<_;)f[(b=d[m]).i]=b.x(h);return f.join("")}}}var ma=Bl(ha,"px, ","px)","deg)"),_a=Bl(ga,", ",")",")"),ya=1e-12;function mo(t){return((t=Math.exp(t))+1/t)/2}function ba(t){return((t=Math.exp(t))-1/t)/2}function wa(t){return((t=Math.exp(2*t))-1)/(t+1)}const va=function t(e,n,i){function o(l,s){var r=l[0],u=l[1],a=l[2],c=s[0],f=s[1],d=s[2],h=c-r,m=f-u,_=h*h+m*m,b,g;if(_<ya)g=Math.log(d/a)/e,b=function(N){return[r+N*h,u+N*m,a*Math.exp(e*N*g)]};else{var w=Math.sqrt(_),E=(d*d-a*a+i*_)/(2*a*n*w),k=(d*d-a*a-i*_)/(2*d*n*w),C=Math.log(Math.sqrt(E*E+1)-E),H=Math.log(Math.sqrt(k*k+1)-k);g=(H-C)/e,b=function(N){var O=N*g,I=mo(C),y=a/(n*w)*(I*wa(e*O+C)-ba(C));return[r+y*h,u+y*m,a*I/mo(e*O+C)]}}return b.duration=g*1e3*e/Math.SQRT2,b}return o.rho=function(l){var s=Math.max(.001,+l),r=s*s,u=r*r;return t(s,r,u)},o}(Math.SQRT2,2,4);var Bt=0,jt=0,Gt=0,Kl=1e3,Rn,xt,Ln=0,Et=0,ni=0,an=typeof performance=="object"&&performance.now?performance:Date,Fl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Bi(){return Et||(Fl(ka),Et=an.now()+ni)}function ka(){Et=0}function pn(){this._call=this._time=this._next=null}pn.prototype=Zl.prototype={constructor:pn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Bi():+n)+(e==null?0:+e),!this._next&&xt!==this&&(xt?xt._next=this:Rn=this,xt=this),this._call=t,this._time=n,Oi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Oi())}};function Zl(t,e,n){var i=new pn;return i.restart(t,e,n),i}function Sa(){Bi(),++Bt;for(var t=Rn,e;t;)(e=Et-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Bt}function _o(){Et=(Ln=an.now())+ni,Bt=jt=0;try{Sa()}finally{Bt=0,Ca(),Et=0}}function Ea(){var t=an.now(),e=t-Ln;e>Kl&&(ni-=e,Ln=t)}function Ca(){for(var t,e=Rn,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Rn=n);xt=t,Oi(i)}function Oi(t){if(!Bt){jt&&(jt=clearTimeout(jt));var e=t-Et;e>24?(t<1/0&&(jt=setTimeout(_o,t-an.now()-ni)),Gt&&(Gt=clearInterval(Gt))):(Gt||(Ln=an.now(),Gt=setInterval(Ea,Kl)),Bt=1,Fl(_o))}}function yo(t,e,n){var i=new pn;return e=e==null?0:+e,i.restart(o=>{i.stop(),t(o+e)},e,n),i}var za=ei("start","end","cancel","interrupt"),Ma=[],ql=0,bo=1,Ti=2,An=3,wo=4,Ii=5,Hn=6;function ii(t,e,n,i,o,l){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Pa(t,n,{name:e,index:i,group:o,on:za,tween:Ma,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:ql})}function Ki(t,e){var n=et(t,e);if(n.state>ql)throw new Error("too late; already scheduled");return n}function rt(t,e){var n=et(t,e);if(n.state>An)throw new Error("too late; already running");return n}function et(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Pa(t,e,n){var i=t.__transition,o;i[e]=n,n.timer=Zl(l,0,n.time);function l(a){n.state=bo,n.timer.restart(s,n.delay,n.time),n.delay<=a&&s(a-n.delay)}function s(a){var c,f,d,h;if(n.state!==bo)return u();for(c in i)if(h=i[c],h.name===n.name){if(h.state===An)return yo(s);h.state===wo?(h.state=Hn,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[c]):+c<e&&(h.state=Hn,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[c])}if(yo(function(){n.state===An&&(n.state=wo,n.timer.restart(r,n.delay,n.time),r(a))}),n.state=Ti,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ti){for(n.state=An,o=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(o[++f]=h);o.length=f+1}}function r(a){for(var c=a<n.duration?n.ease.call(null,a/n.duration):(n.timer.restart(u),n.state=Ii,1),f=-1,d=o.length;++f<d;)o[f].call(t,c);n.state===Ii&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Hn,n.timer.stop(),delete i[e];for(var a in i)return;delete t.__transition}}function On(t,e){var n=t.__transition,i,o,l=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((i=n[s]).name!==e){l=!1;continue}o=i.state>Ti&&i.state<Ii,i.state=Hn,i.timer.stop(),i.on.call(o?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[s]}l&&delete t.__transition}}function Na(t){return this.each(function(){On(this,t)})}function Aa(t,e){var n,i;return function(){var o=rt(this,t),l=o.tween;if(l!==n){i=n=l;for(var s=0,r=i.length;s<r;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}o.tween=i}}function Ha(t,e,n){var i,o;if(typeof n!="function")throw new Error;return function(){var l=rt(this,t),s=l.tween;if(s!==i){o=(i=s).slice();for(var r={name:e,value:n},u=0,a=o.length;u<a;++u)if(o[u].name===e){o[u]=r;break}u===a&&o.push(r)}l.tween=o}}function Oa(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=et(this.node(),n).tween,o=0,l=i.length,s;o<l;++o)if((s=i[o]).name===t)return s.value;return null}return this.each((e==null?Aa:Ha)(n,t,e))}function Fi(t,e,n){var i=t._id;return t.each(function(){var o=rt(this,i);(o.value||(o.value={}))[e]=n.apply(this,arguments)}),function(o){return et(o,i).value[e]}}function Gl(t,e){var n;return(typeof e=="number"?bt:e instanceof un?ho:(n=un(e))?(e=n,ho):da)(t,e)}function Ta(t){return function(){this.removeAttribute(t)}}function Ia(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Da(t,e,n){var i,o=n+"",l;return function(){var s=this.getAttribute(t);return s===o?null:s===i?l:l=e(i=s,n)}}function Xa(t,e,n){var i,o=n+"",l;return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===i?l:l=e(i=s,n)}}function Ya(t,e,n){var i,o,l;return function(){var s,r=n(this),u;return r==null?void this.removeAttribute(t):(s=this.getAttribute(t),u=r+"",s===u?null:s===i&&u===o?l:(o=u,l=e(i=s,r)))}}function Va(t,e,n){var i,o,l;return function(){var s,r=n(this),u;return r==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),u=r+"",s===u?null:s===i&&u===o?l:(o=u,l=e(i=s,r)))}}function Ra(t,e){var n=ti(t),i=n==="transform"?_a:Gl;return this.attrTween(t,typeof e=="function"?(n.local?Va:Ya)(n,i,Fi(this,"attr."+t,e)):e==null?(n.local?Ia:Ta)(n):(n.local?Xa:Da)(n,i,e))}function La(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function pa(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Wa(t,e){var n,i;function o(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&pa(t,l)),n}return o._value=e,o}function Ba(t,e){var n,i;function o(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&La(t,l)),n}return o._value=e,o}function Ka(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=ti(t);return this.tween(n,(i.local?Wa:Ba)(i,e))}function Fa(t,e){return function(){Ki(this,t).delay=+e.apply(this,arguments)}}function Za(t,e){return e=+e,function(){Ki(this,t).delay=e}}function qa(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Fa:Za)(e,t)):et(this.node(),e).delay}function Ga(t,e){return function(){rt(this,t).duration=+e.apply(this,arguments)}}function Ua(t,e){return e=+e,function(){rt(this,t).duration=e}}function Ja(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ga:Ua)(e,t)):et(this.node(),e).duration}function Qa(t,e){if(typeof e!="function")throw new Error;return function(){rt(this,t).ease=e}}function ja(t){var e=this._id;return arguments.length?this.each(Qa(e,t)):et(this.node(),e).ease}function xa(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;rt(this,t).ease=n}}function $a(t){if(typeof t!="function")throw new Error;return this.each(xa(this._id,t))}function ec(t){typeof t!="function"&&(t=zl(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var l=e[o],s=l.length,r=i[o]=[],u,a=0;a<s;++a)(u=l[a])&&t.call(u,u.__data__,a,l)&&r.push(u);return new mt(i,this._parents,this._name,this._id)}function tc(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,o=n.length,l=Math.min(i,o),s=new Array(i),r=0;r<l;++r)for(var u=e[r],a=n[r],c=u.length,f=s[r]=new Array(c),d,h=0;h<c;++h)(d=u[h]||a[h])&&(f[h]=d);for(;r<i;++r)s[r]=e[r];return new mt(s,this._parents,this._name,this._id)}function nc(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function ic(t,e,n){var i,o,l=nc(e)?Ki:rt;return function(){var s=l(this,t),r=s.on;r!==i&&(o=(i=r).copy()).on(e,n),s.on=o}}function oc(t,e){var n=this._id;return arguments.length<2?et(this.node(),n).on.on(t):this.each(ic(n,t,e))}function lc(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function rc(){return this.on("end.remove",lc(this._id))}function sc(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Li(t));for(var i=this._groups,o=i.length,l=new Array(o),s=0;s<o;++s)for(var r=i[s],u=r.length,a=l[s]=new Array(u),c,f,d=0;d<u;++d)(c=r[d])&&(f=t.call(c,c.__data__,d,r))&&("__data__"in c&&(f.__data__=c.__data__),a[d]=f,ii(a[d],e,n,d,a,et(c,n)));return new mt(l,this._parents,e,n)}function uc(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Cl(t));for(var i=this._groups,o=i.length,l=[],s=[],r=0;r<o;++r)for(var u=i[r],a=u.length,c,f=0;f<a;++f)if(c=u[f]){for(var d=t.call(c,c.__data__,f,u),h,m=et(c,n),_=0,b=d.length;_<b;++_)(h=d[_])&&ii(h,e,n,_,d,m);l.push(d),s.push(c)}return new mt(l,s,e,n)}var ac=dn.prototype.constructor;function cc(){return new ac(this._groups,this._parents)}function fc(t,e){var n,i,o;return function(){var l=Wt(this,t),s=(this.style.removeProperty(t),Wt(this,t));return l===s?null:l===n&&s===i?o:o=e(n=l,i=s)}}function Ul(t){return function(){this.style.removeProperty(t)}}function dc(t,e,n){var i,o=n+"",l;return function(){var s=Wt(this,t);return s===o?null:s===i?l:l=e(i=s,n)}}function hc(t,e,n){var i,o,l;return function(){var s=Wt(this,t),r=n(this),u=r+"";return r==null&&(u=r=(this.style.removeProperty(t),Wt(this,t))),s===u?null:s===i&&u===o?l:(o=u,l=e(i=s,r))}}function gc(t,e){var n,i,o,l="style."+e,s="end."+l,r;return function(){var u=rt(this,t),a=u.on,c=u.value[l]==null?r||(r=Ul(e)):void 0;(a!==n||o!==c)&&(i=(n=a).copy()).on(s,o=c),u.on=i}}function mc(t,e,n){var i=(t+="")=="transform"?ma:Gl;return e==null?this.styleTween(t,fc(t,i)).on("end.style."+t,Ul(t)):typeof e=="function"?this.styleTween(t,hc(t,i,Fi(this,"style."+t,e))).each(gc(this._id,t)):this.styleTween(t,dc(t,i,e),n).on("end.style."+t,null)}function _c(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function yc(t,e,n){var i,o;function l(){var s=e.apply(this,arguments);return s!==o&&(i=(o=s)&&_c(t,s,n)),i}return l._value=e,l}function bc(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,yc(t,e,n??""))}function wc(t){return function(){this.textContent=t}}function vc(t){return function(){var e=t(this);this.textContent=e??""}}function kc(t){return this.tween("text",typeof t=="function"?vc(Fi(this,"text",t)):wc(t==null?"":t+""))}function Sc(t){return function(e){this.textContent=t.call(this,e)}}function Ec(t){var e,n;function i(){var o=t.apply(this,arguments);return o!==n&&(e=(n=o)&&Sc(o)),e}return i._value=t,i}function Cc(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Ec(t))}function zc(){for(var t=this._name,e=this._id,n=Jl(),i=this._groups,o=i.length,l=0;l<o;++l)for(var s=i[l],r=s.length,u,a=0;a<r;++a)if(u=s[a]){var c=et(u,e);ii(u,t,n,a,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new mt(i,this._parents,t,n)}function Mc(){var t,e,n=this,i=n._id,o=n.size();return new Promise(function(l,s){var r={value:s},u={value:function(){--o===0&&l()}};n.each(function(){var a=rt(this,i),c=a.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(r),e._.interrupt.push(r),e._.end.push(u)),a.on=e}),o===0&&l()})}var Pc=0;function mt(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Jl(){return++Pc}var ct=dn.prototype;mt.prototype={constructor:mt,select:sc,selectAll:uc,selectChild:ct.selectChild,selectChildren:ct.selectChildren,filter:ec,merge:tc,selection:cc,transition:zc,call:ct.call,nodes:ct.nodes,node:ct.node,size:ct.size,empty:ct.empty,each:ct.each,on:oc,attr:Ra,attrTween:Ka,style:mc,styleTween:bc,text:kc,textTween:Cc,remove:rc,tween:Oa,delay:qa,duration:Ja,ease:ja,easeVarying:$a,end:Mc,[Symbol.iterator]:ct[Symbol.iterator]};function Nc(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ac={time:null,delay:0,duration:250,ease:Nc};function Hc(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Oc(t){var e,n;t instanceof mt?(e=t._id,t=t._name):(e=Jl(),(n=Ac).time=Bi(),t=t==null?null:t+"");for(var i=this._groups,o=i.length,l=0;l<o;++l)for(var s=i[l],r=s.length,u,a=0;a<r;++a)(u=s[a])&&ii(u,t,e,a,s,n||Hc(u,e));return new mt(i,this._parents,t,e)}dn.prototype.interrupt=Na;dn.prototype.transition=Oc;const En=t=>()=>t;function Tc(t,{sourceEvent:e,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function ft(t,e,n){this.k=t,this.x=e,this.y=n}ft.prototype={constructor:ft,scale:function(t){return t===1?this:new ft(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ft(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var oi=new ft(1,0,0);Ql.prototype=ft.prototype;function Ql(t){for(;!t.__zoom;)if(!(t=t.parentNode))return oi;return t.__zoom}function _i(t){t.stopImmediatePropagation()}function Ut(t){t.preventDefault(),t.stopImmediatePropagation()}function Ic(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Dc(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function vo(){return this.__zoom||oi}function Xc(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Yc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Vc(t,e,n){var i=t.invertX(e[0][0])-n[0][0],o=t.invertX(e[1][0])-n[1][0],l=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),s>l?(l+s)/2:Math.min(0,l)||Math.max(0,s))}function jl(){var t=Ic,e=Dc,n=Vc,i=Xc,o=Yc,l=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],r=250,u=va,a=ei("start","zoom","end"),c,f,d,h=500,m=150,_=0,b=10;function g(v){v.property("__zoom",vo).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",y).filter(o).on("touchstart.zoom",R).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",T).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(v,A,z,D){var L=v.selection?v.selection():v;L.property("__zoom",vo),v!==L?C(v,A,z,D):L.interrupt().each(function(){H(this,arguments).event(D).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},g.scaleBy=function(v,A,z,D){g.scaleTo(v,function(){var L=this.__zoom.k,F=typeof A=="function"?A.apply(this,arguments):A;return L*F},z,D)},g.scaleTo=function(v,A,z,D){g.transform(v,function(){var L=e.apply(this,arguments),F=this.__zoom,q=z==null?k(L):typeof z=="function"?z.apply(this,arguments):z,U=F.invert(q),P=typeof A=="function"?A.apply(this,arguments):A;return n(E(w(F,P),q,U),L,s)},z,D)},g.translateBy=function(v,A,z,D){g.transform(v,function(){return n(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof z=="function"?z.apply(this,arguments):z),e.apply(this,arguments),s)},null,D)},g.translateTo=function(v,A,z,D,L){g.transform(v,function(){var F=e.apply(this,arguments),q=this.__zoom,U=D==null?k(F):typeof D=="function"?D.apply(this,arguments):D;return n(oi.translate(U[0],U[1]).scale(q.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof z=="function"?-z.apply(this,arguments):-z),F,s)},D,L)};function w(v,A){return A=Math.max(l[0],Math.min(l[1],A)),A===v.k?v:new ft(A,v.x,v.y)}function E(v,A,z){var D=A[0]-z[0]*v.k,L=A[1]-z[1]*v.k;return D===v.x&&L===v.y?v:new ft(v.k,D,L)}function k(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function C(v,A,z,D){v.on("start.zoom",function(){H(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){H(this,arguments).event(D).end()}).tween("zoom",function(){var L=this,F=arguments,q=H(L,F).event(D),U=e.apply(L,F),P=z==null?k(U):typeof z=="function"?z.apply(L,F):z,ie=Math.max(U[1][0]-U[0][0],U[1][1]-U[0][1]),ne=L.__zoom,ce=typeof A=="function"?A.apply(L,F):A,G=u(ne.invert(P).concat(ie/ne.k),ce.invert(P).concat(ie/ce.k));return function(de){if(de===1)de=ce;else{var me=G(de),p=ie/me[2];de=new ft(p,P[0]-me[0]*p,P[1]-me[1]*p)}q.zoom(null,de)}})}function H(v,A,z){return!z&&v.__zooming||new N(v,A)}function N(v,A){this.that=v,this.args=A,this.active=0,this.sourceEvent=null,this.extent=e.apply(v,A),this.taps=0}N.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,A){return this.mouse&&v!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var A=Ue(this.that).datum();a.call(v,this.that,new Tc(v,{sourceEvent:this.sourceEvent,target:g,type:v,transform:this.that.__zoom,dispatch:a}),A)}};function O(v,...A){if(!t.apply(this,arguments))return;var z=H(this,A).event(v),D=this.__zoom,L=Math.max(l[0],Math.min(l[1],D.k*Math.pow(2,i.apply(this,arguments)))),F=xe(v);if(z.wheel)(z.mouse[0][0]!==F[0]||z.mouse[0][1]!==F[1])&&(z.mouse[1]=D.invert(z.mouse[0]=F)),clearTimeout(z.wheel);else{if(D.k===L)return;z.mouse=[F,D.invert(F)],On(this),z.start()}Ut(v),z.wheel=setTimeout(q,m),z.zoom("mouse",n(E(w(D,L),z.mouse[0],z.mouse[1]),z.extent,s));function q(){z.wheel=null,z.end()}}function I(v,...A){if(d||!t.apply(this,arguments))return;var z=v.currentTarget,D=H(this,A,!0).event(v),L=Ue(v.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",ie,!0),F=xe(v,z),q=v.clientX,U=v.clientY;Xl(v.view),_i(v),D.mouse=[F,this.__zoom.invert(F)],On(this),D.start();function P(ne){if(Ut(ne),!D.moved){var ce=ne.clientX-q,G=ne.clientY-U;D.moved=ce*ce+G*G>_}D.event(ne).zoom("mouse",n(E(D.that.__zoom,D.mouse[0]=xe(ne,z),D.mouse[1]),D.extent,s))}function ie(ne){L.on("mousemove.zoom mouseup.zoom",null),Yl(ne.view,D.moved),Ut(ne),D.event(ne).end()}}function y(v,...A){if(t.apply(this,arguments)){var z=this.__zoom,D=xe(v.changedTouches?v.changedTouches[0]:v,this),L=z.invert(D),F=z.k*(v.shiftKey?.5:2),q=n(E(w(z,F),D,L),e.apply(this,A),s);Ut(v),r>0?Ue(this).transition().duration(r).call(C,q,D,v):Ue(this).call(g.transform,q,D,v)}}function R(v,...A){if(t.apply(this,arguments)){var z=v.touches,D=z.length,L=H(this,A,v.changedTouches.length===D).event(v),F,q,U,P;for(_i(v),q=0;q<D;++q)U=z[q],P=xe(U,this),P=[P,this.__zoom.invert(P),U.identifier],L.touch0?!L.touch1&&L.touch0[2]!==P[2]&&(L.touch1=P,L.taps=0):(L.touch0=P,F=!0,L.taps=1+!!c);c&&(c=clearTimeout(c)),F&&(L.taps<2&&(f=P[0],c=setTimeout(function(){c=null},h)),On(this),L.start())}}function W(v,...A){if(this.__zooming){var z=H(this,A).event(v),D=v.changedTouches,L=D.length,F,q,U,P;for(Ut(v),F=0;F<L;++F)q=D[F],U=xe(q,this),z.touch0&&z.touch0[2]===q.identifier?z.touch0[0]=U:z.touch1&&z.touch1[2]===q.identifier&&(z.touch1[0]=U);if(q=z.that.__zoom,z.touch1){var ie=z.touch0[0],ne=z.touch0[1],ce=z.touch1[0],G=z.touch1[1],de=(de=ce[0]-ie[0])*de+(de=ce[1]-ie[1])*de,me=(me=G[0]-ne[0])*me+(me=G[1]-ne[1])*me;q=w(q,Math.sqrt(de/me)),U=[(ie[0]+ce[0])/2,(ie[1]+ce[1])/2],P=[(ne[0]+G[0])/2,(ne[1]+G[1])/2]}else if(z.touch0)U=z.touch0[0],P=z.touch0[1];else return;z.zoom("touch",n(E(q,U,P),z.extent,s))}}function T(v,...A){if(this.__zooming){var z=H(this,A).event(v),D=v.changedTouches,L=D.length,F,q;for(_i(v),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),F=0;F<L;++F)q=D[F],z.touch0&&z.touch0[2]===q.identifier?delete z.touch0:z.touch1&&z.touch1[2]===q.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(q=xe(q,this),Math.hypot(f[0]-q[0],f[1]-q[1])<b)){var U=Ue(this).on("dblclick.zoom");U&&U.apply(this,arguments)}}}return g.wheelDelta=function(v){return arguments.length?(i=typeof v=="function"?v:En(+v),g):i},g.filter=function(v){return arguments.length?(t=typeof v=="function"?v:En(!!v),g):t},g.touchable=function(v){return arguments.length?(o=typeof v=="function"?v:En(!!v),g):o},g.extent=function(v){return arguments.length?(e=typeof v=="function"?v:En([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),g):e},g.scaleExtent=function(v){return arguments.length?(l[0]=+v[0],l[1]=+v[1],g):[l[0],l[1]]},g.translateExtent=function(v){return arguments.length?(s[0][0]=+v[0][0],s[1][0]=+v[1][0],s[0][1]=+v[0][1],s[1][1]=+v[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(v){return arguments.length?(n=v,g):n},g.duration=function(v){return arguments.length?(r=+v,g):r},g.interpolate=function(v){return arguments.length?(u=v,g):u},g.on=function(){var v=a.on.apply(a,arguments);return v===a?g:v},g.clickDistance=function(v){return arguments.length?(_=(v=+v)*v,g):Math.sqrt(_)},g.tapDistance=function(v){return arguments.length?(b=+v,g):b},g}const gn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${n&&i}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Ee=Symbol.for("internals"),ko=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var Ct;(function(t){t.Strict="strict",t.Loose="loose"})(Ct||(Ct={}));var lt;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(lt||(lt={}));var Wn;(function(t){t.Partial="partial",t.Full="full"})(Wn||(Wn={}));var St;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(St||(St={}));var Bn;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Bn||(Bn={}));var he;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(he||(he={}));function Rc(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function So(t,e,n){if(!n)return;const i=[];t.forEach((o,l)=>{e!=null&&e.has(l)||i.push(o)}),i.length&&n(i)}const Lc=t=>"id"in t&&"source"in t&&"target"in t,pc=t=>"id"in t&&!("source"in t)&&!("target"in t),Zt=(t,e=[0,0])=>{var r;if(!t)return{position:{x:0,y:0},positionAbsolute:{x:0,y:0}};const{width:n,height:i}=_n(t),o=n*e[0],l=i*e[1],s={x:t.position.x-o,y:t.position.y-l};return{position:s,positionAbsolute:(r=t.computed)!=null&&r.positionAbsolute?{x:t.computed.positionAbsolute.x-o,y:t.computed.positionAbsolute.y-l}:s}},mn=(t,e={nodeOrigin:[0,0],useRelativePosition:!1})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,o)=>{const l=Zt(o,o.origin||e.nodeOrigin);return Zi(i,Kn({...l[e.useRelativePosition?"position":"positionAbsolute"],..._n(o)}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return qi(n)},xl=(t,e,[n,i,o]=[0,0,1],l=!1,s=!1,r=[0,0])=>{const u={...li(e,[n,i,o]),width:e.width/o,height:e.height/o};return t.reduce((c,f)=>{const{computed:d,selectable:h=!0,hidden:m=!1}=f,_=(d==null?void 0:d.width)??f.width??f.initialWidth??null,b=(d==null?void 0:d.height)??f.height??f.initialHeight??null;if(s&&!h||m)return c;const g=Fn(u,Xi(f,r)),w=_===null||b===null,E=l&&g>0,k=(_??0)*(b??0);return(w||E||g>=k||f.dragging)&&c.push(f),c},[])},Di=(t,e)=>{const n=new Set;return t.forEach(i=>{n.add(i.id)}),e.filter(i=>n.has(i.source)||n.has(i.target))};function Wc({nodes:t,width:e,height:n,panZoom:i,minZoom:o,maxZoom:l,nodeOrigin:s=[0,0]},r){const u=t.filter(a=>{var f,d,h;const c=((f=a.computed)==null?void 0:f.width)&&((d=a.computed)==null?void 0:d.height)&&((r==null?void 0:r.includeHiddenNodes)||!a.hidden);return(h=r==null?void 0:r.nodes)!=null&&h.length?c&&(r==null?void 0:r.nodes.some(m=>m.id===a.id)):c});if(u.length>0){const a=mn(u,{nodeOrigin:s}),c=Ui(a,e,n,(r==null?void 0:r.minZoom)??o,(r==null?void 0:r.maxZoom)??l,(r==null?void 0:r.padding)??.1);return i.setViewport(c,{duration:r==null?void 0:r.duration}),!0}return!1}function Bc(t,e){var n,i;return!e||e==="parent"?e:[e[0],[e[1][0]-(((n=t.computed)==null?void 0:n.width)??0),e[1][1]-(((i=t.computed)==null?void 0:i.height)??0)]]}function Kc({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:o,onError:l}){var d,h,m,_;const s=n.get(t),r=s.parentNode?n.get(s.parentNode):void 0,{x:u,y:a}=r?Zt(r,r.origin||i).positionAbsolute:{x:0,y:0};let c=Bc(s,s.extent||o);if(s.extent==="parent"&&!s.expandParent)if(!r)l==null||l("005",gn.error005());else{const b=(d=s.computed)==null?void 0:d.width,g=(h=s.computed)==null?void 0:h.height,w=(m=r==null?void 0:r.computed)==null?void 0:m.width,E=(_=r==null?void 0:r.computed)==null?void 0:_.height;if(b&&g&&w&&E){const k=s.origin||i,C=u+b*k[0],H=a+g*k[1];c=[[C,H],[C+w-b,H+E-g]]}}else r&&zo(s.extent)&&(c=[[s.extent[0][0]+u,s.extent[0][1]+a],[s.extent[1][0]+u,s.extent[1][1]+a]]);const f=zo(c)?Fc(e,c):e;return{position:{x:f.x-u,y:f.y-a},positionAbsolute:f}}async function $l({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:i,onBeforeDelete:o}){const l=t.map(d=>d.id),s=[];for(const d of n){if(d.deletable===!1)continue;const h=l.includes(d.id),m=!h&&d.parentNode&&s.find(_=>_.id===d.parentNode);(h||m)&&s.push(d)}const r=e.map(d=>d.id),u=i.filter(d=>d.deletable!==!1),c=Di(s,u);for(const d of u)r.includes(d.id)&&!c.find(m=>m.id===d.id)&&c.push(d);if(!o)return{edges:c,nodes:s};const f=await o({nodes:s,edges:c});return typeof f=="boolean"?f?{edges:c,nodes:s}:{edges:[],nodes:[]}:f}const Kt=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Fc=(t={x:0,y:0},e)=>({x:Kt(t.x,e[0][0],e[1][0]),y:Kt(t.y,e[0][1],e[1][1])}),Eo=(t,e,n)=>t<e?Kt(Math.abs(t-e),1,50)/50:t>n?-Kt(Math.abs(t-n),1,50)/50:0,er=(t,e)=>{const n=Eo(t.x,35,e.width-35)*20,i=Eo(t.y,35,e.height-35)*20;return[n,i]},Zi=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Kn=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),qi=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),Xi=(t,e=[0,0])=>{var i,o;const{positionAbsolute:n}=Zt(t,t.origin||e);return{...n,width:((i=t.computed)==null?void 0:i.width)??t.width??0,height:((o=t.computed)==null?void 0:o.height)??t.height??0}},Co=(t,e=[0,0])=>{var i,o;const{positionAbsolute:n}=Zt(t,t.origin||e);return{...n,x2:n.x+(((i=t.computed)==null?void 0:i.width)??t.width??0),y2:n.y+(((o=t.computed)==null?void 0:o.height)??t.height??0)}},Zc=(t,e)=>qi(Zi(Kn(t),Kn(e))),Fn=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},qc=t=>$t(t.width)&&$t(t.height)&&$t(t.x)&&$t(t.y),$t=t=>!isNaN(t)&&isFinite(t),Gc=(t,e)=>{},Uc=({x:t,y:e,width:n,height:i,origin:o=[0,0]})=>!n||!i||o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:t,y:e}:{x:t-n*o[0],y:e-i*o[1]},Gi=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),li=({x:t,y:e},[n,i,o],l=!1,s=[1,1])=>{const r={x:(t-n)/o,y:(e-i)/o};return l?Gi(r,s):r},tr=({x:t,y:e},[n,i,o])=>({x:t*o+n,y:e*o+i}),Ui=(t,e,n,i,o,l)=>{const s=e/(t.width*(1+l)),r=n/(t.height*(1+l)),u=Math.min(s,r),a=Kt(u,i,o),c=t.x+t.width/2,f=t.y+t.height/2,d=e/2-c*a,h=n/2-f*a;return{x:d,y:h,zoom:a}},Zn=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function zo(t){return t!==void 0&&t!=="parent"}function _n(t){var e,n;return{width:((e=t.computed)==null?void 0:e.width)??t.width??t.initialWidth??0,height:((n=t.computed)==null?void 0:n.height)??t.height??t.initialHeight??0}}function qn(t){var e,n;return(((e=t.computed)==null?void 0:e.width)??t.width??t.initialWidth)!==void 0&&(((n=t.computed)==null?void 0:n.height)??t.height??t.initialHeight)!==void 0}function yi(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:i}){const{x:o,y:l}=dt(t),s=li({x:o,y:l},i),{x:r,y:u}=n?Gi(s,e):s;return{xSnapped:r,ySnapped:u,...s}}const nr=t=>({width:t.offsetWidth,height:t.offsetHeight}),Jc=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},Qc=["INPUT","SELECT","TEXTAREA"];function jc(t){var i,o;const e=((o=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:o[0])||t.target;return Qc.includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute("contenteditable"))||!!(e!=null&&e.closest(".nokey"))}const ir=t=>"clientX"in t,dt=(t,e)=>{var l,s;const n=ir(t),i=n?t.clientX:(l=t.touches)==null?void 0:l[0].clientX,o=n?t.clientY:(s=t.touches)==null?void 0:s[0].clientY;return{x:i-((e==null?void 0:e.left)??0),y:o-((e==null?void 0:e.top)??0)}},Mo=(t,e,n,i=[0,0])=>{const o=e.querySelectorAll(t);if(!o||!o.length)return null;const l=Array.from(o),s=e.getBoundingClientRect(),r={x:s.width*i[0],y:s.height*i[1]};return l.map(u=>{const a=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),position:u.getAttribute("data-handlepos"),x:(a.left-s.left-r.x)/n,y:(a.top-s.top-r.y)/n,...nr(u)}})};function xc({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:s,targetControlY:r}){const u=t*.125+o*.375+s*.375+n*.125,a=e*.125+l*.375+r*.375+i*.125,c=Math.abs(u-t),f=Math.abs(a-e);return[u,a,c,f]}function Cn(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Po({pos:t,x1:e,y1:n,x2:i,y2:o,c:l}){switch(t){case he.Left:return[e-Cn(e-i,l),n];case he.Right:return[e+Cn(i-e,l),n];case he.Top:return[e,n-Cn(n-o,l)];case he.Bottom:return[e,n+Cn(o-n,l)]}}function or({sourceX:t,sourceY:e,sourcePosition:n=he.Bottom,targetX:i,targetY:o,targetPosition:l=he.Top,curvature:s=.25}){const[r,u]=Po({pos:n,x1:t,y1:e,x2:i,y2:o,c:s}),[a,c]=Po({pos:l,x1:i,y1:o,x2:t,y2:e,c:s}),[f,d,h,m]=xc({sourceX:t,sourceY:e,targetX:i,targetY:o,sourceControlX:r,sourceControlY:u,targetControlX:a,targetControlY:c});return[`M${t},${e} C${r},${u} ${a},${c} ${i},${o}`,f,d,h,m]}function lr({sourceX:t,sourceY:e,targetX:n,targetY:i}){const o=Math.abs(n-t)/2,l=n<t?n+o:n-o,s=Math.abs(i-e)/2,r=i<e?i+s:i-s;return[l,r,o,s]}function $c({sourceNode:t,targetNode:e,selected:n=!1,zIndex:i=0,elevateOnSelect:o=!1}){var r,u;if(!o)return i;const l=n||e.selected||t.selected,s=Math.max(((r=t[Ee])==null?void 0:r.z)||0,((u=e[Ee])==null?void 0:u.z)||0,1e3);return i+(l?s:0)}function ef({sourceNode:t,targetNode:e,width:n,height:i,transform:o}){const l=Zi(Co(t),Co(e));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:i/o[2]};return Fn(s,qi(l))>0}const tf=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`xy-edge__${t}${e||""}-${n}${i||""}`,nf=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),of=(t,e)=>{if(!t.source||!t.target)return e;let n;return Lc(t)?n={...t}:n={...t,id:tf(t)},nf(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function rr({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[o,l,s,r]=lr({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,o,l,s,r]}const No={[he.Left]:{x:-1,y:0},[he.Right]:{x:1,y:0},[he.Top]:{x:0,y:-1},[he.Bottom]:{x:0,y:1}},lf=({source:t,sourcePosition:e=he.Bottom,target:n})=>e===he.Left||e===he.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},Ao=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function rf({source:t,sourcePosition:e=he.Bottom,target:n,targetPosition:i=he.Top,center:o,offset:l}){const s=No[e],r=No[i],u={x:t.x+s.x*l,y:t.y+s.y*l},a={x:n.x+r.x*l,y:n.y+r.y*l},c=lf({source:u,sourcePosition:e,target:a}),f=c.x!==0?"x":"y",d=c[f];let h=[],m,_;const b={x:0,y:0},g={x:0,y:0},[w,E,k,C]=lr({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(s[f]*r[f]===-1){m=o.x??w,_=o.y??E;const N=[{x:m,y:u.y},{x:m,y:a.y}],O=[{x:u.x,y:_},{x:a.x,y:_}];s[f]===d?h=f==="x"?N:O:h=f==="x"?O:N}else{const N=[{x:u.x,y:a.y}],O=[{x:a.x,y:u.y}];if(f==="x"?h=s.x===d?O:N:h=s.y===d?N:O,e===i){const T=Math.abs(t[f]-n[f]);if(T<=l){const v=Math.min(l-1,l-T);s[f]===d?b[f]=(u[f]>t[f]?-1:1)*v:g[f]=(a[f]>n[f]?-1:1)*v}}if(e!==i){const T=f==="x"?"y":"x",v=s[f]===r[T],A=u[T]>a[T],z=u[T]<a[T];(s[f]===1&&(!v&&A||v&&z)||s[f]!==1&&(!v&&z||v&&A))&&(h=f==="x"?N:O)}const I={x:u.x+b.x,y:u.y+b.y},y={x:a.x+g.x,y:a.y+g.y},R=Math.max(Math.abs(I.x-h[0].x),Math.abs(y.x-h[0].x)),W=Math.max(Math.abs(I.y-h[0].y),Math.abs(y.y-h[0].y));R>=W?(m=(I.x+y.x)/2,_=h[0].y):(m=h[0].x,_=(I.y+y.y)/2)}return[[t,{x:u.x+b.x,y:u.y+b.y},...h,{x:a.x+g.x,y:a.y+g.y},n],m,_,k,C]}function sf(t,e,n,i){const o=Math.min(Ao(t,e)/2,Ao(e,n)/2,i),{x:l,y:s}=e;if(t.x===l&&l===n.x||t.y===s&&s===n.y)return`L${l} ${s}`;if(t.y===s){const a=t.x<n.x?-1:1,c=t.y<n.y?1:-1;return`L ${l+o*a},${s}Q ${l},${s} ${l},${s+o*c}`}const r=t.x<n.x?1:-1,u=t.y<n.y?-1:1;return`L ${l},${s+o*u}Q ${l},${s} ${l+o*r},${s}`}function Gn({sourceX:t,sourceY:e,sourcePosition:n=he.Bottom,targetX:i,targetY:o,targetPosition:l=he.Top,borderRadius:s=5,centerX:r,centerY:u,offset:a=20}){const[c,f,d,h,m]=rf({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:o},targetPosition:l,center:{x:r,y:u},offset:a});return[c.reduce((b,g,w)=>{let E="";return w>0&&w<c.length-1?E=sf(c[w-1],g,c[w+1],s):E=`${w===0?"M":"L"}${g.x} ${g.y}`,b+=E,b},""),f,d,h,m]}function Ho(t){var e,n,i;return!!((e=t==null?void 0:t[Ee])!=null&&e.handleBounds||(n=t==null?void 0:t.handles)!=null&&n.length)&&!!((i=t==null?void 0:t.computed)!=null&&i.width||t!=null&&t.width||t!=null&&t.initialWidth)}function uf(t){var h,m,_;const{sourceNode:e,targetNode:n}=t;if(!Ho(e)||!Ho(n))return null;const i=((h=e[Ee])==null?void 0:h.handleBounds)||Oo(e.handles),o=((m=n[Ee])==null?void 0:m.handleBounds)||Oo(n.handles),l=Io((i==null?void 0:i.source)??[],t.sourceHandle),s=Io(t.connectionMode===Ct.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),t.targetHandle),r=(l==null?void 0:l.position)||he.Bottom,u=(s==null?void 0:s.position)||he.Top;if(!l||!s)return(_=t.onError)==null||_.call(t,"008",gn.error008(l?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const[a,c]=To(r,e,l),[f,d]=To(u,n,s);return{sourceX:a,sourceY:c,targetX:f,targetY:d,sourcePosition:r,targetPosition:u}}function Oo(t){if(!t)return null;const e=[],n=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?e.push(i):i.type==="target"&&n.push(i);return{source:e,target:n}}function To(t,e,n=null){var r,u,a,c;const i=((n==null?void 0:n.x)??0)+(((u=(r=e.computed)==null?void 0:r.positionAbsolute)==null?void 0:u.x)??0),o=((n==null?void 0:n.y)??0)+(((c=(a=e.computed)==null?void 0:a.positionAbsolute)==null?void 0:c.y)??0),{width:l,height:s}=n??_n(e);switch(t){case he.Top:return[i+l/2,o];case he.Right:return[i+l,o+s/2];case he.Bottom:return[i+l/2,o+s];case he.Left:return[i,o+s/2]}}function Io(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function Yi(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function af(t,{id:e,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:o}){const l=new Set;return t.reduce((s,r)=>([r.markerStart||i,r.markerEnd||o].forEach(u=>{if(u&&typeof u=="object"){const a=Yi(u,e);l.has(a)||(s.push({id:a,color:u.color||n,...u}),l.add(a))}}),s),[]).sort((s,r)=>s.id.localeCompare(r.id))}function cf(t,e,n=[0,0],i){return t.map(o=>{var l,s,r,u,a,c;if(o.parentNode&&!e.has(o.parentNode))throw new Error(`Parent node ${o.parentNode} not found`);if(o.parentNode||i!=null&&i[o.id]){const f=o.parentNode?e.get(o.parentNode):null,{x:d,y:h,z:m}=ur(o,t,e,{...o.position,z:((l=o[Ee])==null?void 0:l.z)??0},(f==null?void 0:f.origin)||n),_=d!==((r=(s=o.computed)==null?void 0:s.positionAbsolute)==null?void 0:r.x)||h!==((a=(u=o.computed)==null?void 0:u.positionAbsolute)==null?void 0:a.y);o.computed.positionAbsolute=_?{x:d,y:h}:(c=o.computed)==null?void 0:c.positionAbsolute,o[Ee].z=m,i!=null&&i[o.id]&&(o[Ee].isParent=!0)}return o})}function sr(t,e,n={nodeOrigin:[0,0],elevateNodesOnSelect:!0,defaults:{}}){const i=new Map(e);e.clear();const o={},l=n!=null&&n.elevateNodesOnSelect?1e3:0,s=t.map(u=>{var h,m,_;const a=i.get(u.id);if(u===((h=a==null?void 0:a[Ee])==null?void 0:h.userProvidedNode))return e.set(u.id,a),a;const c={...n.defaults,...u,computed:{positionAbsolute:u.position,width:(m=u.computed)==null?void 0:m.width,height:(_=u.computed)==null?void 0:_.height}},f=($t(u.zIndex)?u.zIndex:0)+(u.selected?l:0),d=(u==null?void 0:u[Ee])||(a==null?void 0:a[Ee]);return c.parentNode&&(o[c.parentNode]=!0),Object.defineProperty(c,Ee,{enumerable:!1,value:{handleBounds:d==null?void 0:d.handleBounds,z:f,userProvidedNode:u}}),e.set(c.id,c),c});return cf(s,e,n.nodeOrigin,o)}function ur(t,e,n,i,o){var r,u;if(!t.parentNode)return i;const l=n.get(t.parentNode),{position:s}=Zt(l,(l==null?void 0:l.origin)||o);return ur(l,e,n,{x:(i.x??0)+s.x,y:(i.y??0)+s.y,z:(((r=l[Ee])==null?void 0:r.z)??0)>(i.z??0)?((u=l[Ee])==null?void 0:u.z)??0:i.z??0},l.origin||o)}function ff(t,e,n,i,o,l){const s=i==null?void 0:i.querySelector(".xyflow__viewport");if(!s)return null;const r=window.getComputedStyle(s),{m22:u}=new window.DOMMatrixReadOnly(r.transform);return e.map(c=>{var d,h;const f=t.get(c.id);if(f){const m=nr(f.nodeElement);if(!!(m.width&&m.height&&(((d=c.computed)==null?void 0:d.width)!==m.width||((h=c.computed)==null?void 0:h.height)!==m.height||f.forceUpdate))){l==null||l(c.id,m);const b={...c,computed:{...c.computed,...m},[Ee]:{...c[Ee],handleBounds:{source:Mo(".source",f.nodeElement,u,c.origin||o),target:Mo(".target",f.nodeElement,u,c.origin||o)}}};return n.set(c.id,b),b}}return c})}function df({delta:t,panZoom:e,transform:n,translateExtent:i,width:o,height:l}){if(!e||!t.x&&!t.y)return!1;const s=e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[o,l]],i);return!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2])}function ar(t,e,n){t.clear(),e.clear();for(const i of n){const{source:o,target:l,sourceHandle:s=null,targetHandle:r=null}=i,u=`${o}-source-${s}`,a=`${l}-target-${r}`,c=t.get(u)||new Map,f=t.get(a)||new Map,d={edgeId:i.id,source:o,target:l,sourceHandle:s,targetHandle:r};e.set(i.id,i),t.set(u,c.set(`${l}-${r}`,d)),t.set(a,f.set(`${o}-${s}`,d))}}function bi(t){return(e,n,i)=>t==null?void 0:t(e,i)}function cr(t,e){if(!t.parentNode)return!1;const n=e.find(i=>i.id===i.parentNode);return n?n.selected?!0:cr(n,e):!1}function Do(t,e,n){let i=t;do{if(i!=null&&i.matches(e))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function hf(t,e,n,i){return t.filter(o=>(o.selected||o.id===i)&&(!o.parentNode||!cr(o,t))&&(o.draggable||e&&typeof o.draggable>"u")).map(o=>{var l,s,r,u,a,c,f;return{id:o.id,position:o.position||{x:0,y:0},distance:{x:n.x-(((s=(l=o.computed)==null?void 0:l.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((u=(r=o.computed)==null?void 0:r.positionAbsolute)==null?void 0:u.y)??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode,origin:o.origin,expandParent:o.expandParent,computed:{positionAbsolute:((a=o.computed)==null?void 0:a.positionAbsolute)||{x:0,y:0},width:((c=o.computed)==null?void 0:c.width)||0,height:((f=o.computed)==null?void 0:f.height)||0}}})}function wi({nodeId:t,dragItems:e,nodeLookup:n}){const i=e.map(o=>({...n.get(o.id),position:o.position,computed:{...o.computed,positionAbsolute:o.computed.positionAbsolute}}));return[t?i.find(o=>o.id===t):i[0],i]}function gf({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:i,onDragStop:o}){let l={x:null,y:null},s=0,r=[],u=!1,a={x:0,y:0},c=null,f=!1,d=null;function h({noDragClassName:_,handleSelector:b,domNode:g,isSelectable:w,nodeId:E}){d=Ue(g);function k({x:O,y:I},y){const{nodeLookup:R,nodeExtent:W,snapGrid:T,snapToGrid:v,nodeOrigin:A,onNodeDrag:z,onSelectionDrag:D,onError:L,updateNodePositions:F}=e();l={x:O,y:I};let q=!1,U={x:0,y:0,x2:0,y2:0};if(r.length>1&&W){const P=mn(r,{nodeOrigin:A});U=Kn(P)}if(r=r.map(P=>{var de,me;let ie={x:O-P.distance.x,y:I-P.distance.y};v&&(ie=Gi(ie,T));const ne=[[W[0][0],W[0][1]],[W[1][0],W[1][1]]];r.length>1&&W&&!P.extent&&(ne[0][0]=P.computed.positionAbsolute.x-U.x+W[0][0],ne[1][0]=P.computed.positionAbsolute.x+(((de=P.computed)==null?void 0:de.width)??0)-U.x2+W[1][0],ne[0][1]=P.computed.positionAbsolute.y-U.y+W[0][1],ne[1][1]=P.computed.positionAbsolute.y+(((me=P.computed)==null?void 0:me.height)??0)-U.y2+W[1][1]);const{position:ce,positionAbsolute:G}=Kc({nodeId:P.id,nextPosition:ie,nodeLookup:R,nodeExtent:ne,nodeOrigin:A,onError:L});return q=q||P.position.x!==ce.x||P.position.y!==ce.y,P.position=ce,P.computed.positionAbsolute=G,P}),!!q&&(F(r,!0),y&&(i||z||!E&&D))){const[P,ie]=wi({nodeId:E,dragItems:r,nodeLookup:R});i==null||i(y,r,P,ie),z==null||z(y,P,ie),E||bi(D)(y,P,ie)}}function C(){if(!c)return;const[O,I]=er(a,c);if(O!==0||I!==0){const{transform:y,panBy:R}=e();l.x=(l.x??0)-O/y[2],l.y=(l.y??0)-I/y[2],R({x:O,y:I})&&k(l,null)}s=requestAnimationFrame(C)}function H(O){var U;const{nodes:I,nodeLookup:y,multiSelectionActive:R,nodesDraggable:W,transform:T,snapGrid:v,snapToGrid:A,selectNodesOnDrag:z,onNodeDragStart:D,onSelectionDragStart:L,unselectNodesAndEdges:F}=e();f=!0,(!z||!w)&&!R&&E&&((U=y.get(E))!=null&&U.selected||F()),w&&z&&E&&(t==null||t(E));const q=yi(O.sourceEvent,{transform:T,snapGrid:v,snapToGrid:A});if(l=q,r=hf(I,W,q,E),r.length>0&&(n||D||!E&&L)){const[P,ie]=wi({nodeId:E,dragItems:r,nodeLookup:y});n==null||n(O.sourceEvent,r,P,ie),D==null||D(O.sourceEvent,P,ie),E||bi(L)(O.sourceEvent,P,ie)}}const N=Uu().on("start",O=>{const{domNode:I,nodeDragThreshold:y,transform:R,snapGrid:W,snapToGrid:T}=e();y===0&&H(O),l=yi(O.sourceEvent,{transform:R,snapGrid:W,snapToGrid:T}),c=(I==null?void 0:I.getBoundingClientRect())||null,a=dt(O.sourceEvent,c)}).on("drag",O=>{const{autoPanOnNodeDrag:I,transform:y,snapGrid:R,snapToGrid:W,nodeDragThreshold:T}=e(),v=yi(O.sourceEvent,{transform:y,snapGrid:R,snapToGrid:W});if(!u&&I&&f&&(u=!0,C()),!f){const A=v.xSnapped-(l.x??0),z=v.ySnapped-(l.y??0);Math.sqrt(A*A+z*z)>T&&H(O)}(l.x!==v.xSnapped||l.y!==v.ySnapped)&&r&&f&&(a=dt(O.sourceEvent,c),k(v,O.sourceEvent))}).on("end",O=>{if(f&&(u=!1,f=!1,cancelAnimationFrame(s),r.length>0)){const{nodeLookup:I,updateNodePositions:y,onNodeDragStop:R,onSelectionDragStop:W}=e();if(y(r,!1),o||R||!E&&W){const[T,v]=wi({nodeId:E,dragItems:r,nodeLookup:I});o==null||o(O.sourceEvent,r,T,v),R==null||R(O.sourceEvent,T,v),E||bi(W)(O.sourceEvent,T,v)}}}).filter(O=>{const I=O.target;return!O.button&&(!_||!Do(I,`.${_}`,g))&&(!b||Do(I,b,g))});d.call(N)}function m(){d==null||d.on(".drag",null)}return{update:h,destroy:m}}function Xo(t,e,n,i){return(e[n]||[]).reduce((o,l)=>{var s,r,u,a;return`${t.id}-${l.id}-${n}`!==i&&o.push({id:l.id||null,type:n,nodeId:t.id,x:(((r=(s=t.computed)==null?void 0:s.positionAbsolute)==null?void 0:r.x)??0)+l.x+l.width/2,y:(((a=(u=t.computed)==null?void 0:u.positionAbsolute)==null?void 0:a.y)??0)+l.y+l.height/2}),o},[])}function mf(t,e,n){let i=[],o=1/0;for(const l of n){const s=Math.sqrt(Math.pow(l.x-t.x,2)+Math.pow(l.y-t.y,2));s<=e&&(s<o?i=[l]:s===o&&i.push(l),o=s)}return i.length?i.length===1?i[0]:i.find(l=>l.type==="target")||i[0]:null}function _f({nodes:t,nodeId:e,handleId:n,handleType:i}){return t.reduce((o,l)=>{if(l[Ee]){const{handleBounds:s}=l[Ee];let r=[],u=[];s&&(r=Xo(l,s,"source",`${e}-${n}-${i}`),u=Xo(l,s,"target",`${e}-${n}-${i}`)),o.push(...r,...u)}return o},[])}function fr(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function yf(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}const dr=()=>!0;let zn=null;function bf(t,{connectionMode:e,connectionRadius:n,handleId:i,nodeId:o,edgeUpdaterType:l,isTarget:s,domNode:r,nodes:u,lib:a,autoPanOnConnect:c,flowId:f,panBy:d,cancelConnection:h,onConnectStart:m,onConnect:_,onConnectEnd:b,isValidConnection:g=dr,onEdgeUpdateEnd:w,updateConnection:E,getTransform:k}){const C=Jc(t.target);let H=0,N;const{x:O,y:I}=dt(t),y=C==null?void 0:C.elementFromPoint(O,I),R=fr(l,y),W=r==null?void 0:r.getBoundingClientRect();if(!W||!R)return;let T=dt(t,W),v=!1,A=null,z=!1,D=null;const L=_f({nodes:u,nodeId:o,handleId:i,handleType:R});function F(){if(!c||!W)return;const[P,ie]=er(T,W);d({x:P,y:ie}),H=requestAnimationFrame(F)}zn={nodeId:o,handleId:i,type:R},E({connectionPosition:T,connectionStatus:null,connectionStartHandle:zn,connectionEndHandle:null}),m==null||m(t,{nodeId:o,handleId:i,handleType:R});function q(P){const ie=k();T=dt(P,W),N=mf(li(T,ie,!1,[1,1]),n,L),v||(F(),v=!0);const ne=hr(P,{handle:N,connectionMode:e,fromNodeId:o,fromHandleId:i,fromType:s?"target":"source",isValidConnection:g,doc:C,lib:a,flowId:f});D=ne.handleDomNode,A=ne.connection,z=ne.isValid,E({connectionStartHandle:zn,connectionPosition:N&&z?tr({x:N.x,y:N.y},ie):T,connectionStatus:yf(!!N,z),connectionEndHandle:ne.endHandle})}function U(P){(N||D)&&A&&z&&(_==null||_(A)),b==null||b(P),l&&(w==null||w(P)),h(),cancelAnimationFrame(H),v=!1,z=!1,A=null,D=null,zn=null,C.removeEventListener("mousemove",q),C.removeEventListener("mouseup",U),C.removeEventListener("touchmove",q),C.removeEventListener("touchend",U)}C.addEventListener("mousemove",q),C.addEventListener("mouseup",U),C.addEventListener("touchmove",q),C.addEventListener("touchend",U)}function hr(t,{handle:e,connectionMode:n,fromNodeId:i,fromHandleId:o,fromType:l,doc:s,lib:r,flowId:u,isValidConnection:a=dr}){const c=l==="target",f=e?s.querySelector(`.${r}-flow__handle[data-id="${u}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`):null,{x:d,y:h}=dt(t),m=s.elementFromPoint(d,h),_=m!=null&&m.classList.contains(`${r}-flow__handle`)?m:f,b={handleDomNode:_,isValid:!1,connection:null,endHandle:null};if(_){const g=fr(void 0,_),w=_.getAttribute("data-nodeid"),E=_.getAttribute("data-handleid"),k=_.classList.contains("connectable"),C=_.classList.contains("connectableend");if(!w)return b;const H={source:c?w:i,sourceHandle:c?E:o,target:c?i:w,targetHandle:c?o:E};b.connection=H,k&&C&&(n===Ct.Strict?c&&g==="source"||!c&&g==="target":w!==i||E!==o)&&(b.endHandle={nodeId:w,handleId:E,type:g},b.isValid=a(H))}return b}const wf={onPointerDown:bf,isValid:hr};function vf({domNode:t,panZoom:e,getTransform:n,getViewScale:i}){const o=Ue(t);function l({translateExtent:r,width:u,height:a,zoomStep:c=10,pannable:f=!0,zoomable:d=!0,inversePan:h=!1}){const m=g=>{const w=n();if(g.sourceEvent.type!=="wheel"||!e)return;const E=-g.sourceEvent.deltaY*(g.sourceEvent.deltaMode===1?.05:g.sourceEvent.deltaMode?1:.002)*c,k=w[2]*Math.pow(2,E);e.scaleTo(k)},_=g=>{const w=n();if(g.sourceEvent.type!=="mousemove"||!e)return;const E=i()*Math.max(w[2],Math.log(w[2]))*(h?-1:1),k={x:w[0]-g.sourceEvent.movementX*E,y:w[1]-g.sourceEvent.movementY*E},C=[[0,0],[u,a]];e.setViewportConstrained({x:k.x,y:k.y,zoom:w[2]},C,r)},b=jl().on("zoom",f?_:null).on("zoom.wheel",d?m:null);o.call(b,{})}function s(){o.on("zoom",null)}return{update:l,destroy:s,pointer:xe}}const kf=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,ri=t=>({x:t.x,y:t.y,zoom:t.k}),vi=({x:t,y:e,zoom:n})=>oi.translate(t,e).scale(n),It=(t,e)=>t.target.closest(`.${e}`),gr=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),ki=(t,e=0)=>typeof e=="number"&&e>0?t.transition().duration(e):t,mr=t=>{const e=t.ctrlKey&&Zn()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function Sf({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:l,zoomOnPinch:s,onPanZoomStart:r,onPanZoom:u,onPanZoomEnd:a}){return c=>{if(It(c,e))return!1;c.preventDefault(),c.stopImmediatePropagation();const f=n.property("__zoom").k||1,d=Zn();if(c.ctrlKey&&s&&d){const g=xe(c),w=mr(c),E=f*Math.pow(2,w);i.scaleTo(n,E,g,c);return}const h=c.deltaMode===1?20:1;let m=o===lt.Vertical?0:c.deltaX*h,_=o===lt.Horizontal?0:c.deltaY*h;!d&&c.shiftKey&&o!==lt.Vertical&&(m=c.deltaY*h,_=0),i.translateBy(n,-(m/f)*l,-(_/f)*l,{internal:!0});const b=ri(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,r==null||r(c,b)),t.isPanScrolling&&(u==null||u(c,b),t.panScrollTimeout=setTimeout(()=>{a==null||a(c,b),t.isPanScrolling=!1},150))}}function Ef({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(i,o){if(!e||It(i,t))return null;i.preventDefault(),n.call(this,i,o)}}function Cf({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return i=>{var l,s,r;if((l=i.sourceEvent)!=null&&l.internal)return;const o=ri(i.transform);t.mouseButton=((s=i.sourceEvent)==null?void 0:s.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=o,((r=i.sourceEvent)==null?void 0:r.type)==="mousedown"&&e(!0),n&&(n==null||n(i.sourceEvent,o))}}function zf({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:i,onPanZoom:o}){return l=>{var s,r;t.usedRightMouseButton=!!(n&&gr(e,t.mouseButton??0)),(s=l.sourceEvent)!=null&&s.sync||i([l.transform.x,l.transform.y,l.transform.k]),o&&!((r=l.sourceEvent)!=null&&r.internal)&&(o==null||o(l.sourceEvent,ri(l.transform)))}}function Mf({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:l}){return s=>{var r;if(!((r=s.sourceEvent)!=null&&r.internal)&&(t.isZoomingOrPanning=!1,l&&gr(e,t.mouseButton??0)&&!t.usedRightMouseButton&&s.sourceEvent&&l(s.sourceEvent),t.usedRightMouseButton=!1,i(!1),o&&kf(t.prevViewport,s.transform))){const u=ri(s.transform);t.prevViewport=u,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{o==null||o(s.sourceEvent,u)},n?150:0)}}}function Pf({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:l,userSelectionActive:s,noWheelClassName:r,noPanClassName:u,lib:a}){return c=>{const f=t||e,d=n&&c.ctrlKey;if(c.button===1&&c.type==="mousedown"&&(It(c,`${a}-flow__node`)||It(c,`${a}-flow__edge`)))return!0;if(!i&&!f&&!o&&!l&&!n||s||!l&&c.type==="dblclick"||It(c,r)&&c.type==="wheel"||It(c,u)&&(c.type!=="wheel"||o&&c.type==="wheel"&&!t)||!n&&c.ctrlKey&&c.type==="wheel"||!f&&!o&&!d&&c.type==="wheel"||!i&&(c.type==="mousedown"||c.type==="touchstart")||Array.isArray(i)&&!i.includes(c.button)&&(c.type==="mousedown"||c.type==="touchstart"))return!1;const h=Array.isArray(i)&&i.includes(c.button)||!c.button||c.button<=1;return(!c.ctrlKey||c.type==="wheel")&&h}}function Nf({domNode:t,minZoom:e,maxZoom:n,translateExtent:i,viewport:o,onPanZoom:l,onPanZoomStart:s,onPanZoomEnd:r,onTransformChange:u,onDraggingChange:a}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=t.getBoundingClientRect(),d=jl().scaleExtent([e,n]).translateExtent(i),h=Ue(t).call(d);w({x:o.x,y:o.y,zoom:Kt(o.zoom,e,n)},[[0,0],[f.width,f.height]],i);const m=h.on("wheel.zoom");d.wheelDelta(mr);function _(y,R){h&&(d==null||d.transform(ki(h,R==null?void 0:R.duration),y))}function b({noWheelClassName:y,noPanClassName:R,onPaneContextMenu:W,userSelectionActive:T,panOnScroll:v,panOnDrag:A,panOnScrollMode:z,panOnScrollSpeed:D,preventScrolling:L,zoomOnPinch:F,zoomOnScroll:q,zoomOnDoubleClick:U,zoomActivationKeyPressed:P,lib:ie}){T&&!c.isZoomingOrPanning&&g();const ce=v&&!P&&!T?Sf({zoomPanValues:c,noWheelClassName:y,d3Selection:h,d3Zoom:d,panOnScrollMode:z,panOnScrollSpeed:D,zoomOnPinch:F,onPanZoomStart:s,onPanZoom:l,onPanZoomEnd:r}):Ef({noWheelClassName:y,preventScrolling:L,d3ZoomHandler:m});if(h.on("wheel.zoom",ce,{passive:!1}),!T){const de=Cf({zoomPanValues:c,onDraggingChange:a,onPanZoomStart:s});d.on("start",de);const me=zf({zoomPanValues:c,panOnDrag:A,onPaneContextMenu:!!W,onPanZoom:l,onTransformChange:u});d.on("zoom",me);const p=Mf({zoomPanValues:c,panOnDrag:A,panOnScroll:v,onPaneContextMenu:W,onPanZoomEnd:r,onDraggingChange:a});d.on("end",p)}const G=Pf({zoomActivationKeyPressed:P,panOnDrag:A,zoomOnScroll:q,panOnScroll:v,zoomOnDoubleClick:U,zoomOnPinch:F,userSelectionActive:T,noPanClassName:R,noWheelClassName:y,lib:ie});d.filter(G)}function g(){d.on("zoom",null)}function w(y,R,W){const T=vi(y),v=d==null?void 0:d.constrain()(T,R,W);return v&&_(v),v}function E(y,R){const W=vi(y);return _(W,R),W}function k(y){if(h){const R=vi(y),W=h.property("__zoom");(W.k!==y.zoom||W.x!==y.x||W.y!==y.y)&&(d==null||d.transform(h,R,null,{sync:!0}))}}function C(){const y=h?Ql(h.node()):{x:0,y:0,k:1};return{x:y.x,y:y.y,zoom:y.k}}function H(y,R){h&&(d==null||d.scaleTo(ki(h,R==null?void 0:R.duration),y))}function N(y,R){h&&(d==null||d.scaleBy(ki(h,R==null?void 0:R.duration),y))}function O(y){d==null||d.scaleExtent(y)}function I(y){d==null||d.translateExtent(y)}return{update:b,destroy:g,setViewport:E,setViewportConstrained:w,getViewport:C,scaleTo:H,scaleBy:N,setScaleExtent:O,setTranslateExtent:I,syncViewport:k}}var Yo;(function(t){t.Line="line",t.Handle="handle"})(Yo||(Yo={}));function Af(t){let e,n,i,o,l,s;const r=t[41].default,u=Xe(r,t,t[40],null);return{c(){e=_e("div"),u&&u.c(),S(e,"data-handleid",t[13]),S(e,"data-nodeid",t[11]),S(e,"data-handlepos",t[2]),S(e,"data-id",n=t[9]+"-"+t[11]+"-"+(t[0]||null)+"-"+t[1]),S(e,"class",i=we(["svelte-flow__handle",`svelte-flow__handle-${t[2]}`,"nodrag","nopan",t[2],{valid:t[6],connectingto:t[5],connectingfrom:t[7]},t[4]])),S(e,"style",t[3]),S(e,"role","button"),S(e,"tabindex","-1"),fe(e,"source",!t[10]),fe(e,"target",t[10]),fe(e,"connectablestart",t[8]),fe(e,"connectableend",t[8]),fe(e,"connectable",t[8]),fe(e,"connectionindicator",t[8])},m(a,c){K(a,e,c),u&&u.m(e,null),o=!0,l||(s=[ve(e,"mousedown",t[30]),ve(e,"touchstart",t[30])],l=!0)},p(a,c){u&&u.p&&(!o||c[1]&512)&&Ve(u,r,a,a[40],o?Ye(r,a[40],c,null):Re(a[40]),null),(!o||c[0]&4)&&S(e,"data-handlepos",a[2]),(!o||c[0]&515&&n!==(n=a[9]+"-"+a[11]+"-"+(a[0]||null)+"-"+a[1]))&&S(e,"data-id",n),(!o||c[0]&244&&i!==(i=we(["svelte-flow__handle",`svelte-flow__handle-${a[2]}`,"nodrag","nopan",a[2],{valid:a[6],connectingto:a[5],connectingfrom:a[7]},a[4]])))&&S(e,"class",i),(!o||c[0]&8)&&S(e,"style",a[3]),(!o||c[0]&1268)&&fe(e,"source",!a[10]),(!o||c[0]&1268)&&fe(e,"target",a[10]),(!o||c[0]&500)&&fe(e,"connectablestart",a[8]),(!o||c[0]&500)&&fe(e,"connectableend",a[8]),(!o||c[0]&500)&&fe(e,"connectable",a[8]),(!o||c[0]&500)&&fe(e,"connectionindicator",a[8])},i(a){o||(X(u,a),o=!0)},o(a){Y(u,a),o=!1},d(a){a&&B(e),u&&u.d(a),l=!1,pe(s)}}}function Hf(t,e,n){let i,o,l,s,r,u,a,c,f,d,h,m,_,b,g,w,E,k,C,H,N,{$$slots:O={},$$scope:I}=e,{id:y=void 0}=e,{type:R="source"}=e,{position:W=he.Top}=e,{style:T=void 0}=e,{isConnectable:v=void 0}=e,{onconnect:A=void 0}=e,{ondisconnect:z=void 0}=e,{class:D=void 0}=e;const L=R==="target",F=In("svelteflow__node_id"),q=In("svelteflow__node_connectable");J(t,q,Q=>n(39,N=Q));const U=y||null,P=Ce(),{connectionMode:ie,domNode:ne,nodes:ce,connectionRadius:G,viewport:de,isValidConnection:me,lib:p,addEdge:Me,onedgecreate:Ae,panBy:Te,cancelConnection:He,updateConnection:qe,autoPanOnConnect:ke,edges:st,connectionLookup:ut,onconnect:tt,onconnectstart:nt,onconnectend:j,flowId:_t,connection:yt}=P;J(t,ie,Q=>n(50,E=Q)),J(t,ne,Q=>n(52,C=Q)),J(t,ce,Q=>n(51,k=Q)),J(t,G,Q=>n(53,H=Q)),J(t,de,Q=>n(42,c=Q)),J(t,me,Q=>n(47,_=Q)),J(t,p,Q=>n(49,w=Q)),J(t,Ae,Q=>n(46,m=Q)),J(t,ke,Q=>n(48,g=Q)),J(t,st,Q=>n(38,a=Q)),J(t,ut,Q=>n(37,u=Q)),J(t,tt,Q=>n(45,h=Q)),J(t,nt,Q=>n(44,d=Q)),J(t,j,Q=>n(43,f=Q)),J(t,_t,Q=>n(9,b=Q)),J(t,yt,Q=>n(36,r=Q));function Z(Q){const at=ir(Q);(at&&Q.button===0||!at)&&wf.onPointerDown(Q,{handleId:U,nodeId:F,isTarget:L,connectionRadius:H,domNode:C,nodes:k,connectionMode:E,lib:w,autoPanOnConnect:g,flowId:b,isValidConnection:_,updateConnection:qe,cancelConnection:He,panBy:Te,onConnect:Be=>{const Fe=m?m(Be):Be;Fe&&(Me(Fe),h==null||h(Be))},onConnectStart:(Be,Fe)=>{d==null||d(Be,{nodeId:Fe.nodeId,handleId:Fe.handleId,handleType:Fe.handleType})},onConnectEnd:Be=>{f==null||f(Be)},getTransform:()=>[c.x,c.y,c.zoom]})}let Ge=null,We;return t.$$set=Q=>{"id"in Q&&n(0,y=Q.id),"type"in Q&&n(1,R=Q.type),"position"in Q&&n(2,W=Q.position),"style"in Q&&n(3,T=Q.style),"isConnectable"in Q&&n(31,v=Q.isConnectable),"onconnect"in Q&&n(32,A=Q.onconnect),"ondisconnect"in Q&&n(33,z=Q.ondisconnect),"class"in Q&&n(4,D=Q.class),"$$scope"in Q&&n(40,I=Q.$$scope)},t.$$.update=()=>{var Q,at,Be,Fe,zt,Mt;if(t.$$.dirty[1]&257&&n(8,i=v!==void 0?v:N),t.$$.dirty[0]&3|t.$$.dirty[1]&198&&(A||z)&&n(35,We=u.get(`${F}-${R}-${y||null}`)),t.$$.dirty[1]&30){if(Ge&&!Rc(We,Ge)){const Pt=We??new Map;So(Ge,Pt,z),So(Pt,Ge,A)}n(34,Ge=We??new Map)}t.$$.dirty[0]&2|t.$$.dirty[1]&32&&n(7,o=((Q=r.startHandle)==null?void 0:Q.nodeId)===F&&((at=r.startHandle)==null?void 0:at.type)===R&&((Be=r.startHandle)==null?void 0:Be.handleId)===U),t.$$.dirty[0]&2|t.$$.dirty[1]&32&&n(5,l=((Fe=r.endHandle)==null?void 0:Fe.nodeId)===F&&((zt=r.endHandle)==null?void 0:zt.type)===R&&((Mt=r.endHandle)==null?void 0:Mt.handleId)===U),t.$$.dirty[0]&32|t.$$.dirty[1]&32&&n(6,s=l&&r.status==="valid")},[y,R,W,T,D,l,s,o,i,b,L,F,q,U,ie,ne,ce,G,de,me,p,Ae,ke,st,ut,tt,nt,j,_t,yt,Z,v,A,z,Ge,We,r,u,a,N,I,O]}class Of extends re{constructor(e){super(),le(this,e,Hf,Af,se,{id:0,type:1,position:2,style:3,isConnectable:31,onconnect:32,ondisconnect:33,class:4},null,[-1,-1])}}const Un=Of;function Tf(t){var u;let e,n,i=((u=t[0])==null?void 0:u.label)+"",o,l,s,r;return e=new Un({props:{type:"target",position:t[1]}}),s=new Un({props:{type:"source",position:t[2]}}),{c(){ee(e.$$.fragment),n=ge(),o=ze(i),l=ge(),ee(s.$$.fragment)},m(a,c){x(e,a,c),K(a,n,c),K(a,o,c),K(a,l,c),x(s,a,c),r=!0},p(a,[c]){var h;const f={};c&2&&(f.position=a[1]),e.$set(f),(!r||c&1)&&i!==(i=((h=a[0])==null?void 0:h.label)+"")&&Je(o,i);const d={};c&4&&(d.position=a[2]),s.$set(d)},i(a){r||(X(e.$$.fragment,a),X(s.$$.fragment,a),r=!0)},o(a){Y(e.$$.fragment,a),Y(s.$$.fragment,a),r=!1},d(a){a&&(B(n),B(o),B(l)),$(e,a),$(s,a)}}}function If(t,e,n){let{data:i={label:"Node"}}=e,{targetPosition:o=he.Top}=e,{sourcePosition:l=he.Bottom}=e,{id:s=""}=e,{width:r=void 0}=e,{height:u=void 0}=e,{selected:a=void 0}=e,{type:c=void 0}=e,{zIndex:f=void 0}=e,{dragging:d=!1}=e,{dragHandle:h=void 0}=e,{positionAbsoluteX:m=0}=e,{positionAbsoluteY:_=0}=e,{isConnectable:b=void 0}=e;return t.$$set=g=>{"data"in g&&n(0,i=g.data),"targetPosition"in g&&n(1,o=g.targetPosition),"sourcePosition"in g&&n(2,l=g.sourcePosition),"id"in g&&n(3,s=g.id),"width"in g&&n(4,r=g.width),"height"in g&&n(5,u=g.height),"selected"in g&&n(6,a=g.selected),"type"in g&&n(7,c=g.type),"zIndex"in g&&n(8,f=g.zIndex),"dragging"in g&&n(9,d=g.dragging),"dragHandle"in g&&n(10,h=g.dragHandle),"positionAbsoluteX"in g&&n(11,m=g.positionAbsoluteX),"positionAbsoluteY"in g&&n(12,_=g.positionAbsoluteY),"isConnectable"in g&&n(13,b=g.isConnectable)},[i,o,l,s,r,u,a,c,f,d,h,m,_,b]}class Df extends re{constructor(e){super(),le(this,e,If,Tf,se,{data:0,targetPosition:1,sourcePosition:2,id:3,width:4,height:5,selected:6,type:7,zIndex:8,dragging:9,dragHandle:10,positionAbsoluteX:11,positionAbsoluteY:12,isConnectable:13})}}const _r=Df;function Xf(t){var s;let e=((s=t[0])==null?void 0:s.label)+"",n,i,o,l;return o=new Un({props:{type:"source",position:t[1]}}),{c(){n=ze(e),i=ge(),ee(o.$$.fragment)},m(r,u){K(r,n,u),K(r,i,u),x(o,r,u),l=!0},p(r,[u]){var c;(!l||u&1)&&e!==(e=((c=r[0])==null?void 0:c.label)+"")&&Je(n,e);const a={};u&2&&(a.position=r[1]),o.$set(a)},i(r){l||(X(o.$$.fragment,r),l=!0)},o(r){Y(o.$$.fragment,r),l=!1},d(r){r&&(B(n),B(i)),$(o,r)}}}function Yf(t,e,n){let{data:i={label:"Node"}}=e,{sourcePosition:o=he.Bottom}=e,{id:l=""}=e,{width:s=void 0}=e,{height:r=void 0}=e,{selected:u=void 0}=e,{targetPosition:a=void 0}=e,{type:c=void 0}=e,{zIndex:f=void 0}=e,{dragging:d=!1}=e,{dragHandle:h=void 0}=e,{positionAbsoluteX:m=0}=e,{positionAbsoluteY:_=0}=e,{isConnectable:b=void 0}=e;return t.$$set=g=>{"data"in g&&n(0,i=g.data),"sourcePosition"in g&&n(1,o=g.sourcePosition),"id"in g&&n(2,l=g.id),"width"in g&&n(3,s=g.width),"height"in g&&n(4,r=g.height),"selected"in g&&n(5,u=g.selected),"targetPosition"in g&&n(6,a=g.targetPosition),"type"in g&&n(7,c=g.type),"zIndex"in g&&n(8,f=g.zIndex),"dragging"in g&&n(9,d=g.dragging),"dragHandle"in g&&n(10,h=g.dragHandle),"positionAbsoluteX"in g&&n(11,m=g.positionAbsoluteX),"positionAbsoluteY"in g&&n(12,_=g.positionAbsoluteY),"isConnectable"in g&&n(13,b=g.isConnectable)},[i,o,l,s,r,u,a,c,f,d,h,m,_,b]}class Vf extends re{constructor(e){super(),le(this,e,Yf,Xf,se,{data:0,sourcePosition:1,id:2,width:3,height:4,selected:5,targetPosition:6,type:7,zIndex:8,dragging:9,dragHandle:10,positionAbsoluteX:11,positionAbsoluteY:12,isConnectable:13})}}const Rf=Vf;function Lf(t){var s;let e=((s=t[0])==null?void 0:s.label)+"",n,i,o,l;return o=new Un({props:{type:"target",position:t[1]}}),{c(){n=ze(e),i=ge(),ee(o.$$.fragment)},m(r,u){K(r,n,u),K(r,i,u),x(o,r,u),l=!0},p(r,[u]){var c;(!l||u&1)&&e!==(e=((c=r[0])==null?void 0:c.label)+"")&&Je(n,e);const a={};u&2&&(a.position=r[1]),o.$set(a)},i(r){l||(X(o.$$.fragment,r),l=!0)},o(r){Y(o.$$.fragment,r),l=!1},d(r){r&&(B(n),B(i)),$(o,r)}}}function pf(t,e,n){let{data:i={label:"Node"}}=e,{targetPosition:o=he.Top}=e,{id:l=""}=e,{width:s=void 0}=e,{height:r=void 0}=e,{selected:u=void 0}=e,{sourcePosition:a=void 0}=e,{type:c=void 0}=e,{zIndex:f=void 0}=e,{dragging:d=!1}=e,{dragHandle:h=void 0}=e,{positionAbsoluteX:m=0}=e,{positionAbsoluteY:_=0}=e,{isConnectable:b=void 0}=e;return t.$$set=g=>{"data"in g&&n(0,i=g.data),"targetPosition"in g&&n(1,o=g.targetPosition),"id"in g&&n(2,l=g.id),"width"in g&&n(3,s=g.width),"height"in g&&n(4,r=g.height),"selected"in g&&n(5,u=g.selected),"sourcePosition"in g&&n(6,a=g.sourcePosition),"type"in g&&n(7,c=g.type),"zIndex"in g&&n(8,f=g.zIndex),"dragging"in g&&n(9,d=g.dragging),"dragHandle"in g&&n(10,h=g.dragHandle),"positionAbsoluteX"in g&&n(11,m=g.positionAbsoluteX),"positionAbsoluteY"in g&&n(12,_=g.positionAbsoluteY),"isConnectable"in g&&n(13,b=g.isConnectable)},[i,o,l,s,r,u,a,c,f,d,h,m,_,b]}class Wf extends re{constructor(e){super(),le(this,e,pf,Lf,se,{data:0,targetPosition:1,id:2,width:3,height:4,selected:5,sourcePosition:6,type:7,zIndex:8,dragging:9,dragHandle:10,positionAbsoluteX:11,positionAbsoluteY:12,isConnectable:13})}}const Bf=Wf;function Kf(t,e,n){let{id:i=""}=e,{width:o=void 0}=e,{height:l=void 0}=e,{data:s={}}=e,{selected:r=void 0}=e,{sourcePosition:u=void 0}=e,{targetPosition:a=void 0}=e,{type:c=void 0}=e,{zIndex:f=void 0}=e,{dragging:d=!1}=e,{dragHandle:h=void 0}=e,{positionAbsoluteX:m=0}=e,{positionAbsoluteY:_=0}=e,{isConnectable:b=void 0}=e;return t.$$set=g=>{"id"in g&&n(0,i=g.id),"width"in g&&n(1,o=g.width),"height"in g&&n(2,l=g.height),"data"in g&&n(3,s=g.data),"selected"in g&&n(4,r=g.selected),"sourcePosition"in g&&n(5,u=g.sourcePosition),"targetPosition"in g&&n(6,a=g.targetPosition),"type"in g&&n(7,c=g.type),"zIndex"in g&&n(8,f=g.zIndex),"dragging"in g&&n(9,d=g.dragging),"dragHandle"in g&&n(10,h=g.dragHandle),"positionAbsoluteX"in g&&n(11,m=g.positionAbsoluteX),"positionAbsoluteY"in g&&n(12,_=g.positionAbsoluteY),"isConnectable"in g&&n(13,b=g.isConnectable)},[i,o,l,s,r,u,a,c,f,d,h,m,_,b]}class Ff extends re{constructor(e){super(),le(this,e,Kf,null,se,{id:0,width:1,height:2,data:3,selected:4,sourcePosition:5,targetPosition:6,type:7,zIndex:8,dragging:9,dragHandle:10,positionAbsoluteX:11,positionAbsoluteY:12,isConnectable:13})}}const Zf=Ff;function Vo(t,e,n){if(!e)return;const i=n?e.querySelector(n):e;i&&i.appendChild(t)}function qf(t,{target:e,domNode:n}){return Vo(t,n,e),{async update({target:i,domNode:o}){Vo(t,o,i)},destroy(){t.parentNode&&t.parentNode.removeChild(t)}}}function Gf(t){let e,n,i,o,l;const s=t[3].default,r=Xe(s,t,t[2],null);return{c(){e=_e("div"),r&&r.c()},m(u,a){K(u,e,a),r&&r.m(e,null),i=!0,o||(l=De(n=qf.call(null,e,{target:".svelte-flow__edgelabel-renderer",domNode:t[0]})),o=!0)},p(u,[a]){r&&r.p&&(!i||a&4)&&Ve(r,s,u,u[2],i?Ye(s,u[2],a,null):Re(u[2]),null),n&&Se(n.update)&&a&1&&n.update.call(null,{target:".svelte-flow__edgelabel-renderer",domNode:u[0]})},i(u){i||(X(r,u),i=!0)},o(u){Y(r,u),i=!1},d(u){u&&B(e),r&&r.d(u),o=!1,l()}}}function Uf(t,e,n){let i,{$$slots:o={},$$scope:l}=e;const{domNode:s}=Ce();return J(t,s,r=>n(0,i=r)),t.$$set=r=>{"$$scope"in r&&n(2,l=r.$$scope)},[i,s,l,o]}class Jf extends re{constructor(e){super(),le(this,e,Uf,Gf,se,{})}}function yr(){const{edgeLookup:t,selectionRect:e,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:o,unselectNodesAndEdges:l,elementsSelectable:s}=Ce();return r=>{const u=V(t).get(r);if(!u){console.warn("012",gn.error012(r));return}(u.selectable||V(s)&&typeof u.selectable>"u")&&(e.set(null),n.set(null),u.selected?u.selected&&V(i)&&l({nodes:[],edges:[u]}):o([r]))}}function Qf(t){let e,n,i=`translate(-50%, -50%) translate(${t[1]}px,${t[2]}px)`,o,l,s;const r=t[5].default,u=Xe(r,t,t[7],null);return{c(){e=_e("div"),u&&u.c(),S(e,"class","svelte-flow__edge-label"),S(e,"style",n="pointer-events: all;"+t[0]),S(e,"role","button"),ue(e,"transform",i)},m(a,c){K(a,e,c),u&&u.m(e,null),o=!0,l||(s=ve(e,"click",t[6]),l=!0)},p(a,c){u&&u.p&&(!o||c&128)&&Ve(u,r,a,a[7],o?Ye(r,a[7],c,null):Re(a[7]),null),(!o||c&1&&n!==(n="pointer-events: all;"+a[0]))&&S(e,"style",n);const f=c&1;(c&7&&i!==(i=`translate(-50%, -50%) translate(${a[1]}px,${a[2]}px)`)||f)&&ue(e,"transform",i)},i(a){o||(X(u,a),o=!0)},o(a){Y(u,a),o=!1},d(a){a&&B(e),u&&u.d(a),l=!1,s()}}}function jf(t){let e,n;return e=new Jf({props:{$$slots:{default:[Qf]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},p(i,[o]){const l={};o&135&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function xf(t,e,n){let{$$slots:i={},$$scope:o}=e,{style:l=void 0}=e,{x:s=void 0}=e,{y:r=void 0}=e;const u=yr(),a=In("svelteflow__edge_id"),c=()=>{a&&u(a)};return t.$$set=f=>{"style"in f&&n(0,l=f.style),"x"in f&&n(1,s=f.x),"y"in f&&n(2,r=f.y),"$$scope"in f&&n(7,o=f.$$scope)},[l,s,r,u,a,i,c,o]}class $f extends re{constructor(e){super(),le(this,e,xf,jf,se,{style:0,x:1,y:2})}}const ed=$f;function td(t){let e;return{c(){e=ye("path"),S(e,"d",t[1]),S(e,"stroke-opacity",0),S(e,"stroke-width",t[10]),S(e,"fill","none"),S(e,"class","svelte-flow__edge-interaction")},m(n,i){K(n,e,i)},p(n,i){i&2&&S(e,"d",n[1])},d(n){n&&B(e)}}}function Ro(t){let e,n;return e=new ed({props:{x:t[3],y:t[4],style:t[5],$$slots:{default:[nd]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},p(i,o){const l={};o&8&&(l.x=i[3]),o&16&&(l.y=i[4]),o&32&&(l.style=i[5]),o&4100&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function nd(t){let e;return{c(){e=ze(t[2])},m(n,i){K(n,e,i)},p(n,i){i&4&&Je(e,n[2])},d(n){n&&B(e)}}}function id(t){let e,n,i,o,l,s,r=t[10]&&td(t),u=t[2]&&Ro(t);return{c(){e=ye("path"),i=ge(),r&&r.c(),o=ge(),u&&u.c(),l=Le(),S(e,"id",t[0]),S(e,"d",t[1]),S(e,"class",n=we(["svelte-flow__edge-path",t[9]])),S(e,"marker-start",t[6]),S(e,"marker-end",t[7]),S(e,"fill","none"),S(e,"style",t[8])},m(a,c){K(a,e,c),K(a,i,c),r&&r.m(a,c),K(a,o,c),u&&u.m(a,c),K(a,l,c),s=!0},p(a,[c]){(!s||c&1)&&S(e,"id",a[0]),(!s||c&2)&&S(e,"d",a[1]),(!s||c&512&&n!==(n=we(["svelte-flow__edge-path",a[9]])))&&S(e,"class",n),(!s||c&64)&&S(e,"marker-start",a[6]),(!s||c&128)&&S(e,"marker-end",a[7]),(!s||c&256)&&S(e,"style",a[8]),a[10]&&r.p(a,c),a[2]?u?(u.p(a,c),c&4&&X(u,1)):(u=Ro(a),u.c(),X(u,1),u.m(l.parentNode,l)):u&&(Pe(),Y(u,1,1,()=>{u=null}),Ne())},i(a){s||(X(u),s=!0)},o(a){Y(u),s=!1},d(a){a&&(B(e),B(i),B(o),B(l)),r&&r.d(a),u&&u.d(a)}}}function od(t,e,n){let{id:i=void 0}=e,{path:o}=e,{label:l=void 0}=e,{labelX:s=void 0}=e,{labelY:r=void 0}=e,{labelStyle:u=void 0}=e,{markerStart:a=void 0}=e,{markerEnd:c=void 0}=e,{style:f=void 0}=e,{interactionWidth:d=20}=e,{class:h=void 0}=e,m=d===void 0?20:d;return t.$$set=_=>{"id"in _&&n(0,i=_.id),"path"in _&&n(1,o=_.path),"label"in _&&n(2,l=_.label),"labelX"in _&&n(3,s=_.labelX),"labelY"in _&&n(4,r=_.labelY),"labelStyle"in _&&n(5,u=_.labelStyle),"markerStart"in _&&n(6,a=_.markerStart),"markerEnd"in _&&n(7,c=_.markerEnd),"style"in _&&n(8,f=_.style),"interactionWidth"in _&&n(11,d=_.interactionWidth),"class"in _&&n(9,h=_.class)},[i,o,l,s,r,u,a,c,f,h,m,d]}class ld extends re{constructor(e){super(),le(this,e,od,id,se,{id:0,path:1,label:2,labelX:3,labelY:4,labelStyle:5,markerStart:6,markerEnd:7,style:8,interactionWidth:11,class:9})}}const si=ld;function rd(t){let e,n;return e=new si({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),e.$set(l)},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function sd(t,e,n){let i,o,l,{id:s=""}=e,{source:r=""}=e,{target:u=""}=e,{animated:a=void 0}=e,{selected:c=void 0}=e,{label:f=void 0}=e,{labelStyle:d=void 0}=e,{data:h=void 0}=e,{style:m=void 0}=e,{markerStart:_=void 0}=e,{markerEnd:b=void 0}=e,{interactionWidth:g=void 0}=e,{sourceX:w}=e,{sourceY:E}=e,{sourcePosition:k}=e,{sourceHandleId:C=void 0}=e,{targetX:H}=e,{targetY:N}=e,{targetPosition:O}=e,{targetHandleId:I=void 0}=e;return t.$$set=y=>{"id"in y&&n(9,s=y.id),"source"in y&&n(10,r=y.source),"target"in y&&n(11,u=y.target),"animated"in y&&n(12,a=y.animated),"selected"in y&&n(13,c=y.selected),"label"in y&&n(0,f=y.label),"labelStyle"in y&&n(1,d=y.labelStyle),"data"in y&&n(14,h=y.data),"style"in y&&n(2,m=y.style),"markerStart"in y&&n(3,_=y.markerStart),"markerEnd"in y&&n(4,b=y.markerEnd),"interactionWidth"in y&&n(5,g=y.interactionWidth),"sourceX"in y&&n(15,w=y.sourceX),"sourceY"in y&&n(16,E=y.sourceY),"sourcePosition"in y&&n(17,k=y.sourcePosition),"sourceHandleId"in y&&n(18,C=y.sourceHandleId),"targetX"in y&&n(19,H=y.targetX),"targetY"in y&&n(20,N=y.targetY),"targetPosition"in y&&n(21,O=y.targetPosition),"targetHandleId"in y&&n(22,I=y.targetHandleId)},t.$$.update=()=>{t.$$.dirty&3899392&&n(8,[i,o,l]=or({sourceX:w,sourceY:E,targetX:H,targetY:N,sourcePosition:k,targetPosition:O}),i,(n(7,o),n(15,w),n(16,E),n(19,H),n(20,N),n(17,k),n(21,O)),(n(6,l),n(15,w),n(16,E),n(19,H),n(20,N),n(17,k),n(21,O)))},[f,d,m,_,b,g,l,o,i,s,r,u,a,c,h,w,E,k,C,H,N,O,I]}class ud extends re{constructor(e){super(),le(this,e,sd,rd,se,{id:9,source:10,target:11,animated:12,selected:13,label:0,labelStyle:1,data:14,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:15,sourceY:16,sourcePosition:17,sourceHandleId:18,targetX:19,targetY:20,targetPosition:21,targetHandleId:22})}}const br=ud;function ad(t){let e,n;return e=new si({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),e.$set(l)},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function cd(t,e,n){let i,o,l,{id:s=""}=e,{source:r=""}=e,{target:u=""}=e,{animated:a=void 0}=e,{selected:c=void 0}=e,{label:f=void 0}=e,{labelStyle:d=void 0}=e,{data:h=void 0}=e,{style:m=void 0}=e,{markerStart:_=void 0}=e,{markerEnd:b=void 0}=e,{interactionWidth:g=void 0}=e,{sourceX:w}=e,{sourceY:E}=e,{sourcePosition:k}=e,{sourceHandleId:C=void 0}=e,{targetX:H}=e,{targetY:N}=e,{targetPosition:O}=e,{targetHandleId:I=void 0}=e;return t.$$set=y=>{"id"in y&&n(9,s=y.id),"source"in y&&n(10,r=y.source),"target"in y&&n(11,u=y.target),"animated"in y&&n(12,a=y.animated),"selected"in y&&n(13,c=y.selected),"label"in y&&n(0,f=y.label),"labelStyle"in y&&n(1,d=y.labelStyle),"data"in y&&n(14,h=y.data),"style"in y&&n(2,m=y.style),"markerStart"in y&&n(3,_=y.markerStart),"markerEnd"in y&&n(4,b=y.markerEnd),"interactionWidth"in y&&n(5,g=y.interactionWidth),"sourceX"in y&&n(15,w=y.sourceX),"sourceY"in y&&n(16,E=y.sourceY),"sourcePosition"in y&&n(17,k=y.sourcePosition),"sourceHandleId"in y&&n(18,C=y.sourceHandleId),"targetX"in y&&n(19,H=y.targetX),"targetY"in y&&n(20,N=y.targetY),"targetPosition"in y&&n(21,O=y.targetPosition),"targetHandleId"in y&&n(22,I=y.targetHandleId)},t.$$.update=()=>{t.$$.dirty&3899392&&n(8,[i,o,l]=Gn({sourceX:w,sourceY:E,targetX:H,targetY:N,sourcePosition:k,targetPosition:O}),i,(n(7,o),n(15,w),n(16,E),n(19,H),n(20,N),n(17,k),n(21,O)),(n(6,l),n(15,w),n(16,E),n(19,H),n(20,N),n(17,k),n(21,O)))},[f,d,m,_,b,g,l,o,i,s,r,u,a,c,h,w,E,k,C,H,N,O,I]}class fd extends re{constructor(e){super(),le(this,e,cd,ad,se,{id:9,source:10,target:11,animated:12,selected:13,label:0,labelStyle:1,data:14,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:15,sourceY:16,sourcePosition:17,sourceHandleId:18,targetX:19,targetY:20,targetPosition:21,targetHandleId:22})}}const dd=fd;function hd(t){let e,n;return e=new si({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),e.$set(l)},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function gd(t,e,n){let i,o,l,{id:s=""}=e,{source:r=""}=e,{target:u=""}=e,{animated:a=void 0}=e,{selected:c=void 0}=e,{label:f=void 0}=e,{labelStyle:d=void 0}=e,{data:h=void 0}=e,{style:m=void 0}=e,{markerStart:_=void 0}=e,{markerEnd:b=void 0}=e,{interactionWidth:g=void 0}=e,{sourceX:w}=e,{sourceY:E}=e,{sourcePosition:k}=e,{sourceHandleId:C=void 0}=e,{targetX:H}=e,{targetY:N}=e,{targetPosition:O}=e,{targetHandleId:I=void 0}=e;return t.$$set=y=>{"id"in y&&n(9,s=y.id),"source"in y&&n(10,r=y.source),"target"in y&&n(11,u=y.target),"animated"in y&&n(12,a=y.animated),"selected"in y&&n(13,c=y.selected),"label"in y&&n(0,f=y.label),"labelStyle"in y&&n(1,d=y.labelStyle),"data"in y&&n(14,h=y.data),"style"in y&&n(2,m=y.style),"markerStart"in y&&n(3,_=y.markerStart),"markerEnd"in y&&n(4,b=y.markerEnd),"interactionWidth"in y&&n(5,g=y.interactionWidth),"sourceX"in y&&n(15,w=y.sourceX),"sourceY"in y&&n(16,E=y.sourceY),"sourcePosition"in y&&n(17,k=y.sourcePosition),"sourceHandleId"in y&&n(18,C=y.sourceHandleId),"targetX"in y&&n(19,H=y.targetX),"targetY"in y&&n(20,N=y.targetY),"targetPosition"in y&&n(21,O=y.targetPosition),"targetHandleId"in y&&n(22,I=y.targetHandleId)},t.$$.update=()=>{t.$$.dirty&1671168&&n(8,[i,o,l]=rr({sourceX:w,sourceY:E,targetX:H,targetY:N}),i,(n(7,o),n(15,w),n(16,E),n(19,H),n(20,N)),(n(6,l),n(15,w),n(16,E),n(19,H),n(20,N)))},[f,d,m,_,b,g,l,o,i,s,r,u,a,c,h,w,E,k,C,H,N,O,I]}class md extends re{constructor(e){super(),le(this,e,gd,hd,se,{id:9,source:10,target:11,animated:12,selected:13,label:0,labelStyle:1,data:14,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:15,sourceY:16,sourcePosition:17,sourceHandleId:18,targetX:19,targetY:20,targetPosition:21,targetHandleId:22})}}const _d=md;function yd(t){let e,n;return e=new si({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},p(i,[o]){const l={};o&256&&(l.path=i[8]),o&128&&(l.labelX=i[7]),o&64&&(l.labelY=i[6]),o&1&&(l.label=i[0]),o&2&&(l.labelStyle=i[1]),o&8&&(l.markerStart=i[3]),o&16&&(l.markerEnd=i[4]),o&32&&(l.interactionWidth=i[5]),o&4&&(l.style=i[2]),e.$set(l)},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function bd(t,e,n){let i,o,l,{id:s=""}=e,{source:r=""}=e,{target:u=""}=e,{animated:a=void 0}=e,{selected:c=void 0}=e,{label:f=void 0}=e,{data:d=void 0}=e,{labelStyle:h=void 0}=e,{style:m=void 0}=e,{markerStart:_=void 0}=e,{markerEnd:b=void 0}=e,{interactionWidth:g=void 0}=e,{sourceX:w}=e,{sourceY:E}=e,{sourcePosition:k}=e,{sourceHandleId:C=void 0}=e,{targetX:H}=e,{targetY:N}=e,{targetPosition:O}=e,{targetHandleId:I=void 0}=e;return t.$$set=y=>{"id"in y&&n(9,s=y.id),"source"in y&&n(10,r=y.source),"target"in y&&n(11,u=y.target),"animated"in y&&n(12,a=y.animated),"selected"in y&&n(13,c=y.selected),"label"in y&&n(0,f=y.label),"data"in y&&n(14,d=y.data),"labelStyle"in y&&n(1,h=y.labelStyle),"style"in y&&n(2,m=y.style),"markerStart"in y&&n(3,_=y.markerStart),"markerEnd"in y&&n(4,b=y.markerEnd),"interactionWidth"in y&&n(5,g=y.interactionWidth),"sourceX"in y&&n(15,w=y.sourceX),"sourceY"in y&&n(16,E=y.sourceY),"sourcePosition"in y&&n(17,k=y.sourcePosition),"sourceHandleId"in y&&n(18,C=y.sourceHandleId),"targetX"in y&&n(19,H=y.targetX),"targetY"in y&&n(20,N=y.targetY),"targetPosition"in y&&n(21,O=y.targetPosition),"targetHandleId"in y&&n(22,I=y.targetHandleId)},t.$$.update=()=>{t.$$.dirty&3899392&&n(8,[i,o,l]=Gn({sourceX:w,sourceY:E,targetX:H,targetY:N,sourcePosition:k,targetPosition:O,borderRadius:0}),i,(n(7,o),n(15,w),n(16,E),n(19,H),n(20,N),n(17,k),n(21,O)),(n(6,l),n(15,w),n(16,E),n(19,H),n(20,N),n(17,k),n(21,O)))},[f,h,m,_,b,g,l,o,i,s,r,u,a,c,d,w,E,k,C,H,N,O,I]}class wd extends re{constructor(e){super(),le(this,e,bd,yd,se,{id:9,source:10,target:11,animated:12,selected:13,label:0,data:14,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:15,sourceY:16,sourcePosition:17,sourceHandleId:18,targetX:19,targetY:20,targetPosition:21,targetHandleId:22})}}const vd=wd;function kd(t,e){const n=t.set,i=e.set,o=V(t),l=V(e);let r=o.length===0&&l.length>0?l:o;t.set(r);const u=a=>{const c=n(a);return r=c,i(r),c};t.set=e.set=u,t.update=e.update=a=>u(a(r))}function Sd(t,e){const n=t.set,i=e.set;let o=V(e);t.set(o);const l=s=>{n(s),i(s),o=s};t.set=e.set=l,t.update=e.update=s=>l(s(o))}const Ed=(t,e,n)=>{if(!n)return;const i=V(t),o=e.set,l=n.set;let s=n?V(n):{x:0,y:0,zoom:1};e.set(s),e.set=r=>(o(r),l(r),s=r,r),n.set=r=>(i==null||i.syncViewport(r),o(r),l(r),s=r,r),e.update=r=>{e.set(r(s))},n.update=r=>{n.set(r(s))}},Cd=(t,e)=>{const{subscribe:n,set:i,update:o}=te([]);let l=t,s={},r=!0;const u=d=>(l=sr(d,e,{elevateNodesOnSelect:r,defaults:s}),i(l),l),a=d=>u(d(l)),c=d=>{s=d},f=d=>{r=d.elevateNodesOnSelect??r};return u(l),{subscribe:n,set:u,update:a,setDefaultOptions:c,setOptions:f}},zd=(t,e,n,i)=>{const{subscribe:o,set:l,update:s}=te([]);let r=t,u=i||{};const a=d=>{const h=u?d.map(m=>({...u,...m})):d;ar(e,n,h),r=h,l(r)},c=d=>a(d(r)),f=d=>{u=d};return a(r),{subscribe:o,set:a,update:c,setDefaultOptions:f}},wr={path:null,sourceX:null,sourceY:null,sourcePosition:null,targetX:null,targetY:null,targetPosition:null,pointerPosition:null,startHandle:null,endHandle:null,status:null},Md={[he.Left]:he.Right,[he.Right]:he.Left,[he.Top]:he.Bottom,[he.Bottom]:he.Top};function Pd(t,e){return pt([e,t.connectionLineType,t.connectionMode,t.nodeLookup,t.viewport],([n,i,o,l,s])=>{var C,H,N,O,I,y,R,W,T,v,A,z,D;if(!((C=n.connectionStartHandle)!=null&&C.nodeId))return wr;const r=l.get((H=n.connectionStartHandle)==null?void 0:H.nodeId),u=(N=r==null?void 0:r[Ee])==null?void 0:N.handleBounds,a=(u==null?void 0:u[n.connectionStartHandle.type||"source"])||[],c=a||(u==null?void 0:u[((O=n==null?void 0:n.connectionStartHandle)==null?void 0:O.type)==="source"?"target":"source"]),f=o===Ct.Strict?a:c,d=(I=n.connectionStartHandle)!=null&&I.handleId?f.find(L=>{var F;return L.id===((F=n.connectionStartHandle)==null?void 0:F.handleId)}):f[0],h=d?d.x+d.width/2:(((y=r==null?void 0:r.computed)==null?void 0:y.width)??0)/2,m=d?d.y+d.height/2:((R=r==null?void 0:r.computed)==null?void 0:R.height)??0,_=(((T=(W=r==null?void 0:r.computed)==null?void 0:W.positionAbsolute)==null?void 0:T.x)??0)+h,b=(((A=(v=r==null?void 0:r.computed)==null?void 0:v.positionAbsolute)==null?void 0:A.y)??0)+m,g=d==null?void 0:d.position,w=g?Md[g]:void 0,E={sourceX:_,sourceY:b,sourcePosition:g,targetX:((((z=n.connectionPosition)==null?void 0:z.x)??0)-s.x)/s.zoom,targetY:((((D=n.connectionPosition)==null?void 0:D.y)??0)-s.y)/s.zoom,targetPosition:w};let k="";return i===St.Bezier?[k]=or(E):i===St.Step?[k]=Gn({...E,borderRadius:0}):i===St.SmoothStep?[k]=Gn(E):[k]=rr(E),{path:k,...E,pointerPosition:n.connectionPosition,startHandle:n.connectionStartHandle,endHandle:n.connectionEndHandle,status:n.connectionStatus}})}const vr={input:Rf,output:Bf,default:_r,group:Zf},kr={straight:_d,smoothstep:dd,default:br,step:vd},Nd=({nodes:t=[],edges:e=[],width:n,height:i,fitView:o})=>{const l=new Map,s=sr(t,l,{nodeOrigin:[0,0],elevateNodesOnSelect:!1}),r=new Map,u=new Map;ar(r,u,e);let a={x:0,y:0,zoom:1};if(o&&n&&i){const c=s.filter(d=>d.width&&d.height||d.initialWidth&&d.initialHeight),f=mn(c,{nodeOrigin:[0,0]});a=Ui(f,n,i,.5,2,.1)}return{flowId:te(null),nodes:Cd(s,l),nodeLookup:je(l),edgeLookup:je(u),visibleNodes:je([]),edges:zd(e,r,u),visibleEdges:je([]),connectionLookup:je(r),height:te(500),width:te(500),minZoom:te(.5),maxZoom:te(2),nodeOrigin:te([0,0]),nodeDragThreshold:te(1),nodeExtent:te(ko),translateExtent:te(ko),autoPanOnNodeDrag:te(!0),autoPanOnConnect:te(!0),fitViewOnInit:te(!1),fitViewOnInitDone:te(!1),fitViewOptions:te(void 0),panZoom:te(null),snapGrid:te(null),dragging:te(!1),selectionRect:te(null),selectionKeyPressed:te(!1),multiselectionKeyPressed:te(!1),deleteKeyPressed:te(!1),panActivationKeyPressed:te(!1),zoomActivationKeyPressed:te(!1),selectionRectMode:te(null),selectionMode:te(Wn.Partial),nodeTypes:te(vr),edgeTypes:te(kr),viewport:te(a),connectionMode:te(Ct.Strict),domNode:te(null),connection:je(wr),connectionLineType:te(St.Bezier),connectionRadius:te(20),isValidConnection:te(()=>!0),nodesDraggable:te(!0),nodesConnectable:te(!0),elementsSelectable:te(!0),selectNodesOnDrag:te(!0),markers:je([]),defaultMarkerColor:te("#b1b1b7"),lib:je("svelte"),onlyRenderVisibleElements:te(!1),onerror:te(Gc),ondelete:te(void 0),onedgecreate:te(void 0),onconnect:te(void 0),onconnectstart:te(void 0),onconnectend:te(void 0),onbeforedelete:te(void 0),nodesInitialized:te(!1),edgesInitialized:te(!1),viewportInitialized:te(!1),initialized:je(!1)}};function Ad(t){const e=pt([t.edges,t.nodes,t.nodeLookup,t.onlyRenderVisibleElements,t.viewport,t.width,t.height],([n,,i,o,l,s,r])=>o&&s&&r?n.filter(a=>{const c=i.get(a.source),f=i.get(a.target);return c&&f&&ef({sourceNode:c,targetNode:f,width:s,height:r,transform:[l.x,l.y,l.zoom]})}):n);return pt([e,t.nodes,t.nodeLookup,t.connectionMode,t.onerror],([n,,i,o,l])=>n.reduce((r,u)=>{const a=i.get(u.source),c=i.get(u.target);if(!a||!c)return r;const f=uf({id:u.id,sourceNode:a,targetNode:c,sourceHandle:u.sourceHandle||null,targetHandle:u.targetHandle||null,connectionMode:o,onError:l});return f&&r.push({...u,zIndex:$c({selected:u.selected,zIndex:u.zIndex,sourceNode:a,targetNode:c,elevateOnSelect:!1}),...f}),r},[]))}function Hd(t){return pt([t.nodes,t.onlyRenderVisibleElements,t.width,t.height,t.viewport],([e,n,i,o,l])=>{const s=[l.x,l.y,l.zoom];return n?xl(e,{x:0,y:0,width:i,height:o},s,!0):e})}const ui=Symbol();function Sr({nodes:t,edges:e,width:n,height:i,fitView:o}){const l=Nd({nodes:t,edges:e,width:n,height:i,fitView:o});function s(T){l.nodeTypes.set({...vr,...T})}function r(T){l.edgeTypes.set({...kr,...T})}function u(T){const v=V(l.edges);l.edges.set(of(T,v))}const a=(T,v=!1)=>{const A=V(l.nodeLookup);T.forEach(z=>{var L;const D=A.get(z.id);D&&(D.position=z.position,D.dragging=v,D.computed={...D.computed,positionAbsolute:(L=z.computed)==null?void 0:L.positionAbsolute})}),l.nodes.set(V(l.nodes))};function c(T){const v=ff(T,V(l.nodes),V(l.nodeLookup),V(l.domNode),V(l.nodeOrigin));if(v){if(!V(l.fitViewOnInitDone)&&V(l.fitViewOnInit)){const A=V(l.fitViewOptions),z=f(v,{...A,nodes:(A==null?void 0:A.nodes)||v});l.fitViewOnInitDone.set(z)}l.nodes.set(v),V(l.nodesInitialized)||l.nodesInitialized.set(!0)}}function f(T,v){const A=V(l.panZoom);return A?Wc({nodes:T,width:V(l.width),height:V(l.height),minZoom:V(l.minZoom),maxZoom:V(l.maxZoom),panZoom:A,nodeOrigin:V(l.nodeOrigin)},v):!1}function d(T,v){const A=V(l.panZoom);A&&A.scaleBy(T,v)}function h(T){d(1.2,T)}function m(T){d(1/1.2,T)}function _(T){const v=V(l.panZoom);v&&(v.setScaleExtent([T,V(l.maxZoom)]),l.minZoom.set(T))}function b(T){const v=V(l.panZoom);v&&(v.setScaleExtent([V(l.minZoom),T]),l.maxZoom.set(T))}function g(T){const v=V(l.panZoom);v&&(v.setTranslateExtent(T),l.translateExtent.set(T))}function w(T){let v=!1;return T.forEach(A=>{A.selected&&(A.selected=!1,v=!0)}),v}function E(T){w((T==null?void 0:T.nodes)||V(l.nodes))&&l.nodes.set(V(l.nodes)),w((T==null?void 0:T.edges)||V(l.edges))&&l.edges.set(V(l.edges))}l.deleteKeyPressed.subscribe(async T=>{var v;if(T){const A=V(l.nodes),z=V(l.edges),D=A.filter(U=>U.selected),L=z.filter(U=>U.selected),{nodes:F,edges:q}=await $l({nodesToRemove:D,edgesToRemove:L,nodes:A,edges:z,onBeforeDelete:V(l.onbeforedelete)});(F.length||q.length)&&(l.nodes.update(U=>U.filter(P=>!F.some(ie=>ie.id===P.id))),l.edges.update(U=>U.filter(P=>!q.some(ie=>ie.id===P.id))),(v=V(l.ondelete))==null||v({nodes:F,edges:q}))}});function k(T){const v=V(l.multiselectionKeyPressed);l.nodes.update(A=>A.map(z=>{const D=T.includes(z.id),L=v&&z.selected||D;return z.selected=L,z})),v||l.edges.update(A=>A.map(z=>(z.selected=!1,z)))}function C(T){const v=V(l.multiselectionKeyPressed);l.edges.update(A=>A.map(z=>{const D=T.includes(z.id),L=v&&z.selected||D;return z.selected=L,z})),v||l.nodes.update(A=>A.map(z=>(z.selected=!1,z)))}function H(T){var A;const v=(A=V(l.nodes))==null?void 0:A.find(z=>z.id===T);if(!v){console.warn("012",gn.error012(T));return}l.selectionRect.set(null),l.selectionRectMode.set(null),v.selected?v.selected&&V(l.multiselectionKeyPressed)&&E({nodes:[v],edges:[]}):k([T])}function N(T){const v=V(l.viewport);return df({delta:T,panZoom:V(l.panZoom),transform:[v.x,v.y,v.zoom],translateExtent:V(l.translateExtent),width:V(l.width),height:V(l.height)})}const O={connectionStartHandle:null,connectionEndHandle:null,connectionPosition:null,connectionStatus:null},I=te(O),y=T=>{I.set(T)};function R(){y(O)}function W(){l.fitViewOnInitDone.set(!1),l.selectionRect.set(null),l.selectionRectMode.set(null),l.snapGrid.set(null),l.isValidConnection.set(()=>!0),l.nodes.set([]),l.edges.set([]),E(),R()}return{...l,connection:Pd(l,I),visibleEdges:Ad(l),visibleNodes:Hd(l),markers:pt([l.edges,l.defaultMarkerColor,l.flowId],([T,v,A])=>af(T,{defaultColor:v,id:A})),initialized:(()=>{let T=!1;const v=V(l.nodes).length,A=V(l.edges).length;return pt([l.nodesInitialized,l.edgesInitialized,l.viewportInitialized],([z,D,L])=>T||(v===0?T=L:A===0?T=L&&z:T=L&&z&&D,T))})(),syncNodeStores:T=>kd(l.nodes,T),syncEdgeStores:T=>Sd(l.edges,T),syncViewport:T=>Ed(l.panZoom,l.viewport,T),setNodeTypes:s,setEdgeTypes:r,addEdge:u,updateNodePositions:a,updateNodeDimensions:c,zoomIn:h,zoomOut:m,fitView:T=>f(V(l.nodes),T),setMinZoom:_,setMaxZoom:b,setTranslateExtent:g,unselectNodesAndEdges:E,addSelectedNodes:k,addSelectedEdges:C,handleNodeSelection:H,panBy:N,updateConnection:y,cancelConnection:R,reset:W}}function Ce(){const t=In(ui);if(!t)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return t.getStore()}function Od({nodes:t,edges:e,width:n,height:i,fitView:o}){const l=Sr({nodes:t,edges:e,width:n,height:i,fitView:o});return nn(ui,{getStore:()=>l}),l}function Td(t,e){const{panZoom:n,minZoom:i,maxZoom:o,initialViewport:l,viewport:s,dragging:r,translateExtent:u}=e,a=Nf({domNode:t,minZoom:i,maxZoom:o,translateExtent:u,viewport:l,onTransformChange:f=>s.set({x:f[0],y:f[1],zoom:f[2]}),onDraggingChange:r.set}),c=a.getViewport();return s.set(c),n.set(a),a.update(e),{update(f){a.update(f)}}}function Id(t){let e,n,i,o,l;const s=t[33].default,r=Xe(s,t,t[32],null);return{c(){e=_e("div"),r&&r.c(),S(e,"class","svelte-flow__zoom svelte-4xkw84")},m(u,a){K(u,e,a),r&&r.m(e,null),i=!0,o||(l=De(n=Td.call(null,e,{viewport:t[17],minZoom:t[11],maxZoom:t[12],initialViewport:t[10],dragging:t[22],panZoom:t[18],onPanZoomStart:t[0],onPanZoom:t[1],onPanZoomEnd:t[2],zoomOnScroll:t[5],zoomOnDoubleClick:t[6],zoomOnPinch:t[7],panOnScroll:t[8],panOnDrag:t[9],panOnScrollSpeed:.5,panOnScrollMode:t[3]||lt.Free,zoomActivationKeyPressed:t[13],preventScrolling:typeof t[4]=="boolean"?t[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:t[14],translateExtent:t[15],lib:t[16]})),o=!0)},p(u,a){r&&r.p&&(!i||a[1]&2)&&Ve(r,s,u,u[32],i?Ye(s,u[32],a,null):Re(u[32]),null),n&&Se(n.update)&&a[0]&131071&&n.update.call(null,{viewport:u[17],minZoom:u[11],maxZoom:u[12],initialViewport:u[10],dragging:u[22],panZoom:u[18],onPanZoomStart:u[0],onPanZoom:u[1],onPanZoomEnd:u[2],zoomOnScroll:u[5],zoomOnDoubleClick:u[6],zoomOnPinch:u[7],panOnScroll:u[8],panOnDrag:u[9],panOnScrollSpeed:.5,panOnScrollMode:u[3]||lt.Free,zoomActivationKeyPressed:u[13],preventScrolling:typeof u[4]=="boolean"?u[4]:!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:u[14],translateExtent:u[15],lib:u[16]})},i(u){i||(X(r,u),i=!0)},o(u){Y(r,u),i=!1},d(u){u&&B(e),r&&r.d(u),o=!1,l()}}}function Dd(t,e,n){let i,o,l,s,r,u,a,c,f,d,h,{$$slots:m={},$$scope:_}=e,{initialViewport:b}=e,{onMoveStart:g=void 0}=e,{onMove:w=void 0}=e,{onMoveEnd:E=void 0}=e,{panOnScrollMode:k}=e,{preventScrolling:C}=e,{zoomOnScroll:H}=e,{zoomOnDoubleClick:N}=e,{zoomOnPinch:O}=e,{panOnDrag:I}=e,{panOnScroll:y}=e;const{viewport:R,panZoom:W,selectionKeyPressed:T,minZoom:v,maxZoom:A,dragging:z,translateExtent:D,lib:L,panActivationKeyPressed:F,zoomActivationKeyPressed:q,viewportInitialized:U}=Ce();return J(t,T,P=>n(14,f=P)),J(t,v,P=>n(11,u=P)),J(t,A,P=>n(12,a=P)),J(t,D,P=>n(15,d=P)),J(t,L,P=>n(16,h=P)),J(t,F,P=>n(31,r=P)),J(t,q,P=>n(13,c=P)),J(t,U,P=>n(34,s=P)),Qn(()=>{Ci(U,s=!0,s)}),t.$$set=P=>{"initialViewport"in P&&n(28,b=P.initialViewport),"onMoveStart"in P&&n(0,g=P.onMoveStart),"onMove"in P&&n(1,w=P.onMove),"onMoveEnd"in P&&n(2,E=P.onMoveEnd),"panOnScrollMode"in P&&n(3,k=P.panOnScrollMode),"preventScrolling"in P&&n(4,C=P.preventScrolling),"zoomOnScroll"in P&&n(5,H=P.zoomOnScroll),"zoomOnDoubleClick"in P&&n(6,N=P.zoomOnDoubleClick),"zoomOnPinch"in P&&n(7,O=P.zoomOnPinch),"panOnDrag"in P&&n(29,I=P.panOnDrag),"panOnScroll"in P&&n(30,y=P.panOnScroll),"$$scope"in P&&n(32,_=P.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&268435456&&n(10,i=b||{x:0,y:0,zoom:1}),t.$$.dirty[0]&536870912|t.$$.dirty[1]&1&&n(9,o=r||I),t.$$.dirty[0]&1073741824|t.$$.dirty[1]&1&&n(8,l=r||y)},[g,w,E,k,C,H,N,O,l,o,i,u,a,c,f,d,h,R,W,T,v,A,z,D,L,F,q,U,b,I,y,r,_,m]}class Xd extends re{constructor(e){super(),le(this,e,Dd,Id,se,{initialViewport:28,onMoveStart:0,onMove:1,onMoveEnd:2,panOnScrollMode:3,preventScrolling:4,zoomOnScroll:5,zoomOnDoubleClick:6,zoomOnPinch:7,panOnDrag:29,panOnScroll:30},null,[-1,-1])}}const Yd=Xd;function Vd(t){let e,n,i,o;const l=t[29].default,s=Xe(l,t,t[28],null);return{c(){e=_e("div"),s&&s.c(),S(e,"class","svelte-flow__pane svelte-1esy7hx"),fe(e,"draggable",t[0]),fe(e,"dragging",t[4]),fe(e,"selection",t[1])},m(r,u){K(r,e,u),s&&s.m(e,null),t[30](e),n=!0,i||(o=[ve(e,"click",function(){Se(t[3]?void 0:Mn(t[15],t[2]))&&(t[3]?void 0:Mn(t[15],t[2])).apply(this,arguments)}),ve(e,"mousedown",function(){Se(t[3]?t[16]:void 0)&&(t[3]?t[16]:void 0).apply(this,arguments)}),ve(e,"mousemove",function(){Se(t[3]?t[17]:void 0)&&(t[3]?t[17]:void 0).apply(this,arguments)}),ve(e,"mouseup",function(){Se(t[3]?t[18]:void 0)&&(t[3]?t[18]:void 0).apply(this,arguments)}),ve(e,"mouseleave",function(){Se(t[3]?t[19]:void 0)&&(t[3]?t[19]:void 0).apply(this,arguments)}),ve(e,"contextmenu",function(){Se(Mn(t[20],t[2]))&&Mn(t[20],t[2]).apply(this,arguments)})],i=!0)},p(r,u){t=r,s&&s.p&&(!n||u[0]&268435456)&&Ve(s,l,t,t[28],n?Ye(l,t[28],u,null):Re(t[28]),null),(!n||u[0]&1)&&fe(e,"draggable",t[0]),(!n||u[0]&16)&&fe(e,"dragging",t[4]),(!n||u[0]&2)&&fe(e,"selection",t[1])},i(r){n||(X(s,r),n=!0)},o(r){Y(s,r),n=!1},d(r){r&&B(e),s&&s.d(r),t[30](null),i=!1,pe(o)}}}function Mn(t,e){return n=>{n.target===e&&(t==null||t(n))}}function Lo(t){return e=>{const n=t.includes(e.id);return e.selected!==n?{...e,selected:n}:e}}function Rd(t,e,n){let i,o,l,s,r,u,a,c,f,d,h,m,_,{$$slots:b={},$$scope:g}=e,{panOnDrag:w=void 0}=e,{selectionOnDrag:E=void 0}=e;const k=jn(),{nodes:C,edges:H,viewport:N,dragging:O,elementsSelectable:I,selectionRect:y,selectionRectMode:R,selectionKeyPressed:W,selectionMode:T,panActivationKeyPressed:v,unselectNodesAndEdges:A}=Ce();J(t,C,G=>n(36,c=G)),J(t,H,G=>n(33,r=G)),J(t,N,G=>n(35,a=G)),J(t,O,G=>n(4,_=G)),J(t,I,G=>n(25,d=G)),J(t,y,G=>n(24,f=G)),J(t,R,G=>n(23,s=G)),J(t,W,G=>n(26,h=G)),J(t,T,G=>n(34,u=G)),J(t,v,G=>n(27,m=G));let z,D=null,L=[];function F(G){k("paneclick",{event:G}),A(),R.set(null)}function q(G){if(D=z.getBoundingClientRect(),!I||!o||G.button!==0||G.target!==z||!D)return;const{x:de,y:me}=dt(G,D);A(),y.set({width:0,height:0,startX:de,startY:me,x:de,y:me})}function U(G){if(!o||!D||!f)return;const de=dt(G,D),me=f.startX??0,p=f.startY??0,Me={...f,x:de.x<me?de.x:me,y:de.y<p?de.y:p,width:Math.abs(de.x-me),height:Math.abs(de.y-p)},Ae=L.map(ke=>ke.id),Te=Di(L,r).map(ke=>ke.id);L=xl(c,Me,[a.x,a.y,a.zoom],u===Wn.Partial,!0);const He=Di(L,r).map(ke=>ke.id),qe=L.map(ke=>ke.id);(Ae.length!==qe.length||qe.some(ke=>!Ae.includes(ke)))&&C.update(ke=>ke.map(Lo(qe))),(Te.length!==He.length||He.some(ke=>!Te.includes(ke)))&&H.update(ke=>ke.map(Lo(He))),R.set("user"),y.set(Me)}function P(G){G.button===0&&(!o&&s==="user"&&G.target===z&&(F==null||F(G)),y.set(null),L.length>0&&R.set("nodes"))}const ie=G=>{s==="user"&&R.set(L.length>0?"nodes":null),y.set(null)},ne=G=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){G.preventDefault();return}k("panecontextmenu",{event:G})};function ce(G){on[G?"unshift":"push"](()=>{z=G,n(2,z)})}return t.$$set=G=>{"panOnDrag"in G&&n(0,w=G.panOnDrag),"selectionOnDrag"in G&&n(21,E=G.selectionOnDrag),"$$scope"in G&&n(28,g=G.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&134217729&&n(22,i=m||w),t.$$.dirty[0]&90177536&&n(1,o=h||f||E&&i!==!0),t.$$.dirty[0]&41943042&&n(3,l=d&&(o||s==="user"))},[w,o,z,l,_,C,H,N,O,I,y,R,W,T,v,F,q,U,P,ie,ne,E,i,s,f,d,h,m,g,b,ce]}class Ld extends re{constructor(e){super(),le(this,e,Rd,Vd,se,{panOnDrag:0,selectionOnDrag:21},null,[-1,-1])}}const pd=Ld;function Wd(t){let e,n;const i=t[3].default,o=Xe(i,t,t[2],null);return{c(){e=_e("div"),o&&o.c(),S(e,"class","svelte-flow__viewport xyflow__viewport svelte-1floaup"),ue(e,"transform","translate("+t[0].x+"px, "+t[0].y+"px) scale("+t[0].zoom+")")},m(l,s){K(l,e,s),o&&o.m(e,null),n=!0},p(l,[s]){o&&o.p&&(!n||s&4)&&Ve(o,i,l,l[2],n?Ye(i,l[2],s,null):Re(l[2]),null),(!n||s&1)&&ue(e,"transform","translate("+l[0].x+"px, "+l[0].y+"px) scale("+l[0].zoom+")")},i(l){n||(X(o,l),n=!0)},o(l){Y(o,l),n=!1},d(l){l&&B(e),o&&o.d(l)}}}function Bd(t,e,n){let i,{$$slots:o={},$$scope:l}=e;const{viewport:s}=Ce();return J(t,s,r=>n(0,i=r)),t.$$set=r=>{"$$scope"in r&&n(2,l=r.$$scope)},[i,s,l,o]}class Kd extends re{constructor(e){super(),le(this,e,Bd,Wd,se,{})}}function Er(t,e){const{store:n,onDrag:i,onDragStart:o,onDragStop:l,onNodeMouseDown:s}=e,r=gf({onDrag:i,onDragStart:o,onDragStop:l,onNodeMouseDown:s,getStoreItems:()=>{const a=V(n.snapGrid),c=V(n.viewport);return{nodes:V(n.nodes),nodeLookup:V(n.nodeLookup),edges:V(n.edges),nodeExtent:V(n.nodeExtent),snapGrid:a||[0,0],snapToGrid:!!a,nodeOrigin:[0,0],multiSelectionActive:V(n.multiselectionKeyPressed),domNode:V(n.domNode),transform:[c.x,c.y,c.zoom],autoPanOnNodeDrag:V(n.autoPanOnNodeDrag),nodesDraggable:V(n.nodesDraggable),selectNodesOnDrag:V(n.selectNodesOnDrag),nodeDragThreshold:V(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function u(a,c){if(c.disabled){r.destroy();return}r.update({domNode:a,noDragClassName:c.noDragClass,handleSelector:c.handleSelector,nodeId:c.nodeId,isSelectable:c.isSelectable})}return u(t,e),{update(a){u(t,a)},destroy(){r.destroy()}}}function Fd({width:t,height:e,initialWidth:n,initialHeight:i,computedWidth:o,computedHeight:l}){if(o===void 0&&l===void 0){const s=t??n,r=e??i;return{width:s?`width:${s}px;`:"",height:r?`height:${r}px;`:""}}return{width:t?`width:${t}px;`:"",height:e?`height:${e}px;`:""}}function po(t){let e,n,i,o,l,s=`translate(${t[14]}px, ${t[15]}px)`,r,u,a;var c=t[30];function f(d,h){return{props:{data:d[2],id:d[1],selected:d[3],sourcePosition:d[16],targetPosition:d[17],type:d[10],zIndex:d[18],dragging:d[8],dragHandle:d[21],isConnectable:d[6],positionAbsoluteX:d[12],positionAbsoluteY:d[13],width:d[19],height:d[20]}}}return c&&(n=Tn(c,f(t))),{c(){e=_e("div"),n&&ee(n.$$.fragment),S(e,"data-id",t[1]),S(e,"class",i=we(["svelte-flow__node",`svelte-flow__node-${t[29]}`,t[23]])),S(e,"style",o=(t[9]??"")+";"+t[25].width+t[25].height),fe(e,"dragging",t[8]),fe(e,"selected",t[3]),fe(e,"draggable",t[4]),fe(e,"connectable",t[6]),fe(e,"selectable",t[5]),fe(e,"nopan",t[4]),fe(e,"parent",t[11]),ue(e,"z-index",t[18]),ue(e,"transform",s),ue(e,"visibility",t[22]?"visible":"hidden")},m(d,h){K(d,e,h),n&&x(n,e,null),t[45](e),r=!0,u||(a=[De(l=Er.call(null,e,{nodeId:t[1],isSelectable:t[5],disabled:!1,handleSelector:t[21],noDragClass:"nodrag",onNodeMouseDown:t[28],onDrag:t[42],onDragStart:t[43],onDragStop:t[44],store:t[26]})),ve(e,"click",t[32]),ve(e,"mouseenter",t[46]),ve(e,"mouseleave",t[47]),ve(e,"mousemove",t[48]),ve(e,"contextmenu",t[49])],u=!0)},p(d,h){if(c!==(c=d[30])){if(n){Pe();const _=n;Y(_.$$.fragment,1,0,()=>{$(_,1)}),Ne()}c?(n=Tn(c,f(d)),ee(n.$$.fragment),X(n.$$.fragment,1),x(n,e,null)):n=null}else if(c){const _={};h[0]&4&&(_.data=d[2]),h[0]&2&&(_.id=d[1]),h[0]&8&&(_.selected=d[3]),h[0]&65536&&(_.sourcePosition=d[16]),h[0]&131072&&(_.targetPosition=d[17]),h[0]&1024&&(_.type=d[10]),h[0]&262144&&(_.zIndex=d[18]),h[0]&256&&(_.dragging=d[8]),h[0]&2097152&&(_.dragHandle=d[21]),h[0]&64&&(_.isConnectable=d[6]),h[0]&4096&&(_.positionAbsoluteX=d[12]),h[0]&8192&&(_.positionAbsoluteY=d[13]),h[0]&524288&&(_.width=d[19]),h[0]&1048576&&(_.height=d[20]),n.$set(_)}(!r||h[0]&2)&&S(e,"data-id",d[1]),(!r||h[0]&8388608&&i!==(i=we(["svelte-flow__node",`svelte-flow__node-${d[29]}`,d[23]])))&&S(e,"class",i),(!r||h[0]&33554944&&o!==(o=(d[9]??"")+";"+d[25].width+d[25].height))&&S(e,"style",o),l&&Se(l.update)&&h[0]&2097186&&l.update.call(null,{nodeId:d[1],isSelectable:d[5],disabled:!1,handleSelector:d[21],noDragClass:"nodrag",onNodeMouseDown:d[28],onDrag:d[42],onDragStart:d[43],onDragStop:d[44],store:d[26]}),(!r||h[0]&8388864)&&fe(e,"dragging",d[8]),(!r||h[0]&8388616)&&fe(e,"selected",d[3]),(!r||h[0]&8388624)&&fe(e,"draggable",d[4]),(!r||h[0]&8388672)&&fe(e,"connectable",d[6]),(!r||h[0]&8388640)&&fe(e,"selectable",d[5]),(!r||h[0]&8388624)&&fe(e,"nopan",d[4]),(!r||h[0]&8390656)&&fe(e,"parent",d[11]);const m=h[0]&33554944;(h[0]&33817088||m)&&ue(e,"z-index",d[18]),(h[0]&33604096&&s!==(s=`translate(${d[14]}px, ${d[15]}px)`)||m)&&ue(e,"transform",s),(h[0]&37749248||m)&&ue(e,"visibility",d[22]?"visible":"hidden")},i(d){r||(n&&X(n.$$.fragment,d),r=!0)},o(d){n&&Y(n.$$.fragment,d),r=!1},d(d){d&&B(e),n&&$(n),t[45](null),u=!1,pe(a)}}}function Zd(t){let e,n,i=!t[7]&&po(t);return{c(){i&&i.c(),e=Le()},m(o,l){i&&i.m(o,l),K(o,e,l),n=!0},p(o,l){o[7]?i&&(Pe(),Y(i,1,1,()=>{i=null}),Ne()):i?(i.p(o,l),l[0]&128&&X(i,1)):(i=po(o),i.c(),X(i,1),i.m(e.parentNode,e))},i(o){n||(X(i),n=!0)},o(o){Y(i),n=!1},d(o){o&&B(e),i&&i.d(o)}}}function qd(t,e,n){let i,o,{node:l}=e,{id:s}=e,{data:r={}}=e,{selected:u=!1}=e,{draggable:a=void 0}=e,{selectable:c=void 0}=e,{connectable:f=!0}=e,{hidden:d=!1}=e,{dragging:h=!1}=e,{resizeObserver:m=null}=e,{style:_=void 0}=e,{type:b="default"}=e,{isParent:g=!1}=e,{positionX:w}=e,{positionY:E}=e,{positionOriginX:k}=e,{positionOriginY:C}=e,{sourcePosition:H=void 0}=e,{targetPosition:N=void 0}=e,{zIndex:O}=e,{computedWidth:I=void 0}=e,{computedHeight:y=void 0}=e,{initialWidth:R=void 0}=e,{initialHeight:W=void 0}=e,{width:T=void 0}=e,{height:v=void 0}=e,{dragHandle:A=void 0}=e,{initialized:z=!1}=e,{class:D=""}=e;const L=Ce(),{nodeTypes:F,nodeDragThreshold:q,selectNodesOnDrag:U,handleNodeSelection:P,updateNodeDimensions:ie}=L;J(t,F,Z=>n(50,o=Z));const ne=b||"default";let ce,G;!!o[ne]||console.warn("003",gn.error003(b));const me=o[ne]||_r,p=jn(),Me=te(f);let Ae,Te,He;nn("svelteflow__node_id",s),nn("svelteflow__node_connectable",Me),Ri(()=>{m==null||m.unobserve(ce)});function qe(Z){c&&(!V(U)||!a||V(q)>0)&&P(s),p("nodeclick",{node:l,event:Z})}const ke=(Z,Ge,We,Q)=>{p("nodedrag",{event:Z,node:We,nodes:Q})},st=(Z,Ge,We,Q)=>{p("nodedragstart",{event:Z,node:We,nodes:Q})},ut=(Z,Ge,We,Q)=>{p("nodedragstop",{event:Z,node:We,nodes:Q})};function tt(Z){on[Z?"unshift":"push"](()=>{ce=Z,n(24,ce)})}const nt=Z=>p("nodemouseenter",{node:l,event:Z}),j=Z=>p("nodemouseleave",{node:l,event:Z}),_t=Z=>p("nodemousemove",{node:l,event:Z}),yt=Z=>p("nodecontextmenu",{node:l,event:Z});return t.$$set=Z=>{"node"in Z&&n(0,l=Z.node),"id"in Z&&n(1,s=Z.id),"data"in Z&&n(2,r=Z.data),"selected"in Z&&n(3,u=Z.selected),"draggable"in Z&&n(4,a=Z.draggable),"selectable"in Z&&n(5,c=Z.selectable),"connectable"in Z&&n(6,f=Z.connectable),"hidden"in Z&&n(7,d=Z.hidden),"dragging"in Z&&n(8,h=Z.dragging),"resizeObserver"in Z&&n(33,m=Z.resizeObserver),"style"in Z&&n(9,_=Z.style),"type"in Z&&n(10,b=Z.type),"isParent"in Z&&n(11,g=Z.isParent),"positionX"in Z&&n(12,w=Z.positionX),"positionY"in Z&&n(13,E=Z.positionY),"positionOriginX"in Z&&n(14,k=Z.positionOriginX),"positionOriginY"in Z&&n(15,C=Z.positionOriginY),"sourcePosition"in Z&&n(16,H=Z.sourcePosition),"targetPosition"in Z&&n(17,N=Z.targetPosition),"zIndex"in Z&&n(18,O=Z.zIndex),"computedWidth"in Z&&n(34,I=Z.computedWidth),"computedHeight"in Z&&n(35,y=Z.computedHeight),"initialWidth"in Z&&n(36,R=Z.initialWidth),"initialHeight"in Z&&n(37,W=Z.initialHeight),"width"in Z&&n(19,T=Z.width),"height"in Z&&n(20,v=Z.height),"dragHandle"in Z&&n(21,A=Z.dragHandle),"initialized"in Z&&n(22,z=Z.initialized),"class"in Z&&n(23,D=Z.class)},t.$$.update=()=>{t.$$.dirty[0]&1572864|t.$$.dirty[1]&120&&n(25,i=Fd({width:T,height:v,initialWidth:R,initialHeight:W,computedWidth:I,computedHeight:y})),t.$$.dirty[0]&64&&Me.set(!!f),t.$$.dirty[0]&16973826|t.$$.dirty[1]&1792&&((Ae&&ne!==Ae||Te&&H!==Te||He&&N!==He)&&requestAnimationFrame(()=>ie(new Map([[s,{id:s,nodeElement:ce,forceUpdate:!0}]]))),n(39,Ae=ne),n(40,Te=H),n(41,He=N)),t.$$.dirty[0]&16777216|t.$$.dirty[1]&156&&ce&&(G?(G!==ce||!I&&!y)&&(m==null||m.unobserve(G),m==null||m.observe(ce),n(38,G=ce)):(m==null||m.observe(ce),n(38,G=ce)))},[l,s,r,u,a,c,f,d,h,_,b,g,w,E,k,C,H,N,O,T,v,A,z,D,ce,i,L,F,P,ne,me,p,qe,m,I,y,R,W,G,Ae,Te,He,ke,st,ut,tt,nt,j,_t,yt]}class Gd extends re{constructor(e){super(),le(this,e,qd,Zd,vl,{node:0,id:1,data:2,selected:3,draggable:4,selectable:5,connectable:6,hidden:7,dragging:8,resizeObserver:33,style:9,type:10,isParent:11,positionX:12,positionY:13,positionOriginX:14,positionOriginY:15,sourcePosition:16,targetPosition:17,zIndex:18,computedWidth:34,computedHeight:35,initialWidth:36,initialHeight:37,width:19,height:20,dragHandle:21,initialized:22,class:23},null,[-1,-1])}}const Ud=Gd,{Map:Jd}=Ur;function Wo(t,e,n){var s,r,u,a;const i=t.slice();i[18]=e[n];const o=_n(i[18]);i[19]=o;const l=Uc({x:((r=(s=i[18].computed)==null?void 0:s.positionAbsolute)==null?void 0:r.x)??0,y:((a=(u=i[18].computed)==null?void 0:u.positionAbsolute)==null?void 0:a.y)??0,...i[19],origin:i[18].origin});return i[20]=l,i}function Bo(t,e){var l,s,r,u,a,c,f,d;let n,i,o;return i=new Ud({props:{node:e[18],id:e[18].id,data:e[18].data,selected:!!e[18].selected,hidden:!!e[18].hidden,draggable:!!(e[18].draggable||e[1]&&typeof e[18].draggable>"u"),selectable:!!(e[18].selectable||e[2]&&typeof e[18].selectable>"u"),connectable:!!(e[18].connectable||e[3]&&typeof e[18].connectable>"u"),positionX:((s=(l=e[18].computed)==null?void 0:l.positionAbsolute)==null?void 0:s.x)??0,positionY:((u=(r=e[18].computed)==null?void 0:r.positionAbsolute)==null?void 0:u.y)??0,positionOriginX:e[20].x??0,positionOriginY:e[20].y??0,isParent:!!((a=e[18][Ee])!=null&&a.isParent),style:e[18].style,class:e[18].class,type:e[18].type??"default",sourcePosition:e[18].sourcePosition,targetPosition:e[18].targetPosition,dragging:e[18].dragging,zIndex:((c=e[18][Ee])==null?void 0:c.z)??0,dragHandle:e[18].dragHandle,initialized:qn(e[18]),width:e[18].width,height:e[18].height,initialWidth:e[18].initialWidth,initialHeight:e[18].initialHeight,computedWidth:(f=e[18].computed)==null?void 0:f.width,computedHeight:(d=e[18].computed)==null?void 0:d.height,resizeObserver:e[8]}}),i.$on("nodeclick",e[9]),i.$on("nodemouseenter",e[10]),i.$on("nodemousemove",e[11]),i.$on("nodemouseleave",e[12]),i.$on("nodedrag",e[13]),i.$on("nodedragstart",e[14]),i.$on("nodedragstop",e[15]),i.$on("nodecontextmenu",e[16]),{key:t,first:null,c(){n=Le(),ee(i.$$.fragment),this.first=n},m(h,m){K(h,n,m),x(i,h,m),o=!0},p(h,m){var b,g,w,E,k,C,H,N;e=h;const _={};m&1&&(_.node=e[18]),m&1&&(_.id=e[18].id),m&1&&(_.data=e[18].data),m&1&&(_.selected=!!e[18].selected),m&1&&(_.hidden=!!e[18].hidden),m&3&&(_.draggable=!!(e[18].draggable||e[1]&&typeof e[18].draggable>"u")),m&5&&(_.selectable=!!(e[18].selectable||e[2]&&typeof e[18].selectable>"u")),m&9&&(_.connectable=!!(e[18].connectable||e[3]&&typeof e[18].connectable>"u")),m&1&&(_.positionX=((g=(b=e[18].computed)==null?void 0:b.positionAbsolute)==null?void 0:g.x)??0),m&1&&(_.positionY=((E=(w=e[18].computed)==null?void 0:w.positionAbsolute)==null?void 0:E.y)??0),m&1&&(_.positionOriginX=e[20].x??0),m&1&&(_.positionOriginY=e[20].y??0),m&1&&(_.isParent=!!((k=e[18][Ee])!=null&&k.isParent)),m&1&&(_.style=e[18].style),m&1&&(_.class=e[18].class),m&1&&(_.type=e[18].type??"default"),m&1&&(_.sourcePosition=e[18].sourcePosition),m&1&&(_.targetPosition=e[18].targetPosition),m&1&&(_.dragging=e[18].dragging),m&1&&(_.zIndex=((C=e[18][Ee])==null?void 0:C.z)??0),m&1&&(_.dragHandle=e[18].dragHandle),m&1&&(_.initialized=qn(e[18])),m&1&&(_.width=e[18].width),m&1&&(_.height=e[18].height),m&1&&(_.initialWidth=e[18].initialWidth),m&1&&(_.initialHeight=e[18].initialHeight),m&1&&(_.computedWidth=(H=e[18].computed)==null?void 0:H.width),m&1&&(_.computedHeight=(N=e[18].computed)==null?void 0:N.height),i.$set(_)},i(h){o||(X(i.$$.fragment,h),o=!0)},o(h){Y(i.$$.fragment,h),o=!1},d(h){h&&B(n),$(i,h)}}}function Qd(t){let e,n=[],i=new Jd,o,l=Qe(t[0]);const s=r=>r[18].id;for(let r=0;r<l.length;r+=1){let u=Wo(t,l,r),a=s(u);i.set(a,n[r]=Bo(a,u))}return{c(){e=_e("div");for(let r=0;r<n.length;r+=1)n[r].c();S(e,"class","svelte-flow__nodes svelte-tf4uy4")},m(r,u){K(r,e,u);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);o=!0},p(r,[u]){u&271&&(l=Qe(r[0]),Pe(),n=$n(n,u,s,1,r,l,i,e,xn,Bo,null,Wo),Ne())},i(r){if(!o){for(let u=0;u<l.length;u+=1)X(n[u]);o=!0}},o(r){for(let u=0;u<n.length;u+=1)Y(n[u]);o=!1},d(r){r&&B(e);for(let u=0;u<n.length;u+=1)n[u].d()}}}function jd(t,e,n){let i,o,l,s;const{visibleNodes:r,nodesDraggable:u,nodesConnectable:a,elementsSelectable:c,updateNodeDimensions:f}=Ce();J(t,r,C=>n(0,i=C)),J(t,u,C=>n(1,o=C)),J(t,a,C=>n(3,s=C)),J(t,c,C=>n(2,l=C));const d=typeof ResizeObserver>"u"?null:new ResizeObserver(C=>{const H=new Map;C.forEach(N=>{const O=N.target.getAttribute("data-id");H.set(O,{id:O,nodeElement:N.target,forceUpdate:!0})}),f(H)});Ri(()=>{d==null||d.disconnect()});function h(C){be.call(this,t,C)}function m(C){be.call(this,t,C)}function _(C){be.call(this,t,C)}function b(C){be.call(this,t,C)}function g(C){be.call(this,t,C)}function w(C){be.call(this,t,C)}function E(C){be.call(this,t,C)}function k(C){be.call(this,t,C)}return[i,o,l,s,r,u,a,c,d,h,m,_,b,g,w,E,k]}class xd extends re{constructor(e){super(),le(this,e,jd,Qd,se,{})}}function Ko(t){let e,n,i,o,l,s,r,u;var a=t[25];function c(f,d){return{props:{id:f[0],source:f[1],target:f[2],sourceX:f[13],sourceY:f[14],targetX:f[15],targetY:f[16],sourcePosition:f[17],targetPosition:f[18],animated:f[6],selected:f[7],label:f[9],labelStyle:f[10],data:f[3],style:f[4],interactionWidth:f[20],sourceHandleId:f[11],targetHandleId:f[12],markerStart:f[24],markerEnd:f[23]}}}return a&&(i=Tn(a,c(t))),{c(){e=ye("svg"),n=ye("g"),i&&ee(i.$$.fragment),S(n,"class",o=we(["svelte-flow__edge",t[21]])),S(n,"data-id",t[0]),S(n,"aria-label",l=t[19]===null?void 0:t[19]?t[19]:`Edge from ${t[1]} to ${t[2]}`),S(n,"role","img"),fe(n,"animated",t[6]),fe(n,"selected",t[7]),fe(n,"selectable",t[22]),ue(e,"zIndex",t[5])},m(f,d){K(f,e,d),oe(e,n),i&&x(i,n,null),s=!0,r||(u=[ve(n,"click",t[30]),ve(n,"contextmenu",t[31])],r=!0)},p(f,d){if(d[0]&33554432&&a!==(a=f[25])){if(i){Pe();const h=i;Y(h.$$.fragment,1,0,()=>{$(h,1)}),Ne()}a?(i=Tn(a,c(f)),ee(i.$$.fragment),X(i.$$.fragment,1),x(i,n,null)):i=null}else if(a){const h={};d[0]&1&&(h.id=f[0]),d[0]&2&&(h.source=f[1]),d[0]&4&&(h.target=f[2]),d[0]&8192&&(h.sourceX=f[13]),d[0]&16384&&(h.sourceY=f[14]),d[0]&32768&&(h.targetX=f[15]),d[0]&65536&&(h.targetY=f[16]),d[0]&131072&&(h.sourcePosition=f[17]),d[0]&262144&&(h.targetPosition=f[18]),d[0]&64&&(h.animated=f[6]),d[0]&128&&(h.selected=f[7]),d[0]&512&&(h.label=f[9]),d[0]&1024&&(h.labelStyle=f[10]),d[0]&8&&(h.data=f[3]),d[0]&16&&(h.style=f[4]),d[0]&1048576&&(h.interactionWidth=f[20]),d[0]&2048&&(h.sourceHandleId=f[11]),d[0]&4096&&(h.targetHandleId=f[12]),d[0]&16777216&&(h.markerStart=f[24]),d[0]&8388608&&(h.markerEnd=f[23]),i.$set(h)}(!s||d[0]&2097152&&o!==(o=we(["svelte-flow__edge",f[21]])))&&S(n,"class",o),(!s||d[0]&1)&&S(n,"data-id",f[0]),(!s||d[0]&524294&&l!==(l=f[19]===null?void 0:f[19]?f[19]:`Edge from ${f[1]} to ${f[2]}`))&&S(n,"aria-label",l),(!s||d[0]&2097216)&&fe(n,"animated",f[6]),(!s||d[0]&2097280)&&fe(n,"selected",f[7]),(!s||d[0]&6291456)&&fe(n,"selectable",f[22]),d[0]&32&&ue(e,"zIndex",f[5])},i(f){s||(i&&X(i.$$.fragment,f),s=!0)},o(f){i&&Y(i.$$.fragment,f),s=!1},d(f){f&&B(e),i&&$(i),r=!1,pe(u)}}}function $d(t){let e,n,i=!t[8]&&Ko(t);return{c(){i&&i.c(),e=Le()},m(o,l){i&&i.m(o,l),K(o,e,l),n=!0},p(o,l){o[8]?i&&(Pe(),Y(i,1,1,()=>{i=null}),Ne()):i?(i.p(o,l),l[0]&256&&X(i,1)):(i=Ko(o),i.c(),X(i,1),i.m(e.parentNode,e))},i(o){n||(X(i),n=!0)},o(o){Y(i),n=!1},d(o){o&&B(e),i&&i.d(o)}}}function eh(t,e,n){let i,o,l,s,r,u,a,c,{id:f}=e,{type:d="default"}=e,{source:h=""}=e,{target:m=""}=e,{data:_={}}=e,{style:b=void 0}=e,{zIndex:g=void 0}=e,{animated:w=!1}=e,{selected:E=!1}=e,{selectable:k=void 0}=e,{hidden:C=!1}=e,{label:H=void 0}=e,{labelStyle:N=void 0}=e,{markerStart:O=void 0}=e,{markerEnd:I=void 0}=e,{sourceHandle:y=void 0}=e,{targetHandle:R=void 0}=e,{sourceX:W}=e,{sourceY:T}=e,{targetX:v}=e,{targetY:A}=e,{sourcePosition:z}=e,{targetPosition:D}=e,{ariaLabel:L=void 0}=e,{interactionWidth:F=void 0}=e,{class:q=""}=e;nn("svelteflow__edge_id",f);const{edgeLookup:U,edgeTypes:P,flowId:ie,elementsSelectable:ne}=Ce();J(t,U,p=>n(39,r=p)),J(t,P,p=>n(38,c=p)),J(t,ie,p=>n(37,a=p)),J(t,ne,p=>n(36,u=p));const ce=jn(),G=yr();function de(p){const Me=r.get(f);Me&&(G(f),ce("edgeclick",{event:p,edge:Me}))}function me(p){const Me=r.get(f);Me&&ce("edgecontextmenu",{event:p,edge:Me})}return t.$$set=p=>{"id"in p&&n(0,f=p.id),"type"in p&&n(32,d=p.type),"source"in p&&n(1,h=p.source),"target"in p&&n(2,m=p.target),"data"in p&&n(3,_=p.data),"style"in p&&n(4,b=p.style),"zIndex"in p&&n(5,g=p.zIndex),"animated"in p&&n(6,w=p.animated),"selected"in p&&n(7,E=p.selected),"selectable"in p&&n(33,k=p.selectable),"hidden"in p&&n(8,C=p.hidden),"label"in p&&n(9,H=p.label),"labelStyle"in p&&n(10,N=p.labelStyle),"markerStart"in p&&n(34,O=p.markerStart),"markerEnd"in p&&n(35,I=p.markerEnd),"sourceHandle"in p&&n(11,y=p.sourceHandle),"targetHandle"in p&&n(12,R=p.targetHandle),"sourceX"in p&&n(13,W=p.sourceX),"sourceY"in p&&n(14,T=p.sourceY),"targetX"in p&&n(15,v=p.targetX),"targetY"in p&&n(16,A=p.targetY),"sourcePosition"in p&&n(17,z=p.sourcePosition),"targetPosition"in p&&n(18,D=p.targetPosition),"ariaLabel"in p&&n(19,L=p.ariaLabel),"interactionWidth"in p&&n(20,F=p.interactionWidth),"class"in p&&n(21,q=p.class)},t.$$.update=()=>{t.$$.dirty[1]&130&&n(25,i=c[d]||br),t.$$.dirty[1]&72&&n(24,o=O?`url(#${Yi(O,a)})`:void 0),t.$$.dirty[1]&80&&n(23,l=I?`url(#${Yi(I,a)})`:void 0),t.$$.dirty[1]&36&&n(22,s=k||u&&typeof k>"u")},[f,h,m,_,b,g,w,E,C,H,N,y,R,W,T,v,A,z,D,L,F,q,s,l,o,i,U,P,ie,ne,de,me,d,k,O,I,u,a,c]}class th extends re{constructor(e){super(),le(this,e,eh,$d,vl,{id:0,type:32,source:1,target:2,data:3,style:4,zIndex:5,animated:6,selected:7,selectable:33,hidden:8,label:9,labelStyle:10,markerStart:34,markerEnd:35,sourceHandle:11,targetHandle:12,sourceX:13,sourceY:14,targetX:15,targetY:16,sourcePosition:17,targetPosition:18,ariaLabel:19,interactionWidth:20,class:21},null,[-1,-1])}}const nh=th;function ih(t,e,n){let{onMount:i=void 0}=e,{onDestroy:o=void 0}=e;return Qn(()=>(i==null||i(),o)),t.$$set=l=>{"onMount"in l&&n(0,i=l.onMount),"onDestroy"in l&&n(1,o=l.onDestroy)},[i,o]}class oh extends re{constructor(e){super(),le(this,e,ih,null,se,{onMount:0,onDestroy:1})}}const lh=oh;function Fo(t,e,n){const i=t.slice();return i[2]=e[n],i}function Zo(t,e){let n,i,o;const l=[e[2]];let s={};for(let r=0;r<l.length;r+=1)s=Oe(s,l[r]);return i=new hh({props:s}),{key:t,first:null,c(){n=Le(),ee(i.$$.fragment),this.first=n},m(r,u){K(r,n,u),x(i,r,u),o=!0},p(r,u){e=r;const a=u&1?gt(l,[Lt(e[2])]):{};i.$set(a)},i(r){o||(X(i.$$.fragment,r),o=!0)},o(r){Y(i.$$.fragment,r),o=!1},d(r){r&&B(n),$(i,r)}}}function rh(t){let e,n=[],i=new Map,o,l=Qe(t[0]);const s=r=>r[2].id;for(let r=0;r<l.length;r+=1){let u=Fo(t,l,r),a=s(u);i.set(a,n[r]=Zo(a,u))}return{c(){e=ye("defs");for(let r=0;r<n.length;r+=1)n[r].c()},m(r,u){K(r,e,u);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);o=!0},p(r,[u]){u&1&&(l=Qe(r[0]),Pe(),n=$n(n,u,s,1,r,l,i,e,xn,Zo,null,Fo),Ne())},i(r){if(!o){for(let u=0;u<l.length;u+=1)X(n[u]);o=!0}},o(r){for(let u=0;u<n.length;u+=1)Y(n[u]);o=!1},d(r){r&&B(e);for(let u=0;u<n.length;u+=1)n[u].d()}}}function sh(t,e,n){let i;const{markers:o}=Ce();return J(t,o,l=>n(0,i=l)),[i,o]}class uh extends re{constructor(e){super(),le(this,e,sh,rh,se,{})}}function ah(t){let e;return{c(){e=ye("polyline"),S(e,"stroke",t[6]),S(e,"stroke-linecap","round"),S(e,"stroke-linejoin","round"),S(e,"stroke-width",t[7]),S(e,"fill",t[6]),S(e,"points","-5,-4 0,0 -5,4 -5,-4")},m(n,i){K(n,e,i)},p(n,i){i&64&&S(e,"stroke",n[6]),i&128&&S(e,"stroke-width",n[7]),i&64&&S(e,"fill",n[6])},d(n){n&&B(e)}}}function ch(t){let e;return{c(){e=ye("polyline"),S(e,"stroke",t[6]),S(e,"stroke-linecap","round"),S(e,"stroke-linejoin","round"),S(e,"stroke-width",t[7]),S(e,"fill","none"),S(e,"points","-5,-4 0,0 -5,4")},m(n,i){K(n,e,i)},p(n,i){i&64&&S(e,"stroke",n[6]),i&128&&S(e,"stroke-width",n[7])},d(n){n&&B(e)}}}function fh(t){let e,n,i;function o(r,u){if(r[1]===Bn.Arrow)return ch;if(r[1]===Bn.ArrowClosed)return ah}let l=o(t),s=l&&l(t);return{c(){e=ye("marker"),s&&s.c(),S(e,"class","svelte-flow__arrowhead"),S(e,"id",t[0]),S(e,"markerWidth",n=`${t[2]}`),S(e,"markerHeight",i=`${t[3]}`),S(e,"viewBox","-10 -10 20 20"),S(e,"markerUnits",t[4]),S(e,"orient",t[5]),S(e,"refX","0"),S(e,"refY","0")},m(r,u){K(r,e,u),s&&s.m(e,null)},p(r,[u]){l===(l=o(r))&&s?s.p(r,u):(s&&s.d(1),s=l&&l(r),s&&(s.c(),s.m(e,null))),u&1&&S(e,"id",r[0]),u&4&&n!==(n=`${r[2]}`)&&S(e,"markerWidth",n),u&8&&i!==(i=`${r[3]}`)&&S(e,"markerHeight",i),u&16&&S(e,"markerUnits",r[4]),u&32&&S(e,"orient",r[5])},i:ae,o:ae,d(r){r&&B(e),s&&s.d()}}}function dh(t,e,n){let{id:i}=e,{type:o}=e,{width:l=12.5}=e,{height:s=12.5}=e,{markerUnits:r="strokeWidth"}=e,{orient:u="auto-start-reverse"}=e,{color:a=void 0}=e,{strokeWidth:c=void 0}=e;return t.$$set=f=>{"id"in f&&n(0,i=f.id),"type"in f&&n(1,o=f.type),"width"in f&&n(2,l=f.width),"height"in f&&n(3,s=f.height),"markerUnits"in f&&n(4,r=f.markerUnits),"orient"in f&&n(5,u=f.orient),"color"in f&&n(6,a=f.color),"strokeWidth"in f&&n(7,c=f.strokeWidth)},[i,o,l,s,r,u,a,c]}class hh extends re{constructor(e){super(),le(this,e,dh,fh,se,{id:0,type:1,width:2,height:3,markerUnits:4,orient:5,color:6,strokeWidth:7})}}function qo(t,e,n){const i=t.slice();return i[10]=e[n],i}function Go(t,e){let n,i,o;return i=new nh({props:{id:e[10].id,source:e[10].source,target:e[10].target,data:e[10].data,style:e[10].style,animated:e[10].animated,selected:e[10].selected,selectable:e[10].selectable,hidden:e[10].hidden,label:e[10].label,labelStyle:e[10].labelStyle,markerStart:e[10].markerStart,markerEnd:e[10].markerEnd,sourceHandle:e[10].sourceHandle,targetHandle:e[10].targetHandle,sourceX:e[10].sourceX,sourceY:e[10].sourceY,targetX:e[10].targetX,targetY:e[10].targetY,sourcePosition:e[10].sourcePosition,targetPosition:e[10].targetPosition,ariaLabel:e[10].ariaLabel,interactionWidth:e[10].interactionWidth,class:e[10].class,type:e[10].type||"default",zIndex:e[10].zIndex}}),i.$on("edgeclick",e[5]),i.$on("edgecontextmenu",e[6]),{key:t,first:null,c(){n=Le(),ee(i.$$.fragment),this.first=n},m(l,s){K(l,n,s),x(i,l,s),o=!0},p(l,s){e=l;const r={};s&1&&(r.id=e[10].id),s&1&&(r.source=e[10].source),s&1&&(r.target=e[10].target),s&1&&(r.data=e[10].data),s&1&&(r.style=e[10].style),s&1&&(r.animated=e[10].animated),s&1&&(r.selected=e[10].selected),s&1&&(r.selectable=e[10].selectable),s&1&&(r.hidden=e[10].hidden),s&1&&(r.label=e[10].label),s&1&&(r.labelStyle=e[10].labelStyle),s&1&&(r.markerStart=e[10].markerStart),s&1&&(r.markerEnd=e[10].markerEnd),s&1&&(r.sourceHandle=e[10].sourceHandle),s&1&&(r.targetHandle=e[10].targetHandle),s&1&&(r.sourceX=e[10].sourceX),s&1&&(r.sourceY=e[10].sourceY),s&1&&(r.targetX=e[10].targetX),s&1&&(r.targetY=e[10].targetY),s&1&&(r.sourcePosition=e[10].sourcePosition),s&1&&(r.targetPosition=e[10].targetPosition),s&1&&(r.ariaLabel=e[10].ariaLabel),s&1&&(r.interactionWidth=e[10].interactionWidth),s&1&&(r.class=e[10].class),s&1&&(r.type=e[10].type||"default"),s&1&&(r.zIndex=e[10].zIndex),i.$set(r)},i(l){o||(X(i.$$.fragment,l),o=!0)},o(l){Y(i.$$.fragment,l),o=!1},d(l){l&&B(n),$(i,l)}}}function Uo(t){let e,n;return e=new lh({props:{onMount:t[7],onDestroy:t[8]}}),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},p(i,o){const l={};o&2&&(l.onMount=i[7]),o&2&&(l.onDestroy=i[8]),e.$set(l)},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function gh(t){let e,n,i,o,l=[],s=new Map,r,u;i=new uh({});let a=Qe(t[0]);const c=d=>d[10].id;for(let d=0;d<a.length;d+=1){let h=qo(t,a,d),m=c(h);s.set(m,l[d]=Go(m,h))}let f=t[0].length>0&&Uo(t);return{c(){e=_e("div"),n=ye("svg"),ee(i.$$.fragment),o=ge();for(let d=0;d<l.length;d+=1)l[d].c();r=ge(),f&&f.c(),S(n,"class","svelte-flow__marker"),S(e,"class","svelte-flow__edges")},m(d,h){K(d,e,h),oe(e,n),x(i,n,null),oe(e,o);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(e,null);oe(e,r),f&&f.m(e,null),u=!0},p(d,[h]){h&1&&(a=Qe(d[0]),Pe(),l=$n(l,h,c,1,d,a,s,e,xn,Go,r,qo),Ne()),d[0].length>0?f?(f.p(d,h),h&1&&X(f,1)):(f=Uo(d),f.c(),X(f,1),f.m(e,null)):f&&(Pe(),Y(f,1,1,()=>{f=null}),Ne())},i(d){if(!u){X(i.$$.fragment,d);for(let h=0;h<a.length;h+=1)X(l[h]);X(f),u=!0}},o(d){Y(i.$$.fragment,d);for(let h=0;h<l.length;h+=1)Y(l[h]);Y(f),u=!1},d(d){d&&B(e),$(i);for(let h=0;h<l.length;h+=1)l[h].d();f&&f.d()}}}function mh(t,e,n){let i,o,{defaultEdgeOptions:l}=e;const{visibleEdges:s,edgesInitialized:r,edges:{setDefaultOptions:u}}=Ce();J(t,s,h=>n(0,i=h)),J(t,r,h=>n(1,o=h)),Qn(()=>{l&&u(l)});function a(h){be.call(this,t,h)}function c(h){be.call(this,t,h)}const f=()=>{Ci(r,o=!0,o)},d=()=>{Ci(r,o=!1,o)};return t.$$set=h=>{"defaultEdgeOptions"in h&&n(4,l=h.defaultEdgeOptions)},[i,o,s,r,l,a,c,f,d]}class _h extends re{constructor(e){super(),le(this,e,mh,gh,se,{defaultEdgeOptions:4})}}const yh=_h;function Jo(t){let e;return{c(){e=_e("div"),S(e,"class","svelte-flow__selection svelte-1iugwpu"),ue(e,"width",typeof t[2]=="string"?t[2]:`${t[2]}px`),ue(e,"height",typeof t[3]=="string"?t[3]:`${t[3]}px`),ue(e,"transform",`translate(${t[0]}px, ${t[1]}px)`)},m(n,i){K(n,e,i)},p(n,i){i&4&&ue(e,"width",typeof n[2]=="string"?n[2]:`${n[2]}px`),i&8&&ue(e,"height",typeof n[3]=="string"?n[3]:`${n[3]}px`),i&3&&ue(e,"transform",`translate(${n[0]}px, ${n[1]}px)`)},d(n){n&&B(e)}}}function bh(t){let e,n=t[4]&&Jo(t);return{c(){n&&n.c(),e=Le()},m(i,o){n&&n.m(i,o),K(i,e,o)},p(i,[o]){i[4]?n?n.p(i,o):(n=Jo(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ae,o:ae,d(i){i&&B(e),n&&n.d(i)}}}function wh(t,e,n){let{x:i=0}=e,{y:o=0}=e,{width:l=0}=e,{height:s=0}=e,{isVisible:r=!0}=e;return t.$$set=u=>{"x"in u&&n(0,i=u.x),"y"in u&&n(1,o=u.y),"width"in u&&n(2,l=u.width),"height"in u&&n(3,s=u.height),"isVisible"in u&&n(4,r=u.isVisible)},[i,o,l,s,r]}class vh extends re{constructor(e){super(),le(this,e,wh,bh,se,{x:0,y:1,width:2,height:3,isVisible:4})}}const Cr=vh;function kh(t){var i,o,l,s;let e,n;return e=new Cr({props:{isVisible:!!(t[0]&&t[1]==="user"),width:(i=t[0])==null?void 0:i.width,height:(o=t[0])==null?void 0:o.height,x:(l=t[0])==null?void 0:l.x,y:(s=t[0])==null?void 0:s.y}}),{c(){ee(e.$$.fragment)},m(r,u){x(e,r,u),n=!0},p(r,[u]){var c,f,d,h;const a={};u&3&&(a.isVisible=!!(r[0]&&r[1]==="user")),u&1&&(a.width=(c=r[0])==null?void 0:c.width),u&1&&(a.height=(f=r[0])==null?void 0:f.height),u&1&&(a.x=(d=r[0])==null?void 0:d.x),u&1&&(a.y=(h=r[0])==null?void 0:h.y),e.$set(a)},i(r){n||(X(e.$$.fragment,r),n=!0)},o(r){Y(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function Sh(t,e,n){let i,o;const{selectionRect:l,selectionRectMode:s}=Ce();return J(t,l,r=>n(0,i=r)),J(t,s,r=>n(1,o=r)),[i,o,l,s]}class Eh extends re{constructor(e){super(),le(this,e,Sh,kh,se,{})}}function Qo(t){let e,n,i,o,l;return n=new Cr({props:{width:"100%",height:"100%",x:0,y:0}}),{c(){e=_e("div"),ee(n.$$.fragment),S(e,"class","selection-wrapper nopan svelte-5pxri"),ue(e,"width",t[1].width+"px"),ue(e,"height",t[1].height+"px"),ue(e,"transform","translate("+t[1].x+"px, "+t[1].y+"px)")},m(s,r){K(s,e,r),x(n,e,null),i=!0,o||(l=[De(Er.call(null,e,{disabled:!1,store:t[3]})),ve(e,"contextmenu",t[6]),ve(e,"click",t[7])],o=!0)},p(s,r){(!i||r&2)&&ue(e,"width",s[1].width+"px"),(!i||r&2)&&ue(e,"height",s[1].height+"px"),(!i||r&2)&&ue(e,"transform","translate("+s[1].x+"px, "+s[1].y+"px)")},i(s){i||(X(n.$$.fragment,s),i=!0)},o(s){Y(n.$$.fragment,s),i=!1},d(s){s&&B(e),$(n),o=!1,pe(l)}}}function Ch(t){let e,n,i=t[0]&&t[2]==="nodes"&&Qo(t);return{c(){i&&i.c(),e=Le()},m(o,l){i&&i.m(o,l),K(o,e,l),n=!0},p(o,[l]){o[0]&&o[2]==="nodes"?i?(i.p(o,l),l&5&&X(i,1)):(i=Qo(o),i.c(),X(i,1),i.m(e.parentNode,e)):i&&(Pe(),Y(i,1,1,()=>{i=null}),Ne())},i(o){n||(X(i),n=!0)},o(o){Y(i),n=!1},d(o){o&&B(e),i&&i.d(o)}}}function zh(t,e,n){let i,o,l,s;const r=Ce(),{selectionRectMode:u,nodes:a}=r;J(t,u,h=>n(2,s=h)),J(t,a,h=>n(8,l=h));const c=jn();function f(h){c("selectioncontextmenu",{nodes:i,event:h})}function d(h){c("selectionclick",{nodes:i,event:h})}return t.$$.update=()=>{t.$$.dirty&256&&n(0,i=l.filter(h=>h.selected)),t.$$.dirty&1&&n(1,o=mn(i))},[i,o,s,r,u,a,f,d,l]}class Mh extends re{constructor(e){super(),le(this,e,zh,Ch,se,{})}}function it(t,e){let{enabled:n=!0,trigger:i,type:o="keydown"}=e;function l(s){const r=Array.isArray(i)?i:[i],u={alt:s.altKey,ctrl:s.ctrlKey,shift:s.shiftKey,meta:s.metaKey};for(const a of r){const c={modifier:[],preventDefault:!1,enabled:!0,...a},{modifier:f,key:d,callback:h,preventDefault:m,enabled:_}=c;if(_){if(f.length&&!(Array.isArray(f)?f:[f]).map(w=>typeof w=="string"?[w]:w).some(w=>w.every(E=>u[E])))continue;if(s.key===d){m&&s.preventDefault();const b={node:t,trigger:c,originalEvent:s};t.dispatchEvent(new CustomEvent("shortcut",{detail:b})),h==null||h(b)}}}}return n&&t.addEventListener(o,l),{update:s=>{const{enabled:r=!0,type:u="keydown"}=s;n&&(!r||o!==u)?t.removeEventListener(o,l):!n&&r&&t.addEventListener(u,l),n=r,o=u,i=s.trigger},destroy:()=>{t.removeEventListener(o,l)}}}function Ph(t){let e,n,i,o,l,s,r,u,a,c,f,d;return{c:ae,m(h,m){f||(d=[De(e=it.call(null,window,{trigger:[{...t[4],enabled:t[4].key!==null,callback:t[15]}],type:"keydown"})),De(n=it.call(null,window,{trigger:[{...t[4],enabled:t[4].key!==null,callback:t[16]}],type:"keyup"})),De(i=it.call(null,window,{trigger:[{...t[3],enabled:t[3].key!==null,callback:t[17]}],type:"keydown"})),De(o=it.call(null,window,{trigger:[{...t[3],enabled:t[3].key!==null,callback:t[18]}],type:"keyup"})),De(l=it.call(null,window,{trigger:[{...t[2],enabled:t[2].key!==null,callback:t[19]}],type:"keydown"})),De(s=it.call(null,window,{trigger:[{...t[2],enabled:t[2].key!==null,callback:t[20]}],type:"keyup"})),De(r=it.call(null,window,{trigger:[{...t[1],enabled:t[1].key!==null,callback:t[21]}],type:"keydown"})),De(u=it.call(null,window,{trigger:[{...t[1],enabled:t[1].key!==null,callback:t[22]}],type:"keyup"})),De(a=it.call(null,window,{trigger:[{...t[0],enabled:t[0].key!==null,callback:t[23]}],type:"keydown"})),De(c=it.call(null,window,{trigger:[{...t[0],enabled:t[0].key!==null,callback:t[24]}],type:"keyup"}))],f=!0)},p(h,[m]){e&&Se(e.update)&&m&16&&e.update.call(null,{trigger:[{...h[4],enabled:h[4].key!==null,callback:h[15]}],type:"keydown"}),n&&Se(n.update)&&m&16&&n.update.call(null,{trigger:[{...h[4],enabled:h[4].key!==null,callback:h[16]}],type:"keyup"}),i&&Se(i.update)&&m&8&&i.update.call(null,{trigger:[{...h[3],enabled:h[3].key!==null,callback:h[17]}],type:"keydown"}),o&&Se(o.update)&&m&8&&o.update.call(null,{trigger:[{...h[3],enabled:h[3].key!==null,callback:h[18]}],type:"keyup"}),l&&Se(l.update)&&m&4&&l.update.call(null,{trigger:[{...h[2],enabled:h[2].key!==null,callback:h[19]}],type:"keydown"}),s&&Se(s.update)&&m&4&&s.update.call(null,{trigger:[{...h[2],enabled:h[2].key!==null,callback:h[20]}],type:"keyup"}),r&&Se(r.update)&&m&2&&r.update.call(null,{trigger:[{...h[1],enabled:h[1].key!==null,callback:h[21]}],type:"keydown"}),u&&Se(u.update)&&m&2&&u.update.call(null,{trigger:[{...h[1],enabled:h[1].key!==null,callback:h[22]}],type:"keyup"}),a&&Se(a.update)&&m&1&&a.update.call(null,{trigger:[{...h[0],enabled:h[0].key!==null,callback:h[23]}],type:"keydown"}),c&&Se(c.update)&&m&1&&c.update.call(null,{trigger:[{...h[0],enabled:h[0].key!==null,callback:h[24]}],type:"keyup"})},i:ae,o:ae,d(h){f=!1,pe(d)}}}function zr(t){return t!==null&&typeof t=="object"}function Jt(t){return zr(t)?t.modifier||[]:[]}function Qt(t){return t==null?"":zr(t)?t.key:t}function Nh(t,e,n){let i,o,l,s,r,{selectionKey:u="Shift"}=e,{multiSelectionKey:a=Zn()?"Meta":"Control"}=e,{deleteKey:c="Backspace"}=e,{panActivationKey:f=" "}=e,{zoomActivationKey:d=Zn()?"Meta":"Control"}=e;const{selectionKeyPressed:h,multiselectionKeyPressed:m,deleteKeyPressed:_,panActivationKeyPressed:b,zoomActivationKeyPressed:g}=Ce(),w=()=>h.set(!0),E=()=>h.set(!1),k=()=>m.set(!0),C=()=>m.set(!1),H=W=>{!(W.originalEvent.ctrlKey||W.originalEvent.metaKey||W.originalEvent.shiftKey)&&!jc(W.originalEvent)&&_.set(!0)},N=()=>_.set(!1),O=()=>b.set(!0),I=()=>b.set(!1),y=()=>g.set(!0),R=()=>g.set(!1);return t.$$set=W=>{"selectionKey"in W&&n(10,u=W.selectionKey),"multiSelectionKey"in W&&n(11,a=W.multiSelectionKey),"deleteKey"in W&&n(12,c=W.deleteKey),"panActivationKey"in W&&n(13,f=W.panActivationKey),"zoomActivationKey"in W&&n(14,d=W.zoomActivationKey)},t.$$.update=()=>{t.$$.dirty&1024&&n(4,i={key:Qt(u),modifier:Jt(u)}),t.$$.dirty&2048&&n(3,o={key:Qt(a),modifier:Jt(a)}),t.$$.dirty&4096&&n(2,l={key:Qt(c),modifier:Jt(c)}),t.$$.dirty&8192&&n(1,s={key:Qt(f),modifier:Jt(f)}),t.$$.dirty&16384&&n(0,r={key:Qt(d),modifier:Jt(d)})},[r,s,l,o,i,h,m,_,b,g,u,a,c,f,d,w,E,k,C,H,N,O,I,y,R]}class Ah extends re{constructor(e){super(),le(this,e,Nh,Ph,se,{selectionKey:10,multiSelectionKey:11,deleteKey:12,panActivationKey:13,zoomActivationKey:14})}}const Hh=Ah,Oh=t=>({}),jo=t=>({});function xo(t){let e,n,i,o;const l=t[10].connectionLine,s=Xe(l,t,t[9],jo);let r=!t[2]&&$o(t);return{c(){e=ye("svg"),n=ye("g"),s&&s.c(),r&&r.c(),S(n,"class",i=we(["svelte-flow__connection",t[3].status])),S(e,"width",t[4]),S(e,"height",t[5]),S(e,"class","svelte-flow__connectionline"),S(e,"style",t[0])},m(u,a){K(u,e,a),oe(e,n),s&&s.m(n,null),r&&r.m(n,null),o=!0},p(u,a){s&&s.p&&(!o||a&512)&&Ve(s,l,u,u[9],o?Ye(l,u[9],a,Oh):Re(u[9]),jo),u[2]?r&&(r.d(1),r=null):r?r.p(u,a):(r=$o(u),r.c(),r.m(n,null)),(!o||a&8&&i!==(i=we(["svelte-flow__connection",u[3].status])))&&S(n,"class",i),(!o||a&16)&&S(e,"width",u[4]),(!o||a&32)&&S(e,"height",u[5]),(!o||a&1)&&S(e,"style",u[0])},i(u){o||(X(s,u),o=!0)},o(u){Y(s,u),o=!1},d(u){u&&B(e),s&&s.d(u),r&&r.d()}}}function $o(t){let e,n;return{c(){e=ye("path"),S(e,"d",n=t[3].path),S(e,"style",t[1]),S(e,"fill","none"),S(e,"class","svelte-flow__connection-path")},m(i,o){K(i,e,o)},p(i,o){o&8&&n!==(n=i[3].path)&&S(e,"d",n),o&2&&S(e,"style",i[1])},d(i){i&&B(e)}}}function Th(t){let e,n,i=t[3].path&&xo(t);return{c(){i&&i.c(),e=Le()},m(o,l){i&&i.m(o,l),K(o,e,l),n=!0},p(o,[l]){o[3].path?i?(i.p(o,l),l&8&&X(i,1)):(i=xo(o),i.c(),X(i,1),i.m(e.parentNode,e)):i&&(Pe(),Y(i,1,1,()=>{i=null}),Ne())},i(o){n||(X(i),n=!0)},o(o){Y(i),n=!1},d(o){o&&B(e),i&&i.d(o)}}}function Ih(t,e,n){let i,o,l,{$$slots:s={},$$scope:r}=e,{containerStyle:u=""}=e,{style:a=""}=e,{isCustomComponent:c=!1}=e;const{width:f,height:d,connection:h}=Ce();return J(t,f,m=>n(4,o=m)),J(t,d,m=>n(5,l=m)),J(t,h,m=>n(3,i=m)),t.$$set=m=>{"containerStyle"in m&&n(0,u=m.containerStyle),"style"in m&&n(1,a=m.style),"isCustomComponent"in m&&n(2,c=m.isCustomComponent),"$$scope"in m&&n(9,r=m.$$scope)},[u,a,c,i,o,l,f,d,h,r,s]}class Dh extends re{constructor(e){super(),le(this,e,Ih,Th,se,{containerStyle:0,style:1,isCustomComponent:2})}}const Xh=Dh;function Yh(t){let e,n,i;const o=t[6].default,l=Xe(o,t,t[5],null);let s=[{class:n=we(["svelte-flow__panel",t[1],...t[2]])},{style:t[0]},t[3]],r={};for(let u=0;u<s.length;u+=1)r=Oe(r,s[u]);return{c(){e=_e("div"),l&&l.c(),Rt(e,r)},m(u,a){K(u,e,a),l&&l.m(e,null),i=!0},p(u,[a]){l&&l.p&&(!i||a&32)&&Ve(l,o,u,u[5],i?Ye(o,u[5],a,null):Re(u[5]),null),Rt(e,r=gt(s,[(!i||a&6&&n!==(n=we(["svelte-flow__panel",u[1],...u[2]])))&&{class:n},(!i||a&1)&&{style:u[0]},a&8&&u[3]]))},i(u){i||(X(l,u),i=!0)},o(u){Y(l,u),i=!1},d(u){u&&B(e),l&&l.d(u)}}}function Vh(t,e,n){let i;const o=["position","style","class"];let l=Vt(e,o),{$$slots:s={},$$scope:r}=e,{position:u="top-right"}=e,{style:a=void 0}=e,{class:c=void 0}=e;return t.$$set=f=>{e=Oe(Oe({},e),Vi(f)),n(3,l=Vt(e,o)),"position"in f&&n(4,u=f.position),"style"in f&&n(0,a=f.style),"class"in f&&n(1,c=f.class),"$$scope"in f&&n(5,r=f.$$scope)},t.$$.update=()=>{t.$$.dirty&16&&n(2,i=`${u}`.split("-"))},[a,c,i,l,u,r,s]}class cn extends re{constructor(e){super(),le(this,e,Vh,Yh,se,{position:4,style:0,class:1})}}function el(t){let e,n;return e=new cn({props:{position:t[1],class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",$$slots:{default:[Rh]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},p(i,o){const l={};o&2&&(l.position=i[1]),o&4&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Rh(t){let e;return{c(){e=_e("a"),e.textContent="Svelte Flow",S(e,"href","https://svelteflow.dev"),S(e,"target","_blank"),S(e,"rel","noopener noreferrer"),S(e,"aria-label","Svelte Flow attribution")},m(n,i){K(n,e,i)},p:ae,d(n){n&&B(e)}}}function Lh(t){var o;let e,n,i=!((o=t[0])!=null&&o.hideAttribution)&&el(t);return{c(){i&&i.c(),e=Le()},m(l,s){i&&i.m(l,s),K(l,e,s),n=!0},p(l,[s]){var r;(r=l[0])!=null&&r.hideAttribution?i&&(Pe(),Y(i,1,1,()=>{i=null}),Ne()):i?(i.p(l,s),s&1&&X(i,1)):(i=el(l),i.c(),X(i,1),i.m(e.parentNode,e))},i(l){n||(X(i),n=!0)},o(l){Y(i),n=!1},d(l){l&&B(e),i&&i.d(l)}}}function ph(t,e,n){let{proOptions:i=void 0}=e,{position:o="bottom-right"}=e;return t.$$set=l=>{"proOptions"in l&&n(0,i=l.proOptions),"position"in l&&n(1,o=l.position)},[i,o]}class Wh extends re{constructor(e){super(),le(this,e,ph,Lh,se,{proOptions:0,position:1})}}const Bh=Wh;function tl(t,{nodeTypes:e,edgeTypes:n,minZoom:i,maxZoom:o,translateExtent:l}){e!==void 0&&t.setNodeTypes(e),n!==void 0&&t.setEdgeTypes(n),i!==void 0&&t.setMinZoom(i),o!==void 0&&t.setMaxZoom(o),l!==void 0&&t.setTranslateExtent(l)}const Kh=t=>Object.keys(t);function Fh(t,e){Kh(e).forEach(n=>{const i=e[n];i!==void 0&&t[n].set(i)})}function Zh(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function qh(t="light"){return je("light",n=>{if(t!=="system"){n(t);return}const i=Zh(),o=()=>n(i!=null&&i.matches?"dark":"light");return n(i!=null&&i.matches?"dark":"light"),i==null||i.addEventListener("change",o),()=>{i==null||i.removeEventListener("change",o)}})}const Gh=t=>({}),nl=t=>({slot:"connectionLine"});function Uh(t){let e;const n=t[70].connectionLine,i=Xe(n,t,t[89],nl);return{c(){i&&i.c()},m(o,l){i&&i.m(o,l),e=!0},p(o,l){i&&i.p&&(!e||l[2]&134217728)&&Ve(i,n,o,o[89],e?Ye(n,o[89],l,Gh):Re(o[89]),nl)},i(o){e||(X(i,o),e=!0)},o(o){Y(i,o),e=!1},d(o){i&&i.d(o)}}}function Jh(t){let e,n,i,o,l,s,r,u,a,c,f,d;return e=new yh({props:{defaultEdgeOptions:t[21]}}),e.$on("edgeclick",t[73]),e.$on("edgecontextmenu",t[74]),i=new Xh({props:{containerStyle:t[7],style:t[6],isCustomComponent:t[31].connectionLine,$$slots:{connectionLine:[Uh]},$$scope:{ctx:t}}}),a=new xd({}),a.$on("nodeclick",t[75]),a.$on("nodemouseenter",t[76]),a.$on("nodemousemove",t[77]),a.$on("nodemouseleave",t[78]),a.$on("nodedragstart",t[79]),a.$on("nodedrag",t[80]),a.$on("nodedragstop",t[81]),a.$on("nodecontextmenu",t[82]),f=new Mh({}),f.$on("selectionclick",t[83]),f.$on("selectioncontextmenu",t[84]),{c(){ee(e.$$.fragment),n=ge(),ee(i.$$.fragment),o=ge(),l=_e("div"),s=ge(),r=_e("div"),u=ge(),ee(a.$$.fragment),c=ge(),ee(f.$$.fragment),S(l,"class","svelte-flow__edgelabel-renderer"),S(r,"class","svelte-flow__viewport-portal")},m(h,m){x(e,h,m),K(h,n,m),x(i,h,m),K(h,o,m),K(h,l,m),K(h,s,m),K(h,r,m),K(h,u,m),x(a,h,m),K(h,c,m),x(f,h,m),d=!0},p(h,m){const _={};m[0]&2097152&&(_.defaultEdgeOptions=h[21]),e.$set(_);const b={};m[0]&128&&(b.containerStyle=h[7]),m[0]&64&&(b.style=h[6]),m[1]&1&&(b.isCustomComponent=h[31].connectionLine),m[2]&134217728&&(b.$$scope={dirty:m,ctx:h}),i.$set(b)},i(h){d||(X(e.$$.fragment,h),X(i.$$.fragment,h),X(a.$$.fragment,h),X(f.$$.fragment,h),d=!0)},o(h){Y(e.$$.fragment,h),Y(i.$$.fragment,h),Y(a.$$.fragment,h),Y(f.$$.fragment,h),d=!1},d(h){h&&(B(n),B(o),B(l),B(s),B(r),B(u),B(c)),$(e,h),$(i,h),$(a,h),$(f,h)}}}function Qh(t){let e,n,i,o;return e=new Kd({props:{$$slots:{default:[Jh]},$$scope:{ctx:t}}}),i=new Eh({}),{c(){ee(e.$$.fragment),n=ge(),ee(i.$$.fragment)},m(l,s){x(e,l,s),K(l,n,s),x(i,l,s),o=!0},p(l,s){const r={};s[0]&2097344|s[1]&1|s[2]&134217728&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){o||(X(e.$$.fragment,l),X(i.$$.fragment,l),o=!0)},o(l){Y(e.$$.fragment,l),Y(i.$$.fragment,l),o=!1},d(l){l&&B(n),$(e,l),$(i,l)}}}function jh(t){let e,n;return e=new pd({props:{panOnDrag:t[17]===void 0?!0:t[17],selectionOnDrag:t[18],$$slots:{default:[Qh]},$$scope:{ctx:t}}}),e.$on("paneclick",t[85]),e.$on("panecontextmenu",t[86]),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},p(i,o){const l={};o[0]&131072&&(l.panOnDrag=i[17]===void 0?!0:i[17]),o[0]&262144&&(l.selectionOnDrag=i[18]),o[0]&2097344|o[1]&1|o[2]&134217728&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function xh(t){let e,n,i,o,l,s,r,u,a,c,f,d;n=new Hh({props:{selectionKey:t[1],deleteKey:t[5],panActivationKey:t[2],multiSelectionKey:t[3],zoomActivationKey:t[4]}}),o=new Yd({props:{initialViewport:t[0],onMoveStart:t[8],onMove:t[9],onMoveEnd:t[10],panOnScrollMode:t[11]===void 0?lt.Free:t[11],preventScrolling:t[12]===void 0?!0:t[12],zoomOnScroll:t[13]===void 0?!0:t[13],zoomOnDoubleClick:t[14]===void 0?!0:t[14],zoomOnPinch:t[15]===void 0?!0:t[15],panOnScroll:t[16]===void 0?!1:t[16],panOnDrag:t[17]===void 0?!0:t[17],$$slots:{default:[jh]},$$scope:{ctx:t}}}),s=new Bh({props:{proOptions:t[20],position:t[19]}});const h=t[70].default,m=Xe(h,t,t[89],null);let _=[{style:t[22]},{class:u=we(["svelte-flow",t[23],t[28]])},{"data-testid":"svelte-flow__wrapper"},t[30],{role:"application"}],b={};for(let g=0;g<_.length;g+=1)b=Oe(b,_[g]);return{c(){e=_e("div"),ee(n.$$.fragment),i=ge(),ee(o.$$.fragment),l=ge(),ee(s.$$.fragment),r=ge(),m&&m.c(),Rt(e,b),Dn(()=>t[88].call(e)),fe(e,"svelte-12wlba6",!0)},m(g,w){K(g,e,w),x(n,e,null),oe(e,i),x(o,e,null),oe(e,l),x(s,e,null),oe(e,r),m&&m.m(e,null),t[87](e),a=xr(e,t[88].bind(e)),c=!0,f||(d=[ve(e,"dragover",t[71]),ve(e,"drop",t[72])],f=!0)},p(g,w){const E={};w[0]&2&&(E.selectionKey=g[1]),w[0]&32&&(E.deleteKey=g[5]),w[0]&4&&(E.panActivationKey=g[2]),w[0]&8&&(E.multiSelectionKey=g[3]),w[0]&16&&(E.zoomActivationKey=g[4]),n.$set(E);const k={};w[0]&1&&(k.initialViewport=g[0]),w[0]&256&&(k.onMoveStart=g[8]),w[0]&512&&(k.onMove=g[9]),w[0]&1024&&(k.onMoveEnd=g[10]),w[0]&2048&&(k.panOnScrollMode=g[11]===void 0?lt.Free:g[11]),w[0]&4096&&(k.preventScrolling=g[12]===void 0?!0:g[12]),w[0]&8192&&(k.zoomOnScroll=g[13]===void 0?!0:g[13]),w[0]&16384&&(k.zoomOnDoubleClick=g[14]===void 0?!0:g[14]),w[0]&32768&&(k.zoomOnPinch=g[15]===void 0?!0:g[15]),w[0]&65536&&(k.panOnScroll=g[16]===void 0?!1:g[16]),w[0]&131072&&(k.panOnDrag=g[17]===void 0?!0:g[17]),w[0]&2490560|w[1]&1|w[2]&134217728&&(k.$$scope={dirty:w,ctx:g}),o.$set(k);const C={};w[0]&1048576&&(C.proOptions=g[20]),w[0]&524288&&(C.position=g[19]),s.$set(C),m&&m.p&&(!c||w[2]&134217728)&&Ve(m,h,g,g[89],c?Ye(h,g[89],w,null):Re(g[89]),null),Rt(e,b=gt(_,[(!c||w[0]&4194304)&&{style:g[22]},(!c||w[0]&276824064&&u!==(u=we(["svelte-flow",g[23],g[28]])))&&{class:u},{"data-testid":"svelte-flow__wrapper"},w[0]&1073741824&&g[30],{role:"application"}])),fe(e,"svelte-12wlba6",!0)},i(g){c||(X(n.$$.fragment,g),X(o.$$.fragment,g),X(s.$$.fragment,g),X(m,g),c=!0)},o(g){Y(n.$$.fragment,g),Y(o.$$.fragment,g),Y(s.$$.fragment,g),Y(m,g),c=!1},d(g){g&&B(e),$(n),$(o),$(s),m&&m.d(g),t[87](null),a(),f=!1,pe(d)}}}function $h(t,e,n){let i;const o=["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","defaultMarkerColor","style","class"];let l=Vt(e,o),s,r,u=ae,a=()=>(u(),u=Jn(i,M=>n(28,r=M)),i);t.$$.on_destroy.push(()=>u());let{$$slots:c={},$$scope:f}=e;const d=Gr(c);let{id:h="1"}=e,{nodes:m}=e,{edges:_}=e,{fitView:b=void 0}=e,{fitViewOptions:g=void 0}=e,{minZoom:w=void 0}=e,{maxZoom:E=void 0}=e,{initialViewport:k={x:0,y:0,zoom:1}}=e,{viewport:C=void 0}=e,{nodeTypes:H=void 0}=e,{edgeTypes:N=void 0}=e,{selectionKey:O=void 0}=e,{selectionMode:I=void 0}=e,{panActivationKey:y=void 0}=e,{multiSelectionKey:R=void 0}=e,{zoomActivationKey:W=void 0}=e,{nodesDraggable:T=void 0}=e,{nodesConnectable:v=void 0}=e,{nodeDragThreshold:A=void 0}=e,{elementsSelectable:z=void 0}=e,{snapGrid:D=void 0}=e,{deleteKey:L=void 0}=e,{connectionRadius:F=void 0}=e,{connectionLineType:q=void 0}=e,{connectionMode:U=Ct.Strict}=e,{connectionLineStyle:P=""}=e,{connectionLineContainerStyle:ie=""}=e,{onMoveStart:ne=void 0}=e,{onMove:ce=void 0}=e,{onMoveEnd:G=void 0}=e,{isValidConnection:de=void 0}=e,{translateExtent:me=void 0}=e,{onlyRenderVisibleElements:p=void 0}=e,{panOnScrollMode:Me=lt.Free}=e,{preventScrolling:Ae=!0}=e,{zoomOnScroll:Te=!0}=e,{zoomOnDoubleClick:He=!0}=e,{zoomOnPinch:qe=!0}=e,{panOnScroll:ke=!1}=e,{panOnDrag:st=!0}=e,{selectionOnDrag:ut=void 0}=e,{autoPanOnConnect:tt=!0}=e,{autoPanOnNodeDrag:nt=!0}=e,{onerror:j=void 0}=e,{ondelete:_t=void 0}=e,{onedgecreate:yt=void 0}=e,{attributionPosition:Z=void 0}=e,{proOptions:Ge=void 0}=e,{defaultEdgeOptions:We=void 0}=e,{width:Q=void 0}=e,{height:at=void 0}=e,{colorMode:Be="light"}=e,{onconnect:Fe=void 0}=e,{onconnectstart:zt=void 0}=e,{onconnectend:Mt=void 0}=e,{onbeforedelete:Pt=void 0}=e,{oninit:qt=void 0}=e,{defaultMarkerColor:ai="#b1b1b7"}=e,{style:Ji=void 0}=e,{class:Qi=void 0}=e,yn,Nt,At;const Ie=es(ui)?Ce():Od({nodes:V(m),edges:V(_),width:Q,height:at,fitView:b});Qn(()=>(Ie.width.set(Nt),Ie.height.set(At),Ie.domNode.set(yn),Ie.syncNodeStores(m),Ie.syncEdgeStores(_),Ie.syncViewport(C),b!==void 0&&Ie.fitViewOnInit.set(b),g&&Ie.fitViewOptions.set(g),tl(Ie,{nodeTypes:H,edgeTypes:N,minZoom:w,maxZoom:E,translateExtent:me}),()=>{Ie.reset()}));const{initialized:ji}=Ie;J(t,ji,M=>n(69,s=M));let ci=!1;function Mr(M){be.call(this,t,M)}function Pr(M){be.call(this,t,M)}function Nr(M){be.call(this,t,M)}function Ar(M){be.call(this,t,M)}function Hr(M){be.call(this,t,M)}function Or(M){be.call(this,t,M)}function Tr(M){be.call(this,t,M)}function Ir(M){be.call(this,t,M)}function Dr(M){be.call(this,t,M)}function Xr(M){be.call(this,t,M)}function Yr(M){be.call(this,t,M)}function Vr(M){be.call(this,t,M)}function Rr(M){be.call(this,t,M)}function Lr(M){be.call(this,t,M)}function pr(M){be.call(this,t,M)}function Wr(M){be.call(this,t,M)}function Br(M){on[M?"unshift":"push"](()=>{yn=M,n(26,yn)})}function Kr(){Nt=this.clientWidth,At=this.clientHeight,n(24,Nt),n(25,At)}return t.$$set=M=>{e=Oe(Oe({},e),Vi(M)),n(30,l=Vt(e,o)),"id"in M&&n(32,h=M.id),"nodes"in M&&n(33,m=M.nodes),"edges"in M&&n(34,_=M.edges),"fitView"in M&&n(35,b=M.fitView),"fitViewOptions"in M&&n(36,g=M.fitViewOptions),"minZoom"in M&&n(37,w=M.minZoom),"maxZoom"in M&&n(38,E=M.maxZoom),"initialViewport"in M&&n(0,k=M.initialViewport),"viewport"in M&&n(39,C=M.viewport),"nodeTypes"in M&&n(40,H=M.nodeTypes),"edgeTypes"in M&&n(41,N=M.edgeTypes),"selectionKey"in M&&n(1,O=M.selectionKey),"selectionMode"in M&&n(42,I=M.selectionMode),"panActivationKey"in M&&n(2,y=M.panActivationKey),"multiSelectionKey"in M&&n(3,R=M.multiSelectionKey),"zoomActivationKey"in M&&n(4,W=M.zoomActivationKey),"nodesDraggable"in M&&n(43,T=M.nodesDraggable),"nodesConnectable"in M&&n(44,v=M.nodesConnectable),"nodeDragThreshold"in M&&n(45,A=M.nodeDragThreshold),"elementsSelectable"in M&&n(46,z=M.elementsSelectable),"snapGrid"in M&&n(47,D=M.snapGrid),"deleteKey"in M&&n(5,L=M.deleteKey),"connectionRadius"in M&&n(48,F=M.connectionRadius),"connectionLineType"in M&&n(49,q=M.connectionLineType),"connectionMode"in M&&n(50,U=M.connectionMode),"connectionLineStyle"in M&&n(6,P=M.connectionLineStyle),"connectionLineContainerStyle"in M&&n(7,ie=M.connectionLineContainerStyle),"onMoveStart"in M&&n(8,ne=M.onMoveStart),"onMove"in M&&n(9,ce=M.onMove),"onMoveEnd"in M&&n(10,G=M.onMoveEnd),"isValidConnection"in M&&n(51,de=M.isValidConnection),"translateExtent"in M&&n(52,me=M.translateExtent),"onlyRenderVisibleElements"in M&&n(53,p=M.onlyRenderVisibleElements),"panOnScrollMode"in M&&n(11,Me=M.panOnScrollMode),"preventScrolling"in M&&n(12,Ae=M.preventScrolling),"zoomOnScroll"in M&&n(13,Te=M.zoomOnScroll),"zoomOnDoubleClick"in M&&n(14,He=M.zoomOnDoubleClick),"zoomOnPinch"in M&&n(15,qe=M.zoomOnPinch),"panOnScroll"in M&&n(16,ke=M.panOnScroll),"panOnDrag"in M&&n(17,st=M.panOnDrag),"selectionOnDrag"in M&&n(18,ut=M.selectionOnDrag),"autoPanOnConnect"in M&&n(54,tt=M.autoPanOnConnect),"autoPanOnNodeDrag"in M&&n(55,nt=M.autoPanOnNodeDrag),"onerror"in M&&n(56,j=M.onerror),"ondelete"in M&&n(57,_t=M.ondelete),"onedgecreate"in M&&n(58,yt=M.onedgecreate),"attributionPosition"in M&&n(19,Z=M.attributionPosition),"proOptions"in M&&n(20,Ge=M.proOptions),"defaultEdgeOptions"in M&&n(21,We=M.defaultEdgeOptions),"width"in M&&n(59,Q=M.width),"height"in M&&n(60,at=M.height),"colorMode"in M&&n(61,Be=M.colorMode),"onconnect"in M&&n(62,Fe=M.onconnect),"onconnectstart"in M&&n(63,zt=M.onconnectstart),"onconnectend"in M&&n(64,Mt=M.onconnectend),"onbeforedelete"in M&&n(65,Pt=M.onbeforedelete),"oninit"in M&&n(66,qt=M.oninit),"defaultMarkerColor"in M&&n(67,ai=M.defaultMarkerColor),"style"in M&&n(22,Ji=M.style),"class"in M&&n(23,Qi=M.class),"$$scope"in M&&n(89,f=M.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&50331648&&Nt!==void 0&&At!==void 0&&(Ie.width.set(Nt),Ie.height.set(At)),t.$$.dirty[2]&208&&!ci&&s&&(qt==null||qt(),n(68,ci=!0)),t.$$.dirty[1]&266336258|t.$$.dirty[2]&47&&Fh(Ie,{flowId:h,connectionLineType:q,connectionRadius:F,selectionMode:I,snapGrid:D,defaultMarkerColor:ai,nodesDraggable:T,nodesConnectable:v,elementsSelectable:z,onlyRenderVisibleElements:p,isValidConnection:de,autoPanOnConnect:tt,autoPanOnNodeDrag:nt,onerror:j,ondelete:_t,onedgecreate:yt,connectionMode:U,nodeDragThreshold:A,onconnect:Fe,onconnectstart:zt,onconnectend:Mt,onbeforedelete:Pt}),t.$$.dirty[1]&2098880&&tl(Ie,{nodeTypes:H,edgeTypes:N,minZoom:w,maxZoom:E,translateExtent:me}),t.$$.dirty[1]&1073741824&&a(n(27,i=qh(Be)))},[k,O,y,R,W,L,P,ie,ne,ce,G,Me,Ae,Te,He,qe,ke,st,ut,Z,Ge,We,Ji,Qi,Nt,At,yn,i,r,ji,l,d,h,m,_,b,g,w,E,C,H,N,I,T,v,A,z,D,F,q,U,de,me,p,tt,nt,j,_t,yt,Q,at,Be,Fe,zt,Mt,Pt,qt,ai,ci,s,c,Mr,Pr,Nr,Ar,Hr,Or,Tr,Ir,Dr,Xr,Yr,Vr,Rr,Lr,pr,Wr,Br,Kr,f]}class e0 extends re{constructor(e){super(),le(this,e,$h,xh,se,{id:32,nodes:33,edges:34,fitView:35,fitViewOptions:36,minZoom:37,maxZoom:38,initialViewport:0,viewport:39,nodeTypes:40,edgeTypes:41,selectionKey:1,selectionMode:42,panActivationKey:2,multiSelectionKey:3,zoomActivationKey:4,nodesDraggable:43,nodesConnectable:44,nodeDragThreshold:45,elementsSelectable:46,snapGrid:47,deleteKey:5,connectionRadius:48,connectionLineType:49,connectionMode:50,connectionLineStyle:6,connectionLineContainerStyle:7,onMoveStart:8,onMove:9,onMoveEnd:10,isValidConnection:51,translateExtent:52,onlyRenderVisibleElements:53,panOnScrollMode:11,preventScrolling:12,zoomOnScroll:13,zoomOnDoubleClick:14,zoomOnPinch:15,panOnScroll:16,panOnDrag:17,selectionOnDrag:18,autoPanOnConnect:54,autoPanOnNodeDrag:55,onerror:56,ondelete:57,onedgecreate:58,attributionPosition:19,proOptions:20,defaultEdgeOptions:21,width:59,height:60,colorMode:61,onconnect:62,onconnectstart:63,onconnectend:64,onbeforedelete:65,oninit:66,defaultMarkerColor:67,style:22,class:23},null,[-1,-1,-1])}}const t0=e0;function n0(t){let e;const n=t[6].default,i=Xe(n,t,t[5],null);return{c(){i&&i.c()},m(o,l){i&&i.m(o,l),e=!0},p(o,[l]){i&&i.p&&(!e||l&32)&&Ve(i,n,o,o[5],e?Ye(n,o[5],l,null):Re(o[5]),null)},i(o){e||(X(i,o),e=!0)},o(o){Y(i,o),e=!1},d(o){i&&i.d(o)}}}function i0(t,e,n){let{$$slots:i={},$$scope:o}=e,{initialNodes:l=void 0}=e,{initialEdges:s=void 0}=e,{initialWidth:r=void 0}=e,{initialHeight:u=void 0}=e,{fitView:a=void 0}=e;const c=Sr({nodes:l,edges:s,width:r,height:u,fitView:a});return nn(ui,{getStore:()=>c}),Ri(()=>{c.reset()}),t.$$set=f=>{"initialNodes"in f&&n(0,l=f.initialNodes),"initialEdges"in f&&n(1,s=f.initialEdges),"initialWidth"in f&&n(2,r=f.initialWidth),"initialHeight"in f&&n(3,u=f.initialHeight),"fitView"in f&&n(4,a=f.fitView),"$$scope"in f&&n(5,o=f.$$scope)},[l,s,r,u,a,o,i]}class o0 extends re{constructor(e){super(),le(this,e,i0,n0,se,{initialNodes:0,initialEdges:1,initialWidth:2,initialHeight:3,fitView:4})}}const l0=t=>({}),il=t=>({class:"button-svg"});function r0(t){let e,n,i,o,l;const s=t[8].default,r=Xe(s,t,t[7],il);let u=[{type:"button"},{class:n=we(["svelte-flow__controls-button",t[0]])},t[6]],a={};for(let c=0;c<u.length;c+=1)a=Oe(a,u[c]);return{c(){e=_e("button"),r&&r.c(),Rt(e,a),ue(e,"--xy-controls-button-background-color-props",t[1]),ue(e,"--xy-controls-button-background-color-hover-props",t[2]),ue(e,"--xy-controls-button-color-props",t[3]),ue(e,"--xy-controls-button-color-hover-props",t[4]),ue(e,"--xy-controls-button-border-color-props",t[5])},m(c,f){K(c,e,f),r&&r.m(e,null),e.autofocus&&e.focus(),i=!0,o||(l=ve(e,"click",t[9]),o=!0)},p(c,[f]){r&&r.p&&(!i||f&128)&&Ve(r,s,c,c[7],i?Ye(s,c[7],f,l0):Re(c[7]),il),Rt(e,a=gt(u,[{type:"button"},(!i||f&1&&n!==(n=we(["svelte-flow__controls-button",c[0]])))&&{class:n},f&64&&c[6]])),ue(e,"--xy-controls-button-background-color-props",c[1]),ue(e,"--xy-controls-button-background-color-hover-props",c[2]),ue(e,"--xy-controls-button-color-props",c[3]),ue(e,"--xy-controls-button-color-hover-props",c[4]),ue(e,"--xy-controls-button-border-color-props",c[5])},i(c){i||(X(r,c),i=!0)},o(c){Y(r,c),i=!1},d(c){c&&B(e),r&&r.d(c),o=!1,l()}}}function s0(t,e,n){const i=["class"];let o=Vt(e,i),{$$slots:l={},$$scope:s}=e,{class:r=void 0}=e,u,a,c,f,d;function h(m){be.call(this,t,m)}return t.$$set=m=>{e=Oe(Oe({},e),Vi(m)),n(6,o=Vt(e,i)),"class"in m&&n(0,r=m.class),"$$scope"in m&&n(7,s=m.$$scope)},[r,u,a,c,f,d,o,s,l,h]}class fn extends re{constructor(e){super(),le(this,e,s0,r0,se,{class:0})}}function u0(t){let e,n;return{c(){e=ye("svg"),n=ye("path"),S(n,"d","M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"viewBox","0 0 32 32")},m(i,o){K(i,e,o),oe(e,n)},p:ae,i:ae,o:ae,d(i){i&&B(e)}}}class a0 extends re{constructor(e){super(),le(this,e,null,u0,se,{})}}function c0(t){let e,n;return{c(){e=ye("svg"),n=ye("path"),S(n,"d","M0 0h32v4.2H0z"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"viewBox","0 0 32 5")},m(i,o){K(i,e,o),oe(e,n)},p:ae,i:ae,o:ae,d(i){i&&B(e)}}}class f0 extends re{constructor(e){super(),le(this,e,null,c0,se,{})}}function d0(t){let e,n;return{c(){e=ye("svg"),n=ye("path"),S(n,"d","M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"viewBox","0 0 32 30")},m(i,o){K(i,e,o),oe(e,n)},p:ae,i:ae,o:ae,d(i){i&&B(e)}}}class h0 extends re{constructor(e){super(),le(this,e,null,d0,se,{})}}function g0(t){let e,n;return{c(){e=ye("svg"),n=ye("path"),S(n,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"viewBox","0 0 25 32")},m(i,o){K(i,e,o),oe(e,n)},p:ae,i:ae,o:ae,d(i){i&&B(e)}}}class m0 extends re{constructor(e){super(),le(this,e,null,g0,se,{})}}function _0(t){let e,n;return{c(){e=ye("svg"),n=ye("path"),S(n,"d","M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"),S(e,"xmlns","http://www.w3.org/2000/svg"),S(e,"viewBox","0 0 25 32")},m(i,o){K(i,e,o),oe(e,n)},p:ae,i:ae,o:ae,d(i){i&&B(e)}}}class y0 extends re{constructor(e){super(),le(this,e,null,_0,se,{})}}const b0=t=>({}),ol=t=>({}),w0=t=>({}),ll=t=>({});function rl(t){let e,n,i,o;const l=[{class:"svelte-flow__controls-zoomin"},{title:"zoom in"},{"aria-label":"zoom in"},{disabled:t[6]},t[14]];let s={$$slots:{default:[v0]},$$scope:{ctx:t}};for(let a=0;a<l.length;a+=1)s=Oe(s,l[a]);e=new fn({props:s}),e.$on("click",t[15]);const r=[{class:"svelte-flow__controls-zoomout"},{title:"zoom out"},{"aria-label":"zoom out"},{disabled:t[7]},t[14]];let u={$$slots:{default:[k0]},$$scope:{ctx:t}};for(let a=0;a<r.length;a+=1)u=Oe(u,r[a]);return i=new fn({props:u}),i.$on("click",t[16]),{c(){ee(e.$$.fragment),n=ge(),ee(i.$$.fragment)},m(a,c){x(e,a,c),K(a,n,c),x(i,a,c),o=!0},p(a,c){const f=c[0]&16448?gt(l,[l[0],l[1],l[2],c[0]&64&&{disabled:a[6]},c[0]&16384&&Lt(a[14])]):{};c[1]&1&&(f.$$scope={dirty:c,ctx:a}),e.$set(f);const d=c[0]&16512?gt(r,[r[0],r[1],r[2],c[0]&128&&{disabled:a[7]},c[0]&16384&&Lt(a[14])]):{};c[1]&1&&(d.$$scope={dirty:c,ctx:a}),i.$set(d)},i(a){o||(X(e.$$.fragment,a),X(i.$$.fragment,a),o=!0)},o(a){Y(e.$$.fragment,a),Y(i.$$.fragment,a),o=!1},d(a){a&&B(n),$(e,a),$(i,a)}}}function v0(t){let e,n;return e=new a0({}),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function k0(t){let e,n;return e=new f0({}),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function sl(t){let e,n;const i=[{class:"svelte-flow__controls-fitview"},{title:"fit view"},{"aria-label":"fit view"},t[14]];let o={$$slots:{default:[S0]},$$scope:{ctx:t}};for(let l=0;l<i.length;l+=1)o=Oe(o,i[l]);return e=new fn({props:o}),e.$on("click",t[17]),{c(){ee(e.$$.fragment)},m(l,s){x(e,l,s),n=!0},p(l,s){const r=s[0]&16384?gt(i,[i[0],i[1],i[2],Lt(l[14])]):{};s[1]&1&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){n||(X(e.$$.fragment,l),n=!0)},o(l){Y(e.$$.fragment,l),n=!1},d(l){$(e,l)}}}function S0(t){let e,n;return e=new h0({}),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function ul(t){let e,n;const i=[{class:"svelte-flow__controls-interactive"},{title:"toggle interactivity"},{"aria-label":"toggle interactivity"},t[14]];let o={$$slots:{default:[z0]},$$scope:{ctx:t}};for(let l=0;l<i.length;l+=1)o=Oe(o,i[l]);return e=new fn({props:o}),e.$on("click",t[18]),{c(){ee(e.$$.fragment)},m(l,s){x(e,l,s),n=!0},p(l,s){const r=s[0]&16384?gt(i,[i[0],i[1],i[2],Lt(l[14])]):{};s[0]&32|s[1]&1&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){n||(X(e.$$.fragment,l),n=!0)},o(l){Y(e.$$.fragment,l),n=!1},d(l){$(e,l)}}}function E0(t){let e,n;return e=new m0({}),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function C0(t){let e,n;return e=new y0({}),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function z0(t){let e,n,i,o;const l=[C0,E0],s=[];function r(u,a){return u[5]?0:1}return e=r(t),n=s[e]=l[e](t),{c(){n.c(),i=Le()},m(u,a){s[e].m(u,a),K(u,i,a),o=!0},p(u,a){let c=e;e=r(u),e!==c&&(Pe(),Y(s[c],1,1,()=>{s[c]=null}),Ne(),n=s[e],n||(n=s[e]=l[e](u),n.c()),X(n,1),n.m(i.parentNode,i))},i(u){o||(X(n),o=!0)},o(u){Y(n),o=!1},d(u){u&&B(i),s[e].d(u)}}}function M0(t){let e,n,i,o,l,s;const r=t[30].before,u=Xe(r,t,t[31],ll);let a=t[1]&&rl(t),c=t[2]&&sl(t),f=t[3]&&ul(t);const d=t[30].default,h=Xe(d,t,t[31],null),m=t[30].after,_=Xe(m,t,t[31],ol);return{c(){u&&u.c(),e=ge(),a&&a.c(),n=ge(),c&&c.c(),i=ge(),f&&f.c(),o=ge(),h&&h.c(),l=ge(),_&&_.c()},m(b,g){u&&u.m(b,g),K(b,e,g),a&&a.m(b,g),K(b,n,g),c&&c.m(b,g),K(b,i,g),f&&f.m(b,g),K(b,o,g),h&&h.m(b,g),K(b,l,g),_&&_.m(b,g),s=!0},p(b,g){u&&u.p&&(!s||g[1]&1)&&Ve(u,r,b,b[31],s?Ye(r,b[31],g,w0):Re(b[31]),ll),b[1]?a?(a.p(b,g),g[0]&2&&X(a,1)):(a=rl(b),a.c(),X(a,1),a.m(n.parentNode,n)):a&&(Pe(),Y(a,1,1,()=>{a=null}),Ne()),b[2]?c?(c.p(b,g),g[0]&4&&X(c,1)):(c=sl(b),c.c(),X(c,1),c.m(i.parentNode,i)):c&&(Pe(),Y(c,1,1,()=>{c=null}),Ne()),b[3]?f?(f.p(b,g),g[0]&8&&X(f,1)):(f=ul(b),f.c(),X(f,1),f.m(o.parentNode,o)):f&&(Pe(),Y(f,1,1,()=>{f=null}),Ne()),h&&h.p&&(!s||g[1]&1)&&Ve(h,d,b,b[31],s?Ye(d,b[31],g,null):Re(b[31]),null),_&&_.p&&(!s||g[1]&1)&&Ve(_,m,b,b[31],s?Ye(m,b[31],g,b0):Re(b[31]),ol)},i(b){s||(X(u,b),X(a),X(c),X(f),X(h,b),X(_,b),s=!0)},o(b){Y(u,b),Y(a),Y(c),Y(f),Y(h,b),Y(_,b),s=!1},d(b){b&&(B(e),B(n),B(i),B(o),B(l)),u&&u.d(b),a&&a.d(b),c&&c.d(b),f&&f.d(b),h&&h.d(b),_&&_.d(b)}}}function P0(t){let e,n;return e=new cn({props:{class:"svelte-flow__controls",position:t[0],"data-testid":"svelte-flow__controls","aria-label":t[4]??"Svelte Flow controls",$$slots:{default:[M0]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},p(i,o){const l={};o[0]&1&&(l.position=i[0]),o[0]&16&&(l["aria-label"]=i[4]??"Svelte Flow controls"),o[0]&238|o[1]&1&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function N0(t,e,n){let i,o,l,s,r,u,a,c,f,{$$slots:d={},$$scope:h}=e,{position:m="bottom-left"}=e,{showZoom:_=!0}=e,{showFitView:b=!0}=e,{showLock:g=!0}=e,{buttonBgColor:w=void 0}=e,{buttonBgColorHover:E=void 0}=e,{buttonColor:k=void 0}=e,{buttonColorHover:C=void 0}=e,{buttonBorderColor:H=void 0}=e,{ariaLabel:N=void 0}=e;const{zoomIn:O,zoomOut:I,fitView:y,viewport:R,minZoom:W,maxZoom:T,nodesDraggable:v,nodesConnectable:A,elementsSelectable:z}=Ce();J(t,R,P=>n(25,r=P)),J(t,W,P=>n(26,u=P)),J(t,T,P=>n(24,s=P)),J(t,v,P=>n(29,f=P)),J(t,A,P=>n(28,c=P)),J(t,z,P=>n(27,a=P));const D={bgColor:w,bgColorHover:E,color:k,colorHover:C,borderColor:H},L=()=>{O()},F=()=>{I()},q=()=>{y()},U=()=>{n(5,i=!i),v.set(i),A.set(i),z.set(i)};return t.$$set=P=>{"position"in P&&n(0,m=P.position),"showZoom"in P&&n(1,_=P.showZoom),"showFitView"in P&&n(2,b=P.showFitView),"showLock"in P&&n(3,g=P.showLock),"buttonBgColor"in P&&n(19,w=P.buttonBgColor),"buttonBgColorHover"in P&&n(20,E=P.buttonBgColorHover),"buttonColor"in P&&n(21,k=P.buttonColor),"buttonColorHover"in P&&n(22,C=P.buttonColorHover),"buttonBorderColor"in P&&n(23,H=P.buttonBorderColor),"ariaLabel"in P&&n(4,N=P.ariaLabel),"$$scope"in P&&n(31,h=P.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&939524096&&n(5,i=f||c||a),t.$$.dirty[0]&100663296&&n(7,o=r.zoom<=u),t.$$.dirty[0]&50331648&&n(6,l=r.zoom>=s)},[m,_,b,g,N,i,l,o,R,W,T,v,A,z,D,L,F,q,U,w,E,k,C,H,s,r,u,a,c,f,d,h]}class A0 extends re{constructor(e){super(),le(this,e,N0,P0,se,{position:0,showZoom:1,showFitView:2,showLock:3,buttonBgColor:19,buttonBgColorHover:20,buttonColor:21,buttonColorHover:22,buttonBorderColor:23,ariaLabel:4},null,[-1,-1])}}var ht;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(ht||(ht={}));function H0(t){let e,n;return{c(){e=ye("circle"),S(e,"cx",t[0]),S(e,"cy",t[0]),S(e,"r",t[0]),S(e,"class",n=we(["svelte-flow__background-pattern","dots",t[1]]))},m(i,o){K(i,e,o)},p(i,[o]){o&1&&S(e,"cx",i[0]),o&1&&S(e,"cy",i[0]),o&1&&S(e,"r",i[0]),o&2&&n!==(n=we(["svelte-flow__background-pattern","dots",i[1]]))&&S(e,"class",n)},i:ae,o:ae,d(i){i&&B(e)}}}function O0(t,e,n){let{radius:i=5}=e,{class:o=""}=e;return t.$$set=l=>{"radius"in l&&n(0,i=l.radius),"class"in l&&n(1,o=l.class)},[i,o]}class T0 extends re{constructor(e){super(),le(this,e,O0,H0,se,{radius:0,class:1})}}const I0=T0;function D0(t){let e,n,i;return{c(){e=ye("path"),S(e,"stroke-width",t[0]),S(e,"d",n=`M${t[1][0]/2} 0 V${t[1][1]} M0 ${t[1][1]/2} H${t[1][0]}`),S(e,"class",i=we(["svelte-flow__background-pattern",t[2],t[3]]))},m(o,l){K(o,e,l)},p(o,[l]){l&1&&S(e,"stroke-width",o[0]),l&2&&n!==(n=`M${o[1][0]/2} 0 V${o[1][1]} M0 ${o[1][1]/2} H${o[1][0]}`)&&S(e,"d",n),l&12&&i!==(i=we(["svelte-flow__background-pattern",o[2],o[3]]))&&S(e,"class",i)},i:ae,o:ae,d(o){o&&B(e)}}}function X0(t,e,n){let{lineWidth:i=1}=e,{dimensions:o}=e,{variant:l=void 0}=e,{class:s=""}=e;return t.$$set=r=>{"lineWidth"in r&&n(0,i=r.lineWidth),"dimensions"in r&&n(1,o=r.dimensions),"variant"in r&&n(2,l=r.variant),"class"in r&&n(3,s=r.class)},[i,o,l,s]}class Y0 extends re{constructor(e){super(),le(this,e,X0,D0,se,{lineWidth:0,dimensions:1,variant:2,class:3})}}const V0=Y0;function R0(t){let e,n;return e=new V0({props:{dimensions:t[6],variant:t[0],lineWidth:t[1],class:t[4]}}),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},p(i,o){const l={};o&64&&(l.dimensions=i[6]),o&1&&(l.variant=i[0]),o&2&&(l.lineWidth=i[1]),o&16&&(l.class=i[4]),e.$set(l)},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function L0(t){let e,n;return e=new I0({props:{radius:t[7]/2,class:t[4]}}),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},p(i,o){const l={};o&128&&(l.radius=i[7]/2),o&16&&(l.class=i[4]),e.$set(l)},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function p0(t){let e,n,i,o,l,s,r,u,a,c,f,d,h;const m=[L0,R0],_=[];function b(g,w){return g[14]?0:1}return i=b(t),o=_[i]=m[i](t),{c(){e=ye("svg"),n=ye("pattern"),o.c(),c=ye("rect"),S(n,"id",t[11]),S(n,"x",l=t[9].x%t[8][0]),S(n,"y",s=t[9].y%t[8][1]),S(n,"width",r=t[8][0]),S(n,"height",u=t[8][1]),S(n,"patternUnits","userSpaceOnUse"),S(n,"patternTransform",a=`translate(-${t[10][0]},-${t[10][1]})`),S(c,"x","0"),S(c,"y","0"),S(c,"width","100%"),S(c,"height","100%"),S(c,"fill",f=`url(#${t[11]})`),S(e,"class",d=$i(we(["svelte-flow__background",t[5]]))+" svelte-1r7pe8d"),S(e,"data-testid","svelte-flow__background"),ue(e,"--xy-background-color-props",t[2]),ue(e,"--xy-background-pattern-color-props",t[3])},m(g,w){K(g,e,w),oe(e,n),_[i].m(n,null),oe(e,c),h=!0},p(g,[w]){o.p(g,w),(!h||w&2048)&&S(n,"id",g[11]),(!h||w&768&&l!==(l=g[9].x%g[8][0]))&&S(n,"x",l),(!h||w&768&&s!==(s=g[9].y%g[8][1]))&&S(n,"y",s),(!h||w&256&&r!==(r=g[8][0]))&&S(n,"width",r),(!h||w&256&&u!==(u=g[8][1]))&&S(n,"height",u),(!h||w&1024&&a!==(a=`translate(-${g[10][0]},-${g[10][1]})`))&&S(n,"patternTransform",a),(!h||w&2048&&f!==(f=`url(#${g[11]})`))&&S(c,"fill",f),(!h||w&32&&d!==(d=$i(we(["svelte-flow__background",g[5]]))+" svelte-1r7pe8d"))&&S(e,"class",d),w&4&&ue(e,"--xy-background-color-props",g[2]),w&8&&ue(e,"--xy-background-pattern-color-props",g[3])},i(g){h||(X(o),h=!0)},o(g){Y(o),h=!1},d(g){g&&B(e),_[i].d()}}}const W0={[ht.Dots]:1,[ht.Lines]:1,[ht.Cross]:6};function B0(t,e,n){let i,o,l,s,r,u,a,{id:c=void 0}=e,{variant:f=ht.Dots}=e,{gap:d=20}=e,{size:h=1}=e,{lineWidth:m=1}=e,{bgColor:_=void 0}=e,{patternColor:b=void 0}=e,{patternClass:g=void 0}=e,{class:w=""}=e;const{viewport:E,flowId:k}=Ce();J(t,E,I=>n(9,u=I)),J(t,k,I=>n(18,a=I));const C=h||W0[f],H=f===ht.Dots,N=f===ht.Cross,O=Array.isArray(d)?d:[d,d];return t.$$set=I=>{"id"in I&&n(15,c=I.id),"variant"in I&&n(0,f=I.variant),"gap"in I&&n(16,d=I.gap),"size"in I&&n(17,h=I.size),"lineWidth"in I&&n(1,m=I.lineWidth),"bgColor"in I&&n(2,_=I.bgColor),"patternColor"in I&&n(3,b=I.patternColor),"patternClass"in I&&n(4,g=I.patternClass),"class"in I&&n(5,w=I.class)},t.$$.update=()=>{t.$$.dirty&294912&&n(11,i=`background-pattern-${a}-${c||""}`),t.$$.dirty&512&&n(8,o=[O[0]*u.zoom||1,O[1]*u.zoom||1]),t.$$.dirty&512&&n(7,l=C*u.zoom),t.$$.dirty&384&&n(6,s=N?[l,l]:o),t.$$.dirty&192&&n(10,r=H?[l/2,l/2]:[s[0]/2,s[1]/2])},[f,m,_,b,g,w,s,l,o,u,r,i,E,k,H,c,d,h,a]}class K0 extends re{constructor(e){super(),le(this,e,B0,p0,se,{id:15,variant:0,gap:16,size:17,lineWidth:1,bgColor:2,patternColor:3,patternClass:4,class:5})}}const F0=K0;function Z0(t){let e,n,i;return{c(){e=ye("rect"),S(e,"class",n=we(["svelte-flow__minimap-node",t[10]])),S(e,"x",t[0]),S(e,"y",t[1]),S(e,"rx",t[4]),S(e,"ry",t[4]),S(e,"width",t[2]),S(e,"height",t[3]),S(e,"style",i=`${t[5]?`fill: ${t[5]};`:""}${t[7]?`stroke: ${t[7]};`:""}${t[8]?`stroke-width: ${t[8]};`:""}`),S(e,"shape-rendering",t[6]),fe(e,"selected",t[9])},m(o,l){K(o,e,l)},p(o,[l]){l&1024&&n!==(n=we(["svelte-flow__minimap-node",o[10]]))&&S(e,"class",n),l&1&&S(e,"x",o[0]),l&2&&S(e,"y",o[1]),l&16&&S(e,"rx",o[4]),l&16&&S(e,"ry",o[4]),l&4&&S(e,"width",o[2]),l&8&&S(e,"height",o[3]),l&416&&i!==(i=`${o[5]?`fill: ${o[5]};`:""}${o[7]?`stroke: ${o[7]};`:""}${o[8]?`stroke-width: ${o[8]};`:""}`)&&S(e,"style",i),l&64&&S(e,"shape-rendering",o[6]),l&1536&&fe(e,"selected",o[9])},i:ae,o:ae,d(o){o&&B(e)}}}function q0(t,e,n){let{x:i}=e,{y:o}=e,{width:l=0}=e,{height:s=0}=e,{borderRadius:r=5}=e,{color:u=void 0}=e,{shapeRendering:a}=e,{strokeColor:c=void 0}=e,{strokeWidth:f=2}=e,{selected:d=!1}=e,{class:h=""}=e;return t.$$set=m=>{"x"in m&&n(0,i=m.x),"y"in m&&n(1,o=m.y),"width"in m&&n(2,l=m.width),"height"in m&&n(3,s=m.height),"borderRadius"in m&&n(4,r=m.borderRadius),"color"in m&&n(5,u=m.color),"shapeRendering"in m&&n(6,a=m.shapeRendering),"strokeColor"in m&&n(7,c=m.strokeColor),"strokeWidth"in m&&n(8,f=m.strokeWidth),"selected"in m&&n(9,d=m.selected),"class"in m&&n(10,h=m.class)},[i,o,l,s,r,u,a,c,f,d,h]}class G0 extends re{constructor(e){super(),le(this,e,q0,Z0,se,{x:0,y:1,width:2,height:3,borderRadius:4,color:5,shapeRendering:6,strokeColor:7,strokeWidth:8,selected:9,class:10})}}function U0(t,e){const n=vf({domNode:t,panZoom:e.panZoom,getTransform:()=>{const o=V(e.viewport);return[o.x,o.y,o.zoom]},getViewScale:e.getViewScale});function i(o){n.update({translateExtent:o.translateExtent,width:o.width,height:o.height,inversePan:o.inversePan,zoomStep:o.zoomStep,pannable:o.pannable,zoomable:o.zoomable})}return{update:i,destroy(){n.destroy()}}}function al(t,e,n){const i=t.slice();return i[53]=e[n],i}function Si(t){const e=t.slice(),n=Zt(e[53]).positionAbsolute;e[56]=n;const i=_n(e[53]);return e[57]=i,e}function cl(t){let e,n,i=[],o=new Map,l,s,r,u,a,c,f,d=t[1]&&fl(t),h=Qe(t[19]);const m=_=>_[53].id;for(let _=0;_<h.length;_+=1){let b=al(t,h,_),g=m(b);o.set(g,i[_]=hl(g,b))}return{c(){e=ye("svg"),d&&d.c(),n=Le();for(let _=0;_<i.length;_+=1)i[_].c();l=ye("path"),S(l,"class","svelte-flow__minimap-mask"),S(l,"d",s="M"+(t[25]-t[15])+","+(t[24]-t[15])+"h"+(t[23]+t[15]*2)+"v"+(t[22]+t[15]*2)+"h"+(-t[23]-t[15]*2)+`z
      M`+t[18].x+","+t[18].y+"h"+t[18].width+"v"+t[18].height+"h"+-t[18].width+"z"),S(l,"fill-rule","evenodd"),S(l,"pointer-events","none"),S(e,"width",t[17]),S(e,"height",t[16]),S(e,"viewBox",r=t[25]+" "+t[24]+" "+t[23]+" "+t[22]),S(e,"class","svelte-flow__minimap-svg"),S(e,"role","img"),S(e,"aria-labelledby",t[39]),ue(e,"--xy-minimap-mask-background-color-props",t[5]),ue(e,"--xy-minimap-mask-stroke-color-props",t[6]),ue(e,"--xy-minimap-mask-stroke-width-props",t[7]?t[7]*t[14]:void 0)},m(_,b){K(_,e,b),d&&d.m(e,null),oe(e,n);for(let g=0;g<i.length;g+=1)i[g]&&i[g].m(e,null);oe(e,l),a=!0,c||(f=De(u=U0.call(null,e,{panZoom:t[26],viewport:t[29],getViewScale:t[40],translateExtent:t[27],width:t[21],height:t[20],inversePan:t[10],zoomStep:t[11],pannable:t[8],zoomable:t[9]})),c=!0)},p(_,b){_[1]?d?d.p(_,b):(d=fl(_),d.c(),d.m(e,n)):d&&(d.d(1),d=null),b[0]&524300|b[1]&240&&(h=Qe(_[19]),Pe(),i=$n(i,b,m,1,_,h,o,e,xn,hl,l,al),Ne()),(!a||b[0]&63209472&&s!==(s="M"+(_[25]-_[15])+","+(_[24]-_[15])+"h"+(_[23]+_[15]*2)+"v"+(_[22]+_[15]*2)+"h"+(-_[23]-_[15]*2)+`z
      M`+_[18].x+","+_[18].y+"h"+_[18].width+"v"+_[18].height+"h"+-_[18].width+"z"))&&S(l,"d",s),(!a||b[0]&131072)&&S(e,"width",_[17]),(!a||b[0]&65536)&&S(e,"height",_[16]),(!a||b[0]&62914560&&r!==(r=_[25]+" "+_[24]+" "+_[23]+" "+_[22]))&&S(e,"viewBox",r),u&&Se(u.update)&&b[0]&204476160&&u.update.call(null,{panZoom:_[26],viewport:_[29],getViewScale:_[40],translateExtent:_[27],width:_[21],height:_[20],inversePan:_[10],zoomStep:_[11],pannable:_[8],zoomable:_[9]}),b[0]&32&&ue(e,"--xy-minimap-mask-background-color-props",_[5]),b[0]&64&&ue(e,"--xy-minimap-mask-stroke-color-props",_[6]),b[0]&16512&&ue(e,"--xy-minimap-mask-stroke-width-props",_[7]?_[7]*_[14]:void 0)},i(_){if(!a){for(let b=0;b<h.length;b+=1)X(i[b]);a=!0}},o(_){for(let b=0;b<i.length;b+=1)Y(i[b]);a=!1},d(_){_&&B(e),d&&d.d();for(let b=0;b<i.length;b+=1)i[b].d();c=!1,f()}}}function fl(t){let e,n;return{c(){e=ye("title"),n=ze(t[1]),S(e,"id",t[39])},m(i,o){K(i,e,o),oe(e,n)},p(i,o){o[0]&2&&Je(n,i[1])},d(i){i&&B(e)}}}function dl(t){var l;let e,n;const i=[{x:t[56].x},{y:t[56].y},t[57],{selected:t[53].selected},{color:(l=t[35])==null?void 0:l.call(t,t[53])},{borderRadius:t[2]},{strokeColor:t[36](t[53])},{strokeWidth:t[3]},{shapeRendering:t[38]},{class:t[37](t[53])}];let o={};for(let s=0;s<i.length;s+=1)o=Oe(o,i[s]);return e=new G0({props:o}),{c(){ee(e.$$.fragment)},m(s,r){x(e,s,r),n=!0},p(s,r){var a;const u=r[0]&524300|r[1]&240?gt(i,[r[0]&524288&&{x:s[56].x},r[0]&524288&&{y:s[56].y},r[0]&524288&&Lt(s[57]),r[0]&524288&&{selected:s[53].selected},r[0]&524288|r[1]&16&&{color:(a=s[35])==null?void 0:a.call(s,s[53])},r[0]&4&&{borderRadius:s[2]},r[0]&524288|r[1]&32&&{strokeColor:s[36](s[53])},r[0]&8&&{strokeWidth:s[3]},r[1]&128&&{shapeRendering:s[38]},r[0]&524288|r[1]&64&&{class:s[37](s[53])}]):{};e.$set(u)},i(s){n||(X(e.$$.fragment,s),n=!0)},o(s){Y(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function hl(t,e){let n,i=qn(e[53]),o,l,s=i&&dl(Si(e));return{key:t,first:null,c(){n=Le(),s&&s.c(),o=Le(),this.first=n},m(r,u){K(r,n,u),s&&s.m(r,u),K(r,o,u),l=!0},p(r,u){e=r,u[0]&524288&&(i=qn(e[53])),i?s?(s.p(Si(e),u),u[0]&524288&&X(s,1)):(s=dl(Si(e)),s.c(),X(s,1),s.m(o.parentNode,o)):s&&(Pe(),Y(s,1,1,()=>{s=null}),Ne())},i(r){l||(X(s),l=!0)},o(r){Y(s),l=!1},d(r){r&&(B(n),B(o)),s&&s.d(r)}}}function J0(t){let e,n,i=t[26]&&cl(t);return{c(){i&&i.c(),e=Le()},m(o,l){i&&i.m(o,l),K(o,e,l),n=!0},p(o,l){o[26]?i?(i.p(o,l),l[0]&67108864&&X(i,1)):(i=cl(o),i.c(),X(i,1),i.m(e.parentNode,e)):i&&(Pe(),Y(i,1,1,()=>{i=null}),Ne())},i(o){n||(X(i),n=!0)},o(o){Y(i),n=!1},d(o){o&&B(e),i&&i.d(o)}}}function Q0(t){let e,n;return e=new cn({props:{position:t[0],style:t[12]+(t[4]?`;--xy-minimap-background-color-props:${t[4]}`:""),class:we(["svelte-flow__minimap",t[13]]),"data-testid":"svelte-flow__minimap",$$slots:{default:[J0]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},p(i,o){const l={};o[0]&1&&(l.position=i[0]),o[0]&4112&&(l.style=i[12]+(i[4]?`;--xy-minimap-background-color-props:${i[4]}`:"")),o[0]&8192&&(l.class=we(["svelte-flow__minimap",i[13]])),o[0]&268423150|o[1]&134217728&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}const Ei=t=>t instanceof Function?t:()=>t,j0=200,x0=150;function $0(t,e,n){let i,o,l,s,r,u,a,c,f,d,h,m,_,b,g,w,E,k,C,H,N,{position:O="bottom-right"}=e,{ariaLabel:I="Mini map"}=e,{nodeStrokeColor:y="transparent"}=e,{nodeColor:R=void 0}=e,{nodeClass:W=""}=e,{nodeBorderRadius:T=5}=e,{nodeStrokeWidth:v=2}=e,{bgColor:A=void 0}=e,{maskColor:z=void 0}=e,{maskStrokeColor:D=void 0}=e,{maskStrokeWidth:L=void 0}=e,{width:F=void 0}=e,{height:q=void 0}=e,{pannable:U=!0}=e,{zoomable:P=!0}=e,{inversePan:ie=void 0}=e,{zoomStep:ne=void 0}=e,{style:ce=""}=e,{class:G=""}=e;const{nodes:de,viewport:me,width:p,height:Me,flowId:Ae,panZoom:Te,translateExtent:He}=Ce();J(t,de,j=>n(19,g=j)),J(t,me,j=>n(51,w=j)),J(t,p,j=>n(21,k=j)),J(t,Me,j=>n(20,E=j)),J(t,Ae,j=>n(52,C=j)),J(t,Te,j=>n(26,H=j)),J(t,He,j=>n(27,N=j));const qe=R===void 0?void 0:Ei(R),ke=Ei(y),st=Ei(W),ut=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",tt=`svelte-flow__minimap-desc-${C}`,nt=()=>a;return t.$$set=j=>{"position"in j&&n(0,O=j.position),"ariaLabel"in j&&n(1,I=j.ariaLabel),"nodeStrokeColor"in j&&n(41,y=j.nodeStrokeColor),"nodeColor"in j&&n(42,R=j.nodeColor),"nodeClass"in j&&n(43,W=j.nodeClass),"nodeBorderRadius"in j&&n(2,T=j.nodeBorderRadius),"nodeStrokeWidth"in j&&n(3,v=j.nodeStrokeWidth),"bgColor"in j&&n(4,A=j.bgColor),"maskColor"in j&&n(5,z=j.maskColor),"maskStrokeColor"in j&&n(6,D=j.maskStrokeColor),"maskStrokeWidth"in j&&n(7,L=j.maskStrokeWidth),"width"in j&&n(44,F=j.width),"height"in j&&n(45,q=j.height),"pannable"in j&&n(8,U=j.pannable),"zoomable"in j&&n(9,P=j.zoomable),"inversePan"in j&&n(10,ie=j.inversePan),"zoomStep"in j&&n(11,ne=j.zoomStep),"style"in j&&n(12,ce=j.style),"class"in j&&n(13,G=j.class)},t.$$.update=()=>{t.$$.dirty[0]&3145728|t.$$.dirty[1]&1048576&&n(18,i={x:-w.x/w.zoom,y:-w.y/w.zoom,width:k/w.zoom,height:E/w.zoom}),t.$$.dirty[0]&786432&&n(48,o=g.length>0?Zc(mn(g),i):i),t.$$.dirty[1]&8192&&n(17,l=F??j0),t.$$.dirty[1]&16384&&n(16,s=q??x0),t.$$.dirty[0]&131072|t.$$.dirty[1]&131072&&n(50,r=o.width/l),t.$$.dirty[0]&65536|t.$$.dirty[1]&131072&&n(49,u=o.height/s),t.$$.dirty[1]&786432&&n(14,a=Math.max(r,u)),t.$$.dirty[0]&147456&&n(47,c=a*l),t.$$.dirty[0]&81920&&n(46,f=a*s),t.$$.dirty[0]&16384&&n(15,d=5*a),t.$$.dirty[0]&32768|t.$$.dirty[1]&196608&&n(25,h=o.x-(c-o.width)/2-d),t.$$.dirty[0]&32768|t.$$.dirty[1]&163840&&n(24,m=o.y-(f-o.height)/2-d),t.$$.dirty[0]&32768|t.$$.dirty[1]&65536&&n(23,_=c+d*2),t.$$.dirty[0]&32768|t.$$.dirty[1]&32768&&n(22,b=f+d*2)},[O,I,T,v,A,z,D,L,U,P,ie,ne,ce,G,a,d,s,l,i,g,E,k,b,_,m,h,H,N,de,me,p,Me,Ae,Te,He,qe,ke,st,ut,tt,nt,y,R,W,F,q,f,c,o,u,r,w]}class eg extends re{constructor(e){super(),le(this,e,$0,Q0,se,{position:0,ariaLabel:1,nodeStrokeColor:41,nodeColor:42,nodeClass:43,nodeBorderRadius:2,nodeStrokeWidth:3,bgColor:4,maskColor:5,maskStrokeColor:6,maskStrokeWidth:7,width:44,height:45,pannable:8,zoomable:9,inversePan:10,zoomStep:11,style:12,class:13},null,[-1,-1])}}const tg=t=>pc(t);function ng(){const{zoomIn:t,zoomOut:e,fitView:n,onbeforedelete:i,snapGrid:o,viewport:l,width:s,height:r,minZoom:u,maxZoom:a,panZoom:c,nodes:f,edges:d,domNode:h,nodeLookup:m,edgeLookup:_}=Ce(),b=w=>{const E=qc(w),k=E?null:V(f).find(H=>H.id===w.id);return!E&&!k?[null,null,E]:[E?w:Xi(k),k,E]},g=(w,E,k={replace:!1})=>{f.update(C=>C.map(H=>{if(H.id===w){const N=typeof E=="function"?E(H):E;return k.replace&&tg(N)?N:{...H,...N}}return H}))};return{zoomIn:t,zoomOut:e,getNode:w=>V(m).get(w),getNodes:w=>w===void 0?V(f):gl(V(m),w),getEdge:w=>V(_).get(w),getEdges:w=>w===void 0?V(d):gl(V(_),w),setZoom:(w,E)=>{var k;(k=V(c))==null||k.scaleTo(w,{duration:E==null?void 0:E.duration})},getZoom:()=>V(l).zoom,setViewport:(w,E)=>{var C;const k=V(l);(C=V(c))==null||C.setViewport({x:w.x??k.x,y:w.y??k.y,zoom:w.zoom??k.zoom},{duration:E==null?void 0:E.duration})},getViewport:()=>V(l),setCenter:(w,E,k)=>{var H;const C=typeof(k==null?void 0:k.zoom)<"u"?k.zoom:V(a);(H=V(c))==null||H.setViewport({x:V(s)/2-w*C,y:V(r)/2-E*C,zoom:C},{duration:k==null?void 0:k.duration})},fitView:n,fitBounds:(w,E)=>{var C;const k=Ui(w,V(s),V(r),V(u),V(a),(E==null?void 0:E.padding)??.1);(C=V(c))==null||C.setViewport(k,{duration:E==null?void 0:E.duration})},getIntersectingNodes:(w,E=!0,k)=>{const[C,H,N]=b(w);return C?(k||V(f)).filter(O=>{var W;if(!N&&(O.id===H.id||!((W=O.computed)!=null&&W.positionAbsolute)))return!1;const I=Xi(O),y=Fn(I,C);return E&&y>0||y>=C.width*C.height}):[]},isNodeIntersecting:(w,E,k=!0)=>{const[C]=b(w);if(!C)return!1;const H=Fn(C,E);return k&&H>0||H>=C.width*C.height},deleteElements:async({nodes:w=[],edges:E=[]})=>{const{nodes:k,edges:C}=await $l({nodesToRemove:w,edgesToRemove:E,nodes:V(f),edges:V(d),onBeforeDelete:V(i)});return k&&f.update(H=>H.filter(N=>!k.some(({id:O})=>O===N.id))),C&&d.update(H=>H.filter(N=>!C.some(({id:O})=>O===N.id))),{deletedNodes:k,deletedEdges:C}},screenToFlowPosition:(w,E={snapToGrid:!0})=>{const k=V(h);if(!k)return w;const C=E.snapToGrid?V(o):!1,{x:H,y:N,zoom:O}=V(l),{x:I,y}=k.getBoundingClientRect(),R={x:w.x-I,y:w.y-y};return li(R,[H,N,O],C!==null,C||[1,1])},flowToScreenPosition:w=>{const E=V(h);if(!E)return w;const{x:k,y:C,zoom:H}=V(l),{x:N,y:O}=E.getBoundingClientRect(),I=tr(w,[k,C,H]);return{x:I.x+N,y:I.y+O}},toObject:()=>({nodes:V(f).map(w=>({...w,position:{...w.position},data:{...w.data}})),edges:V(d).map(w=>({...w})),viewport:{...V(l)}}),updateNode:g,updateNodeData:(w,E,k)=>{g(w,C=>{const H=typeof E=="function"?E(C):E;return k!=null&&k.replace?{...C,data:H}:{...C,data:{...C.data,...H}}})},viewport:l}}function gl(t,e){const n=[];for(const i of e){const o=t.get(i);o&&n.push(o)}return n}function ig(){const{nodes:t}=Ce();return t}function og(){const{edges:t}=Ce();return t}function lg(t){let e,n,i,o,l,s,r,u,a,c;return{c(){e=_e("p"),e.textContent="You can drag these nodes to the pane below.",n=ge(),i=_e("div"),o=_e("div"),o.textContent="input node",l=ge(),s=_e("div"),s.textContent="default node",r=ge(),u=_e("div"),u.textContent="output node",S(e,"class","svelte-h68pgf"),S(o,"class","input-node node svelte-h68pgf"),S(o,"draggable",!0),S(s,"class","default-node node svelte-h68pgf"),S(s,"draggable",!0),S(u,"class","output-node node svelte-h68pgf"),S(u,"draggable",!0),S(i,"class","nodes-container svelte-h68pgf")},m(f,d){K(f,e,d),K(f,n,d),K(f,i,d),oe(i,o),oe(i,l),oe(i,s),oe(i,r),oe(i,u),a||(c=[ve(o,"dragstart",t[1]),ve(s,"dragstart",t[2]),ve(u,"dragstart",t[3])],a=!0)},p:ae,i:ae,o:ae,d(f){f&&(B(e),B(n),B(i)),a=!1,pe(c)}}}function rg(t){const e=(l,s)=>{if(!l.dataTransfer)return null;l.dataTransfer.setData("application/svelteflow",s),l.dataTransfer.effectAllowed="move"};return[e,l=>e(l,"input"),l=>e(l,"default"),l=>e(l,"output")]}class sg extends re{constructor(e){super(),le(this,e,rg,lg,se,{})}}function ml(t,e,n){const i=t.slice();return i[5]=e[n],i}function _l(t,e,n){const i=t.slice();return i[8]=e[n],i}function yl(t){let e,n=t[8].data.label+"",i,o,l=t[8].position.x+"",s,r,u=t[8].position.y+"",a,c,f=t[8].selected?" - selected":"",d;return{c(){e=_e("div"),i=ze(n),o=ze(`\r
      at (`),s=ze(l),r=ze(", "),a=ze(u),c=ze(`)\r
      `),d=ze(f)},m(h,m){K(h,e,m),oe(e,i),oe(e,o),oe(e,s),oe(e,r),oe(e,a),oe(e,c),oe(e,d)},p(h,m){m&1&&n!==(n=h[8].data.label+"")&&Je(i,n),m&1&&l!==(l=h[8].position.x+"")&&Je(s,l),m&1&&u!==(u=h[8].position.y+"")&&Je(a,u),m&1&&f!==(f=h[8].selected?" - selected":"")&&Je(d,f)},d(h){h&&B(e)}}}function bl(t){let e,n,i=t[4](t[5].source)+"",o,l,s=t[4](t[5].target)+"",r,u,a=t[5].selected?" - selected":"",c,f;return{c(){e=_e("div"),n=ze("Connection from "),o=ze(i),l=ze(`\r
      to `),r=ze(s),u=ge(),c=ze(a),f=ge()},m(d,h){K(d,e,h),oe(e,n),oe(e,o),oe(e,l),oe(e,r),oe(e,u),oe(e,c),oe(e,f)},p(d,h){h&2&&i!==(i=d[4](d[5].source)+"")&&Je(o,i),h&2&&s!==(s=d[4](d[5].target)+"")&&Je(r,s),h&2&&a!==(a=d[5].selected?" - selected":"")&&Je(c,a)},d(d){d&&B(e)}}}function ug(t){let e,n,i,o,l,s,r,u,a,c,f;o=new sg({});let d=Qe(t[0]),h=[];for(let b=0;b<d.length;b+=1)h[b]=yl(_l(t,d,b));let m=Qe(t[1]),_=[];for(let b=0;b<m.length;b+=1)_[b]=bl(ml(t,m,b));return{c(){e=_e("aside"),n=_e("h1"),n.textContent="PatchCanvas",i=ge(),ee(o.$$.fragment),l=ge(),s=_e("p"),s.textContent="Component list:",r=ge();for(let b=0;b<h.length;b+=1)h[b].c();u=ge(),a=_e("p"),a.textContent="Connection list:",c=ge();for(let b=0;b<_.length;b+=1)_[b].c();S(s,"class","svelte-1pnxexe"),S(a,"class","svelte-1pnxexe"),S(e,"class","svelte-1pnxexe")},m(b,g){K(b,e,g),oe(e,n),oe(e,i),x(o,e,null),oe(e,l),oe(e,s),oe(e,r);for(let w=0;w<h.length;w+=1)h[w]&&h[w].m(e,null);oe(e,u),oe(e,a),oe(e,c);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(e,null);f=!0},p(b,[g]){if(g&1){d=Qe(b[0]);let w;for(w=0;w<d.length;w+=1){const E=_l(b,d,w);h[w]?h[w].p(E,g):(h[w]=yl(E),h[w].c(),h[w].m(e,u))}for(;w<h.length;w+=1)h[w].d(1);h.length=d.length}if(g&18){m=Qe(b[1]);let w;for(w=0;w<m.length;w+=1){const E=ml(b,m,w);_[w]?_[w].p(E,g):(_[w]=bl(E),_[w].c(),_[w].m(e,null))}for(;w<_.length;w+=1)_[w].d(1);_.length=m.length}},i(b){f||(X(o.$$.fragment,b),f=!0)},o(b){Y(o.$$.fragment,b),f=!1},d(b){b&&B(e),$(o),eo(h,b),eo(_,b)}}}function ag(t,e,n){let i,o;const l=ig();J(t,l,u=>n(0,i=u));const s=og();J(t,s,u=>n(1,o=u));function r(u){return i.filter(a=>a.id==u)[0].data.label}return[i,o,l,s,r]}class cg extends re{constructor(e){super(),le(this,e,ag,ug,se,{})}}function fg(t){let e;return{c(){e=ze("🌙")},m(n,i){K(n,e,i)},d(n){n&&B(e)}}}function dg(t){let e,n;return e=new fn({props:{$$slots:{default:[fg]},$$scope:{ctx:t}}}),e.$on("click",t[7]),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},p(i,o){const l={};o&4096&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function hg(t){let e,n,i;return{c(){e=_e("a"),e.textContent="GitHub",n=_e("br"),i=ze("© 2024 Craig Anderson"),S(e,"href","https://github.com/theonlytechnohead/patchcanvas")},m(o,l){K(o,e,l),K(o,n,l),K(o,i,l)},p:ae,d(o){o&&(B(e),B(n),B(i))}}}function gg(t){let e,n;return e=new cg({}),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function mg(t){let e,n,i,o,l,s,r,u,a,c;return e=new F0({props:{variant:ht.Dots}}),i=new eg({props:{position:"top-right",pannable:!1,zoomable:!1,width:visualViewport!=null&&visualViewport.width?(visualViewport==null?void 0:visualViewport.width)/10:void 0,height:visualViewport!=null&&visualViewport.height?(visualViewport==null?void 0:visualViewport.height)/10:void 0}}),l=new A0({props:{position:"bottom-right",showFitView:!1,showLock:!1,$$slots:{default:[dg]},$$scope:{ctx:t}}}),r=new cn({props:{position:"bottom-left",$$slots:{default:[hg]},$$scope:{ctx:t}}}),a=new cn({props:{position:"top-left",$$slots:{default:[gg]},$$scope:{ctx:t}}}),{c(){ee(e.$$.fragment),n=ge(),ee(i.$$.fragment),o=ge(),ee(l.$$.fragment),s=ge(),ee(r.$$.fragment),u=ge(),ee(a.$$.fragment)},m(f,d){x(e,f,d),K(f,n,d),x(i,f,d),K(f,o,d),x(l,f,d),K(f,s,d),x(r,f,d),K(f,u,d),x(a,f,d),c=!0},p(f,d){const h={};d&4097&&(h.$$scope={dirty:d,ctx:f}),l.$set(h);const m={};d&4096&&(m.$$scope={dirty:d,ctx:f}),r.$set(m);const _={};d&4096&&(_.$$scope={dirty:d,ctx:f}),a.$set(_)},i(f){c||(X(e.$$.fragment,f),X(i.$$.fragment,f),X(l.$$.fragment,f),X(r.$$.fragment,f),X(a.$$.fragment,f),c=!0)},o(f){Y(e.$$.fragment,f),Y(i.$$.fragment,f),Y(l.$$.fragment,f),Y(r.$$.fragment,f),Y(a.$$.fragment,f),c=!1},d(f){f&&(B(n),B(o),B(s),B(u)),$(e,f),$(i,f),$(l,f),$(r,f),$(a,f)}}}function _g(t){let e,n;return e=new t0({props:{nodes:t[1],edges:t[2],defaultEdgeOptions:t[3],snapGrid:[25,25],colorMode:t[0],fitView:!0,fitViewOptions:t[4],minZoom:.75,maxZoom:10,onlyRenderVisibleElements:!0,connectionLineType:St.SmoothStep,attributionPosition:"top-right",deleteKey:"Delete",$$slots:{default:[mg]},$$scope:{ctx:t}}}),e.$on("dragover",t[5]),e.$on("drop",t[6]),e.$on("nodeclick",t[8]),e.$on("edgeclick",t[9]),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},p(i,[o]){const l={};o&1&&(l.colorMode=i[0]),o&4097&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function yg(t,e,n){let i,o;const l=te([{id:crypto.randomUUID().toString(),type:"input",data:{label:"Patch"},position:{x:0,y:0}},{id:crypto.randomUUID().toString(),type:"output",data:{label:"Canvas"},position:{x:0,y:150}}]);J(t,l,_=>n(10,i=_));const s=te([{id:crypto.randomUUID().toString(),type:"smoothstep",source:i[0].id,target:i[1].id}]),r={animated:!1,type:"smoothstep"},u={padding:1,duration:1e3},{screenToFlowPosition:a}=ng(),c=_=>{if(_.preventDefault(),_.dataTransfer){const b=document.elementFromPoint(_.clientX,_.clientY);b!=null&&b.matches(".svelte-flow__pane, .svelte-flow__node, .svelte-flow__edge")?_.dataTransfer.dropEffect="move":_.dataTransfer.dropEffect="none"}},f=_=>{if(_.preventDefault(),!_.dataTransfer)return null;const b=_.dataTransfer.getData("application/svelteflow"),g=a({x:_.clientX,y:_.clientY}),w={id:`${Math.random()}`,type:b,position:g,data:{label:`${b} node`},origin:[.5,0]};i.push(w),l.set(i)},d=()=>{var _;o==="dark"?n(0,o="light"):n(0,o="dark"),document.documentElement.setAttribute("data-theme",o),(_=document.querySelector('meta[name="color-scheme"]'))==null||_.setAttribute("content",o)},h=_=>console.log("on node click",_.detail.node),m=_=>console.log("on edge click: ",_.detail.edge);return n(0,o=document.documentElement.getAttribute("data-theme")??"dark"),[o,l,s,r,u,c,f,d,h,m]}class bg extends re{constructor(e){super(),le(this,e,yg,_g,se,{})}}function wg(t){let e,n;return e=new bg({}),{c(){ee(e.$$.fragment)},m(i,o){x(e,i,o),n=!0},i(i){n||(X(e.$$.fragment,i),n=!0)},o(i){Y(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function vg(t){let e,n,i,o;return i=new o0({props:{$$slots:{default:[wg]},$$scope:{ctx:t}}}),{c(){e=_e("main"),n=_e("div"),ee(i.$$.fragment),ue(n,"height","100%")},m(l,s){K(l,e,s),oe(e,n),x(i,n,null),o=!0},p(l,[s]){const r={};s&1&&(r.$$scope={dirty:s,ctx:l}),i.$set(r)},i(l){o||(X(i.$$.fragment,l),o=!0)},o(l){Y(i.$$.fragment,l),o=!1},d(l){l&&B(e),$(i)}}}class kg extends re{constructor(e){super(),le(this,e,null,vg,se,{})}}new kg({target:document.body});
